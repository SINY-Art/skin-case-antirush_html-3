/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (function() { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./main.js":
/*!*****************!*\
  !*** ./main.js ***!
  \*****************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e72) { throw _e72; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e73) { didErr = true; err = _e73; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n// import Splide from '@splidejs/splide'\n/**\r\n * Swiper 9.4.1\r\n * Most modern mobile touch slider and framework with hardware accelerated transitions\r\n * https://swiperjs.com\r\n *\r\n * Copyright 2014-2023 Vladimir Kharlampidi\r\n *\r\n * Released under the MIT License\r\n *\r\n * Released on: June 13, 2023\r\n */\n\n!function (e, t) {\n  \"object\" == (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) && \"undefined\" != typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(t) : (e = \"undefined\" != typeof globalThis ? globalThis : e || self).Swiper = t();\n}(undefined, function () {\n  \"use strict\";\n\n  function e(e) {\n    return null !== e && \"object\" == _typeof(e) && \"constructor\" in e && e.constructor === Object;\n  }\n  function t(s, a) {\n    void 0 === s && (s = {}), void 0 === a && (a = {}), Object.keys(a).forEach(function (i) {\n      void 0 === s[i] ? s[i] = a[i] : e(a[i]) && e(s[i]) && Object.keys(a[i]).length > 0 && t(s[i], a[i]);\n    });\n  }\n  var s = {\n    body: {},\n    addEventListener: function addEventListener() {},\n    removeEventListener: function removeEventListener() {},\n    activeElement: {\n      blur: function blur() {},\n      nodeName: \"\"\n    },\n    querySelector: function querySelector() {\n      return null;\n    },\n    querySelectorAll: function querySelectorAll() {\n      return [];\n    },\n    getElementById: function getElementById() {\n      return null;\n    },\n    createEvent: function createEvent() {\n      return {\n        initEvent: function initEvent() {}\n      };\n    },\n    createElement: function createElement() {\n      return {\n        children: [],\n        childNodes: [],\n        style: {},\n        setAttribute: function setAttribute() {},\n        getElementsByTagName: function getElementsByTagName() {\n          return [];\n        }\n      };\n    },\n    createElementNS: function createElementNS() {\n      return {};\n    },\n    importNode: function importNode() {\n      return null;\n    },\n    location: {\n      hash: \"\",\n      host: \"\",\n      hostname: \"\",\n      href: \"\",\n      origin: \"\",\n      pathname: \"\",\n      protocol: \"\",\n      search: \"\"\n    }\n  };\n  function a() {\n    var e = \"undefined\" != typeof document ? document : {};\n    return t(e, s), e;\n  }\n  var i = {\n    document: s,\n    navigator: {\n      userAgent: \"\"\n    },\n    location: {\n      hash: \"\",\n      host: \"\",\n      hostname: \"\",\n      href: \"\",\n      origin: \"\",\n      pathname: \"\",\n      protocol: \"\",\n      search: \"\"\n    },\n    history: {\n      replaceState: function replaceState() {},\n      pushState: function pushState() {},\n      go: function go() {},\n      back: function back() {}\n    },\n    CustomEvent: function CustomEvent() {\n      return this;\n    },\n    addEventListener: function addEventListener() {},\n    removeEventListener: function removeEventListener() {},\n    getComputedStyle: function getComputedStyle() {\n      return {\n        getPropertyValue: function getPropertyValue() {\n          return \"\";\n        }\n      };\n    },\n    Image: function Image() {},\n    Date: function Date() {},\n    screen: {},\n    setTimeout: function setTimeout() {},\n    clearTimeout: function clearTimeout() {},\n    matchMedia: function matchMedia() {\n      return {};\n    },\n    requestAnimationFrame: function requestAnimationFrame(e) {\n      return \"undefined\" == typeof setTimeout ? (e(), null) : setTimeout(e, 0);\n    },\n    cancelAnimationFrame: function cancelAnimationFrame(e) {\n      \"undefined\" != typeof setTimeout && clearTimeout(e);\n    }\n  };\n  function r() {\n    var e = \"undefined\" != typeof window ? window : {};\n    return t(e, i), e;\n  }\n  function n(e, t) {\n    return void 0 === t && (t = 0), setTimeout(e, t);\n  }\n  function l() {\n    return Date.now();\n  }\n  function o(e, t) {\n    void 0 === t && (t = \"x\");\n    var s = r();\n    var a, i, n;\n    var l = function (e) {\n      var t = r();\n      var s;\n      return t.getComputedStyle && (s = t.getComputedStyle(e, null)), !s && e.currentStyle && (s = e.currentStyle), s || (s = e.style), s;\n    }(e);\n    return s.WebKitCSSMatrix ? (i = l.transform || l.webkitTransform, i.split(\",\").length > 6 && (i = i.split(\", \").map(function (e) {\n      return e.replace(\",\", \".\");\n    }).join(\", \")), n = new s.WebKitCSSMatrix(\"none\" === i ? \"\" : i)) : (n = l.MozTransform || l.OTransform || l.MsTransform || l.msTransform || l.transform || l.getPropertyValue(\"transform\").replace(\"translate(\", \"matrix(1, 0, 0, 1,\"), a = n.toString().split(\",\")), \"x\" === t && (i = s.WebKitCSSMatrix ? n.m41 : 16 === a.length ? parseFloat(a[12]) : parseFloat(a[4])), \"y\" === t && (i = s.WebKitCSSMatrix ? n.m42 : 16 === a.length ? parseFloat(a[13]) : parseFloat(a[5])), i || 0;\n  }\n  function d(e) {\n    return \"object\" == _typeof(e) && null !== e && e.constructor && \"Object\" === Object.prototype.toString.call(e).slice(8, -1);\n  }\n  function c(e) {\n    return \"undefined\" != typeof window && void 0 !== window.HTMLElement ? e instanceof HTMLElement : e && (1 === e.nodeType || 11 === e.nodeType);\n  }\n  function p() {\n    var e = Object(arguments.length <= 0 ? void 0 : arguments[0]),\n      t = [\"__proto__\", \"constructor\", \"prototype\"];\n    for (var _s = 1; _s < arguments.length; _s += 1) {\n      var _a = _s < 0 || arguments.length <= _s ? void 0 : arguments[_s];\n      if (null != _a && !c(_a)) {\n        var _s2 = Object.keys(Object(_a)).filter(function (e) {\n          return t.indexOf(e) < 0;\n        });\n        for (var _t = 0, _i = _s2.length; _t < _i; _t += 1) {\n          var _i2 = _s2[_t],\n            _r = Object.getOwnPropertyDescriptor(_a, _i2);\n          void 0 !== _r && _r.enumerable && (d(e[_i2]) && d(_a[_i2]) ? _a[_i2].__swiper__ ? e[_i2] = _a[_i2] : p(e[_i2], _a[_i2]) : !d(e[_i2]) && d(_a[_i2]) ? (e[_i2] = {}, _a[_i2].__swiper__ ? e[_i2] = _a[_i2] : p(e[_i2], _a[_i2])) : e[_i2] = _a[_i2]);\n        }\n      }\n    }\n    return e;\n  }\n  function u(e, t, s) {\n    e.style.setProperty(t, s);\n  }\n  function m(e) {\n    var t = e.swiper,\n      s = e.targetPosition,\n      a = e.side;\n    var i = r(),\n      n = -t.translate;\n    var l,\n      o = null;\n    var d = t.params.speed;\n    t.wrapperEl.style.scrollSnapType = \"none\", i.cancelAnimationFrame(t.cssModeFrameID);\n    var c = s > n ? \"next\" : \"prev\",\n      p = function p(e, t) {\n        return \"next\" === c && e >= t || \"prev\" === c && e <= t;\n      },\n      u = function u() {\n        l = new Date().getTime(), null === o && (o = l);\n        var e = Math.max(Math.min((l - o) / d, 1), 0),\n          r = .5 - Math.cos(e * Math.PI) / 2;\n        var c = n + r * (s - n);\n        if (p(c, s) && (c = s), t.wrapperEl.scrollTo(_defineProperty({}, a, c)), p(c, s)) return t.wrapperEl.style.overflow = \"hidden\", t.wrapperEl.style.scrollSnapType = \"\", setTimeout(function () {\n          t.wrapperEl.style.overflow = \"\", t.wrapperEl.scrollTo(_defineProperty({}, a, c));\n        }), void i.cancelAnimationFrame(t.cssModeFrameID);\n        t.cssModeFrameID = i.requestAnimationFrame(u);\n      };\n    u();\n  }\n  function h(e) {\n    return e.querySelector(\".swiper-slide-transform\") || e.shadowEl && e.shadowEl.querySelector(\".swiper-slide-transform\") || e;\n  }\n  function f(e, t) {\n    return void 0 === t && (t = \"\"), _toConsumableArray(e.children).filter(function (e) {\n      return e.matches(t);\n    });\n  }\n  function g(e, t) {\n    var _s$classList;\n    void 0 === t && (t = []);\n    var s = document.createElement(e);\n    return (_s$classList = s.classList).add.apply(_s$classList, _toConsumableArray(Array.isArray(t) ? t : [t])), s;\n  }\n  function v(e) {\n    var t = r(),\n      s = a(),\n      i = e.getBoundingClientRect(),\n      n = s.body,\n      l = e.clientTop || n.clientTop || 0,\n      o = e.clientLeft || n.clientLeft || 0,\n      d = e === t ? t.scrollY : e.scrollTop,\n      c = e === t ? t.scrollX : e.scrollLeft;\n    return {\n      top: i.top + d - l,\n      left: i.left + c - o\n    };\n  }\n  function w(e, t) {\n    return r().getComputedStyle(e, null).getPropertyValue(t);\n  }\n  function b(e) {\n    var t,\n      s = e;\n    if (s) {\n      for (t = 0; null !== (s = s.previousSibling);) 1 === s.nodeType && (t += 1);\n      return t;\n    }\n  }\n  function y(e, t) {\n    var s = [];\n    var a = e.parentElement;\n    for (; a;) t ? a.matches(t) && s.push(a) : s.push(a), a = a.parentElement;\n    return s;\n  }\n  function E(e, t) {\n    t && e.addEventListener(\"transitionend\", function s(a) {\n      a.target === e && (t.call(e, a), e.removeEventListener(\"transitionend\", s));\n    });\n  }\n  function x(e, t, s) {\n    var a = r();\n    return s ? e[\"width\" === t ? \"offsetWidth\" : \"offsetHeight\"] + parseFloat(a.getComputedStyle(e, null).getPropertyValue(\"width\" === t ? \"margin-right\" : \"margin-top\")) + parseFloat(a.getComputedStyle(e, null).getPropertyValue(\"width\" === t ? \"margin-left\" : \"margin-bottom\")) : e.offsetWidth;\n  }\n  var S, T, M;\n  function C() {\n    return S || (S = function () {\n      var e = r(),\n        t = a();\n      return {\n        smoothScroll: t.documentElement && t.documentElement.style && \"scrollBehavior\" in t.documentElement.style,\n        touch: !!(\"ontouchstart\" in e || e.DocumentTouch && t instanceof e.DocumentTouch)\n      };\n    }()), S;\n  }\n  function P(e) {\n    return void 0 === e && (e = {}), T || (T = function (e) {\n      var _ref = void 0 === e ? {} : e,\n        t = _ref.userAgent;\n      var s = C(),\n        a = r(),\n        i = a.navigator.platform,\n        n = t || a.navigator.userAgent,\n        l = {\n          ios: !1,\n          android: !1\n        },\n        o = a.screen.width,\n        d = a.screen.height,\n        c = n.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n      var p = n.match(/(iPad).*OS\\s([\\d_]+)/);\n      var u = n.match(/(iPod)(.*OS\\s([\\d_]+))?/),\n        m = !p && n.match(/(iPhone\\sOS|iOS)\\s([\\d_]+)/),\n        h = \"Win32\" === i;\n      var f = \"MacIntel\" === i;\n      return !p && f && s.touch && [\"1024x1366\", \"1366x1024\", \"834x1194\", \"1194x834\", \"834x1112\", \"1112x834\", \"768x1024\", \"1024x768\", \"820x1180\", \"1180x820\", \"810x1080\", \"1080x810\"].indexOf(\"\".concat(o, \"x\").concat(d)) >= 0 && (p = n.match(/(Version)\\/([\\d.]+)/), p || (p = [0, 1, \"13_0_0\"]), f = !1), c && !h && (l.os = \"android\", l.android = !0), (p || m || u) && (l.os = \"ios\", l.ios = !0), l;\n    }(e)), T;\n  }\n  function L() {\n    return M || (M = function () {\n      var e = r();\n      var t = !1;\n      function s() {\n        var t = e.navigator.userAgent.toLowerCase();\n        return t.indexOf(\"safari\") >= 0 && t.indexOf(\"chrome\") < 0 && t.indexOf(\"android\") < 0;\n      }\n      if (s()) {\n        var _s3 = String(e.navigator.userAgent);\n        if (_s3.includes(\"Version/\")) {\n          var _s3$split$1$split$0$s = _s3.split(\"Version/\")[1].split(\" \")[0].split(\".\").map(function (e) {\n              return Number(e);\n            }),\n            _s3$split$1$split$0$s2 = _slicedToArray(_s3$split$1$split$0$s, 2),\n            _e = _s3$split$1$split$0$s2[0],\n            _a2 = _s3$split$1$split$0$s2[1];\n          t = _e < 16 || 16 === _e && _a2 < 2;\n        }\n      }\n      return {\n        isSafari: t || s(),\n        needPerspectiveFix: t,\n        isWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)\n      };\n    }()), M;\n  }\n  var z = {\n    on: function on(e, t, s) {\n      var a = this;\n      if (!a.eventsListeners || a.destroyed) return a;\n      if (\"function\" != typeof t) return a;\n      var i = s ? \"unshift\" : \"push\";\n      return e.split(\" \").forEach(function (e) {\n        a.eventsListeners[e] || (a.eventsListeners[e] = []), a.eventsListeners[e][i](t);\n      }), a;\n    },\n    once: function once(e, t, s) {\n      var a = this;\n      if (!a.eventsListeners || a.destroyed) return a;\n      if (\"function\" != typeof t) return a;\n      function i() {\n        a.off(e, i), i.__emitterProxy && delete i.__emitterProxy;\n        for (var s = arguments.length, r = new Array(s), n = 0; n < s; n++) r[n] = arguments[n];\n        t.apply(a, r);\n      }\n      return i.__emitterProxy = t, a.on(e, i, s);\n    },\n    onAny: function onAny(e, t) {\n      var s = this;\n      if (!s.eventsListeners || s.destroyed) return s;\n      if (\"function\" != typeof e) return s;\n      var a = t ? \"unshift\" : \"push\";\n      return s.eventsAnyListeners.indexOf(e) < 0 && s.eventsAnyListeners[a](e), s;\n    },\n    offAny: function offAny(e) {\n      var t = this;\n      if (!t.eventsListeners || t.destroyed) return t;\n      if (!t.eventsAnyListeners) return t;\n      var s = t.eventsAnyListeners.indexOf(e);\n      return s >= 0 && t.eventsAnyListeners.splice(s, 1), t;\n    },\n    off: function off(e, t) {\n      var s = this;\n      return !s.eventsListeners || s.destroyed ? s : s.eventsListeners ? (e.split(\" \").forEach(function (e) {\n        void 0 === t ? s.eventsListeners[e] = [] : s.eventsListeners[e] && s.eventsListeners[e].forEach(function (a, i) {\n          (a === t || a.__emitterProxy && a.__emitterProxy === t) && s.eventsListeners[e].splice(i, 1);\n        });\n      }), s) : s;\n    },\n    emit: function emit() {\n      var e = this;\n      if (!e.eventsListeners || e.destroyed) return e;\n      if (!e.eventsListeners) return e;\n      var t, s, a;\n      for (var i = arguments.length, r = new Array(i), n = 0; n < i; n++) r[n] = arguments[n];\n      \"string\" == typeof r[0] || Array.isArray(r[0]) ? (t = r[0], s = r.slice(1, r.length), a = e) : (t = r[0].events, s = r[0].data, a = r[0].context || e), s.unshift(a);\n      return (Array.isArray(t) ? t : t.split(\" \")).forEach(function (t) {\n        e.eventsAnyListeners && e.eventsAnyListeners.length && e.eventsAnyListeners.forEach(function (e) {\n          e.apply(a, [t].concat(_toConsumableArray(s)));\n        }), e.eventsListeners && e.eventsListeners[t] && e.eventsListeners[t].forEach(function (e) {\n          e.apply(a, s);\n        });\n      }), e;\n    }\n  };\n  var A = function A(e, t) {\n      if (!e || e.destroyed || !e.params) return;\n      var s = t.closest(e.isElement ? \"swiper-slide\" : \".\".concat(e.params.slideClass));\n      if (s) {\n        var _t2 = s.querySelector(\".\".concat(e.params.lazyPreloaderClass));\n        _t2 && _t2.remove();\n      }\n    },\n    $ = function $(e, t) {\n      if (!e.slides[t]) return;\n      var s = e.slides[t].querySelector('[loading=\"lazy\"]');\n      s && s.removeAttribute(\"loading\");\n    },\n    I = function I(e) {\n      if (!e || e.destroyed || !e.params) return;\n      var t = e.params.lazyPreloadPrevNext;\n      var s = e.slides.length;\n      if (!s || !t || t < 0) return;\n      t = Math.min(t, s);\n      var a = \"auto\" === e.params.slidesPerView ? e.slidesPerViewDynamic() : Math.ceil(e.params.slidesPerView),\n        i = e.activeIndex;\n      if (e.params.grid && e.params.grid.rows > 1) {\n        var _s4 = i,\n          _r2 = [_s4 - t];\n        return _r2.push.apply(_r2, _toConsumableArray(Array.from({\n          length: t\n        }).map(function (e, t) {\n          return _s4 + a + t;\n        }))), void e.slides.forEach(function (t, s) {\n          _r2.includes(t.column) && $(e, s);\n        });\n      }\n      var r = i + a - 1;\n      if (e.params.rewind || e.params.loop) for (var _a3 = i - t; _a3 <= r + t; _a3 += 1) {\n        var _t3 = (_a3 % s + s) % s;\n        (_t3 < i || _t3 > r) && $(e, _t3);\n      } else for (var _a4 = Math.max(i - t, 0); _a4 <= Math.min(r + t, s - 1); _a4 += 1) _a4 !== i && (_a4 > r || _a4 < i) && $(e, _a4);\n    };\n  var k = {\n    updateSize: function updateSize() {\n      var e = this;\n      var t, s;\n      var a = e.el;\n      t = void 0 !== e.params.width && null !== e.params.width ? e.params.width : a.clientWidth, s = void 0 !== e.params.height && null !== e.params.height ? e.params.height : a.clientHeight, 0 === t && e.isHorizontal() || 0 === s && e.isVertical() || (t = t - parseInt(w(a, \"padding-left\") || 0, 10) - parseInt(w(a, \"padding-right\") || 0, 10), s = s - parseInt(w(a, \"padding-top\") || 0, 10) - parseInt(w(a, \"padding-bottom\") || 0, 10), Number.isNaN(t) && (t = 0), Number.isNaN(s) && (s = 0), Object.assign(e, {\n        width: t,\n        height: s,\n        size: e.isHorizontal() ? t : s\n      }));\n    },\n    updateSlides: function updateSlides() {\n      var e = this;\n      function t(t) {\n        return e.isHorizontal() ? t : {\n          width: \"height\",\n          \"margin-top\": \"margin-left\",\n          \"margin-bottom \": \"margin-right\",\n          \"margin-left\": \"margin-top\",\n          \"margin-right\": \"margin-bottom\",\n          \"padding-left\": \"padding-top\",\n          \"padding-right\": \"padding-bottom\",\n          marginRight: \"marginBottom\"\n        }[t];\n      }\n      function s(e, s) {\n        return parseFloat(e.getPropertyValue(t(s)) || 0);\n      }\n      var a = e.params,\n        i = e.wrapperEl,\n        r = e.slidesEl,\n        n = e.size,\n        l = e.rtlTranslate,\n        o = e.wrongRTL,\n        d = e.virtual && a.virtual.enabled,\n        c = d ? e.virtual.slides.length : e.slides.length,\n        p = f(r, \".\".concat(e.params.slideClass, \", swiper-slide\")),\n        m = d ? e.virtual.slides.length : p.length;\n      var h = [];\n      var g = [],\n        v = [];\n      var b = a.slidesOffsetBefore;\n      \"function\" == typeof b && (b = a.slidesOffsetBefore.call(e));\n      var y = a.slidesOffsetAfter;\n      \"function\" == typeof y && (y = a.slidesOffsetAfter.call(e));\n      var E = e.snapGrid.length,\n        S = e.slidesGrid.length;\n      var T = a.spaceBetween,\n        M = -b,\n        C = 0,\n        P = 0;\n      if (void 0 === n) return;\n      \"string\" == typeof T && T.indexOf(\"%\") >= 0 ? T = parseFloat(T.replace(\"%\", \"\")) / 100 * n : \"string\" == typeof T && (T = parseFloat(T)), e.virtualSize = -T, p.forEach(function (e) {\n        l ? e.style.marginLeft = \"\" : e.style.marginRight = \"\", e.style.marginBottom = \"\", e.style.marginTop = \"\";\n      }), a.centeredSlides && a.cssMode && (u(i, \"--swiper-centered-offset-before\", \"\"), u(i, \"--swiper-centered-offset-after\", \"\"));\n      var L = a.grid && a.grid.rows > 1 && e.grid;\n      var z;\n      L && e.grid.initSlides(m);\n      var A = \"auto\" === a.slidesPerView && a.breakpoints && Object.keys(a.breakpoints).filter(function (e) {\n        return void 0 !== a.breakpoints[e].slidesPerView;\n      }).length > 0;\n      for (var _i3 = 0; _i3 < m; _i3 += 1) {\n        var _r3 = void 0;\n        if (z = 0, p[_i3] && (_r3 = p[_i3]), L && e.grid.updateSlide(_i3, _r3, m, t), !p[_i3] || \"none\" !== w(_r3, \"display\")) {\n          if (\"auto\" === a.slidesPerView) {\n            A && (p[_i3].style[t(\"width\")] = \"\");\n            var _n = getComputedStyle(_r3),\n              _l = _r3.style.transform,\n              _o = _r3.style.webkitTransform;\n            if (_l && (_r3.style.transform = \"none\"), _o && (_r3.style.webkitTransform = \"none\"), a.roundLengths) z = e.isHorizontal() ? x(_r3, \"width\", !0) : x(_r3, \"height\", !0);else {\n              var _e2 = s(_n, \"width\"),\n                _t4 = s(_n, \"padding-left\"),\n                _a5 = s(_n, \"padding-right\"),\n                _i4 = s(_n, \"margin-left\"),\n                _l2 = s(_n, \"margin-right\"),\n                _o2 = _n.getPropertyValue(\"box-sizing\");\n              if (_o2 && \"border-box\" === _o2) z = _e2 + _i4 + _l2;else {\n                var _r4 = _r3,\n                  _s5 = _r4.clientWidth,\n                  _n2 = _r4.offsetWidth;\n                z = _e2 + _t4 + _a5 + _i4 + _l2 + (_n2 - _s5);\n              }\n            }\n            _l && (_r3.style.transform = _l), _o && (_r3.style.webkitTransform = _o), a.roundLengths && (z = Math.floor(z));\n          } else z = (n - (a.slidesPerView - 1) * T) / a.slidesPerView, a.roundLengths && (z = Math.floor(z)), p[_i3] && (p[_i3].style[t(\"width\")] = \"\".concat(z, \"px\"));\n          p[_i3] && (p[_i3].swiperSlideSize = z), v.push(z), a.centeredSlides ? (M = M + z / 2 + C / 2 + T, 0 === C && 0 !== _i3 && (M = M - n / 2 - T), 0 === _i3 && (M = M - n / 2 - T), Math.abs(M) < .001 && (M = 0), a.roundLengths && (M = Math.floor(M)), P % a.slidesPerGroup == 0 && h.push(M), g.push(M)) : (a.roundLengths && (M = Math.floor(M)), (P - Math.min(e.params.slidesPerGroupSkip, P)) % e.params.slidesPerGroup == 0 && h.push(M), g.push(M), M = M + z + T), e.virtualSize += z + T, C = z, P += 1;\n        }\n      }\n      if (e.virtualSize = Math.max(e.virtualSize, n) + y, l && o && (\"slide\" === a.effect || \"coverflow\" === a.effect) && (i.style.width = \"\".concat(e.virtualSize + T, \"px\")), a.setWrapperSize && (i.style[t(\"width\")] = \"\".concat(e.virtualSize + T, \"px\")), L && e.grid.updateWrapperSize(z, h, t), !a.centeredSlides) {\n        var _t5 = [];\n        for (var _s6 = 0; _s6 < h.length; _s6 += 1) {\n          var _i5 = h[_s6];\n          a.roundLengths && (_i5 = Math.floor(_i5)), h[_s6] <= e.virtualSize - n && _t5.push(_i5);\n        }\n        h = _t5, Math.floor(e.virtualSize - n) - Math.floor(h[h.length - 1]) > 1 && h.push(e.virtualSize - n);\n      }\n      if (d && a.loop) {\n        var _t6 = v[0] + T;\n        if (a.slidesPerGroup > 1) {\n          var _s7 = Math.ceil((e.virtual.slidesBefore + e.virtual.slidesAfter) / a.slidesPerGroup),\n            _i6 = _t6 * a.slidesPerGroup;\n          for (var _e3 = 0; _e3 < _s7; _e3 += 1) h.push(h[h.length - 1] + _i6);\n        }\n        for (var _s8 = 0; _s8 < e.virtual.slidesBefore + e.virtual.slidesAfter; _s8 += 1) 1 === a.slidesPerGroup && h.push(h[h.length - 1] + _t6), g.push(g[g.length - 1] + _t6), e.virtualSize += _t6;\n      }\n      if (0 === h.length && (h = [0]), 0 !== T) {\n        var _s9 = e.isHorizontal() && l ? \"marginLeft\" : t(\"marginRight\");\n        p.filter(function (e, t) {\n          return !(a.cssMode && !a.loop) || t !== p.length - 1;\n        }).forEach(function (e) {\n          e.style[_s9] = \"\".concat(T, \"px\");\n        });\n      }\n      if (a.centeredSlides && a.centeredSlidesBounds) {\n        var _e4 = 0;\n        v.forEach(function (t) {\n          _e4 += t + (T || 0);\n        }), _e4 -= T;\n        var _t7 = _e4 - n;\n        h = h.map(function (e) {\n          return e <= 0 ? -b : e > _t7 ? _t7 + y : e;\n        });\n      }\n      if (a.centerInsufficientSlides) {\n        var _e5 = 0;\n        if (v.forEach(function (t) {\n          _e5 += t + (T || 0);\n        }), _e5 -= T, _e5 < n) {\n          var _t8 = (n - _e5) / 2;\n          h.forEach(function (e, s) {\n            h[s] = e - _t8;\n          }), g.forEach(function (e, s) {\n            g[s] = e + _t8;\n          });\n        }\n      }\n      if (Object.assign(e, {\n        slides: p,\n        snapGrid: h,\n        slidesGrid: g,\n        slidesSizesGrid: v\n      }), a.centeredSlides && a.cssMode && !a.centeredSlidesBounds) {\n        u(i, \"--swiper-centered-offset-before\", -h[0] + \"px\"), u(i, \"--swiper-centered-offset-after\", e.size / 2 - v[v.length - 1] / 2 + \"px\");\n        var _t9 = -e.snapGrid[0],\n          _s10 = -e.slidesGrid[0];\n        e.snapGrid = e.snapGrid.map(function (e) {\n          return e + _t9;\n        }), e.slidesGrid = e.slidesGrid.map(function (e) {\n          return e + _s10;\n        });\n      }\n      if (m !== c && e.emit(\"slidesLengthChange\"), h.length !== E && (e.params.watchOverflow && e.checkOverflow(), e.emit(\"snapGridLengthChange\")), g.length !== S && e.emit(\"slidesGridLengthChange\"), a.watchSlidesProgress && e.updateSlidesOffset(), !(d || a.cssMode || \"slide\" !== a.effect && \"fade\" !== a.effect)) {\n        var _t10 = \"\".concat(a.containerModifierClass, \"backface-hidden\"),\n          _s11 = e.el.classList.contains(_t10);\n        m <= a.maxBackfaceHiddenSlides ? _s11 || e.el.classList.add(_t10) : _s11 && e.el.classList.remove(_t10);\n      }\n    },\n    updateAutoHeight: function updateAutoHeight(e) {\n      var t = this,\n        s = [],\n        a = t.virtual && t.params.virtual.enabled;\n      var i,\n        r = 0;\n      \"number\" == typeof e ? t.setTransition(e) : !0 === e && t.setTransition(t.params.speed);\n      var n = function n(e) {\n        return a ? t.slides[t.getSlideIndexByData(e)] : t.slides[e];\n      };\n      if (\"auto\" !== t.params.slidesPerView && t.params.slidesPerView > 1) {\n        if (t.params.centeredSlides) (t.visibleSlides || []).forEach(function (e) {\n          s.push(e);\n        });else for (i = 0; i < Math.ceil(t.params.slidesPerView); i += 1) {\n          var _e6 = t.activeIndex + i;\n          if (_e6 > t.slides.length && !a) break;\n          s.push(n(_e6));\n        }\n      } else s.push(n(t.activeIndex));\n      for (i = 0; i < s.length; i += 1) if (void 0 !== s[i]) {\n        var _e7 = s[i].offsetHeight;\n        r = _e7 > r ? _e7 : r;\n      }\n      (r || 0 === r) && (t.wrapperEl.style.height = \"\".concat(r, \"px\"));\n    },\n    updateSlidesOffset: function updateSlidesOffset() {\n      var e = this,\n        t = e.slides,\n        s = e.isElement ? e.isHorizontal() ? e.wrapperEl.offsetLeft : e.wrapperEl.offsetTop : 0;\n      for (var _a6 = 0; _a6 < t.length; _a6 += 1) t[_a6].swiperSlideOffset = (e.isHorizontal() ? t[_a6].offsetLeft : t[_a6].offsetTop) - s - e.cssOverflowAdjustment();\n    },\n    updateSlidesProgress: function updateSlidesProgress(e) {\n      void 0 === e && (e = this && this.translate || 0);\n      var t = this,\n        s = t.params,\n        a = t.slides,\n        i = t.rtlTranslate,\n        r = t.snapGrid;\n      if (0 === a.length) return;\n      void 0 === a[0].swiperSlideOffset && t.updateSlidesOffset();\n      var n = -e;\n      i && (n = e), a.forEach(function (e) {\n        e.classList.remove(s.slideVisibleClass);\n      }), t.visibleSlidesIndexes = [], t.visibleSlides = [];\n      var l = s.spaceBetween;\n      \"string\" == typeof l && l.indexOf(\"%\") >= 0 ? l = parseFloat(l.replace(\"%\", \"\")) / 100 * t.size : \"string\" == typeof l && (l = parseFloat(l));\n      for (var _e8 = 0; _e8 < a.length; _e8 += 1) {\n        var _o3 = a[_e8];\n        var _d = _o3.swiperSlideOffset;\n        s.cssMode && s.centeredSlides && (_d -= a[0].swiperSlideOffset);\n        var _c = (n + (s.centeredSlides ? t.minTranslate() : 0) - _d) / (_o3.swiperSlideSize + l),\n          _p = (n - r[0] + (s.centeredSlides ? t.minTranslate() : 0) - _d) / (_o3.swiperSlideSize + l),\n          _u = -(n - _d),\n          _m = _u + t.slidesSizesGrid[_e8];\n        (_u >= 0 && _u < t.size - 1 || _m > 1 && _m <= t.size || _u <= 0 && _m >= t.size) && (t.visibleSlides.push(_o3), t.visibleSlidesIndexes.push(_e8), a[_e8].classList.add(s.slideVisibleClass)), _o3.progress = i ? -_c : _c, _o3.originalProgress = i ? -_p : _p;\n      }\n    },\n    updateProgress: function updateProgress(e) {\n      var t = this;\n      if (void 0 === e) {\n        var _s12 = t.rtlTranslate ? -1 : 1;\n        e = t && t.translate && t.translate * _s12 || 0;\n      }\n      var s = t.params,\n        a = t.maxTranslate() - t.minTranslate();\n      var i = t.progress,\n        r = t.isBeginning,\n        n = t.isEnd,\n        l = t.progressLoop;\n      var o = r,\n        d = n;\n      if (0 === a) i = 0, r = !0, n = !0;else {\n        i = (e - t.minTranslate()) / a;\n        var _s13 = Math.abs(e - t.minTranslate()) < 1,\n          _l3 = Math.abs(e - t.maxTranslate()) < 1;\n        r = _s13 || i <= 0, n = _l3 || i >= 1, _s13 && (i = 0), _l3 && (i = 1);\n      }\n      if (s.loop) {\n        var _s14 = t.getSlideIndexByData(0),\n          _a7 = t.getSlideIndexByData(t.slides.length - 1),\n          _i7 = t.slidesGrid[_s14],\n          _r5 = t.slidesGrid[_a7],\n          _n3 = t.slidesGrid[t.slidesGrid.length - 1],\n          _o4 = Math.abs(e);\n        l = _o4 >= _i7 ? (_o4 - _i7) / _n3 : (_o4 + _n3 - _r5) / _n3, l > 1 && (l -= 1);\n      }\n      Object.assign(t, {\n        progress: i,\n        progressLoop: l,\n        isBeginning: r,\n        isEnd: n\n      }), (s.watchSlidesProgress || s.centeredSlides && s.autoHeight) && t.updateSlidesProgress(e), r && !o && t.emit(\"reachBeginning toEdge\"), n && !d && t.emit(\"reachEnd toEdge\"), (o && !r || d && !n) && t.emit(\"fromEdge\"), t.emit(\"progress\", i);\n    },\n    updateSlidesClasses: function updateSlidesClasses() {\n      var e = this,\n        t = e.slides,\n        s = e.params,\n        a = e.slidesEl,\n        i = e.activeIndex,\n        r = e.virtual && s.virtual.enabled,\n        n = function n(e) {\n          return f(a, \".\".concat(s.slideClass).concat(e, \", swiper-slide\").concat(e))[0];\n        };\n      var l;\n      if (t.forEach(function (e) {\n        e.classList.remove(s.slideActiveClass, s.slideNextClass, s.slidePrevClass);\n      }), r) {\n        if (s.loop) {\n          var _t11 = i - e.virtual.slidesBefore;\n          _t11 < 0 && (_t11 = e.virtual.slides.length + _t11), _t11 >= e.virtual.slides.length && (_t11 -= e.virtual.slides.length), l = n(\"[data-swiper-slide-index=\\\"\".concat(_t11, \"\\\"]\"));\n        } else l = n(\"[data-swiper-slide-index=\\\"\".concat(i, \"\\\"]\"));\n      } else l = t[i];\n      if (l) {\n        l.classList.add(s.slideActiveClass);\n        var _e9 = function (e, t) {\n          var s = [];\n          for (; e.nextElementSibling;) {\n            var _a8 = e.nextElementSibling;\n            t ? _a8.matches(t) && s.push(_a8) : s.push(_a8), e = _a8;\n          }\n          return s;\n        }(l, \".\".concat(s.slideClass, \", swiper-slide\"))[0];\n        s.loop && !_e9 && (_e9 = t[0]), _e9 && _e9.classList.add(s.slideNextClass);\n        var _a9 = function (e, t) {\n          var s = [];\n          for (; e.previousElementSibling;) {\n            var _a10 = e.previousElementSibling;\n            t ? _a10.matches(t) && s.push(_a10) : s.push(_a10), e = _a10;\n          }\n          return s;\n        }(l, \".\".concat(s.slideClass, \", swiper-slide\"))[0];\n        s.loop && 0 === !_a9 && (_a9 = t[t.length - 1]), _a9 && _a9.classList.add(s.slidePrevClass);\n      }\n      e.emitSlidesClasses();\n    },\n    updateActiveIndex: function updateActiveIndex(e) {\n      var t = this,\n        s = t.rtlTranslate ? t.translate : -t.translate,\n        a = t.snapGrid,\n        i = t.params,\n        r = t.activeIndex,\n        n = t.realIndex,\n        l = t.snapIndex;\n      var o,\n        d = e;\n      var c = function c(e) {\n        var s = e - t.virtual.slidesBefore;\n        return s < 0 && (s = t.virtual.slides.length + s), s >= t.virtual.slides.length && (s -= t.virtual.slides.length), s;\n      };\n      if (void 0 === d && (d = function (e) {\n        var t = e.slidesGrid,\n          s = e.params,\n          a = e.rtlTranslate ? e.translate : -e.translate;\n        var i;\n        for (var _e10 = 0; _e10 < t.length; _e10 += 1) void 0 !== t[_e10 + 1] ? a >= t[_e10] && a < t[_e10 + 1] - (t[_e10 + 1] - t[_e10]) / 2 ? i = _e10 : a >= t[_e10] && a < t[_e10 + 1] && (i = _e10 + 1) : a >= t[_e10] && (i = _e10);\n        return s.normalizeSlideIndex && (i < 0 || void 0 === i) && (i = 0), i;\n      }(t)), a.indexOf(s) >= 0) o = a.indexOf(s);else {\n        var _e11 = Math.min(i.slidesPerGroupSkip, d);\n        o = _e11 + Math.floor((d - _e11) / i.slidesPerGroup);\n      }\n      if (o >= a.length && (o = a.length - 1), d === r) return o !== l && (t.snapIndex = o, t.emit(\"snapIndexChange\")), void (t.params.loop && t.virtual && t.params.virtual.enabled && (t.realIndex = c(d)));\n      var p;\n      p = t.virtual && i.virtual.enabled && i.loop ? c(d) : t.slides[d] ? parseInt(t.slides[d].getAttribute(\"data-swiper-slide-index\") || d, 10) : d, Object.assign(t, {\n        previousSnapIndex: l,\n        snapIndex: o,\n        previousRealIndex: n,\n        realIndex: p,\n        previousIndex: r,\n        activeIndex: d\n      }), t.initialized && I(t), t.emit(\"activeIndexChange\"), t.emit(\"snapIndexChange\"), n !== p && t.emit(\"realIndexChange\"), (t.initialized || t.params.runCallbacksOnInit) && t.emit(\"slideChange\");\n    },\n    updateClickedSlide: function updateClickedSlide(e) {\n      var t = this,\n        s = t.params,\n        a = e.closest(\".\".concat(s.slideClass, \", swiper-slide\"));\n      var i,\n        r = !1;\n      if (a) for (var _e12 = 0; _e12 < t.slides.length; _e12 += 1) if (t.slides[_e12] === a) {\n        r = !0, i = _e12;\n        break;\n      }\n      if (!a || !r) return t.clickedSlide = void 0, void (t.clickedIndex = void 0);\n      t.clickedSlide = a, t.virtual && t.params.virtual.enabled ? t.clickedIndex = parseInt(a.getAttribute(\"data-swiper-slide-index\"), 10) : t.clickedIndex = i, s.slideToClickedSlide && void 0 !== t.clickedIndex && t.clickedIndex !== t.activeIndex && t.slideToClickedSlide();\n    }\n  };\n  var O = {\n    getTranslate: function getTranslate(e) {\n      void 0 === e && (e = this.isHorizontal() ? \"x\" : \"y\");\n      var t = this.params,\n        s = this.rtlTranslate,\n        a = this.translate,\n        i = this.wrapperEl;\n      if (t.virtualTranslate) return s ? -a : a;\n      if (t.cssMode) return a;\n      var r = o(i, e);\n      return r += this.cssOverflowAdjustment(), s && (r = -r), r || 0;\n    },\n    setTranslate: function setTranslate(e, t) {\n      var s = this,\n        a = s.rtlTranslate,\n        i = s.params,\n        r = s.wrapperEl,\n        n = s.progress;\n      var l,\n        o = 0,\n        d = 0;\n      s.isHorizontal() ? o = a ? -e : e : d = e, i.roundLengths && (o = Math.floor(o), d = Math.floor(d)), s.previousTranslate = s.translate, s.translate = s.isHorizontal() ? o : d, i.cssMode ? r[s.isHorizontal() ? \"scrollLeft\" : \"scrollTop\"] = s.isHorizontal() ? -o : -d : i.virtualTranslate || (s.isHorizontal() ? o -= s.cssOverflowAdjustment() : d -= s.cssOverflowAdjustment(), r.style.transform = \"translate3d(\".concat(o, \"px, \").concat(d, \"px, 0px)\"));\n      var c = s.maxTranslate() - s.minTranslate();\n      l = 0 === c ? 0 : (e - s.minTranslate()) / c, l !== n && s.updateProgress(e), s.emit(\"setTranslate\", s.translate, t);\n    },\n    minTranslate: function minTranslate() {\n      return -this.snapGrid[0];\n    },\n    maxTranslate: function maxTranslate() {\n      return -this.snapGrid[this.snapGrid.length - 1];\n    },\n    translateTo: function translateTo(e, t, s, a, i) {\n      void 0 === e && (e = 0), void 0 === t && (t = this.params.speed), void 0 === s && (s = !0), void 0 === a && (a = !0);\n      var r = this,\n        n = r.params,\n        l = r.wrapperEl;\n      if (r.animating && n.preventInteractionOnTransition) return !1;\n      var o = r.minTranslate(),\n        d = r.maxTranslate();\n      var c;\n      if (c = a && e > o ? o : a && e < d ? d : e, r.updateProgress(c), n.cssMode) {\n        var _e13 = r.isHorizontal();\n        if (0 === t) l[_e13 ? \"scrollLeft\" : \"scrollTop\"] = -c;else {\n          if (!r.support.smoothScroll) return m({\n            swiper: r,\n            targetPosition: -c,\n            side: _e13 ? \"left\" : \"top\"\n          }), !0;\n          l.scrollTo(_defineProperty(_defineProperty({}, _e13 ? \"left\" : \"top\", -c), \"behavior\", \"smooth\"));\n        }\n        return !0;\n      }\n      return 0 === t ? (r.setTransition(0), r.setTranslate(c), s && (r.emit(\"beforeTransitionStart\", t, i), r.emit(\"transitionEnd\"))) : (r.setTransition(t), r.setTranslate(c), s && (r.emit(\"beforeTransitionStart\", t, i), r.emit(\"transitionStart\")), r.animating || (r.animating = !0, r.onTranslateToWrapperTransitionEnd || (r.onTranslateToWrapperTransitionEnd = function (e) {\n        r && !r.destroyed && e.target === this && (r.wrapperEl.removeEventListener(\"transitionend\", r.onTranslateToWrapperTransitionEnd), r.onTranslateToWrapperTransitionEnd = null, delete r.onTranslateToWrapperTransitionEnd, s && r.emit(\"transitionEnd\"));\n      }), r.wrapperEl.addEventListener(\"transitionend\", r.onTranslateToWrapperTransitionEnd))), !0;\n    }\n  };\n  function D(e) {\n    var t = e.swiper,\n      s = e.runCallbacks,\n      a = e.direction,\n      i = e.step;\n    var r = t.activeIndex,\n      n = t.previousIndex;\n    var l = a;\n    if (l || (l = r > n ? \"next\" : r < n ? \"prev\" : \"reset\"), t.emit(\"transition\".concat(i)), s && r !== n) {\n      if (\"reset\" === l) return void t.emit(\"slideResetTransition\".concat(i));\n      t.emit(\"slideChangeTransition\".concat(i)), \"next\" === l ? t.emit(\"slideNextTransition\".concat(i)) : t.emit(\"slidePrevTransition\".concat(i));\n    }\n  }\n  var G = {\n    slideTo: function slideTo(e, t, s, a, i) {\n      void 0 === e && (e = 0), void 0 === t && (t = this.params.speed), void 0 === s && (s = !0), \"string\" == typeof e && (e = parseInt(e, 10));\n      var r = this;\n      var n = e;\n      n < 0 && (n = 0);\n      var l = r.params,\n        o = r.snapGrid,\n        d = r.slidesGrid,\n        c = r.previousIndex,\n        p = r.activeIndex,\n        u = r.rtlTranslate,\n        h = r.wrapperEl,\n        f = r.enabled;\n      if (r.animating && l.preventInteractionOnTransition || !f && !a && !i) return !1;\n      var g = Math.min(r.params.slidesPerGroupSkip, n);\n      var v = g + Math.floor((n - g) / r.params.slidesPerGroup);\n      v >= o.length && (v = o.length - 1);\n      var w = -o[v];\n      if (l.normalizeSlideIndex) for (var _e14 = 0; _e14 < d.length; _e14 += 1) {\n        var _t12 = -Math.floor(100 * w),\n          _s15 = Math.floor(100 * d[_e14]),\n          _a11 = Math.floor(100 * d[_e14 + 1]);\n        void 0 !== d[_e14 + 1] ? _t12 >= _s15 && _t12 < _a11 - (_a11 - _s15) / 2 ? n = _e14 : _t12 >= _s15 && _t12 < _a11 && (n = _e14 + 1) : _t12 >= _s15 && (n = _e14);\n      }\n      if (r.initialized && n !== p) {\n        if (!r.allowSlideNext && (u ? w > r.translate && w > r.minTranslate() : w < r.translate && w < r.minTranslate())) return !1;\n        if (!r.allowSlidePrev && w > r.translate && w > r.maxTranslate() && (p || 0) !== n) return !1;\n      }\n      var b;\n      if (n !== (c || 0) && s && r.emit(\"beforeSlideChangeStart\"), r.updateProgress(w), b = n > p ? \"next\" : n < p ? \"prev\" : \"reset\", u && -w === r.translate || !u && w === r.translate) return r.updateActiveIndex(n), l.autoHeight && r.updateAutoHeight(), r.updateSlidesClasses(), \"slide\" !== l.effect && r.setTranslate(w), \"reset\" !== b && (r.transitionStart(s, b), r.transitionEnd(s, b)), !1;\n      if (l.cssMode) {\n        var _e15 = r.isHorizontal(),\n          _s16 = u ? w : -w;\n        if (0 === t) {\n          var _t13 = r.virtual && r.params.virtual.enabled;\n          _t13 && (r.wrapperEl.style.scrollSnapType = \"none\", r._immediateVirtual = !0), _t13 && !r._cssModeVirtualInitialSet && r.params.initialSlide > 0 ? (r._cssModeVirtualInitialSet = !0, requestAnimationFrame(function () {\n            h[_e15 ? \"scrollLeft\" : \"scrollTop\"] = _s16;\n          })) : h[_e15 ? \"scrollLeft\" : \"scrollTop\"] = _s16, _t13 && requestAnimationFrame(function () {\n            r.wrapperEl.style.scrollSnapType = \"\", r._immediateVirtual = !1;\n          });\n        } else {\n          if (!r.support.smoothScroll) return m({\n            swiper: r,\n            targetPosition: _s16,\n            side: _e15 ? \"left\" : \"top\"\n          }), !0;\n          h.scrollTo(_defineProperty(_defineProperty({}, _e15 ? \"left\" : \"top\", _s16), \"behavior\", \"smooth\"));\n        }\n        return !0;\n      }\n      return r.setTransition(t), r.setTranslate(w), r.updateActiveIndex(n), r.updateSlidesClasses(), r.emit(\"beforeTransitionStart\", t, a), r.transitionStart(s, b), 0 === t ? r.transitionEnd(s, b) : r.animating || (r.animating = !0, r.onSlideToWrapperTransitionEnd || (r.onSlideToWrapperTransitionEnd = function (e) {\n        r && !r.destroyed && e.target === this && (r.wrapperEl.removeEventListener(\"transitionend\", r.onSlideToWrapperTransitionEnd), r.onSlideToWrapperTransitionEnd = null, delete r.onSlideToWrapperTransitionEnd, r.transitionEnd(s, b));\n      }), r.wrapperEl.addEventListener(\"transitionend\", r.onSlideToWrapperTransitionEnd)), !0;\n    },\n    slideToLoop: function slideToLoop(e, t, s, a) {\n      if (void 0 === e && (e = 0), void 0 === t && (t = this.params.speed), void 0 === s && (s = !0), \"string\" == typeof e) {\n        e = parseInt(e, 10);\n      }\n      var i = this;\n      var r = e;\n      return i.params.loop && (i.virtual && i.params.virtual.enabled ? r += i.virtual.slidesBefore : r = i.getSlideIndexByData(r)), i.slideTo(r, t, s, a);\n    },\n    slideNext: function slideNext(e, t, s) {\n      void 0 === e && (e = this.params.speed), void 0 === t && (t = !0);\n      var a = this,\n        i = a.enabled,\n        r = a.params,\n        n = a.animating;\n      if (!i) return a;\n      var l = r.slidesPerGroup;\n      \"auto\" === r.slidesPerView && 1 === r.slidesPerGroup && r.slidesPerGroupAuto && (l = Math.max(a.slidesPerViewDynamic(\"current\", !0), 1));\n      var o = a.activeIndex < r.slidesPerGroupSkip ? 1 : l,\n        d = a.virtual && r.virtual.enabled;\n      if (r.loop) {\n        if (n && !d && r.loopPreventsSliding) return !1;\n        a.loopFix({\n          direction: \"next\"\n        }), a._clientLeft = a.wrapperEl.clientLeft;\n      }\n      return r.rewind && a.isEnd ? a.slideTo(0, e, t, s) : a.slideTo(a.activeIndex + o, e, t, s);\n    },\n    slidePrev: function slidePrev(e, t, s) {\n      void 0 === e && (e = this.params.speed), void 0 === t && (t = !0);\n      var a = this,\n        i = a.params,\n        r = a.snapGrid,\n        n = a.slidesGrid,\n        l = a.rtlTranslate,\n        o = a.enabled,\n        d = a.animating;\n      if (!o) return a;\n      var c = a.virtual && i.virtual.enabled;\n      if (i.loop) {\n        if (d && !c && i.loopPreventsSliding) return !1;\n        a.loopFix({\n          direction: \"prev\"\n        }), a._clientLeft = a.wrapperEl.clientLeft;\n      }\n      function p(e) {\n        return e < 0 ? -Math.floor(Math.abs(e)) : Math.floor(e);\n      }\n      var u = p(l ? a.translate : -a.translate),\n        m = r.map(function (e) {\n          return p(e);\n        });\n      var h = r[m.indexOf(u) - 1];\n      if (void 0 === h && i.cssMode) {\n        var _e16;\n        r.forEach(function (t, s) {\n          u >= t && (_e16 = s);\n        }), void 0 !== _e16 && (h = r[_e16 > 0 ? _e16 - 1 : _e16]);\n      }\n      var f = 0;\n      if (void 0 !== h && (f = n.indexOf(h), f < 0 && (f = a.activeIndex - 1), \"auto\" === i.slidesPerView && 1 === i.slidesPerGroup && i.slidesPerGroupAuto && (f = f - a.slidesPerViewDynamic(\"previous\", !0) + 1, f = Math.max(f, 0))), i.rewind && a.isBeginning) {\n        var _i8 = a.params.virtual && a.params.virtual.enabled && a.virtual ? a.virtual.slides.length - 1 : a.slides.length - 1;\n        return a.slideTo(_i8, e, t, s);\n      }\n      return a.slideTo(f, e, t, s);\n    },\n    slideReset: function slideReset(e, t, s) {\n      return void 0 === e && (e = this.params.speed), void 0 === t && (t = !0), this.slideTo(this.activeIndex, e, t, s);\n    },\n    slideToClosest: function slideToClosest(e, t, s, a) {\n      void 0 === e && (e = this.params.speed), void 0 === t && (t = !0), void 0 === a && (a = .5);\n      var i = this;\n      var r = i.activeIndex;\n      var n = Math.min(i.params.slidesPerGroupSkip, r),\n        l = n + Math.floor((r - n) / i.params.slidesPerGroup),\n        o = i.rtlTranslate ? i.translate : -i.translate;\n      if (o >= i.snapGrid[l]) {\n        var _e17 = i.snapGrid[l];\n        o - _e17 > (i.snapGrid[l + 1] - _e17) * a && (r += i.params.slidesPerGroup);\n      } else {\n        var _e18 = i.snapGrid[l - 1];\n        o - _e18 <= (i.snapGrid[l] - _e18) * a && (r -= i.params.slidesPerGroup);\n      }\n      return r = Math.max(r, 0), r = Math.min(r, i.slidesGrid.length - 1), i.slideTo(r, e, t, s);\n    },\n    slideToClickedSlide: function slideToClickedSlide() {\n      var e = this,\n        t = e.params,\n        s = e.slidesEl,\n        a = \"auto\" === t.slidesPerView ? e.slidesPerViewDynamic() : t.slidesPerView;\n      var i,\n        r = e.clickedIndex;\n      var l = e.isElement ? \"swiper-slide\" : \".\".concat(t.slideClass);\n      if (t.loop) {\n        if (e.animating) return;\n        i = parseInt(e.clickedSlide.getAttribute(\"data-swiper-slide-index\"), 10), t.centeredSlides ? r < e.loopedSlides - a / 2 || r > e.slides.length - e.loopedSlides + a / 2 ? (e.loopFix(), r = e.getSlideIndex(f(s, \"\".concat(l, \"[data-swiper-slide-index=\\\"\").concat(i, \"\\\"]\"))[0]), n(function () {\n          e.slideTo(r);\n        })) : e.slideTo(r) : r > e.slides.length - a ? (e.loopFix(), r = e.getSlideIndex(f(s, \"\".concat(l, \"[data-swiper-slide-index=\\\"\").concat(i, \"\\\"]\"))[0]), n(function () {\n          e.slideTo(r);\n        })) : e.slideTo(r);\n      } else e.slideTo(r);\n    }\n  };\n  var H = {\n    loopCreate: function loopCreate(e) {\n      var t = this,\n        s = t.params,\n        a = t.slidesEl;\n      if (!s.loop || t.virtual && t.params.virtual.enabled) return;\n      f(a, \".\".concat(s.slideClass, \", swiper-slide\")).forEach(function (e, t) {\n        e.setAttribute(\"data-swiper-slide-index\", t);\n      }), t.loopFix({\n        slideRealIndex: e,\n        direction: s.centeredSlides ? void 0 : \"next\"\n      });\n    },\n    loopFix: function loopFix(e) {\n      var _ref2 = void 0 === e ? {} : e,\n        t = _ref2.slideRealIndex,\n        _ref2$slideTo = _ref2.slideTo,\n        s = _ref2$slideTo === void 0 ? !0 : _ref2$slideTo,\n        a = _ref2.direction,\n        i = _ref2.setTranslate,\n        r = _ref2.activeSlideIndex,\n        n = _ref2.byController,\n        l = _ref2.byMousewheel;\n      var o = this;\n      if (!o.params.loop) return;\n      o.emit(\"beforeLoopFix\");\n      var d = o.slides,\n        c = o.allowSlidePrev,\n        p = o.allowSlideNext,\n        u = o.slidesEl,\n        m = o.params;\n      if (o.allowSlidePrev = !0, o.allowSlideNext = !0, o.virtual && m.virtual.enabled) return s && (m.centeredSlides || 0 !== o.snapIndex ? m.centeredSlides && o.snapIndex < m.slidesPerView ? o.slideTo(o.virtual.slides.length + o.snapIndex, 0, !1, !0) : o.snapIndex === o.snapGrid.length - 1 && o.slideTo(o.virtual.slidesBefore, 0, !1, !0) : o.slideTo(o.virtual.slides.length, 0, !1, !0)), o.allowSlidePrev = c, o.allowSlideNext = p, void o.emit(\"loopFix\");\n      var h = \"auto\" === m.slidesPerView ? o.slidesPerViewDynamic() : Math.ceil(parseFloat(m.slidesPerView, 10));\n      var f = m.loopedSlides || h;\n      f % m.slidesPerGroup != 0 && (f += m.slidesPerGroup - f % m.slidesPerGroup), o.loopedSlides = f;\n      var g = [],\n        v = [];\n      var w = o.activeIndex;\n      void 0 === r ? r = o.getSlideIndex(o.slides.filter(function (e) {\n        return e.classList.contains(m.slideActiveClass);\n      })[0]) : w = r;\n      var b = \"next\" === a || !a,\n        y = \"prev\" === a || !a;\n      var E = 0,\n        x = 0;\n      if (r < f) {\n        E = Math.max(f - r, m.slidesPerGroup);\n        for (var _e19 = 0; _e19 < f - r; _e19 += 1) {\n          var _t14 = _e19 - Math.floor(_e19 / d.length) * d.length;\n          g.push(d.length - _t14 - 1);\n        }\n      } else if (r > o.slides.length - 2 * f) {\n        x = Math.max(r - (o.slides.length - 2 * f), m.slidesPerGroup);\n        for (var _e20 = 0; _e20 < x; _e20 += 1) {\n          var _t15 = _e20 - Math.floor(_e20 / d.length) * d.length;\n          v.push(_t15);\n        }\n      }\n      if (y && g.forEach(function (e) {\n        o.slides[e].swiperLoopMoveDOM = !0, u.prepend(o.slides[e]), o.slides[e].swiperLoopMoveDOM = !1;\n      }), b && v.forEach(function (e) {\n        o.slides[e].swiperLoopMoveDOM = !0, u.append(o.slides[e]), o.slides[e].swiperLoopMoveDOM = !1;\n      }), o.recalcSlides(), \"auto\" === m.slidesPerView && o.updateSlides(), m.watchSlidesProgress && o.updateSlidesOffset(), s) if (g.length > 0 && y) {\n        if (void 0 === t) {\n          var _e21 = o.slidesGrid[w],\n            _t16 = o.slidesGrid[w + E] - _e21;\n          l ? o.setTranslate(o.translate - _t16) : (o.slideTo(w + E, 0, !1, !0), i && (o.touches[o.isHorizontal() ? \"startX\" : \"startY\"] += _t16));\n        } else i && o.slideToLoop(t, 0, !1, !0);\n      } else if (v.length > 0 && b) if (void 0 === t) {\n        var _e22 = o.slidesGrid[w],\n          _t17 = o.slidesGrid[w - x] - _e22;\n        l ? o.setTranslate(o.translate - _t17) : (o.slideTo(w - x, 0, !1, !0), i && (o.touches[o.isHorizontal() ? \"startX\" : \"startY\"] += _t17));\n      } else o.slideToLoop(t, 0, !1, !0);\n      if (o.allowSlidePrev = c, o.allowSlideNext = p, o.controller && o.controller.control && !n) {\n        var _e23 = {\n          slideRealIndex: t,\n          slideTo: !1,\n          direction: a,\n          setTranslate: i,\n          activeSlideIndex: r,\n          byController: !0\n        };\n        Array.isArray(o.controller.control) ? o.controller.control.forEach(function (t) {\n          !t.destroyed && t.params.loop && t.loopFix(_e23);\n        }) : o.controller.control instanceof o.constructor && o.controller.control.params.loop && o.controller.control.loopFix(_e23);\n      }\n      o.emit(\"loopFix\");\n    },\n    loopDestroy: function loopDestroy() {\n      var e = this,\n        t = e.params,\n        s = e.slidesEl;\n      if (!t.loop || e.virtual && e.params.virtual.enabled) return;\n      e.recalcSlides();\n      var a = [];\n      e.slides.forEach(function (e) {\n        var t = void 0 === e.swiperSlideIndex ? 1 * e.getAttribute(\"data-swiper-slide-index\") : e.swiperSlideIndex;\n        a[t] = e;\n      }), e.slides.forEach(function (e) {\n        e.removeAttribute(\"data-swiper-slide-index\");\n      }), a.forEach(function (e) {\n        s.append(e);\n      }), e.recalcSlides(), e.slideTo(e.realIndex, 0);\n    }\n  };\n  function X(e) {\n    var t = this,\n      s = a(),\n      i = r(),\n      n = t.touchEventsData;\n    n.evCache.push(e);\n    var o = t.params,\n      d = t.touches,\n      c = t.enabled;\n    if (!c) return;\n    if (!o.simulateTouch && \"mouse\" === e.pointerType) return;\n    if (t.animating && o.preventInteractionOnTransition) return;\n    !t.animating && o.cssMode && o.loop && t.loopFix();\n    var p = e;\n    p.originalEvent && (p = p.originalEvent);\n    var u = p.target;\n    if (\"wrapper\" === o.touchEventsTarget && !t.wrapperEl.contains(u)) return;\n    if (\"which\" in p && 3 === p.which) return;\n    if (\"button\" in p && p.button > 0) return;\n    if (n.isTouched && n.isMoved) return;\n    var m = !!o.noSwipingClass && \"\" !== o.noSwipingClass,\n      h = e.composedPath ? e.composedPath() : e.path;\n    m && p.target && p.target.shadowRoot && h && (u = h[0]);\n    var f = o.noSwipingSelector ? o.noSwipingSelector : \".\".concat(o.noSwipingClass),\n      g = !(!p.target || !p.target.shadowRoot);\n    if (o.noSwiping && (g ? function (e, t) {\n      return void 0 === t && (t = this), function t(s) {\n        if (!s || s === a() || s === r()) return null;\n        s.assignedSlot && (s = s.assignedSlot);\n        var i = s.closest(e);\n        return i || s.getRootNode ? i || t(s.getRootNode().host) : null;\n      }(t);\n    }(f, u) : u.closest(f))) return void (t.allowClick = !0);\n    if (o.swipeHandler && !u.closest(o.swipeHandler)) return;\n    d.currentX = p.pageX, d.currentY = p.pageY;\n    var v = d.currentX,\n      w = d.currentY,\n      b = o.edgeSwipeDetection || o.iOSEdgeSwipeDetection,\n      y = o.edgeSwipeThreshold || o.iOSEdgeSwipeThreshold;\n    if (b && (v <= y || v >= i.innerWidth - y)) {\n      if (\"prevent\" !== b) return;\n      e.preventDefault();\n    }\n    Object.assign(n, {\n      isTouched: !0,\n      isMoved: !1,\n      allowTouchCallbacks: !0,\n      isScrolling: void 0,\n      startMoving: void 0\n    }), d.startX = v, d.startY = w, n.touchStartTime = l(), t.allowClick = !0, t.updateSize(), t.swipeDirection = void 0, o.threshold > 0 && (n.allowThresholdMove = !1);\n    var E = !0;\n    u.matches(n.focusableElements) && (E = !1, \"SELECT\" === u.nodeName && (n.isTouched = !1)), s.activeElement && s.activeElement.matches(n.focusableElements) && s.activeElement !== u && s.activeElement.blur();\n    var x = E && t.allowTouchMove && o.touchStartPreventDefault;\n    !o.touchStartForcePreventDefault && !x || u.isContentEditable || p.preventDefault(), o.freeMode && o.freeMode.enabled && t.freeMode && t.animating && !o.cssMode && t.freeMode.onTouchStart(), t.emit(\"touchStart\", p);\n  }\n  function Y(e) {\n    var t = a(),\n      s = this,\n      i = s.touchEventsData,\n      r = s.params,\n      n = s.touches,\n      o = s.rtlTranslate,\n      d = s.enabled;\n    if (!d) return;\n    if (!r.simulateTouch && \"mouse\" === e.pointerType) return;\n    var c = e;\n    if (c.originalEvent && (c = c.originalEvent), !i.isTouched) return void (i.startMoving && i.isScrolling && s.emit(\"touchMoveOpposite\", c));\n    var p = i.evCache.findIndex(function (e) {\n      return e.pointerId === c.pointerId;\n    });\n    p >= 0 && (i.evCache[p] = c);\n    var u = i.evCache.length > 1 ? i.evCache[0] : c,\n      m = u.pageX,\n      h = u.pageY;\n    if (c.preventedByNestedSwiper) return n.startX = m, void (n.startY = h);\n    if (!s.allowTouchMove) return c.target.matches(i.focusableElements) || (s.allowClick = !1), void (i.isTouched && (Object.assign(n, {\n      startX: m,\n      startY: h,\n      prevX: s.touches.currentX,\n      prevY: s.touches.currentY,\n      currentX: m,\n      currentY: h\n    }), i.touchStartTime = l()));\n    if (r.touchReleaseOnEdges && !r.loop) if (s.isVertical()) {\n      if (h < n.startY && s.translate <= s.maxTranslate() || h > n.startY && s.translate >= s.minTranslate()) return i.isTouched = !1, void (i.isMoved = !1);\n    } else if (m < n.startX && s.translate <= s.maxTranslate() || m > n.startX && s.translate >= s.minTranslate()) return;\n    if (t.activeElement && c.target === t.activeElement && c.target.matches(i.focusableElements)) return i.isMoved = !0, void (s.allowClick = !1);\n    if (i.allowTouchCallbacks && s.emit(\"touchMove\", c), c.targetTouches && c.targetTouches.length > 1) return;\n    n.currentX = m, n.currentY = h;\n    var f = n.currentX - n.startX,\n      g = n.currentY - n.startY;\n    if (s.params.threshold && Math.sqrt(Math.pow(f, 2) + Math.pow(g, 2)) < s.params.threshold) return;\n    if (void 0 === i.isScrolling) {\n      var _e24;\n      s.isHorizontal() && n.currentY === n.startY || s.isVertical() && n.currentX === n.startX ? i.isScrolling = !1 : f * f + g * g >= 25 && (_e24 = 180 * Math.atan2(Math.abs(g), Math.abs(f)) / Math.PI, i.isScrolling = s.isHorizontal() ? _e24 > r.touchAngle : 90 - _e24 > r.touchAngle);\n    }\n    if (i.isScrolling && s.emit(\"touchMoveOpposite\", c), void 0 === i.startMoving && (n.currentX === n.startX && n.currentY === n.startY || (i.startMoving = !0)), i.isScrolling || s.zoom && s.params.zoom && s.params.zoom.enabled && i.evCache.length > 1) return void (i.isTouched = !1);\n    if (!i.startMoving) return;\n    s.allowClick = !1, !r.cssMode && c.cancelable && c.preventDefault(), r.touchMoveStopPropagation && !r.nested && c.stopPropagation();\n    var v = s.isHorizontal() ? f : g,\n      w = s.isHorizontal() ? n.currentX - n.previousX : n.currentY - n.previousY;\n    r.oneWayMovement && (v = Math.abs(v) * (o ? 1 : -1), w = Math.abs(w) * (o ? 1 : -1)), n.diff = v, v *= r.touchRatio, o && (v = -v, w = -w);\n    var b = s.touchesDirection;\n    s.swipeDirection = v > 0 ? \"prev\" : \"next\", s.touchesDirection = w > 0 ? \"prev\" : \"next\";\n    var y = s.params.loop && !r.cssMode;\n    if (!i.isMoved) {\n      if (y && s.loopFix({\n        direction: s.swipeDirection\n      }), i.startTranslate = s.getTranslate(), s.setTransition(0), s.animating) {\n        var _e25 = new window.CustomEvent(\"transitionend\", {\n          bubbles: !0,\n          cancelable: !0\n        });\n        s.wrapperEl.dispatchEvent(_e25);\n      }\n      i.allowMomentumBounce = !1, !r.grabCursor || !0 !== s.allowSlideNext && !0 !== s.allowSlidePrev || s.setGrabCursor(!0), s.emit(\"sliderFirstMove\", c);\n    }\n    var E;\n    i.isMoved && b !== s.touchesDirection && y && Math.abs(v) >= 1 && (s.loopFix({\n      direction: s.swipeDirection,\n      setTranslate: !0\n    }), E = !0), s.emit(\"sliderMove\", c), i.isMoved = !0, i.currentTranslate = v + i.startTranslate;\n    var x = !0,\n      S = r.resistanceRatio;\n    if (r.touchReleaseOnEdges && (S = 0), v > 0 ? (y && !E && i.currentTranslate > (r.centeredSlides ? s.minTranslate() - s.size / 2 : s.minTranslate()) && s.loopFix({\n      direction: \"prev\",\n      setTranslate: !0,\n      activeSlideIndex: 0\n    }), i.currentTranslate > s.minTranslate() && (x = !1, r.resistance && (i.currentTranslate = s.minTranslate() - 1 + Math.pow(-s.minTranslate() + i.startTranslate + v, S)))) : v < 0 && (y && !E && i.currentTranslate < (r.centeredSlides ? s.maxTranslate() + s.size / 2 : s.maxTranslate()) && s.loopFix({\n      direction: \"next\",\n      setTranslate: !0,\n      activeSlideIndex: s.slides.length - (\"auto\" === r.slidesPerView ? s.slidesPerViewDynamic() : Math.ceil(parseFloat(r.slidesPerView, 10)))\n    }), i.currentTranslate < s.maxTranslate() && (x = !1, r.resistance && (i.currentTranslate = s.maxTranslate() + 1 - Math.pow(s.maxTranslate() - i.startTranslate - v, S)))), x && (c.preventedByNestedSwiper = !0), !s.allowSlideNext && \"next\" === s.swipeDirection && i.currentTranslate < i.startTranslate && (i.currentTranslate = i.startTranslate), !s.allowSlidePrev && \"prev\" === s.swipeDirection && i.currentTranslate > i.startTranslate && (i.currentTranslate = i.startTranslate), s.allowSlidePrev || s.allowSlideNext || (i.currentTranslate = i.startTranslate), r.threshold > 0) {\n      if (!(Math.abs(v) > r.threshold || i.allowThresholdMove)) return void (i.currentTranslate = i.startTranslate);\n      if (!i.allowThresholdMove) return i.allowThresholdMove = !0, n.startX = n.currentX, n.startY = n.currentY, i.currentTranslate = i.startTranslate, void (n.diff = s.isHorizontal() ? n.currentX - n.startX : n.currentY - n.startY);\n    }\n    r.followFinger && !r.cssMode && ((r.freeMode && r.freeMode.enabled && s.freeMode || r.watchSlidesProgress) && (s.updateActiveIndex(), s.updateSlidesClasses()), r.freeMode && r.freeMode.enabled && s.freeMode && s.freeMode.onTouchMove(), s.updateProgress(i.currentTranslate), s.setTranslate(i.currentTranslate));\n  }\n  function B(e) {\n    var t = this,\n      s = t.touchEventsData,\n      a = s.evCache.findIndex(function (t) {\n        return t.pointerId === e.pointerId;\n      });\n    if (a >= 0 && s.evCache.splice(a, 1), [\"pointercancel\", \"pointerout\", \"pointerleave\"].includes(e.type)) {\n      if (!(\"pointercancel\" === e.type && (t.browser.isSafari || t.browser.isWebView))) return;\n    }\n    var i = t.params,\n      r = t.touches,\n      o = t.rtlTranslate,\n      d = t.slidesGrid,\n      c = t.enabled;\n    if (!c) return;\n    if (!i.simulateTouch && \"mouse\" === e.pointerType) return;\n    var p = e;\n    if (p.originalEvent && (p = p.originalEvent), s.allowTouchCallbacks && t.emit(\"touchEnd\", p), s.allowTouchCallbacks = !1, !s.isTouched) return s.isMoved && i.grabCursor && t.setGrabCursor(!1), s.isMoved = !1, void (s.startMoving = !1);\n    i.grabCursor && s.isMoved && s.isTouched && (!0 === t.allowSlideNext || !0 === t.allowSlidePrev) && t.setGrabCursor(!1);\n    var u = l(),\n      m = u - s.touchStartTime;\n    if (t.allowClick) {\n      var _e26 = p.path || p.composedPath && p.composedPath();\n      t.updateClickedSlide(_e26 && _e26[0] || p.target), t.emit(\"tap click\", p), m < 300 && u - s.lastClickTime < 300 && t.emit(\"doubleTap doubleClick\", p);\n    }\n    if (s.lastClickTime = l(), n(function () {\n      t.destroyed || (t.allowClick = !0);\n    }), !s.isTouched || !s.isMoved || !t.swipeDirection || 0 === r.diff || s.currentTranslate === s.startTranslate) return s.isTouched = !1, s.isMoved = !1, void (s.startMoving = !1);\n    var h;\n    if (s.isTouched = !1, s.isMoved = !1, s.startMoving = !1, h = i.followFinger ? o ? t.translate : -t.translate : -s.currentTranslate, i.cssMode) return;\n    if (i.freeMode && i.freeMode.enabled) return void t.freeMode.onTouchEnd({\n      currentPos: h\n    });\n    var f = 0,\n      g = t.slidesSizesGrid[0];\n    for (var _e27 = 0; _e27 < d.length; _e27 += _e27 < i.slidesPerGroupSkip ? 1 : i.slidesPerGroup) {\n      var _t18 = _e27 < i.slidesPerGroupSkip - 1 ? 1 : i.slidesPerGroup;\n      void 0 !== d[_e27 + _t18] ? h >= d[_e27] && h < d[_e27 + _t18] && (f = _e27, g = d[_e27 + _t18] - d[_e27]) : h >= d[_e27] && (f = _e27, g = d[d.length - 1] - d[d.length - 2]);\n    }\n    var v = null,\n      w = null;\n    i.rewind && (t.isBeginning ? w = i.virtual && i.virtual.enabled && t.virtual ? t.virtual.slides.length - 1 : t.slides.length - 1 : t.isEnd && (v = 0));\n    var b = (h - d[f]) / g,\n      y = f < i.slidesPerGroupSkip - 1 ? 1 : i.slidesPerGroup;\n    if (m > i.longSwipesMs) {\n      if (!i.longSwipes) return void t.slideTo(t.activeIndex);\n      \"next\" === t.swipeDirection && (b >= i.longSwipesRatio ? t.slideTo(i.rewind && t.isEnd ? v : f + y) : t.slideTo(f)), \"prev\" === t.swipeDirection && (b > 1 - i.longSwipesRatio ? t.slideTo(f + y) : null !== w && b < 0 && Math.abs(b) > i.longSwipesRatio ? t.slideTo(w) : t.slideTo(f));\n    } else {\n      if (!i.shortSwipes) return void t.slideTo(t.activeIndex);\n      t.navigation && (p.target === t.navigation.nextEl || p.target === t.navigation.prevEl) ? p.target === t.navigation.nextEl ? t.slideTo(f + y) : t.slideTo(f) : (\"next\" === t.swipeDirection && t.slideTo(null !== v ? v : f + y), \"prev\" === t.swipeDirection && t.slideTo(null !== w ? w : f));\n    }\n  }\n  function N() {\n    var e = this,\n      t = e.params,\n      s = e.el;\n    if (s && 0 === s.offsetWidth) return;\n    t.breakpoints && e.setBreakpoint();\n    var a = e.allowSlideNext,\n      i = e.allowSlidePrev,\n      r = e.snapGrid,\n      n = e.virtual && e.params.virtual.enabled;\n    e.allowSlideNext = !0, e.allowSlidePrev = !0, e.updateSize(), e.updateSlides(), e.updateSlidesClasses();\n    var l = n && t.loop;\n    !(\"auto\" === t.slidesPerView || t.slidesPerView > 1) || !e.isEnd || e.isBeginning || e.params.centeredSlides || l ? e.params.loop && !n ? e.slideToLoop(e.realIndex, 0, !1, !0) : e.slideTo(e.activeIndex, 0, !1, !0) : e.slideTo(e.slides.length - 1, 0, !1, !0), e.autoplay && e.autoplay.running && e.autoplay.paused && (clearTimeout(e.autoplay.resizeTimeout), e.autoplay.resizeTimeout = setTimeout(function () {\n      e.autoplay && e.autoplay.running && e.autoplay.paused && e.autoplay.resume();\n    }, 500)), e.allowSlidePrev = i, e.allowSlideNext = a, e.params.watchOverflow && r !== e.snapGrid && e.checkOverflow();\n  }\n  function q(e) {\n    var t = this;\n    t.enabled && (t.allowClick || (t.params.preventClicks && e.preventDefault(), t.params.preventClicksPropagation && t.animating && (e.stopPropagation(), e.stopImmediatePropagation())));\n  }\n  function R() {\n    var e = this,\n      t = e.wrapperEl,\n      s = e.rtlTranslate,\n      a = e.enabled;\n    if (!a) return;\n    var i;\n    e.previousTranslate = e.translate, e.isHorizontal() ? e.translate = -t.scrollLeft : e.translate = -t.scrollTop, 0 === e.translate && (e.translate = 0), e.updateActiveIndex(), e.updateSlidesClasses();\n    var r = e.maxTranslate() - e.minTranslate();\n    i = 0 === r ? 0 : (e.translate - e.minTranslate()) / r, i !== e.progress && e.updateProgress(s ? -e.translate : e.translate), e.emit(\"setTranslate\", e.translate, !1);\n  }\n  function F(e) {\n    var t = this;\n    A(t, e.target), t.params.cssMode || \"auto\" !== t.params.slidesPerView && !t.params.autoHeight || t.update();\n  }\n  var _ = !1;\n  function V() {}\n  var j = function j(e, t) {\n    var s = a(),\n      i = e.params,\n      r = e.el,\n      n = e.wrapperEl,\n      l = e.device,\n      o = !!i.nested,\n      d = \"on\" === t ? \"addEventListener\" : \"removeEventListener\",\n      c = t;\n    r[d](\"pointerdown\", e.onTouchStart, {\n      passive: !1\n    }), s[d](\"pointermove\", e.onTouchMove, {\n      passive: !1,\n      capture: o\n    }), s[d](\"pointerup\", e.onTouchEnd, {\n      passive: !0\n    }), s[d](\"pointercancel\", e.onTouchEnd, {\n      passive: !0\n    }), s[d](\"pointerout\", e.onTouchEnd, {\n      passive: !0\n    }), s[d](\"pointerleave\", e.onTouchEnd, {\n      passive: !0\n    }), (i.preventClicks || i.preventClicksPropagation) && r[d](\"click\", e.onClick, !0), i.cssMode && n[d](\"scroll\", e.onScroll), i.updateOnWindowResize ? e[c](l.ios || l.android ? \"resize orientationchange observerUpdate\" : \"resize observerUpdate\", N, !0) : e[c](\"observerUpdate\", N, !0), r[d](\"load\", e.onLoad, {\n      capture: !0\n    });\n  };\n  var W = function W(e, t) {\n    return e.grid && t.grid && t.grid.rows > 1;\n  };\n  var U = {\n    init: !0,\n    direction: \"horizontal\",\n    oneWayMovement: !1,\n    touchEventsTarget: \"wrapper\",\n    initialSlide: 0,\n    speed: 300,\n    cssMode: !1,\n    updateOnWindowResize: !0,\n    resizeObserver: !0,\n    nested: !1,\n    createElements: !1,\n    enabled: !0,\n    focusableElements: \"input, select, option, textarea, button, video, label\",\n    width: null,\n    height: null,\n    preventInteractionOnTransition: !1,\n    userAgent: null,\n    url: null,\n    edgeSwipeDetection: !1,\n    edgeSwipeThreshold: 20,\n    autoHeight: !1,\n    setWrapperSize: !1,\n    virtualTranslate: !1,\n    effect: \"slide\",\n    breakpoints: void 0,\n    breakpointsBase: \"window\",\n    spaceBetween: 0,\n    slidesPerView: 1,\n    slidesPerGroup: 1,\n    slidesPerGroupSkip: 0,\n    slidesPerGroupAuto: !1,\n    centeredSlides: !1,\n    centeredSlidesBounds: !1,\n    slidesOffsetBefore: 0,\n    slidesOffsetAfter: 0,\n    normalizeSlideIndex: !0,\n    centerInsufficientSlides: !1,\n    watchOverflow: !0,\n    roundLengths: !1,\n    touchRatio: 1,\n    touchAngle: 45,\n    simulateTouch: !0,\n    shortSwipes: !0,\n    longSwipes: !0,\n    longSwipesRatio: .5,\n    longSwipesMs: 300,\n    followFinger: !0,\n    allowTouchMove: !0,\n    threshold: 5,\n    touchMoveStopPropagation: !1,\n    touchStartPreventDefault: !0,\n    touchStartForcePreventDefault: !1,\n    touchReleaseOnEdges: !1,\n    uniqueNavElements: !0,\n    resistance: !0,\n    resistanceRatio: .85,\n    watchSlidesProgress: !1,\n    grabCursor: !1,\n    preventClicks: !0,\n    preventClicksPropagation: !0,\n    slideToClickedSlide: !1,\n    loop: !1,\n    loopedSlides: null,\n    loopPreventsSliding: !0,\n    rewind: !1,\n    allowSlidePrev: !0,\n    allowSlideNext: !0,\n    swipeHandler: null,\n    noSwiping: !0,\n    noSwipingClass: \"swiper-no-swiping\",\n    noSwipingSelector: null,\n    passiveListeners: !0,\n    maxBackfaceHiddenSlides: 10,\n    containerModifierClass: \"swiper-\",\n    slideClass: \"swiper-slide\",\n    slideActiveClass: \"swiper-slide-active\",\n    slideVisibleClass: \"swiper-slide-visible\",\n    slideNextClass: \"swiper-slide-next\",\n    slidePrevClass: \"swiper-slide-prev\",\n    wrapperClass: \"swiper-wrapper\",\n    lazyPreloaderClass: \"swiper-lazy-preloader\",\n    lazyPreloadPrevNext: 0,\n    runCallbacksOnInit: !0,\n    _emitClasses: !1\n  };\n  function K(e, t) {\n    return function (s) {\n      void 0 === s && (s = {});\n      var a = Object.keys(s)[0],\n        i = s[a];\n      \"object\" == _typeof(i) && null !== i ? ([\"navigation\", \"pagination\", \"scrollbar\"].indexOf(a) >= 0 && !0 === e[a] && (e[a] = {\n        auto: !0\n      }), a in e && \"enabled\" in i ? (!0 === e[a] && (e[a] = {\n        enabled: !0\n      }), \"object\" != _typeof(e[a]) || \"enabled\" in e[a] || (e[a].enabled = !0), e[a] || (e[a] = {\n        enabled: !1\n      }), p(t, s)) : p(t, s)) : p(t, s);\n    };\n  }\n  var Z = {\n      eventsEmitter: z,\n      update: k,\n      translate: O,\n      transition: {\n        setTransition: function setTransition(e, t) {\n          var s = this;\n          s.params.cssMode || (s.wrapperEl.style.transitionDuration = \"\".concat(e, \"ms\")), s.emit(\"setTransition\", e, t);\n        },\n        transitionStart: function transitionStart(e, t) {\n          void 0 === e && (e = !0);\n          var s = this,\n            a = s.params;\n          a.cssMode || (a.autoHeight && s.updateAutoHeight(), D({\n            swiper: s,\n            runCallbacks: e,\n            direction: t,\n            step: \"Start\"\n          }));\n        },\n        transitionEnd: function transitionEnd(e, t) {\n          void 0 === e && (e = !0);\n          var s = this,\n            a = s.params;\n          s.animating = !1, a.cssMode || (s.setTransition(0), D({\n            swiper: s,\n            runCallbacks: e,\n            direction: t,\n            step: \"End\"\n          }));\n        }\n      },\n      slide: G,\n      loop: H,\n      grabCursor: {\n        setGrabCursor: function setGrabCursor(e) {\n          var t = this;\n          if (!t.params.simulateTouch || t.params.watchOverflow && t.isLocked || t.params.cssMode) return;\n          var s = \"container\" === t.params.touchEventsTarget ? t.el : t.wrapperEl;\n          t.isElement && (t.__preventObserver__ = !0), s.style.cursor = \"move\", s.style.cursor = e ? \"grabbing\" : \"grab\", t.isElement && requestAnimationFrame(function () {\n            t.__preventObserver__ = !1;\n          });\n        },\n        unsetGrabCursor: function unsetGrabCursor() {\n          var e = this;\n          e.params.watchOverflow && e.isLocked || e.params.cssMode || (e.isElement && (e.__preventObserver__ = !0), e[\"container\" === e.params.touchEventsTarget ? \"el\" : \"wrapperEl\"].style.cursor = \"\", e.isElement && requestAnimationFrame(function () {\n            e.__preventObserver__ = !1;\n          }));\n        }\n      },\n      events: {\n        attachEvents: function attachEvents() {\n          var e = this,\n            t = a(),\n            s = e.params;\n          e.onTouchStart = X.bind(e), e.onTouchMove = Y.bind(e), e.onTouchEnd = B.bind(e), s.cssMode && (e.onScroll = R.bind(e)), e.onClick = q.bind(e), e.onLoad = F.bind(e), _ || (t.addEventListener(\"touchstart\", V), _ = !0), j(e, \"on\");\n        },\n        detachEvents: function detachEvents() {\n          j(this, \"off\");\n        }\n      },\n      breakpoints: {\n        setBreakpoint: function setBreakpoint() {\n          var e = this,\n            t = e.realIndex,\n            s = e.initialized,\n            a = e.params,\n            i = e.el,\n            r = a.breakpoints;\n          if (!r || r && 0 === Object.keys(r).length) return;\n          var n = e.getBreakpoint(r, e.params.breakpointsBase, e.el);\n          if (!n || e.currentBreakpoint === n) return;\n          var l = (n in r ? r[n] : void 0) || e.originalParams,\n            o = W(e, a),\n            d = W(e, l),\n            c = a.enabled;\n          o && !d ? (i.classList.remove(\"\".concat(a.containerModifierClass, \"grid\"), \"\".concat(a.containerModifierClass, \"grid-column\")), e.emitContainerClasses()) : !o && d && (i.classList.add(\"\".concat(a.containerModifierClass, \"grid\")), (l.grid.fill && \"column\" === l.grid.fill || !l.grid.fill && \"column\" === a.grid.fill) && i.classList.add(\"\".concat(a.containerModifierClass, \"grid-column\")), e.emitContainerClasses()), [\"navigation\", \"pagination\", \"scrollbar\"].forEach(function (t) {\n            if (void 0 === l[t]) return;\n            var s = a[t] && a[t].enabled,\n              i = l[t] && l[t].enabled;\n            s && !i && e[t].disable(), !s && i && e[t].enable();\n          });\n          var u = l.direction && l.direction !== a.direction,\n            m = a.loop && (l.slidesPerView !== a.slidesPerView || u);\n          u && s && e.changeDirection(), p(e.params, l);\n          var h = e.params.enabled;\n          Object.assign(e, {\n            allowTouchMove: e.params.allowTouchMove,\n            allowSlideNext: e.params.allowSlideNext,\n            allowSlidePrev: e.params.allowSlidePrev\n          }), c && !h ? e.disable() : !c && h && e.enable(), e.currentBreakpoint = n, e.emit(\"_beforeBreakpoint\", l), m && s && (e.loopDestroy(), e.loopCreate(t), e.updateSlides()), e.emit(\"breakpoint\", l);\n        },\n        getBreakpoint: function getBreakpoint(e, t, s) {\n          if (void 0 === t && (t = \"window\"), !e || \"container\" === t && !s) return;\n          var a = !1;\n          var i = r(),\n            n = \"window\" === t ? i.innerHeight : s.clientHeight,\n            l = Object.keys(e).map(function (e) {\n              if (\"string\" == typeof e && 0 === e.indexOf(\"@\")) {\n                var _t19 = parseFloat(e.substr(1));\n                return {\n                  value: n * _t19,\n                  point: e\n                };\n              }\n              return {\n                value: e,\n                point: e\n              };\n            });\n          l.sort(function (e, t) {\n            return parseInt(e.value, 10) - parseInt(t.value, 10);\n          });\n          for (var _e28 = 0; _e28 < l.length; _e28 += 1) {\n            var _l$_e = l[_e28],\n              _r6 = _l$_e.point,\n              _n4 = _l$_e.value;\n            \"window\" === t ? i.matchMedia(\"(min-width: \".concat(_n4, \"px)\")).matches && (a = _r6) : _n4 <= s.clientWidth && (a = _r6);\n          }\n          return a || \"max\";\n        }\n      },\n      checkOverflow: {\n        checkOverflow: function checkOverflow() {\n          var e = this,\n            t = e.isLocked,\n            s = e.params,\n            a = s.slidesOffsetBefore;\n          if (a) {\n            var _t20 = e.slides.length - 1,\n              _s17 = e.slidesGrid[_t20] + e.slidesSizesGrid[_t20] + 2 * a;\n            e.isLocked = e.size > _s17;\n          } else e.isLocked = 1 === e.snapGrid.length;\n          !0 === s.allowSlideNext && (e.allowSlideNext = !e.isLocked), !0 === s.allowSlidePrev && (e.allowSlidePrev = !e.isLocked), t && t !== e.isLocked && (e.isEnd = !1), t !== e.isLocked && e.emit(e.isLocked ? \"lock\" : \"unlock\");\n        }\n      },\n      classes: {\n        addClasses: function addClasses() {\n          var _i$classList;\n          var e = this,\n            t = e.classNames,\n            s = e.params,\n            a = e.rtl,\n            i = e.el,\n            r = e.device,\n            n = function (e, t) {\n              var s = [];\n              return e.forEach(function (e) {\n                \"object\" == _typeof(e) ? Object.keys(e).forEach(function (a) {\n                  e[a] && s.push(t + a);\n                }) : \"string\" == typeof e && s.push(t + e);\n              }), s;\n            }([\"initialized\", s.direction, {\n              \"free-mode\": e.params.freeMode && s.freeMode.enabled\n            }, {\n              autoheight: s.autoHeight\n            }, {\n              rtl: a\n            }, {\n              grid: s.grid && s.grid.rows > 1\n            }, {\n              \"grid-column\": s.grid && s.grid.rows > 1 && \"column\" === s.grid.fill\n            }, {\n              android: r.android\n            }, {\n              ios: r.ios\n            }, {\n              \"css-mode\": s.cssMode\n            }, {\n              centered: s.cssMode && s.centeredSlides\n            }, {\n              \"watch-progress\": s.watchSlidesProgress\n            }], s.containerModifierClass);\n          t.push.apply(t, _toConsumableArray(n)), (_i$classList = i.classList).add.apply(_i$classList, _toConsumableArray(t)), e.emitContainerClasses();\n        },\n        removeClasses: function removeClasses() {\n          var _e$classList;\n          var e = this.el,\n            t = this.classNames;\n          (_e$classList = e.classList).remove.apply(_e$classList, _toConsumableArray(t)), this.emitContainerClasses();\n        }\n      }\n    },\n    Q = {};\n  var J = /*#__PURE__*/function () {\n    function J() {\n      var _i9, _i10, _l$modules;\n      _classCallCheck(this, J);\n      var e, t;\n      for (var s = arguments.length, i = new Array(s), r = 0; r < s; r++) i[r] = arguments[r];\n      1 === i.length && i[0].constructor && \"Object\" === Object.prototype.toString.call(i[0]).slice(8, -1) ? t = i[0] : (_i9 = i, _i10 = _slicedToArray(_i9, 2), e = _i10[0], t = _i10[1], _i9), t || (t = {}), t = p({}, t), e && !t.el && (t.el = e);\n      var n = a();\n      if (t.el && \"string\" == typeof t.el && n.querySelectorAll(t.el).length > 1) {\n        var _e29 = [];\n        return n.querySelectorAll(t.el).forEach(function (s) {\n          var a = p({}, t, {\n            el: s\n          });\n          _e29.push(new J(a));\n        }), _e29;\n      }\n      var l = this;\n      l.__swiper__ = !0, l.support = C(), l.device = P({\n        userAgent: t.userAgent\n      }), l.browser = L(), l.eventsListeners = {}, l.eventsAnyListeners = [], l.modules = _toConsumableArray(l.__modules__), t.modules && Array.isArray(t.modules) && (_l$modules = l.modules).push.apply(_l$modules, _toConsumableArray(t.modules));\n      var o = {};\n      l.modules.forEach(function (e) {\n        e({\n          params: t,\n          swiper: l,\n          extendParams: K(t, o),\n          on: l.on.bind(l),\n          once: l.once.bind(l),\n          off: l.off.bind(l),\n          emit: l.emit.bind(l)\n        });\n      });\n      var d = p({}, U, o);\n      return l.params = p({}, d, Q, t), l.originalParams = p({}, l.params), l.passedParams = p({}, t), l.params && l.params.on && Object.keys(l.params.on).forEach(function (e) {\n        l.on(e, l.params.on[e]);\n      }), l.params && l.params.onAny && l.onAny(l.params.onAny), Object.assign(l, {\n        enabled: l.params.enabled,\n        el: e,\n        classNames: [],\n        slides: [],\n        slidesGrid: [],\n        snapGrid: [],\n        slidesSizesGrid: [],\n        isHorizontal: function isHorizontal() {\n          return \"horizontal\" === l.params.direction;\n        },\n        isVertical: function isVertical() {\n          return \"vertical\" === l.params.direction;\n        },\n        activeIndex: 0,\n        realIndex: 0,\n        isBeginning: !0,\n        isEnd: !1,\n        translate: 0,\n        previousTranslate: 0,\n        progress: 0,\n        velocity: 0,\n        animating: !1,\n        cssOverflowAdjustment: function cssOverflowAdjustment() {\n          return Math.trunc(this.translate / Math.pow(2, 23)) * Math.pow(2, 23);\n        },\n        allowSlideNext: l.params.allowSlideNext,\n        allowSlidePrev: l.params.allowSlidePrev,\n        touchEventsData: {\n          isTouched: void 0,\n          isMoved: void 0,\n          allowTouchCallbacks: void 0,\n          touchStartTime: void 0,\n          isScrolling: void 0,\n          currentTranslate: void 0,\n          startTranslate: void 0,\n          allowThresholdMove: void 0,\n          focusableElements: l.params.focusableElements,\n          lastClickTime: 0,\n          clickTimeout: void 0,\n          velocities: [],\n          allowMomentumBounce: void 0,\n          startMoving: void 0,\n          evCache: []\n        },\n        allowClick: !0,\n        allowTouchMove: l.params.allowTouchMove,\n        touches: {\n          startX: 0,\n          startY: 0,\n          currentX: 0,\n          currentY: 0,\n          diff: 0\n        },\n        imagesToLoad: [],\n        imagesLoaded: 0\n      }), l.emit(\"_swiper\"), l.params.init && l.init(), l;\n    }\n    _createClass(J, [{\n      key: \"getSlideIndex\",\n      value: function getSlideIndex(e) {\n        var t = this.slidesEl,\n          s = this.params,\n          a = b(f(t, \".\".concat(s.slideClass, \", swiper-slide\"))[0]);\n        return b(e) - a;\n      }\n    }, {\n      key: \"getSlideIndexByData\",\n      value: function getSlideIndexByData(e) {\n        return this.getSlideIndex(this.slides.filter(function (t) {\n          return 1 * t.getAttribute(\"data-swiper-slide-index\") === e;\n        })[0]);\n      }\n    }, {\n      key: \"recalcSlides\",\n      value: function recalcSlides() {\n        var e = this.slidesEl,\n          t = this.params;\n        this.slides = f(e, \".\".concat(t.slideClass, \", swiper-slide\"));\n      }\n    }, {\n      key: \"enable\",\n      value: function enable() {\n        var e = this;\n        e.enabled || (e.enabled = !0, e.params.grabCursor && e.setGrabCursor(), e.emit(\"enable\"));\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        var e = this;\n        e.enabled && (e.enabled = !1, e.params.grabCursor && e.unsetGrabCursor(), e.emit(\"disable\"));\n      }\n    }, {\n      key: \"setProgress\",\n      value: function setProgress(e, t) {\n        var s = this;\n        e = Math.min(Math.max(e, 0), 1);\n        var a = s.minTranslate(),\n          i = (s.maxTranslate() - a) * e + a;\n        s.translateTo(i, void 0 === t ? 0 : t), s.updateActiveIndex(), s.updateSlidesClasses();\n      }\n    }, {\n      key: \"emitContainerClasses\",\n      value: function emitContainerClasses() {\n        var e = this;\n        if (!e.params._emitClasses || !e.el) return;\n        var t = e.el.className.split(\" \").filter(function (t) {\n          return 0 === t.indexOf(\"swiper\") || 0 === t.indexOf(e.params.containerModifierClass);\n        });\n        e.emit(\"_containerClasses\", t.join(\" \"));\n      }\n    }, {\n      key: \"getSlideClasses\",\n      value: function getSlideClasses(e) {\n        var t = this;\n        return t.destroyed ? \"\" : e.className.split(\" \").filter(function (e) {\n          return 0 === e.indexOf(\"swiper-slide\") || 0 === e.indexOf(t.params.slideClass);\n        }).join(\" \");\n      }\n    }, {\n      key: \"emitSlidesClasses\",\n      value: function emitSlidesClasses() {\n        var e = this;\n        if (!e.params._emitClasses || !e.el) return;\n        var t = [];\n        e.slides.forEach(function (s) {\n          var a = e.getSlideClasses(s);\n          t.push({\n            slideEl: s,\n            classNames: a\n          }), e.emit(\"_slideClass\", s, a);\n        }), e.emit(\"_slideClasses\", t);\n      }\n    }, {\n      key: \"slidesPerViewDynamic\",\n      value: function slidesPerViewDynamic(e, t) {\n        void 0 === e && (e = \"current\"), void 0 === t && (t = !1);\n        var s = this.params,\n          a = this.slides,\n          i = this.slidesGrid,\n          r = this.slidesSizesGrid,\n          n = this.size,\n          l = this.activeIndex;\n        var o = 1;\n        if (s.centeredSlides) {\n          var _e30,\n            _t21 = a[l] ? a[l].swiperSlideSize : 0;\n          for (var _s18 = l + 1; _s18 < a.length; _s18 += 1) a[_s18] && !_e30 && (_t21 += a[_s18].swiperSlideSize, o += 1, _t21 > n && (_e30 = !0));\n          for (var _s19 = l - 1; _s19 >= 0; _s19 -= 1) a[_s19] && !_e30 && (_t21 += a[_s19].swiperSlideSize, o += 1, _t21 > n && (_e30 = !0));\n        } else if (\"current\" === e) for (var _e31 = l + 1; _e31 < a.length; _e31 += 1) {\n          (t ? i[_e31] + r[_e31] - i[l] < n : i[_e31] - i[l] < n) && (o += 1);\n        } else for (var _e32 = l - 1; _e32 >= 0; _e32 -= 1) {\n          i[l] - i[_e32] < n && (o += 1);\n        }\n        return o;\n      }\n    }, {\n      key: \"update\",\n      value: function update() {\n        var e = this;\n        if (!e || e.destroyed) return;\n        var t = e.snapGrid,\n          s = e.params;\n        function a() {\n          var t = e.rtlTranslate ? -1 * e.translate : e.translate,\n            s = Math.min(Math.max(t, e.maxTranslate()), e.minTranslate());\n          e.setTranslate(s), e.updateActiveIndex(), e.updateSlidesClasses();\n        }\n        var i;\n        if (s.breakpoints && e.setBreakpoint(), _toConsumableArray(e.el.querySelectorAll('[loading=\"lazy\"]')).forEach(function (t) {\n          t.complete && A(e, t);\n        }), e.updateSize(), e.updateSlides(), e.updateProgress(), e.updateSlidesClasses(), s.freeMode && s.freeMode.enabled && !s.cssMode) a(), s.autoHeight && e.updateAutoHeight();else {\n          if ((\"auto\" === s.slidesPerView || s.slidesPerView > 1) && e.isEnd && !s.centeredSlides) {\n            var _t22 = e.virtual && s.virtual.enabled ? e.virtual.slides : e.slides;\n            i = e.slideTo(_t22.length - 1, 0, !1, !0);\n          } else i = e.slideTo(e.activeIndex, 0, !1, !0);\n          i || a();\n        }\n        s.watchOverflow && t !== e.snapGrid && e.checkOverflow(), e.emit(\"update\");\n      }\n    }, {\n      key: \"changeDirection\",\n      value: function changeDirection(e, t) {\n        void 0 === t && (t = !0);\n        var s = this,\n          a = s.params.direction;\n        return e || (e = \"horizontal\" === a ? \"vertical\" : \"horizontal\"), e === a || \"horizontal\" !== e && \"vertical\" !== e || (s.el.classList.remove(\"\".concat(s.params.containerModifierClass).concat(a)), s.el.classList.add(\"\".concat(s.params.containerModifierClass).concat(e)), s.emitContainerClasses(), s.params.direction = e, s.slides.forEach(function (t) {\n          \"vertical\" === e ? t.style.width = \"\" : t.style.height = \"\";\n        }), s.emit(\"changeDirection\"), t && s.update()), s;\n      }\n    }, {\n      key: \"changeLanguageDirection\",\n      value: function changeLanguageDirection(e) {\n        var t = this;\n        t.rtl && \"rtl\" === e || !t.rtl && \"ltr\" === e || (t.rtl = \"rtl\" === e, t.rtlTranslate = \"horizontal\" === t.params.direction && t.rtl, t.rtl ? (t.el.classList.add(\"\".concat(t.params.containerModifierClass, \"rtl\")), t.el.dir = \"rtl\") : (t.el.classList.remove(\"\".concat(t.params.containerModifierClass, \"rtl\")), t.el.dir = \"ltr\"), t.update());\n      }\n    }, {\n      key: \"mount\",\n      value: function mount(e) {\n        var t = this;\n        if (t.mounted) return !0;\n        var s = e || t.params.el;\n        if (\"string\" == typeof s && (s = document.querySelector(s)), !s) return !1;\n        s.swiper = t, s.shadowEl && (t.isElement = !0);\n        var a = function a() {\n          return \".\".concat((t.params.wrapperClass || \"\").trim().split(\" \").join(\".\"));\n        };\n        var i = function () {\n          if (s && s.shadowRoot && s.shadowRoot.querySelector) {\n            return s.shadowRoot.querySelector(a());\n          }\n          return f(s, a())[0];\n        }();\n        return !i && t.params.createElements && (i = g(\"div\", t.params.wrapperClass), s.append(i), f(s, \".\".concat(t.params.slideClass)).forEach(function (e) {\n          i.append(e);\n        })), Object.assign(t, {\n          el: s,\n          wrapperEl: i,\n          slidesEl: t.isElement ? s : i,\n          mounted: !0,\n          rtl: \"rtl\" === s.dir.toLowerCase() || \"rtl\" === w(s, \"direction\"),\n          rtlTranslate: \"horizontal\" === t.params.direction && (\"rtl\" === s.dir.toLowerCase() || \"rtl\" === w(s, \"direction\")),\n          wrongRTL: \"-webkit-box\" === w(i, \"display\")\n        }), !0;\n      }\n    }, {\n      key: \"init\",\n      value: function init(e) {\n        var t = this;\n        if (t.initialized) return t;\n        return !1 === t.mount(e) || (t.emit(\"beforeInit\"), t.params.breakpoints && t.setBreakpoint(), t.addClasses(), t.updateSize(), t.updateSlides(), t.params.watchOverflow && t.checkOverflow(), t.params.grabCursor && t.enabled && t.setGrabCursor(), t.params.loop && t.virtual && t.params.virtual.enabled ? t.slideTo(t.params.initialSlide + t.virtual.slidesBefore, 0, t.params.runCallbacksOnInit, !1, !0) : t.slideTo(t.params.initialSlide, 0, t.params.runCallbacksOnInit, !1, !0), t.params.loop && t.loopCreate(), t.attachEvents(), _toConsumableArray(t.el.querySelectorAll('[loading=\"lazy\"]')).forEach(function (e) {\n          e.complete ? A(t, e) : e.addEventListener(\"load\", function (e) {\n            A(t, e.target);\n          });\n        }), I(t), t.initialized = !0, I(t), t.emit(\"init\"), t.emit(\"afterInit\")), t;\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy(e, t) {\n        void 0 === e && (e = !0), void 0 === t && (t = !0);\n        var s = this,\n          a = s.params,\n          i = s.el,\n          r = s.wrapperEl,\n          n = s.slides;\n        return void 0 === s.params || s.destroyed || (s.emit(\"beforeDestroy\"), s.initialized = !1, s.detachEvents(), a.loop && s.loopDestroy(), t && (s.removeClasses(), i.removeAttribute(\"style\"), r.removeAttribute(\"style\"), n && n.length && n.forEach(function (e) {\n          e.classList.remove(a.slideVisibleClass, a.slideActiveClass, a.slideNextClass, a.slidePrevClass), e.removeAttribute(\"style\"), e.removeAttribute(\"data-swiper-slide-index\");\n        })), s.emit(\"destroy\"), Object.keys(s.eventsListeners).forEach(function (e) {\n          s.off(e);\n        }), !1 !== e && (s.el.swiper = null, function (e) {\n          var t = e;\n          Object.keys(t).forEach(function (e) {\n            try {\n              t[e] = null;\n            } catch (e) {}\n            try {\n              delete t[e];\n            } catch (e) {}\n          });\n        }(s)), s.destroyed = !0), null;\n      }\n    }], [{\n      key: \"extendDefaults\",\n      value: function extendDefaults(e) {\n        p(Q, e);\n      }\n    }, {\n      key: \"extendedDefaults\",\n      get: function get() {\n        return Q;\n      }\n    }, {\n      key: \"defaults\",\n      get: function get() {\n        return U;\n      }\n    }, {\n      key: \"installModule\",\n      value: function installModule(e) {\n        J.prototype.__modules__ || (J.prototype.__modules__ = []);\n        var t = J.prototype.__modules__;\n        \"function\" == typeof e && t.indexOf(e) < 0 && t.push(e);\n      }\n    }, {\n      key: \"use\",\n      value: function use(e) {\n        return Array.isArray(e) ? (e.forEach(function (e) {\n          return J.installModule(e);\n        }), J) : (J.installModule(e), J);\n      }\n    }]);\n    return J;\n  }();\n  function ee(e, t, s, a) {\n    return e.params.createElements && Object.keys(a).forEach(function (i) {\n      if (!s[i] && !0 === s.auto) {\n        var _r7 = f(e.el, \".\".concat(a[i]))[0];\n        _r7 || (_r7 = g(\"div\", a[i]), _r7.className = a[i], e.el.append(_r7)), s[i] = _r7, t[i] = _r7;\n      }\n    }), s;\n  }\n  function te(e) {\n    return void 0 === e && (e = \"\"), \".\".concat(e.trim().replace(/([\\.:!+\\/])/g, \"\\\\$1\").replace(/ /g, \".\"));\n  }\n  function se(e) {\n    var t = this,\n      s = t.params,\n      a = t.slidesEl;\n    s.loop && t.loopDestroy();\n    var i = function i(e) {\n      if (\"string\" == typeof e) {\n        var _t23 = document.createElement(\"div\");\n        _t23.innerHTML = e, a.append(_t23.children[0]), _t23.innerHTML = \"\";\n      } else a.append(e);\n    };\n    if (\"object\" == _typeof(e) && \"length\" in e) for (var _t24 = 0; _t24 < e.length; _t24 += 1) e[_t24] && i(e[_t24]);else i(e);\n    t.recalcSlides(), s.loop && t.loopCreate(), s.observer && !t.isElement || t.update();\n  }\n  function ae(e) {\n    var t = this,\n      s = t.params,\n      a = t.activeIndex,\n      i = t.slidesEl;\n    s.loop && t.loopDestroy();\n    var r = a + 1;\n    var n = function n(e) {\n      if (\"string\" == typeof e) {\n        var _t25 = document.createElement(\"div\");\n        _t25.innerHTML = e, i.prepend(_t25.children[0]), _t25.innerHTML = \"\";\n      } else i.prepend(e);\n    };\n    if (\"object\" == _typeof(e) && \"length\" in e) {\n      for (var _t26 = 0; _t26 < e.length; _t26 += 1) e[_t26] && n(e[_t26]);\n      r = a + e.length;\n    } else n(e);\n    t.recalcSlides(), s.loop && t.loopCreate(), s.observer && !t.isElement || t.update(), t.slideTo(r, 0, !1);\n  }\n  function ie(e, t) {\n    var s = this,\n      a = s.params,\n      i = s.activeIndex,\n      r = s.slidesEl;\n    var n = i;\n    a.loop && (n -= s.loopedSlides, s.loopDestroy(), s.recalcSlides());\n    var l = s.slides.length;\n    if (e <= 0) return void s.prependSlide(t);\n    if (e >= l) return void s.appendSlide(t);\n    var o = n > e ? n + 1 : n;\n    var d = [];\n    for (var _t27 = l - 1; _t27 >= e; _t27 -= 1) {\n      var _e33 = s.slides[_t27];\n      _e33.remove(), d.unshift(_e33);\n    }\n    if (\"object\" == _typeof(t) && \"length\" in t) {\n      for (var _e34 = 0; _e34 < t.length; _e34 += 1) t[_e34] && r.append(t[_e34]);\n      o = n > e ? n + t.length : n;\n    } else r.append(t);\n    for (var _e35 = 0; _e35 < d.length; _e35 += 1) r.append(d[_e35]);\n    s.recalcSlides(), a.loop && s.loopCreate(), a.observer && !s.isElement || s.update(), a.loop ? s.slideTo(o + s.loopedSlides, 0, !1) : s.slideTo(o, 0, !1);\n  }\n  function re(e) {\n    var t = this,\n      s = t.params,\n      a = t.activeIndex;\n    var i = a;\n    s.loop && (i -= t.loopedSlides, t.loopDestroy());\n    var r,\n      n = i;\n    if (\"object\" == _typeof(e) && \"length\" in e) {\n      for (var _s20 = 0; _s20 < e.length; _s20 += 1) r = e[_s20], t.slides[r] && t.slides[r].remove(), r < n && (n -= 1);\n      n = Math.max(n, 0);\n    } else r = e, t.slides[r] && t.slides[r].remove(), r < n && (n -= 1), n = Math.max(n, 0);\n    t.recalcSlides(), s.loop && t.loopCreate(), s.observer && !t.isElement || t.update(), s.loop ? t.slideTo(n + t.loopedSlides, 0, !1) : t.slideTo(n, 0, !1);\n  }\n  function ne() {\n    var e = this,\n      t = [];\n    for (var _s21 = 0; _s21 < e.slides.length; _s21 += 1) t.push(_s21);\n    e.removeSlide(t);\n  }\n  function le(e) {\n    var t = e.effect,\n      s = e.swiper,\n      a = e.on,\n      i = e.setTranslate,\n      r = e.setTransition,\n      n = e.overwriteParams,\n      l = e.perspective,\n      o = e.recreateShadows,\n      d = e.getEffectParams;\n    var c;\n    a(\"beforeInit\", function () {\n      if (s.params.effect !== t) return;\n      s.classNames.push(\"\".concat(s.params.containerModifierClass).concat(t)), l && l() && s.classNames.push(\"\".concat(s.params.containerModifierClass, \"3d\"));\n      var e = n ? n() : {};\n      Object.assign(s.params, e), Object.assign(s.originalParams, e);\n    }), a(\"setTranslate\", function () {\n      s.params.effect === t && i();\n    }), a(\"setTransition\", function (e, a) {\n      s.params.effect === t && r(a);\n    }), a(\"transitionEnd\", function () {\n      if (s.params.effect === t && o) {\n        if (!d || !d().slideShadows) return;\n        s.slides.forEach(function (e) {\n          e.querySelectorAll(\".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left\").forEach(function (e) {\n            return e.remove();\n          });\n        }), o();\n      }\n    }), a(\"virtualUpdate\", function () {\n      s.params.effect === t && (s.slides.length || (c = !0), requestAnimationFrame(function () {\n        c && s.slides && s.slides.length && (i(), c = !1);\n      }));\n    });\n  }\n  function oe(e, t) {\n    var s = h(t);\n    return s !== t && (s.style.backfaceVisibility = \"hidden\", s.style[\"-webkit-backface-visibility\"] = \"hidden\"), s;\n  }\n  function de(e) {\n    var t = e.swiper,\n      s = e.duration,\n      a = e.transformElements,\n      i = e.allSlides;\n    var r = t.activeIndex;\n    if (t.params.virtualTranslate && 0 !== s) {\n      var _e36,\n        _s22 = !1;\n      _e36 = i ? a : a.filter(function (e) {\n        var s = e.classList.contains(\"swiper-slide-transform\") ? function (e) {\n          if (!e.parentElement) return t.slides.filter(function (t) {\n            return t.shadowEl && t.shadowEl === e.parentNode;\n          })[0];\n          return e.parentElement;\n        }(e) : e;\n        return t.getSlideIndex(s) === r;\n      }), _e36.forEach(function (e) {\n        E(e, function () {\n          if (_s22) return;\n          if (!t || t.destroyed) return;\n          _s22 = !0, t.animating = !1;\n          var e = new window.CustomEvent(\"transitionend\", {\n            bubbles: !0,\n            cancelable: !0\n          });\n          t.wrapperEl.dispatchEvent(e);\n        });\n      });\n    }\n  }\n  function ce(e, t, s) {\n    var a = \"swiper-slide-shadow\" + (s ? \"-\".concat(s) : \"\"),\n      i = h(t);\n    var r = i.querySelector(\".\".concat(a));\n    return r || (r = g(\"div\", \"swiper-slide-shadow\" + (s ? \"-\".concat(s) : \"\")), i.append(r)), r;\n  }\n  Object.keys(Z).forEach(function (e) {\n    Object.keys(Z[e]).forEach(function (t) {\n      J.prototype[t] = Z[e][t];\n    });\n  }), J.use([function (e) {\n    var t = e.swiper,\n      s = e.on,\n      a = e.emit;\n    var i = r();\n    var n = null,\n      l = null;\n    var o = function o() {\n        t && !t.destroyed && t.initialized && (a(\"beforeResize\"), a(\"resize\"));\n      },\n      d = function d() {\n        t && !t.destroyed && t.initialized && a(\"orientationchange\");\n      };\n    s(\"init\", function () {\n      t.params.resizeObserver && void 0 !== i.ResizeObserver ? t && !t.destroyed && t.initialized && (n = new ResizeObserver(function (e) {\n        l = i.requestAnimationFrame(function () {\n          var s = t.width,\n            a = t.height;\n          var i = s,\n            r = a;\n          e.forEach(function (e) {\n            var s = e.contentBoxSize,\n              a = e.contentRect,\n              n = e.target;\n            n && n !== t.el || (i = a ? a.width : (s[0] || s).inlineSize, r = a ? a.height : (s[0] || s).blockSize);\n          }), i === s && r === a || o();\n        });\n      }), n.observe(t.el)) : (i.addEventListener(\"resize\", o), i.addEventListener(\"orientationchange\", d));\n    }), s(\"destroy\", function () {\n      l && i.cancelAnimationFrame(l), n && n.unobserve && t.el && (n.unobserve(t.el), n = null), i.removeEventListener(\"resize\", o), i.removeEventListener(\"orientationchange\", d);\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on,\n      i = e.emit;\n    var n = [],\n      l = r(),\n      o = function o(e, s) {\n        void 0 === s && (s = {});\n        var a = new (l.MutationObserver || l.WebkitMutationObserver)(function (e) {\n          if (t.__preventObserver__) return;\n          if (1 === e.length) return void i(\"observerUpdate\", e[0]);\n          var s = function s() {\n            i(\"observerUpdate\", e[0]);\n          };\n          l.requestAnimationFrame ? l.requestAnimationFrame(s) : l.setTimeout(s, 0);\n        });\n        a.observe(e, {\n          attributes: void 0 === s.attributes || s.attributes,\n          childList: void 0 === s.childList || s.childList,\n          characterData: void 0 === s.characterData || s.characterData\n        }), n.push(a);\n      };\n    s({\n      observer: !1,\n      observeParents: !1,\n      observeSlideChildren: !1\n    }), a(\"init\", function () {\n      if (t.params.observer) {\n        if (t.params.observeParents) {\n          var _e37 = y(t.el);\n          for (var _t28 = 0; _t28 < _e37.length; _t28 += 1) o(_e37[_t28]);\n        }\n        o(t.el, {\n          childList: t.params.observeSlideChildren\n        }), o(t.wrapperEl, {\n          attributes: !1\n        });\n      }\n    }), a(\"destroy\", function () {\n      n.forEach(function (e) {\n        e.disconnect();\n      }), n.splice(0, n.length);\n    });\n  }]);\n  var pe = [function (e) {\n    var t,\n      s = e.swiper,\n      i = e.extendParams,\n      r = e.on,\n      n = e.emit;\n    i({\n      virtual: {\n        enabled: !1,\n        slides: [],\n        cache: !0,\n        renderSlide: null,\n        renderExternal: null,\n        renderExternalUpdate: !0,\n        addSlidesBefore: 0,\n        addSlidesAfter: 0\n      }\n    });\n    var l = a();\n    s.virtual = {\n      cache: {},\n      from: void 0,\n      to: void 0,\n      slides: [],\n      offset: 0,\n      slidesGrid: []\n    };\n    var o = l.createElement(\"div\");\n    function d(e, t) {\n      var a = s.params.virtual;\n      if (a.cache && s.virtual.cache[t]) return s.virtual.cache[t];\n      var i;\n      return a.renderSlide ? (i = a.renderSlide.call(s, e, t), \"string\" == typeof i && (o.innerHTML = i, i = o.children[0])) : i = s.isElement ? g(\"swiper-slide\") : g(\"div\", s.params.slideClass), i.setAttribute(\"data-swiper-slide-index\", t), a.renderSlide || (i.innerHTML = e), a.cache && (s.virtual.cache[t] = i), i;\n    }\n    function c(e) {\n      var _s$params = s.params,\n        t = _s$params.slidesPerView,\n        a = _s$params.slidesPerGroup,\n        i = _s$params.centeredSlides,\n        r = _s$params.loop,\n        _s$params$virtual = s.params.virtual,\n        l = _s$params$virtual.addSlidesBefore,\n        o = _s$params$virtual.addSlidesAfter,\n        _s$virtual = s.virtual,\n        c = _s$virtual.from,\n        p = _s$virtual.to,\n        u = _s$virtual.slides,\n        m = _s$virtual.slidesGrid,\n        h = _s$virtual.offset;\n      s.params.cssMode || s.updateActiveIndex();\n      var g = s.activeIndex || 0;\n      var v, w, b;\n      v = s.rtlTranslate ? \"right\" : s.isHorizontal() ? \"left\" : \"top\", i ? (w = Math.floor(t / 2) + a + o, b = Math.floor(t / 2) + a + l) : (w = t + (a - 1) + o, b = (r ? t : a) + l);\n      var y = g - b,\n        E = g + w;\n      r || (y = Math.max(y, 0), E = Math.min(E, u.length - 1));\n      var x = (s.slidesGrid[y] || 0) - (s.slidesGrid[0] || 0);\n      function S() {\n        s.updateSlides(), s.updateProgress(), s.updateSlidesClasses(), n(\"virtualUpdate\");\n      }\n      if (r && g >= b ? (y -= b, i || (x += s.slidesGrid[0])) : r && g < b && (y = -b, i && (x += s.slidesGrid[0])), Object.assign(s.virtual, {\n        from: y,\n        to: E,\n        offset: x,\n        slidesGrid: s.slidesGrid,\n        slidesBefore: b,\n        slidesAfter: w\n      }), c === y && p === E && !e) return s.slidesGrid !== m && x !== h && s.slides.forEach(function (e) {\n        e.style[v] = x - Math.abs(s.cssOverflowAdjustment()) + \"px\";\n      }), s.updateProgress(), void n(\"virtualUpdate\");\n      if (s.params.virtual.renderExternal) return s.params.virtual.renderExternal.call(s, {\n        offset: x,\n        from: y,\n        to: E,\n        slides: function () {\n          var e = [];\n          for (var _t29 = y; _t29 <= E; _t29 += 1) e.push(u[_t29]);\n          return e;\n        }()\n      }), void (s.params.virtual.renderExternalUpdate ? S() : n(\"virtualUpdate\"));\n      var T = [],\n        M = [],\n        C = function C(e) {\n          var t = e;\n          return e < 0 ? t = u.length + e : t >= u.length && (t -= u.length), t;\n        };\n      if (e) s.slidesEl.querySelectorAll(\".\".concat(s.params.slideClass, \", swiper-slide\")).forEach(function (e) {\n        e.remove();\n      });else for (var _e38 = c; _e38 <= p; _e38 += 1) if (_e38 < y || _e38 > E) {\n        var _t30 = C(_e38);\n        s.slidesEl.querySelectorAll(\".\".concat(s.params.slideClass, \"[data-swiper-slide-index=\\\"\").concat(_t30, \"\\\"], swiper-slide[data-swiper-slide-index=\\\"\").concat(_t30, \"\\\"]\")).forEach(function (e) {\n          e.remove();\n        });\n      }\n      var P = r ? -u.length : 0,\n        L = r ? 2 * u.length : u.length;\n      for (var _t31 = P; _t31 < L; _t31 += 1) if (_t31 >= y && _t31 <= E) {\n        var _s23 = C(_t31);\n        void 0 === p || e ? M.push(_s23) : (_t31 > p && M.push(_s23), _t31 < c && T.push(_s23));\n      }\n      if (M.forEach(function (e) {\n        s.slidesEl.append(d(u[e], e));\n      }), r) for (var _e39 = T.length - 1; _e39 >= 0; _e39 -= 1) {\n        var _t32 = T[_e39];\n        s.slidesEl.prepend(d(u[_t32], _t32));\n      } else T.sort(function (e, t) {\n        return t - e;\n      }), T.forEach(function (e) {\n        s.slidesEl.prepend(d(u[e], e));\n      });\n      f(s.slidesEl, \".swiper-slide, swiper-slide\").forEach(function (e) {\n        e.style[v] = x - Math.abs(s.cssOverflowAdjustment()) + \"px\";\n      }), S();\n    }\n    r(\"beforeInit\", function () {\n      if (!s.params.virtual.enabled) return;\n      var e;\n      if (void 0 === s.passedParams.virtual.slides) {\n        var _t33 = _toConsumableArray(s.slidesEl.children).filter(function (e) {\n          return e.matches(\".\".concat(s.params.slideClass, \", swiper-slide\"));\n        });\n        _t33 && _t33.length && (s.virtual.slides = _toConsumableArray(_t33), e = !0, _t33.forEach(function (e, t) {\n          e.setAttribute(\"data-swiper-slide-index\", t), s.virtual.cache[t] = e, e.remove();\n        }));\n      }\n      e || (s.virtual.slides = s.params.virtual.slides), s.classNames.push(\"\".concat(s.params.containerModifierClass, \"virtual\")), s.params.watchSlidesProgress = !0, s.originalParams.watchSlidesProgress = !0, s.params.initialSlide || c();\n    }), r(\"setTranslate\", function () {\n      s.params.virtual.enabled && (s.params.cssMode && !s._immediateVirtual ? (clearTimeout(t), t = setTimeout(function () {\n        c();\n      }, 100)) : c());\n    }), r(\"init update resize\", function () {\n      s.params.virtual.enabled && s.params.cssMode && u(s.wrapperEl, \"--swiper-virtual-size\", \"\".concat(s.virtualSize, \"px\"));\n    }), Object.assign(s.virtual, {\n      appendSlide: function appendSlide(e) {\n        if (\"object\" == _typeof(e) && \"length\" in e) for (var _t34 = 0; _t34 < e.length; _t34 += 1) e[_t34] && s.virtual.slides.push(e[_t34]);else s.virtual.slides.push(e);\n        c(!0);\n      },\n      prependSlide: function prependSlide(e) {\n        var t = s.activeIndex;\n        var a = t + 1,\n          i = 1;\n        if (Array.isArray(e)) {\n          for (var _t35 = 0; _t35 < e.length; _t35 += 1) e[_t35] && s.virtual.slides.unshift(e[_t35]);\n          a = t + e.length, i = e.length;\n        } else s.virtual.slides.unshift(e);\n        if (s.params.virtual.cache) {\n          var _e40 = s.virtual.cache,\n            _t36 = {};\n          Object.keys(_e40).forEach(function (s) {\n            var a = _e40[s],\n              r = a.getAttribute(\"data-swiper-slide-index\");\n            r && a.setAttribute(\"data-swiper-slide-index\", parseInt(r, 10) + i), _t36[parseInt(s, 10) + i] = a;\n          }), s.virtual.cache = _t36;\n        }\n        c(!0), s.slideTo(a, 0);\n      },\n      removeSlide: function removeSlide(e) {\n        if (null == e) return;\n        var t = s.activeIndex;\n        if (Array.isArray(e)) for (var _a12 = e.length - 1; _a12 >= 0; _a12 -= 1) s.virtual.slides.splice(e[_a12], 1), s.params.virtual.cache && delete s.virtual.cache[e[_a12]], e[_a12] < t && (t -= 1), t = Math.max(t, 0);else s.virtual.slides.splice(e, 1), s.params.virtual.cache && delete s.virtual.cache[e], e < t && (t -= 1), t = Math.max(t, 0);\n        c(!0), s.slideTo(t, 0);\n      },\n      removeAllSlides: function removeAllSlides() {\n        s.virtual.slides = [], s.params.virtual.cache && (s.virtual.cache = {}), c(!0), s.slideTo(0, 0);\n      },\n      update: c\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      i = e.on,\n      n = e.emit;\n    var l = a(),\n      o = r();\n    function d(e) {\n      if (!t.enabled) return;\n      var s = t.rtlTranslate;\n      var a = e;\n      a.originalEvent && (a = a.originalEvent);\n      var i = a.keyCode || a.charCode,\n        r = t.params.keyboard.pageUpDown,\n        d = r && 33 === i,\n        c = r && 34 === i,\n        p = 37 === i,\n        u = 39 === i,\n        m = 38 === i,\n        h = 40 === i;\n      if (!t.allowSlideNext && (t.isHorizontal() && u || t.isVertical() && h || c)) return !1;\n      if (!t.allowSlidePrev && (t.isHorizontal() && p || t.isVertical() && m || d)) return !1;\n      if (!(a.shiftKey || a.altKey || a.ctrlKey || a.metaKey || l.activeElement && l.activeElement.nodeName && (\"input\" === l.activeElement.nodeName.toLowerCase() || \"textarea\" === l.activeElement.nodeName.toLowerCase()))) {\n        if (t.params.keyboard.onlyInViewport && (d || c || p || u || m || h)) {\n          var _e41 = !1;\n          if (y(t.el, \".\".concat(t.params.slideClass, \", swiper-slide\")).length > 0 && 0 === y(t.el, \".\".concat(t.params.slideActiveClass)).length) return;\n          var _a13 = t.el,\n            _i11 = _a13.clientWidth,\n            _r8 = _a13.clientHeight,\n            _n5 = o.innerWidth,\n            _l4 = o.innerHeight,\n            _d2 = v(_a13);\n          s && (_d2.left -= _a13.scrollLeft);\n          var _c2 = [[_d2.left, _d2.top], [_d2.left + _i11, _d2.top], [_d2.left, _d2.top + _r8], [_d2.left + _i11, _d2.top + _r8]];\n          for (var _t37 = 0; _t37 < _c2.length; _t37 += 1) {\n            var _s24 = _c2[_t37];\n            if (_s24[0] >= 0 && _s24[0] <= _n5 && _s24[1] >= 0 && _s24[1] <= _l4) {\n              if (0 === _s24[0] && 0 === _s24[1]) continue;\n              _e41 = !0;\n            }\n          }\n          if (!_e41) return;\n        }\n        t.isHorizontal() ? ((d || c || p || u) && (a.preventDefault ? a.preventDefault() : a.returnValue = !1), ((c || u) && !s || (d || p) && s) && t.slideNext(), ((d || p) && !s || (c || u) && s) && t.slidePrev()) : ((d || c || m || h) && (a.preventDefault ? a.preventDefault() : a.returnValue = !1), (c || h) && t.slideNext(), (d || m) && t.slidePrev()), n(\"keyPress\", i);\n      }\n    }\n    function c() {\n      t.keyboard.enabled || (l.addEventListener(\"keydown\", d), t.keyboard.enabled = !0);\n    }\n    function p() {\n      t.keyboard.enabled && (l.removeEventListener(\"keydown\", d), t.keyboard.enabled = !1);\n    }\n    t.keyboard = {\n      enabled: !1\n    }, s({\n      keyboard: {\n        enabled: !1,\n        onlyInViewport: !0,\n        pageUpDown: !0\n      }\n    }), i(\"init\", function () {\n      t.params.keyboard.enabled && c();\n    }), i(\"destroy\", function () {\n      t.keyboard.enabled && p();\n    }), Object.assign(t.keyboard, {\n      enable: c,\n      disable: p\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on,\n      i = e.emit;\n    var o = r();\n    var d;\n    s({\n      mousewheel: {\n        enabled: !1,\n        releaseOnEdges: !1,\n        invert: !1,\n        forceToAxis: !1,\n        sensitivity: 1,\n        eventsTarget: \"container\",\n        thresholdDelta: null,\n        thresholdTime: null,\n        noMousewheelClass: \"swiper-no-mousewheel\"\n      }\n    }), t.mousewheel = {\n      enabled: !1\n    };\n    var c,\n      p = l();\n    var u = [];\n    function m() {\n      t.enabled && (t.mouseEntered = !0);\n    }\n    function h() {\n      t.enabled && (t.mouseEntered = !1);\n    }\n    function f(e) {\n      return !(t.params.mousewheel.thresholdDelta && e.delta < t.params.mousewheel.thresholdDelta) && !(t.params.mousewheel.thresholdTime && l() - p < t.params.mousewheel.thresholdTime) && (e.delta >= 6 && l() - p < 60 || (e.direction < 0 ? t.isEnd && !t.params.loop || t.animating || (t.slideNext(), i(\"scroll\", e.raw)) : t.isBeginning && !t.params.loop || t.animating || (t.slidePrev(), i(\"scroll\", e.raw)), p = new o.Date().getTime(), !1));\n    }\n    function g(e) {\n      var s = e,\n        a = !0;\n      if (!t.enabled) return;\n      if (e.target.closest(\".\".concat(t.params.mousewheel.noMousewheelClass))) return;\n      var r = t.params.mousewheel;\n      t.params.cssMode && s.preventDefault();\n      var o = t.el;\n      \"container\" !== t.params.mousewheel.eventsTarget && (o = document.querySelector(t.params.mousewheel.eventsTarget));\n      var p = o && o.contains(s.target);\n      if (!t.mouseEntered && !p && !r.releaseOnEdges) return !0;\n      s.originalEvent && (s = s.originalEvent);\n      var m = 0;\n      var h = t.rtlTranslate ? -1 : 1,\n        g = function (e) {\n          var t = 0,\n            s = 0,\n            a = 0,\n            i = 0;\n          return \"detail\" in e && (s = e.detail), \"wheelDelta\" in e && (s = -e.wheelDelta / 120), \"wheelDeltaY\" in e && (s = -e.wheelDeltaY / 120), \"wheelDeltaX\" in e && (t = -e.wheelDeltaX / 120), \"axis\" in e && e.axis === e.HORIZONTAL_AXIS && (t = s, s = 0), a = 10 * t, i = 10 * s, \"deltaY\" in e && (i = e.deltaY), \"deltaX\" in e && (a = e.deltaX), e.shiftKey && !a && (a = i, i = 0), (a || i) && e.deltaMode && (1 === e.deltaMode ? (a *= 40, i *= 40) : (a *= 800, i *= 800)), a && !t && (t = a < 1 ? -1 : 1), i && !s && (s = i < 1 ? -1 : 1), {\n            spinX: t,\n            spinY: s,\n            pixelX: a,\n            pixelY: i\n          };\n        }(s);\n      if (r.forceToAxis) {\n        if (t.isHorizontal()) {\n          if (!(Math.abs(g.pixelX) > Math.abs(g.pixelY))) return !0;\n          m = -g.pixelX * h;\n        } else {\n          if (!(Math.abs(g.pixelY) > Math.abs(g.pixelX))) return !0;\n          m = -g.pixelY;\n        }\n      } else m = Math.abs(g.pixelX) > Math.abs(g.pixelY) ? -g.pixelX * h : -g.pixelY;\n      if (0 === m) return !0;\n      r.invert && (m = -m);\n      var v = t.getTranslate() + m * r.sensitivity;\n      if (v >= t.minTranslate() && (v = t.minTranslate()), v <= t.maxTranslate() && (v = t.maxTranslate()), a = !!t.params.loop || !(v === t.minTranslate() || v === t.maxTranslate()), a && t.params.nested && s.stopPropagation(), t.params.freeMode && t.params.freeMode.enabled) {\n        var _e42 = {\n            time: l(),\n            delta: Math.abs(m),\n            direction: Math.sign(m)\n          },\n          _a14 = c && _e42.time < c.time + 500 && _e42.delta <= c.delta && _e42.direction === c.direction;\n        if (!_a14) {\n          c = void 0;\n          var _l5 = t.getTranslate() + m * r.sensitivity;\n          var _o5 = t.isBeginning,\n            _p2 = t.isEnd;\n          if (_l5 >= t.minTranslate() && (_l5 = t.minTranslate()), _l5 <= t.maxTranslate() && (_l5 = t.maxTranslate()), t.setTransition(0), t.setTranslate(_l5), t.updateProgress(), t.updateActiveIndex(), t.updateSlidesClasses(), (!_o5 && t.isBeginning || !_p2 && t.isEnd) && t.updateSlidesClasses(), t.params.loop && t.loopFix({\n            direction: _e42.direction < 0 ? \"next\" : \"prev\",\n            byMousewheel: !0\n          }), t.params.freeMode.sticky) {\n            clearTimeout(d), d = void 0, u.length >= 15 && u.shift();\n            var _s25 = u.length ? u[u.length - 1] : void 0,\n              _a15 = u[0];\n            if (u.push(_e42), _s25 && (_e42.delta > _s25.delta || _e42.direction !== _s25.direction)) u.splice(0);else if (u.length >= 15 && _e42.time - _a15.time < 500 && _a15.delta - _e42.delta >= 1 && _e42.delta <= 6) {\n              var _s26 = m > 0 ? .8 : .2;\n              c = _e42, u.splice(0), d = n(function () {\n                t.slideToClosest(t.params.speed, !0, void 0, _s26);\n              }, 0);\n            }\n            d || (d = n(function () {\n              c = _e42, u.splice(0), t.slideToClosest(t.params.speed, !0, void 0, .5);\n            }, 500));\n          }\n          if (_a14 || i(\"scroll\", s), t.params.autoplay && t.params.autoplayDisableOnInteraction && t.autoplay.stop(), _l5 === t.minTranslate() || _l5 === t.maxTranslate()) return !0;\n        }\n      } else {\n        var _s27 = {\n          time: l(),\n          delta: Math.abs(m),\n          direction: Math.sign(m),\n          raw: e\n        };\n        u.length >= 2 && u.shift();\n        var _a16 = u.length ? u[u.length - 1] : void 0;\n        if (u.push(_s27), _a16 ? (_s27.direction !== _a16.direction || _s27.delta > _a16.delta || _s27.time > _a16.time + 150) && f(_s27) : f(_s27), function (e) {\n          var s = t.params.mousewheel;\n          if (e.direction < 0) {\n            if (t.isEnd && !t.params.loop && s.releaseOnEdges) return !0;\n          } else if (t.isBeginning && !t.params.loop && s.releaseOnEdges) return !0;\n          return !1;\n        }(_s27)) return !0;\n      }\n      return s.preventDefault ? s.preventDefault() : s.returnValue = !1, !1;\n    }\n    function v(e) {\n      var s = t.el;\n      \"container\" !== t.params.mousewheel.eventsTarget && (s = document.querySelector(t.params.mousewheel.eventsTarget)), s[e](\"mouseenter\", m), s[e](\"mouseleave\", h), s[e](\"wheel\", g);\n    }\n    function w() {\n      return t.params.cssMode ? (t.wrapperEl.removeEventListener(\"wheel\", g), !0) : !t.mousewheel.enabled && (v(\"addEventListener\"), t.mousewheel.enabled = !0, !0);\n    }\n    function b() {\n      return t.params.cssMode ? (t.wrapperEl.addEventListener(event, g), !0) : !!t.mousewheel.enabled && (v(\"removeEventListener\"), t.mousewheel.enabled = !1, !0);\n    }\n    a(\"init\", function () {\n      !t.params.mousewheel.enabled && t.params.cssMode && b(), t.params.mousewheel.enabled && w();\n    }), a(\"destroy\", function () {\n      t.params.cssMode && w(), t.mousewheel.enabled && b();\n    }), Object.assign(t.mousewheel, {\n      enable: w,\n      disable: b\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on,\n      i = e.emit;\n    s({\n      navigation: {\n        nextEl: null,\n        prevEl: null,\n        hideOnClick: !1,\n        disabledClass: \"swiper-button-disabled\",\n        hiddenClass: \"swiper-button-hidden\",\n        lockClass: \"swiper-button-lock\",\n        navigationDisabledClass: \"swiper-navigation-disabled\"\n      }\n    }), t.navigation = {\n      nextEl: null,\n      prevEl: null\n    };\n    var r = function r(e) {\n      return Array.isArray(e) || (e = [e].filter(function (e) {\n        return !!e;\n      })), e;\n    };\n    function n(e) {\n      var s;\n      return e && \"string\" == typeof e && t.isElement && (s = t.el.shadowRoot.querySelector(e), s) ? s : (e && (\"string\" == typeof e && (s = _toConsumableArray(document.querySelectorAll(e))), t.params.uniqueNavElements && \"string\" == typeof e && s.length > 1 && 1 === t.el.querySelectorAll(e).length && (s = t.el.querySelector(e))), e && !s ? e : s);\n    }\n    function l(e, s) {\n      var a = t.params.navigation;\n      (e = r(e)).forEach(function (e) {\n        var _e$classList2;\n        e && ((_e$classList2 = e.classList)[s ? \"add\" : \"remove\"].apply(_e$classList2, _toConsumableArray(a.disabledClass.split(\" \"))), \"BUTTON\" === e.tagName && (e.disabled = s), t.params.watchOverflow && t.enabled && e.classList[t.isLocked ? \"add\" : \"remove\"](a.lockClass));\n      });\n    }\n    function o() {\n      var _t$navigation = t.navigation,\n        e = _t$navigation.nextEl,\n        s = _t$navigation.prevEl;\n      if (t.params.loop) return l(s, !1), void l(e, !1);\n      l(s, t.isBeginning && !t.params.rewind), l(e, t.isEnd && !t.params.rewind);\n    }\n    function d(e) {\n      e.preventDefault(), (!t.isBeginning || t.params.loop || t.params.rewind) && (t.slidePrev(), i(\"navigationPrev\"));\n    }\n    function c(e) {\n      e.preventDefault(), (!t.isEnd || t.params.loop || t.params.rewind) && (t.slideNext(), i(\"navigationNext\"));\n    }\n    function p() {\n      var e = t.params.navigation;\n      if (t.params.navigation = ee(t, t.originalParams.navigation, t.params.navigation, {\n        nextEl: \"swiper-button-next\",\n        prevEl: \"swiper-button-prev\"\n      }), !e.nextEl && !e.prevEl) return;\n      var s = n(e.nextEl),\n        a = n(e.prevEl);\n      Object.assign(t.navigation, {\n        nextEl: s,\n        prevEl: a\n      }), s = r(s), a = r(a);\n      var i = function i(s, a) {\n        var _s$classList2;\n        s && s.addEventListener(\"click\", \"next\" === a ? c : d), !t.enabled && s && (_s$classList2 = s.classList).add.apply(_s$classList2, _toConsumableArray(e.lockClass.split(\" \")));\n      };\n      s.forEach(function (e) {\n        return i(e, \"next\");\n      }), a.forEach(function (e) {\n        return i(e, \"prev\");\n      });\n    }\n    function u() {\n      var _t$navigation2 = t.navigation,\n        e = _t$navigation2.nextEl,\n        s = _t$navigation2.prevEl;\n      e = r(e), s = r(s);\n      var a = function a(e, s) {\n        var _e$classList3;\n        e.removeEventListener(\"click\", \"next\" === s ? c : d), (_e$classList3 = e.classList).remove.apply(_e$classList3, _toConsumableArray(t.params.navigation.disabledClass.split(\" \")));\n      };\n      e.forEach(function (e) {\n        return a(e, \"next\");\n      }), s.forEach(function (e) {\n        return a(e, \"prev\");\n      });\n    }\n    a(\"init\", function () {\n      !1 === t.params.navigation.enabled ? m() : (p(), o());\n    }), a(\"toEdge fromEdge lock unlock\", function () {\n      o();\n    }), a(\"destroy\", function () {\n      u();\n    }), a(\"enable disable\", function () {\n      var _t$navigation3 = t.navigation,\n        e = _t$navigation3.nextEl,\n        s = _t$navigation3.prevEl;\n      e = r(e), s = r(s), [].concat(_toConsumableArray(e), _toConsumableArray(s)).filter(function (e) {\n        return !!e;\n      }).forEach(function (e) {\n        return e.classList[t.enabled ? \"remove\" : \"add\"](t.params.navigation.lockClass);\n      });\n    }), a(\"click\", function (e, s) {\n      var _t$navigation4 = t.navigation,\n        a = _t$navigation4.nextEl,\n        n = _t$navigation4.prevEl;\n      a = r(a), n = r(n);\n      var l = s.target;\n      if (t.params.navigation.hideOnClick && !n.includes(l) && !a.includes(l)) {\n        if (t.pagination && t.params.pagination && t.params.pagination.clickable && (t.pagination.el === l || t.pagination.el.contains(l))) return;\n        var _e43;\n        a.length ? _e43 = a[0].classList.contains(t.params.navigation.hiddenClass) : n.length && (_e43 = n[0].classList.contains(t.params.navigation.hiddenClass)), i(!0 === _e43 ? \"navigationShow\" : \"navigationHide\"), [].concat(_toConsumableArray(a), _toConsumableArray(n)).filter(function (e) {\n          return !!e;\n        }).forEach(function (e) {\n          return e.classList.toggle(t.params.navigation.hiddenClass);\n        });\n      }\n    });\n    var m = function m() {\n      var _t$el$classList;\n      (_t$el$classList = t.el.classList).add.apply(_t$el$classList, _toConsumableArray(t.params.navigation.navigationDisabledClass.split(\" \"))), u();\n    };\n    Object.assign(t.navigation, {\n      enable: function enable() {\n        var _t$el$classList2;\n        (_t$el$classList2 = t.el.classList).remove.apply(_t$el$classList2, _toConsumableArray(t.params.navigation.navigationDisabledClass.split(\" \"))), p(), o();\n      },\n      disable: m,\n      update: o,\n      init: p,\n      destroy: u\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on,\n      i = e.emit;\n    var r = \"swiper-pagination\";\n    var n;\n    s({\n      pagination: {\n        el: null,\n        bulletElement: \"span\",\n        clickable: !1,\n        hideOnClick: !1,\n        renderBullet: null,\n        renderProgressbar: null,\n        renderFraction: null,\n        renderCustom: null,\n        progressbarOpposite: !1,\n        type: \"bullets\",\n        dynamicBullets: !1,\n        dynamicMainBullets: 1,\n        formatFractionCurrent: function formatFractionCurrent(e) {\n          return e;\n        },\n        formatFractionTotal: function formatFractionTotal(e) {\n          return e;\n        },\n        bulletClass: \"\".concat(r, \"-bullet\"),\n        bulletActiveClass: \"\".concat(r, \"-bullet-active\"),\n        modifierClass: \"\".concat(r, \"-\"),\n        currentClass: \"\".concat(r, \"-current\"),\n        totalClass: \"\".concat(r, \"-total\"),\n        hiddenClass: \"\".concat(r, \"-hidden\"),\n        progressbarFillClass: \"\".concat(r, \"-progressbar-fill\"),\n        progressbarOppositeClass: \"\".concat(r, \"-progressbar-opposite\"),\n        clickableClass: \"\".concat(r, \"-clickable\"),\n        lockClass: \"\".concat(r, \"-lock\"),\n        horizontalClass: \"\".concat(r, \"-horizontal\"),\n        verticalClass: \"\".concat(r, \"-vertical\"),\n        paginationDisabledClass: \"\".concat(r, \"-disabled\")\n      }\n    }), t.pagination = {\n      el: null,\n      bullets: []\n    };\n    var l = 0;\n    var o = function o(e) {\n      return Array.isArray(e) || (e = [e].filter(function (e) {\n        return !!e;\n      })), e;\n    };\n    function d() {\n      return !t.params.pagination.el || !t.pagination.el || Array.isArray(t.pagination.el) && 0 === t.pagination.el.length;\n    }\n    function c(e, s) {\n      var a = t.params.pagination.bulletActiveClass;\n      e && (e = e[(\"prev\" === s ? \"previous\" : \"next\") + \"ElementSibling\"]) && (e.classList.add(\"\".concat(a, \"-\").concat(s)), (e = e[(\"prev\" === s ? \"previous\" : \"next\") + \"ElementSibling\"]) && e.classList.add(\"\".concat(a, \"-\").concat(s, \"-\").concat(s)));\n    }\n    function p(e) {\n      var s = e.target.closest(te(t.params.pagination.bulletClass));\n      if (!s) return;\n      e.preventDefault();\n      var a = b(s) * t.params.slidesPerGroup;\n      if (t.params.loop) {\n        if (t.realIndex === a) return;\n        var _e44 = t.getSlideIndexByData(a),\n          _s28 = t.getSlideIndexByData(t.realIndex);\n        _e44 > t.slides.length - t.loopedSlides && t.loopFix({\n          direction: _e44 > _s28 ? \"next\" : \"prev\",\n          activeSlideIndex: _e44,\n          slideTo: !1\n        }), t.slideToLoop(a);\n      } else t.slideTo(a);\n    }\n    function u() {\n      var e = t.rtl,\n        s = t.params.pagination;\n      if (d()) return;\n      var a,\n        r,\n        p = t.pagination.el;\n      p = o(p);\n      var u = t.virtual && t.params.virtual.enabled ? t.virtual.slides.length : t.slides.length,\n        m = t.params.loop ? Math.ceil(u / t.params.slidesPerGroup) : t.snapGrid.length;\n      if (t.params.loop ? (r = t.previousRealIndex || 0, a = t.params.slidesPerGroup > 1 ? Math.floor(t.realIndex / t.params.slidesPerGroup) : t.realIndex) : void 0 !== t.snapIndex ? (a = t.snapIndex, r = t.previousSnapIndex) : (r = t.previousIndex || 0, a = t.activeIndex || 0), \"bullets\" === s.type && t.pagination.bullets && t.pagination.bullets.length > 0) {\n        var _i12 = t.pagination.bullets;\n        var _o6, _d3, _u2;\n        if (s.dynamicBullets && (n = x(_i12[0], t.isHorizontal() ? \"width\" : \"height\", !0), p.forEach(function (e) {\n          e.style[t.isHorizontal() ? \"width\" : \"height\"] = n * (s.dynamicMainBullets + 4) + \"px\";\n        }), s.dynamicMainBullets > 1 && void 0 !== r && (l += a - (r || 0), l > s.dynamicMainBullets - 1 ? l = s.dynamicMainBullets - 1 : l < 0 && (l = 0)), _o6 = Math.max(a - l, 0), _d3 = _o6 + (Math.min(_i12.length, s.dynamicMainBullets) - 1), _u2 = (_d3 + _o6) / 2), _i12.forEach(function (e) {\n          var _e$classList4;\n          var t = _toConsumableArray([\"\", \"-next\", \"-next-next\", \"-prev\", \"-prev-prev\", \"-main\"].map(function (e) {\n            return \"\".concat(s.bulletActiveClass).concat(e);\n          })).map(function (e) {\n            return \"string\" == typeof e && e.includes(\" \") ? e.split(\" \") : e;\n          }).flat();\n          (_e$classList4 = e.classList).remove.apply(_e$classList4, _toConsumableArray(t));\n        }), p.length > 1) _i12.forEach(function (e) {\n          var _e$classList5, _e$classList6;\n          var i = b(e);\n          i === a ? (_e$classList5 = e.classList).add.apply(_e$classList5, _toConsumableArray(s.bulletActiveClass.split(\" \"))) : t.isElement && e.setAttribute(\"part\", \"bullet\"), s.dynamicBullets && (i >= _o6 && i <= _d3 && (_e$classList6 = e.classList).add.apply(_e$classList6, _toConsumableArray(\"\".concat(s.bulletActiveClass, \"-main\").split(\" \"))), i === _o6 && c(e, \"prev\"), i === _d3 && c(e, \"next\"));\n        });else {\n          var _e45$classList;\n          var _e45 = _i12[a];\n          if (_e45 && (_e45$classList = _e45.classList).add.apply(_e45$classList, _toConsumableArray(s.bulletActiveClass.split(\" \"))), t.isElement && _i12.forEach(function (e, t) {\n            e.setAttribute(\"part\", t === a ? \"bullet-active\" : \"bullet\");\n          }), s.dynamicBullets) {\n            var _e46 = _i12[_o6],\n              _t38 = _i12[_d3];\n            for (var _e47 = _o6; _e47 <= _d3; _e47 += 1) {\n              var _i12$_e47$classList;\n              _i12[_e47] && (_i12$_e47$classList = _i12[_e47].classList).add.apply(_i12$_e47$classList, _toConsumableArray(\"\".concat(s.bulletActiveClass, \"-main\").split(\" \")));\n            }\n            c(_e46, \"prev\"), c(_t38, \"next\");\n          }\n        }\n        if (s.dynamicBullets) {\n          var _a17 = Math.min(_i12.length, s.dynamicMainBullets + 4),\n            _r9 = (n * _a17 - n) / 2 - _u2 * n,\n            _l6 = e ? \"right\" : \"left\";\n          _i12.forEach(function (e) {\n            e.style[t.isHorizontal() ? _l6 : \"top\"] = \"\".concat(_r9, \"px\");\n          });\n        }\n      }\n      p.forEach(function (e, r) {\n        if (\"fraction\" === s.type && (e.querySelectorAll(te(s.currentClass)).forEach(function (e) {\n          e.textContent = s.formatFractionCurrent(a + 1);\n        }), e.querySelectorAll(te(s.totalClass)).forEach(function (e) {\n          e.textContent = s.formatFractionTotal(m);\n        })), \"progressbar\" === s.type) {\n          var _i13;\n          _i13 = s.progressbarOpposite ? t.isHorizontal() ? \"vertical\" : \"horizontal\" : t.isHorizontal() ? \"horizontal\" : \"vertical\";\n          var _r10 = (a + 1) / m;\n          var _n6 = 1,\n            _l7 = 1;\n          \"horizontal\" === _i13 ? _n6 = _r10 : _l7 = _r10, e.querySelectorAll(te(s.progressbarFillClass)).forEach(function (e) {\n            e.style.transform = \"translate3d(0,0,0) scaleX(\".concat(_n6, \") scaleY(\").concat(_l7, \")\"), e.style.transitionDuration = \"\".concat(t.params.speed, \"ms\");\n          });\n        }\n        \"custom\" === s.type && s.renderCustom ? (e.innerHTML = s.renderCustom(t, a + 1, m), 0 === r && i(\"paginationRender\", e)) : (0 === r && i(\"paginationRender\", e), i(\"paginationUpdate\", e)), t.params.watchOverflow && t.enabled && e.classList[t.isLocked ? \"add\" : \"remove\"](s.lockClass);\n      });\n    }\n    function m() {\n      var e = t.params.pagination;\n      if (d()) return;\n      var s = t.virtual && t.params.virtual.enabled ? t.virtual.slides.length : t.slides.length;\n      var a = t.pagination.el;\n      a = o(a);\n      var r = \"\";\n      if (\"bullets\" === e.type) {\n        var _a18 = t.params.loop ? Math.ceil(s / t.params.slidesPerGroup) : t.snapGrid.length;\n        t.params.freeMode && t.params.freeMode.enabled && _a18 > s && (_a18 = s);\n        for (var _s29 = 0; _s29 < _a18; _s29 += 1) e.renderBullet ? r += e.renderBullet.call(t, _s29, e.bulletClass) : r += \"<\".concat(e.bulletElement, \" \").concat(t.isElement ? 'part=\"bullet\"' : \"\", \" class=\\\"\").concat(e.bulletClass, \"\\\"></\").concat(e.bulletElement, \">\");\n      }\n      \"fraction\" === e.type && (r = e.renderFraction ? e.renderFraction.call(t, e.currentClass, e.totalClass) : \"<span class=\\\"\".concat(e.currentClass, \"\\\"></span> / <span class=\\\"\").concat(e.totalClass, \"\\\"></span>\")), \"progressbar\" === e.type && (r = e.renderProgressbar ? e.renderProgressbar.call(t, e.progressbarFillClass) : \"<span class=\\\"\".concat(e.progressbarFillClass, \"\\\"></span>\")), t.pagination.bullets = [], a.forEach(function (s) {\n        var _t$pagination$bullets;\n        \"custom\" !== e.type && (s.innerHTML = r || \"\"), \"bullets\" === e.type && (_t$pagination$bullets = t.pagination.bullets).push.apply(_t$pagination$bullets, _toConsumableArray(s.querySelectorAll(te(e.bulletClass))));\n      }), \"custom\" !== e.type && i(\"paginationRender\", a[0]);\n    }\n    function h() {\n      t.params.pagination = ee(t, t.originalParams.pagination, t.params.pagination, {\n        el: \"swiper-pagination\"\n      });\n      var e = t.params.pagination;\n      if (!e.el) return;\n      var s;\n      \"string\" == typeof e.el && t.isElement && (s = t.el.shadowRoot.querySelector(e.el)), s || \"string\" != typeof e.el || (s = _toConsumableArray(document.querySelectorAll(e.el))), s || (s = e.el), s && 0 !== s.length && (t.params.uniqueNavElements && \"string\" == typeof e.el && Array.isArray(s) && s.length > 1 && (s = _toConsumableArray(t.el.querySelectorAll(e.el)), s.length > 1 && (s = s.filter(function (e) {\n        return y(e, \".swiper\")[0] === t.el;\n      })[0])), Array.isArray(s) && 1 === s.length && (s = s[0]), Object.assign(t.pagination, {\n        el: s\n      }), s = o(s), s.forEach(function (s) {\n        \"bullets\" === e.type && e.clickable && s.classList.add(e.clickableClass), s.classList.add(e.modifierClass + e.type), s.classList.add(t.isHorizontal() ? e.horizontalClass : e.verticalClass), \"bullets\" === e.type && e.dynamicBullets && (s.classList.add(\"\".concat(e.modifierClass).concat(e.type, \"-dynamic\")), l = 0, e.dynamicMainBullets < 1 && (e.dynamicMainBullets = 1)), \"progressbar\" === e.type && e.progressbarOpposite && s.classList.add(e.progressbarOppositeClass), e.clickable && s.addEventListener(\"click\", p), t.enabled || s.classList.add(e.lockClass);\n      }));\n    }\n    function f() {\n      var e = t.params.pagination;\n      if (d()) return;\n      var s = t.pagination.el;\n      s && (s = o(s), s.forEach(function (s) {\n        s.classList.remove(e.hiddenClass), s.classList.remove(e.modifierClass + e.type), s.classList.remove(t.isHorizontal() ? e.horizontalClass : e.verticalClass), e.clickable && s.removeEventListener(\"click\", p);\n      })), t.pagination.bullets && t.pagination.bullets.forEach(function (t) {\n        var _t$classList;\n        return (_t$classList = t.classList).remove.apply(_t$classList, _toConsumableArray(e.bulletActiveClass.split(\" \")));\n      });\n    }\n    a(\"changeDirection\", function () {\n      if (!t.pagination || !t.pagination.el) return;\n      var e = t.params.pagination;\n      var s = t.pagination.el;\n      s = o(s), s.forEach(function (s) {\n        s.classList.remove(e.horizontalClass, e.verticalClass), s.classList.add(t.isHorizontal() ? e.horizontalClass : e.verticalClass);\n      });\n    }), a(\"init\", function () {\n      !1 === t.params.pagination.enabled ? g() : (h(), m(), u());\n    }), a(\"activeIndexChange\", function () {\n      void 0 === t.snapIndex && u();\n    }), a(\"snapIndexChange\", function () {\n      u();\n    }), a(\"snapGridLengthChange\", function () {\n      m(), u();\n    }), a(\"destroy\", function () {\n      f();\n    }), a(\"enable disable\", function () {\n      var e = t.pagination.el;\n      e && (e = o(e), e.forEach(function (e) {\n        return e.classList[t.enabled ? \"remove\" : \"add\"](t.params.pagination.lockClass);\n      }));\n    }), a(\"lock unlock\", function () {\n      u();\n    }), a(\"click\", function (e, s) {\n      var a = s.target;\n      var r = t.pagination.el;\n      if (Array.isArray(r) || (r = [r].filter(function (e) {\n        return !!e;\n      })), t.params.pagination.el && t.params.pagination.hideOnClick && r && r.length > 0 && !a.classList.contains(t.params.pagination.bulletClass)) {\n        if (t.navigation && (t.navigation.nextEl && a === t.navigation.nextEl || t.navigation.prevEl && a === t.navigation.prevEl)) return;\n        var _e48 = r[0].classList.contains(t.params.pagination.hiddenClass);\n        i(!0 === _e48 ? \"paginationShow\" : \"paginationHide\"), r.forEach(function (e) {\n          return e.classList.toggle(t.params.pagination.hiddenClass);\n        });\n      }\n    });\n    var g = function g() {\n      t.el.classList.add(t.params.pagination.paginationDisabledClass);\n      var e = t.pagination.el;\n      e && (e = o(e), e.forEach(function (e) {\n        return e.classList.add(t.params.pagination.paginationDisabledClass);\n      })), f();\n    };\n    Object.assign(t.pagination, {\n      enable: function enable() {\n        t.el.classList.remove(t.params.pagination.paginationDisabledClass);\n        var e = t.pagination.el;\n        e && (e = o(e), e.forEach(function (e) {\n          return e.classList.remove(t.params.pagination.paginationDisabledClass);\n        })), h(), m(), u();\n      },\n      disable: g,\n      render: m,\n      update: u,\n      init: h,\n      destroy: f\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      i = e.on,\n      r = e.emit;\n    var l = a();\n    var o,\n      d,\n      c,\n      p,\n      u = !1,\n      m = null,\n      h = null;\n    function f() {\n      if (!t.params.scrollbar.el || !t.scrollbar.el) return;\n      var e = t.scrollbar,\n        s = t.rtlTranslate,\n        a = e.dragEl,\n        i = e.el,\n        r = t.params.scrollbar,\n        n = t.params.loop ? t.progressLoop : t.progress;\n      var l = d,\n        o = (c - d) * n;\n      s ? (o = -o, o > 0 ? (l = d - o, o = 0) : -o + d > c && (l = c + o)) : o < 0 ? (l = d + o, o = 0) : o + d > c && (l = c - o), t.isHorizontal() ? (a.style.transform = \"translate3d(\".concat(o, \"px, 0, 0)\"), a.style.width = \"\".concat(l, \"px\")) : (a.style.transform = \"translate3d(0px, \".concat(o, \"px, 0)\"), a.style.height = \"\".concat(l, \"px\")), r.hide && (clearTimeout(m), i.style.opacity = 1, m = setTimeout(function () {\n        i.style.opacity = 0, i.style.transitionDuration = \"400ms\";\n      }, 1e3));\n    }\n    function w() {\n      if (!t.params.scrollbar.el || !t.scrollbar.el) return;\n      var e = t.scrollbar,\n        s = e.dragEl,\n        a = e.el;\n      s.style.width = \"\", s.style.height = \"\", c = t.isHorizontal() ? a.offsetWidth : a.offsetHeight, p = t.size / (t.virtualSize + t.params.slidesOffsetBefore - (t.params.centeredSlides ? t.snapGrid[0] : 0)), d = \"auto\" === t.params.scrollbar.dragSize ? c * p : parseInt(t.params.scrollbar.dragSize, 10), t.isHorizontal() ? s.style.width = \"\".concat(d, \"px\") : s.style.height = \"\".concat(d, \"px\"), a.style.display = p >= 1 ? \"none\" : \"\", t.params.scrollbar.hide && (a.style.opacity = 0), t.params.watchOverflow && t.enabled && e.el.classList[t.isLocked ? \"add\" : \"remove\"](t.params.scrollbar.lockClass);\n    }\n    function b(e) {\n      return t.isHorizontal() ? e.clientX : e.clientY;\n    }\n    function y(e) {\n      var s = t.scrollbar,\n        a = t.rtlTranslate,\n        i = s.el;\n      var r;\n      r = (b(e) - v(i)[t.isHorizontal() ? \"left\" : \"top\"] - (null !== o ? o : d / 2)) / (c - d), r = Math.max(Math.min(r, 1), 0), a && (r = 1 - r);\n      var n = t.minTranslate() + (t.maxTranslate() - t.minTranslate()) * r;\n      t.updateProgress(n), t.setTranslate(n), t.updateActiveIndex(), t.updateSlidesClasses();\n    }\n    function E(e) {\n      var s = t.params.scrollbar,\n        a = t.scrollbar,\n        i = t.wrapperEl,\n        n = a.el,\n        l = a.dragEl;\n      u = !0, o = e.target === l ? b(e) - e.target.getBoundingClientRect()[t.isHorizontal() ? \"left\" : \"top\"] : null, e.preventDefault(), e.stopPropagation(), i.style.transitionDuration = \"100ms\", l.style.transitionDuration = \"100ms\", y(e), clearTimeout(h), n.style.transitionDuration = \"0ms\", s.hide && (n.style.opacity = 1), t.params.cssMode && (t.wrapperEl.style[\"scroll-snap-type\"] = \"none\"), r(\"scrollbarDragStart\", e);\n    }\n    function x(e) {\n      var s = t.scrollbar,\n        a = t.wrapperEl,\n        i = s.el,\n        n = s.dragEl;\n      u && (e.preventDefault ? e.preventDefault() : e.returnValue = !1, y(e), a.style.transitionDuration = \"0ms\", i.style.transitionDuration = \"0ms\", n.style.transitionDuration = \"0ms\", r(\"scrollbarDragMove\", e));\n    }\n    function S(e) {\n      var s = t.params.scrollbar,\n        a = t.scrollbar,\n        i = t.wrapperEl,\n        l = a.el;\n      u && (u = !1, t.params.cssMode && (t.wrapperEl.style[\"scroll-snap-type\"] = \"\", i.style.transitionDuration = \"\"), s.hide && (clearTimeout(h), h = n(function () {\n        l.style.opacity = 0, l.style.transitionDuration = \"400ms\";\n      }, 1e3)), r(\"scrollbarDragEnd\", e), s.snapOnRelease && t.slideToClosest());\n    }\n    function T(e) {\n      var s = t.scrollbar,\n        a = t.params,\n        i = s.el;\n      if (!i) return;\n      var r = i,\n        n = !!a.passiveListeners && {\n          passive: !1,\n          capture: !1\n        },\n        o = !!a.passiveListeners && {\n          passive: !0,\n          capture: !1\n        };\n      if (!r) return;\n      var d = \"on\" === e ? \"addEventListener\" : \"removeEventListener\";\n      r[d](\"pointerdown\", E, n), l[d](\"pointermove\", x, n), l[d](\"pointerup\", S, o);\n    }\n    function M() {\n      var e = t.scrollbar,\n        s = t.el;\n      t.params.scrollbar = ee(t, t.originalParams.scrollbar, t.params.scrollbar, {\n        el: \"swiper-scrollbar\"\n      });\n      var a = t.params.scrollbar;\n      if (!a.el) return;\n      var i, r;\n      \"string\" == typeof a.el && t.isElement && (i = t.el.shadowRoot.querySelector(a.el)), i || \"string\" != typeof a.el ? i || (i = a.el) : i = l.querySelectorAll(a.el), t.params.uniqueNavElements && \"string\" == typeof a.el && i.length > 1 && 1 === s.querySelectorAll(a.el).length && (i = s.querySelector(a.el)), i.length > 0 && (i = i[0]), i.classList.add(t.isHorizontal() ? a.horizontalClass : a.verticalClass), i && (r = i.querySelector(\".\".concat(t.params.scrollbar.dragClass)), r || (r = g(\"div\", t.params.scrollbar.dragClass), i.append(r))), Object.assign(e, {\n        el: i,\n        dragEl: r\n      }), a.draggable && t.params.scrollbar.el && t.scrollbar.el && T(\"on\"), i && i.classList[t.enabled ? \"remove\" : \"add\"](t.params.scrollbar.lockClass);\n    }\n    function C() {\n      var e = t.params.scrollbar,\n        s = t.scrollbar.el;\n      s && s.classList.remove(t.isHorizontal() ? e.horizontalClass : e.verticalClass), t.params.scrollbar.el && t.scrollbar.el && T(\"off\");\n    }\n    s({\n      scrollbar: {\n        el: null,\n        dragSize: \"auto\",\n        hide: !1,\n        draggable: !1,\n        snapOnRelease: !0,\n        lockClass: \"swiper-scrollbar-lock\",\n        dragClass: \"swiper-scrollbar-drag\",\n        scrollbarDisabledClass: \"swiper-scrollbar-disabled\",\n        horizontalClass: \"swiper-scrollbar-horizontal\",\n        verticalClass: \"swiper-scrollbar-vertical\"\n      }\n    }), t.scrollbar = {\n      el: null,\n      dragEl: null\n    }, i(\"init\", function () {\n      !1 === t.params.scrollbar.enabled ? P() : (M(), w(), f());\n    }), i(\"update resize observerUpdate lock unlock\", function () {\n      w();\n    }), i(\"setTranslate\", function () {\n      f();\n    }), i(\"setTransition\", function (e, s) {\n      !function (e) {\n        t.params.scrollbar.el && t.scrollbar.el && (t.scrollbar.dragEl.style.transitionDuration = \"\".concat(e, \"ms\"));\n      }(s);\n    }), i(\"enable disable\", function () {\n      var e = t.scrollbar.el;\n      e && e.classList[t.enabled ? \"remove\" : \"add\"](t.params.scrollbar.lockClass);\n    }), i(\"destroy\", function () {\n      C();\n    });\n    var P = function P() {\n      t.el.classList.add(t.params.scrollbar.scrollbarDisabledClass), t.scrollbar.el && t.scrollbar.el.classList.add(t.params.scrollbar.scrollbarDisabledClass), C();\n    };\n    Object.assign(t.scrollbar, {\n      enable: function enable() {\n        t.el.classList.remove(t.params.scrollbar.scrollbarDisabledClass), t.scrollbar.el && t.scrollbar.el.classList.remove(t.params.scrollbar.scrollbarDisabledClass), M(), w(), f();\n      },\n      disable: P,\n      updateSize: w,\n      setTranslate: f,\n      init: M,\n      destroy: C\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      parallax: {\n        enabled: !1\n      }\n    });\n    var i = function i(e, s) {\n        var a = t.rtl,\n          i = a ? -1 : 1,\n          r = e.getAttribute(\"data-swiper-parallax\") || \"0\";\n        var n = e.getAttribute(\"data-swiper-parallax-x\"),\n          l = e.getAttribute(\"data-swiper-parallax-y\");\n        var o = e.getAttribute(\"data-swiper-parallax-scale\"),\n          d = e.getAttribute(\"data-swiper-parallax-opacity\"),\n          c = e.getAttribute(\"data-swiper-parallax-rotate\");\n        if (n || l ? (n = n || \"0\", l = l || \"0\") : t.isHorizontal() ? (n = r, l = \"0\") : (l = r, n = \"0\"), n = n.indexOf(\"%\") >= 0 ? parseInt(n, 10) * s * i + \"%\" : n * s * i + \"px\", l = l.indexOf(\"%\") >= 0 ? parseInt(l, 10) * s + \"%\" : l * s + \"px\", null != d) {\n          var _t39 = d - (d - 1) * (1 - Math.abs(s));\n          e.style.opacity = _t39;\n        }\n        var p = \"translate3d(\".concat(n, \", \").concat(l, \", 0px)\");\n        if (null != o) {\n          p += \" scale(\".concat(o - (o - 1) * (1 - Math.abs(s)), \")\");\n        }\n        if (c && null != c) {\n          p += \" rotate(\".concat(c * s * -1, \"deg)\");\n        }\n        e.style.transform = p;\n      },\n      r = function r() {\n        var e = t.el,\n          s = t.slides,\n          a = t.progress,\n          r = t.snapGrid;\n        f(e, \"[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]\").forEach(function (e) {\n          i(e, a);\n        }), s.forEach(function (e, s) {\n          var n = e.progress;\n          t.params.slidesPerGroup > 1 && \"auto\" !== t.params.slidesPerView && (n += Math.ceil(s / 2) - a * (r.length - 1)), n = Math.min(Math.max(n, -1), 1), e.querySelectorAll(\"[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale], [data-swiper-parallax-rotate]\").forEach(function (e) {\n            i(e, n);\n          });\n        });\n      };\n    a(\"beforeInit\", function () {\n      t.params.parallax.enabled && (t.params.watchSlidesProgress = !0, t.originalParams.watchSlidesProgress = !0);\n    }), a(\"init\", function () {\n      t.params.parallax.enabled && r();\n    }), a(\"setTranslate\", function () {\n      t.params.parallax.enabled && r();\n    }), a(\"setTransition\", function (e, s) {\n      t.params.parallax.enabled && function (e) {\n        void 0 === e && (e = t.params.speed);\n        var s = t.el;\n        s.querySelectorAll(\"[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]\").forEach(function (t) {\n          var s = parseInt(t.getAttribute(\"data-swiper-parallax-duration\"), 10) || e;\n          0 === e && (s = 0), t.style.transitionDuration = \"\".concat(s, \"ms\");\n        });\n      }(s);\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on,\n      i = e.emit;\n    var n = r();\n    s({\n      zoom: {\n        enabled: !1,\n        maxRatio: 3,\n        minRatio: 1,\n        toggle: !0,\n        containerClass: \"swiper-zoom-container\",\n        zoomedSlideClass: \"swiper-slide-zoomed\"\n      }\n    }), t.zoom = {\n      enabled: !1\n    };\n    var l,\n      d,\n      c = 1,\n      p = !1;\n    var u = [],\n      m = {\n        originX: 0,\n        originY: 0,\n        slideEl: void 0,\n        slideWidth: void 0,\n        slideHeight: void 0,\n        imageEl: void 0,\n        imageWrapEl: void 0,\n        maxRatio: 3\n      },\n      h = {\n        isTouched: void 0,\n        isMoved: void 0,\n        currentX: void 0,\n        currentY: void 0,\n        minX: void 0,\n        minY: void 0,\n        maxX: void 0,\n        maxY: void 0,\n        width: void 0,\n        height: void 0,\n        startX: void 0,\n        startY: void 0,\n        touchesStart: {},\n        touchesCurrent: {}\n      },\n      g = {\n        x: void 0,\n        y: void 0,\n        prevPositionX: void 0,\n        prevPositionY: void 0,\n        prevTime: void 0\n      };\n    var w = 1;\n    function b() {\n      if (u.length < 2) return 1;\n      var e = u[0].pageX,\n        t = u[0].pageY,\n        s = u[1].pageX,\n        a = u[1].pageY;\n      return Math.sqrt(Math.pow(s - e, 2) + Math.pow(a - t, 2));\n    }\n    function E(e) {\n      var s = t.isElement ? \"swiper-slide\" : \".\".concat(t.params.slideClass);\n      return !!e.target.matches(s) || t.slides.filter(function (t) {\n        return t.contains(e.target);\n      }).length > 0;\n    }\n    function x(e) {\n      if (\"mouse\" === e.pointerType && u.splice(0, u.length), !E(e)) return;\n      var s = t.params.zoom;\n      if (l = !1, d = !1, u.push(e), !(u.length < 2)) {\n        if (l = !0, m.scaleStart = b(), !m.slideEl) {\n          m.slideEl = e.target.closest(\".\".concat(t.params.slideClass, \", swiper-slide\")), m.slideEl || (m.slideEl = t.slides[t.activeIndex]);\n          var _a19 = m.slideEl.querySelector(\".\".concat(s.containerClass));\n          if (_a19 && (_a19 = _a19.querySelectorAll(\"picture, img, svg, canvas, .swiper-zoom-target\")[0]), m.imageEl = _a19, m.imageWrapEl = _a19 ? y(m.imageEl, \".\".concat(s.containerClass))[0] : void 0, !m.imageWrapEl) return void (m.imageEl = void 0);\n          m.maxRatio = m.imageWrapEl.getAttribute(\"data-swiper-zoom\") || s.maxRatio;\n        }\n        if (m.imageEl) {\n          var _ref3 = function () {\n              if (u.length < 2) return {\n                x: null,\n                y: null\n              };\n              var e = m.imageEl.getBoundingClientRect();\n              return [(u[0].pageX + (u[1].pageX - u[0].pageX) / 2 - e.x) / c, (u[0].pageY + (u[1].pageY - u[0].pageY) / 2 - e.y) / c];\n            }(),\n            _ref4 = _slicedToArray(_ref3, 2),\n            _e49 = _ref4[0],\n            _t40 = _ref4[1];\n          m.originX = _e49, m.originY = _t40, m.imageEl.style.transitionDuration = \"0ms\";\n        }\n        p = !0;\n      }\n    }\n    function S(e) {\n      if (!E(e)) return;\n      var s = t.params.zoom,\n        a = t.zoom,\n        i = u.findIndex(function (t) {\n          return t.pointerId === e.pointerId;\n        });\n      i >= 0 && (u[i] = e), u.length < 2 || (d = !0, m.scaleMove = b(), m.imageEl && (a.scale = m.scaleMove / m.scaleStart * c, a.scale > m.maxRatio && (a.scale = m.maxRatio - 1 + Math.pow(a.scale - m.maxRatio + 1, .5)), a.scale < s.minRatio && (a.scale = s.minRatio + 1 - Math.pow(s.minRatio - a.scale + 1, .5)), m.imageEl.style.transform = \"translate3d(0,0,0) scale(\".concat(a.scale, \")\")));\n    }\n    function T(e) {\n      if (!E(e)) return;\n      if (\"mouse\" === e.pointerType && \"pointerout\" === e.type) return;\n      var s = t.params.zoom,\n        a = t.zoom,\n        i = u.findIndex(function (t) {\n          return t.pointerId === e.pointerId;\n        });\n      i >= 0 && u.splice(i, 1), l && d && (l = !1, d = !1, m.imageEl && (a.scale = Math.max(Math.min(a.scale, m.maxRatio), s.minRatio), m.imageEl.style.transitionDuration = \"\".concat(t.params.speed, \"ms\"), m.imageEl.style.transform = \"translate3d(0,0,0) scale(\".concat(a.scale, \")\"), c = a.scale, p = !1, a.scale > 1 && m.slideEl ? m.slideEl.classList.add(\"\".concat(s.zoomedSlideClass)) : a.scale <= 1 && m.slideEl && m.slideEl.classList.remove(\"\".concat(s.zoomedSlideClass)), 1 === a.scale && (m.originX = 0, m.originY = 0, m.slideEl = void 0)));\n    }\n    function M(e) {\n      if (!E(e) || !function (e) {\n        var s = \".\".concat(t.params.zoom.containerClass);\n        return !!e.target.matches(s) || _toConsumableArray(t.el.querySelectorAll(s)).filter(function (t) {\n          return t.contains(e.target);\n        }).length > 0;\n      }(e)) return;\n      var s = t.zoom;\n      if (!m.imageEl) return;\n      if (!h.isTouched || !m.slideEl) return;\n      h.isMoved || (h.width = m.imageEl.offsetWidth, h.height = m.imageEl.offsetHeight, h.startX = o(m.imageWrapEl, \"x\") || 0, h.startY = o(m.imageWrapEl, \"y\") || 0, m.slideWidth = m.slideEl.offsetWidth, m.slideHeight = m.slideEl.offsetHeight, m.imageWrapEl.style.transitionDuration = \"0ms\");\n      var a = h.width * s.scale,\n        i = h.height * s.scale;\n      if (a < m.slideWidth && i < m.slideHeight) return;\n      h.minX = Math.min(m.slideWidth / 2 - a / 2, 0), h.maxX = -h.minX, h.minY = Math.min(m.slideHeight / 2 - i / 2, 0), h.maxY = -h.minY, h.touchesCurrent.x = u.length > 0 ? u[0].pageX : e.pageX, h.touchesCurrent.y = u.length > 0 ? u[0].pageY : e.pageY;\n      if (Math.max(Math.abs(h.touchesCurrent.x - h.touchesStart.x), Math.abs(h.touchesCurrent.y - h.touchesStart.y)) > 5 && (t.allowClick = !1), !h.isMoved && !p) {\n        if (t.isHorizontal() && (Math.floor(h.minX) === Math.floor(h.startX) && h.touchesCurrent.x < h.touchesStart.x || Math.floor(h.maxX) === Math.floor(h.startX) && h.touchesCurrent.x > h.touchesStart.x)) return void (h.isTouched = !1);\n        if (!t.isHorizontal() && (Math.floor(h.minY) === Math.floor(h.startY) && h.touchesCurrent.y < h.touchesStart.y || Math.floor(h.maxY) === Math.floor(h.startY) && h.touchesCurrent.y > h.touchesStart.y)) return void (h.isTouched = !1);\n      }\n      e.cancelable && e.preventDefault(), e.stopPropagation(), h.isMoved = !0;\n      var r = (s.scale - c) / (m.maxRatio - t.params.zoom.minRatio),\n        n = m.originX,\n        l = m.originY;\n      h.currentX = h.touchesCurrent.x - h.touchesStart.x + h.startX + r * (h.width - 2 * n), h.currentY = h.touchesCurrent.y - h.touchesStart.y + h.startY + r * (h.height - 2 * l), h.currentX < h.minX && (h.currentX = h.minX + 1 - Math.pow(h.minX - h.currentX + 1, .8)), h.currentX > h.maxX && (h.currentX = h.maxX - 1 + Math.pow(h.currentX - h.maxX + 1, .8)), h.currentY < h.minY && (h.currentY = h.minY + 1 - Math.pow(h.minY - h.currentY + 1, .8)), h.currentY > h.maxY && (h.currentY = h.maxY - 1 + Math.pow(h.currentY - h.maxY + 1, .8)), g.prevPositionX || (g.prevPositionX = h.touchesCurrent.x), g.prevPositionY || (g.prevPositionY = h.touchesCurrent.y), g.prevTime || (g.prevTime = Date.now()), g.x = (h.touchesCurrent.x - g.prevPositionX) / (Date.now() - g.prevTime) / 2, g.y = (h.touchesCurrent.y - g.prevPositionY) / (Date.now() - g.prevTime) / 2, Math.abs(h.touchesCurrent.x - g.prevPositionX) < 2 && (g.x = 0), Math.abs(h.touchesCurrent.y - g.prevPositionY) < 2 && (g.y = 0), g.prevPositionX = h.touchesCurrent.x, g.prevPositionY = h.touchesCurrent.y, g.prevTime = Date.now(), m.imageWrapEl.style.transform = \"translate3d(\".concat(h.currentX, \"px, \").concat(h.currentY, \"px,0)\");\n    }\n    function C() {\n      var e = t.zoom;\n      m.slideEl && t.activeIndex !== t.slides.indexOf(m.slideEl) && (m.imageEl && (m.imageEl.style.transform = \"translate3d(0,0,0) scale(1)\"), m.imageWrapEl && (m.imageWrapEl.style.transform = \"translate3d(0,0,0)\"), m.slideEl.classList.remove(\"\".concat(t.params.zoom.zoomedSlideClass)), e.scale = 1, c = 1, m.slideEl = void 0, m.imageEl = void 0, m.imageWrapEl = void 0, m.originX = 0, m.originY = 0);\n    }\n    function P(e) {\n      var s = t.zoom,\n        a = t.params.zoom;\n      if (!m.slideEl) {\n        e && e.target && (m.slideEl = e.target.closest(\".\".concat(t.params.slideClass, \", swiper-slide\"))), m.slideEl || (t.params.virtual && t.params.virtual.enabled && t.virtual ? m.slideEl = f(t.slidesEl, \".\".concat(t.params.slideActiveClass))[0] : m.slideEl = t.slides[t.activeIndex]);\n        var _s30 = m.slideEl.querySelector(\".\".concat(a.containerClass));\n        _s30 && (_s30 = _s30.querySelectorAll(\"picture, img, svg, canvas, .swiper-zoom-target\")[0]), m.imageEl = _s30, m.imageWrapEl = _s30 ? y(m.imageEl, \".\".concat(a.containerClass))[0] : void 0;\n      }\n      if (!m.imageEl || !m.imageWrapEl) return;\n      var i, r, l, o, d, p, u, g, w, b, E, x, S, T, M, C, P, L;\n      t.params.cssMode && (t.wrapperEl.style.overflow = \"hidden\", t.wrapperEl.style.touchAction = \"none\"), m.slideEl.classList.add(\"\".concat(a.zoomedSlideClass)), void 0 === h.touchesStart.x && e ? (i = e.pageX, r = e.pageY) : (i = h.touchesStart.x, r = h.touchesStart.y);\n      var z = \"number\" == typeof e ? e : null;\n      1 === c && z && (i = void 0, r = void 0), s.scale = z || m.imageWrapEl.getAttribute(\"data-swiper-zoom\") || a.maxRatio, c = z || m.imageWrapEl.getAttribute(\"data-swiper-zoom\") || a.maxRatio, !e || 1 === c && z ? (u = 0, g = 0) : (P = m.slideEl.offsetWidth, L = m.slideEl.offsetHeight, l = v(m.slideEl).left + n.scrollX, o = v(m.slideEl).top + n.scrollY, d = l + P / 2 - i, p = o + L / 2 - r, w = m.imageEl.offsetWidth, b = m.imageEl.offsetHeight, E = w * s.scale, x = b * s.scale, S = Math.min(P / 2 - E / 2, 0), T = Math.min(L / 2 - x / 2, 0), M = -S, C = -T, u = d * s.scale, g = p * s.scale, u < S && (u = S), u > M && (u = M), g < T && (g = T), g > C && (g = C)), z && 1 === s.scale && (m.originX = 0, m.originY = 0), m.imageWrapEl.style.transitionDuration = \"300ms\", m.imageWrapEl.style.transform = \"translate3d(\".concat(u, \"px, \").concat(g, \"px,0)\"), m.imageEl.style.transitionDuration = \"300ms\", m.imageEl.style.transform = \"translate3d(0,0,0) scale(\".concat(s.scale, \")\");\n    }\n    function L() {\n      var e = t.zoom,\n        s = t.params.zoom;\n      if (!m.slideEl) {\n        t.params.virtual && t.params.virtual.enabled && t.virtual ? m.slideEl = f(t.slidesEl, \".\".concat(t.params.slideActiveClass))[0] : m.slideEl = t.slides[t.activeIndex];\n        var _e50 = m.slideEl.querySelector(\".\".concat(s.containerClass));\n        _e50 && (_e50 = _e50.querySelectorAll(\"picture, img, svg, canvas, .swiper-zoom-target\")[0]), m.imageEl = _e50, m.imageWrapEl = _e50 ? y(m.imageEl, \".\".concat(s.containerClass))[0] : void 0;\n      }\n      m.imageEl && m.imageWrapEl && (t.params.cssMode && (t.wrapperEl.style.overflow = \"\", t.wrapperEl.style.touchAction = \"\"), e.scale = 1, c = 1, m.imageWrapEl.style.transitionDuration = \"300ms\", m.imageWrapEl.style.transform = \"translate3d(0,0,0)\", m.imageEl.style.transitionDuration = \"300ms\", m.imageEl.style.transform = \"translate3d(0,0,0) scale(1)\", m.slideEl.classList.remove(\"\".concat(s.zoomedSlideClass)), m.slideEl = void 0, m.originX = 0, m.originY = 0);\n    }\n    function z(e) {\n      var s = t.zoom;\n      s.scale && 1 !== s.scale ? L() : P(e);\n    }\n    function A() {\n      return {\n        passiveListener: !!t.params.passiveListeners && {\n          passive: !0,\n          capture: !1\n        },\n        activeListenerWithCapture: !t.params.passiveListeners || {\n          passive: !1,\n          capture: !0\n        }\n      };\n    }\n    function $() {\n      var e = t.zoom;\n      if (e.enabled) return;\n      e.enabled = !0;\n      var _A = A(),\n        s = _A.passiveListener,\n        a = _A.activeListenerWithCapture;\n      t.wrapperEl.addEventListener(\"pointerdown\", x, s), t.wrapperEl.addEventListener(\"pointermove\", S, a), [\"pointerup\", \"pointercancel\", \"pointerout\"].forEach(function (e) {\n        t.wrapperEl.addEventListener(e, T, s);\n      }), t.wrapperEl.addEventListener(\"pointermove\", M, a);\n    }\n    function I() {\n      var e = t.zoom;\n      if (!e.enabled) return;\n      e.enabled = !1;\n      var _A2 = A(),\n        s = _A2.passiveListener,\n        a = _A2.activeListenerWithCapture;\n      t.wrapperEl.removeEventListener(\"pointerdown\", x, s), t.wrapperEl.removeEventListener(\"pointermove\", S, a), [\"pointerup\", \"pointercancel\", \"pointerout\"].forEach(function (e) {\n        t.wrapperEl.removeEventListener(e, T, s);\n      }), t.wrapperEl.removeEventListener(\"pointermove\", M, a);\n    }\n    Object.defineProperty(t.zoom, \"scale\", {\n      get: function get() {\n        return w;\n      },\n      set: function set(e) {\n        if (w !== e) {\n          var _t41 = m.imageEl,\n            _s31 = m.slideEl;\n          i(\"zoomChange\", e, _t41, _s31);\n        }\n        w = e;\n      }\n    }), a(\"init\", function () {\n      t.params.zoom.enabled && $();\n    }), a(\"destroy\", function () {\n      I();\n    }), a(\"touchStart\", function (e, s) {\n      t.zoom.enabled && function (e) {\n        var s = t.device;\n        if (!m.imageEl) return;\n        if (h.isTouched) return;\n        s.android && e.cancelable && e.preventDefault(), h.isTouched = !0;\n        var a = u.length > 0 ? u[0] : e;\n        h.touchesStart.x = a.pageX, h.touchesStart.y = a.pageY;\n      }(s);\n    }), a(\"touchEnd\", function (e, s) {\n      t.zoom.enabled && function () {\n        var e = t.zoom;\n        if (!m.imageEl) return;\n        if (!h.isTouched || !h.isMoved) return h.isTouched = !1, void (h.isMoved = !1);\n        h.isTouched = !1, h.isMoved = !1;\n        var s = 300,\n          a = 300;\n        var i = g.x * s,\n          r = h.currentX + i,\n          n = g.y * a,\n          l = h.currentY + n;\n        0 !== g.x && (s = Math.abs((r - h.currentX) / g.x)), 0 !== g.y && (a = Math.abs((l - h.currentY) / g.y));\n        var o = Math.max(s, a);\n        h.currentX = r, h.currentY = l;\n        var d = h.width * e.scale,\n          c = h.height * e.scale;\n        h.minX = Math.min(m.slideWidth / 2 - d / 2, 0), h.maxX = -h.minX, h.minY = Math.min(m.slideHeight / 2 - c / 2, 0), h.maxY = -h.minY, h.currentX = Math.max(Math.min(h.currentX, h.maxX), h.minX), h.currentY = Math.max(Math.min(h.currentY, h.maxY), h.minY), m.imageWrapEl.style.transitionDuration = \"\".concat(o, \"ms\"), m.imageWrapEl.style.transform = \"translate3d(\".concat(h.currentX, \"px, \").concat(h.currentY, \"px,0)\");\n      }();\n    }), a(\"doubleTap\", function (e, s) {\n      !t.animating && t.params.zoom.enabled && t.zoom.enabled && t.params.zoom.toggle && z(s);\n    }), a(\"transitionEnd\", function () {\n      t.zoom.enabled && t.params.zoom.enabled && C();\n    }), a(\"slideChange\", function () {\n      t.zoom.enabled && t.params.zoom.enabled && t.params.cssMode && C();\n    }), Object.assign(t.zoom, {\n      enable: $,\n      disable: I,\n      in: P,\n      out: L,\n      toggle: z\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    function i(e, t) {\n      var s = function () {\n        var e, t, s;\n        return function (a, i) {\n          for (t = -1, e = a.length; e - t > 1;) s = e + t >> 1, a[s] <= i ? t = s : e = s;\n          return e;\n        };\n      }();\n      var a, i;\n      return this.x = e, this.y = t, this.lastIndex = e.length - 1, this.interpolate = function (e) {\n        return e ? (i = s(this.x, e), a = i - 1, (e - this.x[a]) * (this.y[i] - this.y[a]) / (this.x[i] - this.x[a]) + this.y[a]) : 0;\n      }, this;\n    }\n    function r() {\n      t.controller.control && t.controller.spline && (t.controller.spline = void 0, delete t.controller.spline);\n    }\n    s({\n      controller: {\n        control: void 0,\n        inverse: !1,\n        by: \"slide\"\n      }\n    }), t.controller = {\n      control: void 0\n    }, a(\"beforeInit\", function () {\n      if (\"undefined\" != typeof window && (\"string\" == typeof t.params.controller.control || t.params.controller.control instanceof HTMLElement)) {\n        var _e51 = document.querySelector(t.params.controller.control);\n        if (_e51 && _e51.swiper) t.controller.control = _e51.swiper;else if (_e51) {\n          var _s32 = function _s32(a) {\n            t.controller.control = a.detail[0], t.update(), _e51.removeEventListener(\"init\", _s32);\n          };\n          _e51.addEventListener(\"init\", _s32);\n        }\n      } else t.controller.control = t.params.controller.control;\n    }), a(\"update\", function () {\n      r();\n    }), a(\"resize\", function () {\n      r();\n    }), a(\"observerUpdate\", function () {\n      r();\n    }), a(\"setTranslate\", function (e, s, a) {\n      t.controller.control && !t.controller.control.destroyed && t.controller.setTranslate(s, a);\n    }), a(\"setTransition\", function (e, s, a) {\n      t.controller.control && !t.controller.control.destroyed && t.controller.setTransition(s, a);\n    }), Object.assign(t.controller, {\n      setTranslate: function setTranslate(e, s) {\n        var a = t.controller.control;\n        var r, n;\n        var l = t.constructor;\n        function o(e) {\n          if (e.destroyed) return;\n          var s = t.rtlTranslate ? -t.translate : t.translate;\n          \"slide\" === t.params.controller.by && (!function (e) {\n            t.controller.spline = t.params.loop ? new i(t.slidesGrid, e.slidesGrid) : new i(t.snapGrid, e.snapGrid);\n          }(e), n = -t.controller.spline.interpolate(-s)), n && \"container\" !== t.params.controller.by || (r = (e.maxTranslate() - e.minTranslate()) / (t.maxTranslate() - t.minTranslate()), !Number.isNaN(r) && Number.isFinite(r) || (r = 1), n = (s - t.minTranslate()) * r + e.minTranslate()), t.params.controller.inverse && (n = e.maxTranslate() - n), e.updateProgress(n), e.setTranslate(n, t), e.updateActiveIndex(), e.updateSlidesClasses();\n        }\n        if (Array.isArray(a)) for (var _e52 = 0; _e52 < a.length; _e52 += 1) a[_e52] !== s && a[_e52] instanceof l && o(a[_e52]);else a instanceof l && s !== a && o(a);\n      },\n      setTransition: function setTransition(e, s) {\n        var a = t.constructor,\n          i = t.controller.control;\n        var r;\n        function l(s) {\n          s.destroyed || (s.setTransition(e, t), 0 !== e && (s.transitionStart(), s.params.autoHeight && n(function () {\n            s.updateAutoHeight();\n          }), E(s.wrapperEl, function () {\n            i && s.transitionEnd();\n          })));\n        }\n        if (Array.isArray(i)) for (r = 0; r < i.length; r += 1) i[r] !== s && i[r] instanceof a && l(i[r]);else i instanceof a && s !== i && l(i);\n      }\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      a11y: {\n        enabled: !0,\n        notificationClass: \"swiper-notification\",\n        prevSlideMessage: \"Previous slide\",\n        nextSlideMessage: \"Next slide\",\n        firstSlideMessage: \"This is the first slide\",\n        lastSlideMessage: \"This is the last slide\",\n        paginationBulletMessage: \"Go to slide {{index}}\",\n        slideLabelMessage: \"{{index}} / {{slidesLength}}\",\n        containerMessage: null,\n        containerRoleDescriptionMessage: null,\n        itemRoleDescriptionMessage: null,\n        slideRole: \"group\",\n        id: null\n      }\n    }), t.a11y = {\n      clicked: !1\n    };\n    var i = null;\n    function r(e) {\n      var t = i;\n      0 !== t.length && (t.innerHTML = \"\", t.innerHTML = e);\n    }\n    var n = function n(e) {\n      return Array.isArray(e) || (e = [e].filter(function (e) {\n        return !!e;\n      })), e;\n    };\n    function l(e) {\n      (e = n(e)).forEach(function (e) {\n        e.setAttribute(\"tabIndex\", \"0\");\n      });\n    }\n    function o(e) {\n      (e = n(e)).forEach(function (e) {\n        e.setAttribute(\"tabIndex\", \"-1\");\n      });\n    }\n    function d(e, t) {\n      (e = n(e)).forEach(function (e) {\n        e.setAttribute(\"role\", t);\n      });\n    }\n    function c(e, t) {\n      (e = n(e)).forEach(function (e) {\n        e.setAttribute(\"aria-roledescription\", t);\n      });\n    }\n    function p(e, t) {\n      (e = n(e)).forEach(function (e) {\n        e.setAttribute(\"aria-label\", t);\n      });\n    }\n    function u(e) {\n      (e = n(e)).forEach(function (e) {\n        e.setAttribute(\"aria-disabled\", !0);\n      });\n    }\n    function m(e) {\n      (e = n(e)).forEach(function (e) {\n        e.setAttribute(\"aria-disabled\", !1);\n      });\n    }\n    function h(e) {\n      if (13 !== e.keyCode && 32 !== e.keyCode) return;\n      var s = t.params.a11y,\n        a = e.target;\n      t.pagination && t.pagination.el && (a === t.pagination.el || t.pagination.el.contains(e.target)) && !e.target.matches(te(t.params.pagination.bulletClass)) || (t.navigation && t.navigation.nextEl && a === t.navigation.nextEl && (t.isEnd && !t.params.loop || t.slideNext(), t.isEnd ? r(s.lastSlideMessage) : r(s.nextSlideMessage)), t.navigation && t.navigation.prevEl && a === t.navigation.prevEl && (t.isBeginning && !t.params.loop || t.slidePrev(), t.isBeginning ? r(s.firstSlideMessage) : r(s.prevSlideMessage)), t.pagination && a.matches(te(t.params.pagination.bulletClass)) && a.click());\n    }\n    function f() {\n      return t.pagination && t.pagination.bullets && t.pagination.bullets.length;\n    }\n    function v() {\n      return f() && t.params.pagination.clickable;\n    }\n    var w = function w(e, t, s) {\n        l(e), \"BUTTON\" !== e.tagName && (d(e, \"button\"), e.addEventListener(\"keydown\", h)), p(e, s), function (e, t) {\n          (e = n(e)).forEach(function (e) {\n            e.setAttribute(\"aria-controls\", t);\n          });\n        }(e, t);\n      },\n      y = function y() {\n        t.a11y.clicked = !0;\n      },\n      E = function E() {\n        requestAnimationFrame(function () {\n          requestAnimationFrame(function () {\n            t.destroyed || (t.a11y.clicked = !1);\n          });\n        });\n      },\n      x = function x(e) {\n        if (t.a11y.clicked) return;\n        var s = e.target.closest(\".\".concat(t.params.slideClass, \", swiper-slide\"));\n        if (!s || !t.slides.includes(s)) return;\n        var a = t.slides.indexOf(s) === t.activeIndex,\n          i = t.params.watchSlidesProgress && t.visibleSlides && t.visibleSlides.includes(s);\n        a || i || e.sourceCapabilities && e.sourceCapabilities.firesTouchEvents || (t.isHorizontal() ? t.el.scrollLeft = 0 : t.el.scrollTop = 0, t.slideTo(t.slides.indexOf(s), 0));\n      },\n      S = function S() {\n        var e = t.params.a11y;\n        e.itemRoleDescriptionMessage && c(t.slides, e.itemRoleDescriptionMessage), e.slideRole && d(t.slides, e.slideRole);\n        var s = t.slides.length;\n        e.slideLabelMessage && t.slides.forEach(function (a, i) {\n          var r = t.params.loop ? parseInt(a.getAttribute(\"data-swiper-slide-index\"), 10) : i;\n          p(a, e.slideLabelMessage.replace(/\\{\\{index\\}\\}/, r + 1).replace(/\\{\\{slidesLength\\}\\}/, s));\n        });\n      },\n      T = function T() {\n        var e = t.params.a11y;\n        t.isElement ? t.el.shadowEl.append(i) : t.el.append(i);\n        var s = t.el;\n        e.containerRoleDescriptionMessage && c(s, e.containerRoleDescriptionMessage), e.containerMessage && p(s, e.containerMessage);\n        var a = t.wrapperEl,\n          r = e.id || a.getAttribute(\"id\") || \"swiper-wrapper-\".concat((l = 16, void 0 === l && (l = 16), \"x\".repeat(l).replace(/x/g, function () {\n            return Math.round(16 * Math.random()).toString(16);\n          })));\n        var l;\n        var o = t.params.autoplay && t.params.autoplay.enabled ? \"off\" : \"polite\";\n        var d;\n        d = r, n(a).forEach(function (e) {\n          e.setAttribute(\"id\", d);\n        }), function (e, t) {\n          (e = n(e)).forEach(function (e) {\n            e.setAttribute(\"aria-live\", t);\n          });\n        }(a, o), S();\n        var _ref5 = t.navigation ? t.navigation : {},\n          u = _ref5.nextEl,\n          m = _ref5.prevEl;\n        if (u = n(u), m = n(m), u && u.forEach(function (t) {\n          return w(t, r, e.nextSlideMessage);\n        }), m && m.forEach(function (t) {\n          return w(t, r, e.prevSlideMessage);\n        }), v()) {\n          (Array.isArray(t.pagination.el) ? t.pagination.el : [t.pagination.el]).forEach(function (e) {\n            e.addEventListener(\"keydown\", h);\n          });\n        }\n        t.el.addEventListener(\"focus\", x, !0), t.el.addEventListener(\"pointerdown\", y, !0), t.el.addEventListener(\"pointerup\", E, !0);\n      };\n    a(\"beforeInit\", function () {\n      i = g(\"span\", t.params.a11y.notificationClass), i.setAttribute(\"aria-live\", \"assertive\"), i.setAttribute(\"aria-atomic\", \"true\");\n    }), a(\"afterInit\", function () {\n      t.params.a11y.enabled && T();\n    }), a(\"slidesLengthChange snapGridLengthChange slidesGridLengthChange\", function () {\n      t.params.a11y.enabled && S();\n    }), a(\"fromEdge toEdge afterInit lock unlock\", function () {\n      t.params.a11y.enabled && function () {\n        if (t.params.loop || t.params.rewind || !t.navigation) return;\n        var _t$navigation5 = t.navigation,\n          e = _t$navigation5.nextEl,\n          s = _t$navigation5.prevEl;\n        s && (t.isBeginning ? (u(s), o(s)) : (m(s), l(s))), e && (t.isEnd ? (u(e), o(e)) : (m(e), l(e)));\n      }();\n    }), a(\"paginationUpdate\", function () {\n      t.params.a11y.enabled && function () {\n        var e = t.params.a11y;\n        f() && t.pagination.bullets.forEach(function (s) {\n          t.params.pagination.clickable && (l(s), t.params.pagination.renderBullet || (d(s, \"button\"), p(s, e.paginationBulletMessage.replace(/\\{\\{index\\}\\}/, b(s) + 1)))), s.matches(te(t.params.pagination.bulletActiveClass)) ? s.setAttribute(\"aria-current\", \"true\") : s.removeAttribute(\"aria-current\");\n        });\n      }();\n    }), a(\"destroy\", function () {\n      t.params.a11y.enabled && function () {\n        i && i.remove();\n        var _ref6 = t.navigation ? t.navigation : {},\n          e = _ref6.nextEl,\n          s = _ref6.prevEl;\n        e = n(e), s = n(s), e && e.forEach(function (e) {\n          return e.removeEventListener(\"keydown\", h);\n        }), s && s.forEach(function (e) {\n          return e.removeEventListener(\"keydown\", h);\n        }), v() && (Array.isArray(t.pagination.el) ? t.pagination.el : [t.pagination.el]).forEach(function (e) {\n          e.removeEventListener(\"keydown\", h);\n        });\n        t.el.removeEventListener(\"focus\", x, !0), t.el.removeEventListener(\"pointerdown\", y, !0), t.el.removeEventListener(\"pointerup\", E, !0);\n      }();\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      history: {\n        enabled: !1,\n        root: \"\",\n        replaceState: !1,\n        key: \"slides\",\n        keepQuery: !1\n      }\n    });\n    var i = !1,\n      n = {};\n    var l = function l(e) {\n        return e.toString().replace(/\\s+/g, \"-\").replace(/[^\\w-]+/g, \"\").replace(/--+/g, \"-\").replace(/^-+/, \"\").replace(/-+$/, \"\");\n      },\n      o = function o(e) {\n        var t = r();\n        var s;\n        s = e ? new URL(e) : t.location;\n        var a = s.pathname.slice(1).split(\"/\").filter(function (e) {\n            return \"\" !== e;\n          }),\n          i = a.length;\n        return {\n          key: a[i - 2],\n          value: a[i - 1]\n        };\n      },\n      d = function d(e, s) {\n        var a = r();\n        if (!i || !t.params.history.enabled) return;\n        var n;\n        n = t.params.url ? new URL(t.params.url) : a.location;\n        var o = t.slides[s];\n        var d = l(o.getAttribute(\"data-history\"));\n        if (t.params.history.root.length > 0) {\n          var _s33 = t.params.history.root;\n          \"/\" === _s33[_s33.length - 1] && (_s33 = _s33.slice(0, _s33.length - 1)), d = \"\".concat(_s33, \"/\").concat(e ? \"\".concat(e, \"/\") : \"\").concat(d);\n        } else n.pathname.includes(e) || (d = \"\".concat(e ? \"\".concat(e, \"/\") : \"\").concat(d));\n        t.params.history.keepQuery && (d += n.search);\n        var c = a.history.state;\n        c && c.value === d || (t.params.history.replaceState ? a.history.replaceState({\n          value: d\n        }, null, d) : a.history.pushState({\n          value: d\n        }, null, d));\n      },\n      c = function c(e, s, a) {\n        if (s) for (var _i14 = 0, _r11 = t.slides.length; _i14 < _r11; _i14 += 1) {\n          var _r12 = t.slides[_i14];\n          if (l(_r12.getAttribute(\"data-history\")) === s) {\n            var _s34 = t.getSlideIndex(_r12);\n            t.slideTo(_s34, e, a);\n          }\n        } else t.slideTo(0, e, a);\n      },\n      p = function p() {\n        n = o(t.params.url), c(t.params.speed, n.value, !1);\n      };\n    a(\"init\", function () {\n      t.params.history.enabled && function () {\n        var e = r();\n        if (t.params.history) {\n          if (!e.history || !e.history.pushState) return t.params.history.enabled = !1, void (t.params.hashNavigation.enabled = !0);\n          i = !0, n = o(t.params.url), n.key || n.value ? (c(0, n.value, t.params.runCallbacksOnInit), t.params.history.replaceState || e.addEventListener(\"popstate\", p)) : t.params.history.replaceState || e.addEventListener(\"popstate\", p);\n        }\n      }();\n    }), a(\"destroy\", function () {\n      t.params.history.enabled && function () {\n        var e = r();\n        t.params.history.replaceState || e.removeEventListener(\"popstate\", p);\n      }();\n    }), a(\"transitionEnd _freeModeNoMomentumRelease\", function () {\n      i && d(t.params.history.key, t.activeIndex);\n    }), a(\"slideChange\", function () {\n      i && t.params.cssMode && d(t.params.history.key, t.activeIndex);\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      i = e.emit,\n      n = e.on,\n      l = !1;\n    var o = a(),\n      d = r();\n    s({\n      hashNavigation: {\n        enabled: !1,\n        replaceState: !1,\n        watchState: !1,\n        getSlideIndex: function getSlideIndex(e, s) {\n          if (t.virtual && t.params.virtual.enabled) {\n            var _e53 = t.slides.filter(function (e) {\n              return e.getAttribute(\"data-hash\") === s;\n            })[0];\n            if (!_e53) return 0;\n            return parseInt(_e53.getAttribute(\"data-swiper-slide-index\"), 10);\n          }\n          return t.getSlideIndex(f(t.slidesEl, \".\".concat(t.params.slideClass, \"[data-hash=\\\"\").concat(s, \"\\\"], swiper-slide[data-hash=\\\"\").concat(s, \"\\\"]\"))[0]);\n        }\n      }\n    });\n    var c = function c() {\n        i(\"hashChange\");\n        var e = o.location.hash.replace(\"#\", \"\"),\n          s = t.virtual && t.params.virtual.enabled ? t.slidesEl.querySelector(\"[data-swiper-slide-index=\\\"\".concat(t.activeIndex, \"\\\"]\")) : t.slides[t.activeIndex];\n        if (e !== (s ? s.getAttribute(\"data-hash\") : \"\")) {\n          var _s35 = t.params.hashNavigation.getSlideIndex(t, e);\n          if (void 0 === _s35 || Number.isNaN(_s35)) return;\n          t.slideTo(_s35);\n        }\n      },\n      p = function p() {\n        if (!l || !t.params.hashNavigation.enabled) return;\n        var e = t.virtual && t.params.virtual.enabled ? t.slidesEl.querySelector(\"[data-swiper-slide-index=\\\"\".concat(t.activeIndex, \"\\\"]\")) : t.slides[t.activeIndex],\n          s = e ? e.getAttribute(\"data-hash\") || e.getAttribute(\"data-history\") : \"\";\n        t.params.hashNavigation.replaceState && d.history && d.history.replaceState ? (d.history.replaceState(null, null, \"#\".concat(s) || 0), i(\"hashSet\")) : (o.location.hash = s || \"\", i(\"hashSet\"));\n      };\n    n(\"init\", function () {\n      t.params.hashNavigation.enabled && function () {\n        if (!t.params.hashNavigation.enabled || t.params.history && t.params.history.enabled) return;\n        l = !0;\n        var e = o.location.hash.replace(\"#\", \"\");\n        if (e) {\n          var _s36 = 0,\n            _a20 = t.params.hashNavigation.getSlideIndex(t, e);\n          t.slideTo(_a20 || 0, _s36, t.params.runCallbacksOnInit, !0);\n        }\n        t.params.hashNavigation.watchState && d.addEventListener(\"hashchange\", c);\n      }();\n    }), n(\"destroy\", function () {\n      t.params.hashNavigation.enabled && t.params.hashNavigation.watchState && d.removeEventListener(\"hashchange\", c);\n    }), n(\"transitionEnd _freeModeNoMomentumRelease\", function () {\n      l && p();\n    }), n(\"slideChange\", function () {\n      l && t.params.cssMode && p();\n    });\n  }, function (e) {\n    var t,\n      s,\n      i = e.swiper,\n      r = e.extendParams,\n      n = e.on,\n      l = e.emit,\n      o = e.params;\n    i.autoplay = {\n      running: !1,\n      paused: !1,\n      timeLeft: 0\n    }, r({\n      autoplay: {\n        enabled: !1,\n        delay: 3e3,\n        waitForTransition: !0,\n        disableOnInteraction: !0,\n        stopOnLastSlide: !1,\n        reverseDirection: !1,\n        pauseOnMouseEnter: !1\n      }\n    });\n    var d,\n      c,\n      p,\n      u,\n      m,\n      h,\n      f,\n      g = o && o.autoplay ? o.autoplay.delay : 3e3,\n      v = o && o.autoplay ? o.autoplay.delay : 3e3,\n      w = new Date().getTime;\n    function b(e) {\n      i && !i.destroyed && i.wrapperEl && e.target === i.wrapperEl && (i.wrapperEl.removeEventListener(\"transitionend\", b), M());\n    }\n    var y = function y() {\n        if (i.destroyed || !i.autoplay.running) return;\n        i.autoplay.paused ? c = !0 : c && (v = d, c = !1);\n        var e = i.autoplay.paused ? d : w + v - new Date().getTime();\n        i.autoplay.timeLeft = e, l(\"autoplayTimeLeft\", e, e / g), s = requestAnimationFrame(function () {\n          y();\n        });\n      },\n      E = function E(e) {\n        if (i.destroyed || !i.autoplay.running) return;\n        cancelAnimationFrame(s), y();\n        var a = void 0 === e ? i.params.autoplay.delay : e;\n        g = i.params.autoplay.delay, v = i.params.autoplay.delay;\n        var r = function () {\n          var e;\n          if (e = i.virtual && i.params.virtual.enabled ? i.slides.filter(function (e) {\n            return e.classList.contains(\"swiper-slide-active\");\n          })[0] : i.slides[i.activeIndex], !e) return;\n          return parseInt(e.getAttribute(\"data-swiper-autoplay\"), 10);\n        }();\n        !Number.isNaN(r) && r > 0 && void 0 === e && (a = r, g = r, v = r), d = a;\n        var n = i.params.speed,\n          o = function o() {\n            i && !i.destroyed && (i.params.autoplay.reverseDirection ? !i.isBeginning || i.params.loop || i.params.rewind ? (i.slidePrev(n, !0, !0), l(\"autoplay\")) : i.params.autoplay.stopOnLastSlide || (i.slideTo(i.slides.length - 1, n, !0, !0), l(\"autoplay\")) : !i.isEnd || i.params.loop || i.params.rewind ? (i.slideNext(n, !0, !0), l(\"autoplay\")) : i.params.autoplay.stopOnLastSlide || (i.slideTo(0, n, !0, !0), l(\"autoplay\")), i.params.cssMode && (w = new Date().getTime(), requestAnimationFrame(function () {\n              E();\n            })));\n          };\n        return a > 0 ? (clearTimeout(t), t = setTimeout(function () {\n          o();\n        }, a)) : requestAnimationFrame(function () {\n          o();\n        }), a;\n      },\n      x = function x() {\n        i.autoplay.running = !0, E(), l(\"autoplayStart\");\n      },\n      S = function S() {\n        i.autoplay.running = !1, clearTimeout(t), cancelAnimationFrame(s), l(\"autoplayStop\");\n      },\n      T = function T(e, s) {\n        if (i.destroyed || !i.autoplay.running) return;\n        clearTimeout(t), e || (f = !0);\n        var a = function a() {\n          l(\"autoplayPause\"), i.params.autoplay.waitForTransition ? i.wrapperEl.addEventListener(\"transitionend\", b) : M();\n        };\n        if (i.autoplay.paused = !0, s) return h && (d = i.params.autoplay.delay), h = !1, void a();\n        var r = d || i.params.autoplay.delay;\n        d = r - (new Date().getTime() - w), i.isEnd && d < 0 && !i.params.loop || (d < 0 && (d = 0), a());\n      },\n      M = function M() {\n        i.isEnd && d < 0 && !i.params.loop || i.destroyed || !i.autoplay.running || (w = new Date().getTime(), f ? (f = !1, E(d)) : E(), i.autoplay.paused = !1, l(\"autoplayResume\"));\n      },\n      C = function C() {\n        if (i.destroyed || !i.autoplay.running) return;\n        var e = a();\n        \"hidden\" === e.visibilityState && (f = !0, T(!0)), \"visible\" === e.visibilityState && M();\n      },\n      P = function P(e) {\n        \"mouse\" === e.pointerType && (f = !0, T(!0));\n      },\n      L = function L(e) {\n        \"mouse\" === e.pointerType && i.autoplay.paused && M();\n      };\n    n(\"init\", function () {\n      i.params.autoplay.enabled && (i.params.autoplay.pauseOnMouseEnter && (i.el.addEventListener(\"pointerenter\", P), i.el.addEventListener(\"pointerleave\", L)), a().addEventListener(\"visibilitychange\", C), w = new Date().getTime(), x());\n    }), n(\"destroy\", function () {\n      i.el.removeEventListener(\"pointerenter\", P), i.el.removeEventListener(\"pointerleave\", L), a().removeEventListener(\"visibilitychange\", C), i.autoplay.running && S();\n    }), n(\"beforeTransitionStart\", function (e, t, s) {\n      !i.destroyed && i.autoplay.running && (s || !i.params.autoplay.disableOnInteraction ? T(!0, !0) : S());\n    }), n(\"sliderFirstMove\", function () {\n      !i.destroyed && i.autoplay.running && (i.params.autoplay.disableOnInteraction ? S() : (p = !0, u = !1, f = !1, m = setTimeout(function () {\n        f = !0, u = !0, T(!0);\n      }, 200)));\n    }), n(\"touchEnd\", function () {\n      if (!i.destroyed && i.autoplay.running && p) {\n        if (clearTimeout(m), clearTimeout(t), i.params.autoplay.disableOnInteraction) return u = !1, void (p = !1);\n        u && i.params.cssMode && M(), u = !1, p = !1;\n      }\n    }), n(\"slideChange\", function () {\n      !i.destroyed && i.autoplay.running && (h = !0);\n    }), Object.assign(i.autoplay, {\n      start: x,\n      stop: S,\n      pause: T,\n      resume: M\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      i = e.on;\n    s({\n      thumbs: {\n        swiper: null,\n        multipleActiveThumbs: !0,\n        autoScrollOffset: 0,\n        slideThumbActiveClass: \"swiper-slide-thumb-active\",\n        thumbsContainerClass: \"swiper-thumbs\"\n      }\n    });\n    var r = !1,\n      n = !1;\n    function l() {\n      var e = t.thumbs.swiper;\n      if (!e || e.destroyed) return;\n      var s = e.clickedIndex,\n        a = e.clickedSlide;\n      if (a && a.classList.contains(t.params.thumbs.slideThumbActiveClass)) return;\n      if (null == s) return;\n      var i;\n      i = e.params.loop ? parseInt(e.clickedSlide.getAttribute(\"data-swiper-slide-index\"), 10) : s, t.params.loop ? t.slideToLoop(i) : t.slideTo(i);\n    }\n    function o() {\n      var e = t.params.thumbs;\n      if (r) return !1;\n      r = !0;\n      var s = t.constructor;\n      if (e.swiper instanceof s) t.thumbs.swiper = e.swiper, Object.assign(t.thumbs.swiper.originalParams, {\n        watchSlidesProgress: !0,\n        slideToClickedSlide: !1\n      }), Object.assign(t.thumbs.swiper.params, {\n        watchSlidesProgress: !0,\n        slideToClickedSlide: !1\n      }), t.thumbs.swiper.update();else if (d(e.swiper)) {\n        var _a21 = Object.assign({}, e.swiper);\n        Object.assign(_a21, {\n          watchSlidesProgress: !0,\n          slideToClickedSlide: !1\n        }), t.thumbs.swiper = new s(_a21), n = !0;\n      }\n      return t.thumbs.swiper.el.classList.add(t.params.thumbs.thumbsContainerClass), t.thumbs.swiper.on(\"tap\", l), !0;\n    }\n    function c(e) {\n      var s = t.thumbs.swiper;\n      if (!s || s.destroyed) return;\n      var a = \"auto\" === s.params.slidesPerView ? s.slidesPerViewDynamic() : s.params.slidesPerView;\n      var i = 1;\n      var r = t.params.thumbs.slideThumbActiveClass;\n      if (t.params.slidesPerView > 1 && !t.params.centeredSlides && (i = t.params.slidesPerView), t.params.thumbs.multipleActiveThumbs || (i = 1), i = Math.floor(i), s.slides.forEach(function (e) {\n        return e.classList.remove(r);\n      }), s.params.loop || s.params.virtual && s.params.virtual.enabled) for (var _e54 = 0; _e54 < i; _e54 += 1) f(s.slidesEl, \"[data-swiper-slide-index=\\\"\".concat(t.realIndex + _e54, \"\\\"]\")).forEach(function (e) {\n        e.classList.add(r);\n      });else for (var _e55 = 0; _e55 < i; _e55 += 1) s.slides[t.realIndex + _e55] && s.slides[t.realIndex + _e55].classList.add(r);\n      var n = t.params.thumbs.autoScrollOffset,\n        l = n && !s.params.loop;\n      if (t.realIndex !== s.realIndex || l) {\n        var _i15 = s.activeIndex;\n        var _r13, _o7;\n        if (s.params.loop) {\n          var _e56 = s.slides.filter(function (e) {\n            return e.getAttribute(\"data-swiper-slide-index\") === \"\".concat(t.realIndex);\n          })[0];\n          _r13 = s.slides.indexOf(_e56), _o7 = t.activeIndex > t.previousIndex ? \"next\" : \"prev\";\n        } else _r13 = t.realIndex, _o7 = _r13 > t.previousIndex ? \"next\" : \"prev\";\n        l && (_r13 += \"next\" === _o7 ? n : -1 * n), s.visibleSlidesIndexes && s.visibleSlidesIndexes.indexOf(_r13) < 0 && (s.params.centeredSlides ? _r13 = _r13 > _i15 ? _r13 - Math.floor(a / 2) + 1 : _r13 + Math.floor(a / 2) - 1 : _r13 > _i15 && s.params.slidesPerGroup, s.slideTo(_r13, e ? 0 : void 0));\n      }\n    }\n    t.thumbs = {\n      swiper: null\n    }, i(\"beforeInit\", function () {\n      var e = t.params.thumbs;\n      if (e && e.swiper) if (\"string\" == typeof e.swiper || e.swiper instanceof HTMLElement) {\n        var _s37 = a(),\n          _i16 = function _i16() {\n            var a = \"string\" == typeof e.swiper ? _s37.querySelector(e.swiper) : e.swiper;\n            if (a && a.swiper) e.swiper = a.swiper, o(), c(!0);else if (a) {\n              var _s38 = function _s38(i) {\n                e.swiper = i.detail[0], a.removeEventListener(\"init\", _s38), o(), c(!0), e.swiper.update(), t.update();\n              };\n              a.addEventListener(\"init\", _s38);\n            }\n            return a;\n          },\n          _r14 = function _r14() {\n            if (t.destroyed) return;\n            _i16() || requestAnimationFrame(_r14);\n          };\n        requestAnimationFrame(_r14);\n      } else o(), c(!0);\n    }), i(\"slideChange update resize observerUpdate\", function () {\n      c();\n    }), i(\"setTransition\", function (e, s) {\n      var a = t.thumbs.swiper;\n      a && !a.destroyed && a.setTransition(s);\n    }), i(\"beforeDestroy\", function () {\n      var e = t.thumbs.swiper;\n      e && !e.destroyed && n && e.destroy();\n    }), Object.assign(t.thumbs, {\n      init: o,\n      update: c\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.emit,\n      i = e.once;\n    s({\n      freeMode: {\n        enabled: !1,\n        momentum: !0,\n        momentumRatio: 1,\n        momentumBounce: !0,\n        momentumBounceRatio: 1,\n        momentumVelocityRatio: 1,\n        sticky: !1,\n        minimumVelocity: .02\n      }\n    }), Object.assign(t, {\n      freeMode: {\n        onTouchStart: function onTouchStart() {\n          if (t.params.cssMode) return;\n          var e = t.getTranslate();\n          t.setTranslate(e), t.setTransition(0), t.touchEventsData.velocities.length = 0, t.freeMode.onTouchEnd({\n            currentPos: t.rtl ? t.translate : -t.translate\n          });\n        },\n        onTouchMove: function onTouchMove() {\n          if (t.params.cssMode) return;\n          var e = t.touchEventsData,\n            s = t.touches;\n          0 === e.velocities.length && e.velocities.push({\n            position: s[t.isHorizontal() ? \"startX\" : \"startY\"],\n            time: e.touchStartTime\n          }), e.velocities.push({\n            position: s[t.isHorizontal() ? \"currentX\" : \"currentY\"],\n            time: l()\n          });\n        },\n        onTouchEnd: function onTouchEnd(e) {\n          var s = e.currentPos;\n          if (t.params.cssMode) return;\n          var r = t.params,\n            n = t.wrapperEl,\n            o = t.rtlTranslate,\n            d = t.snapGrid,\n            c = t.touchEventsData,\n            p = l() - c.touchStartTime;\n          if (s < -t.minTranslate()) t.slideTo(t.activeIndex);else if (s > -t.maxTranslate()) t.slides.length < d.length ? t.slideTo(d.length - 1) : t.slideTo(t.slides.length - 1);else {\n            if (r.freeMode.momentum) {\n              if (c.velocities.length > 1) {\n                var _e57 = c.velocities.pop(),\n                  _s39 = c.velocities.pop(),\n                  _a22 = _e57.position - _s39.position,\n                  _i17 = _e57.time - _s39.time;\n                t.velocity = _a22 / _i17, t.velocity /= 2, Math.abs(t.velocity) < r.freeMode.minimumVelocity && (t.velocity = 0), (_i17 > 150 || l() - _e57.time > 300) && (t.velocity = 0);\n              } else t.velocity = 0;\n              t.velocity *= r.freeMode.momentumVelocityRatio, c.velocities.length = 0;\n              var _e58 = 1e3 * r.freeMode.momentumRatio;\n              var _s40 = t.velocity * _e58;\n              var _p3 = t.translate + _s40;\n              o && (_p3 = -_p3);\n              var _u3,\n                _m2 = !1;\n              var _h = 20 * Math.abs(t.velocity) * r.freeMode.momentumBounceRatio;\n              var _f;\n              if (_p3 < t.maxTranslate()) r.freeMode.momentumBounce ? (_p3 + t.maxTranslate() < -_h && (_p3 = t.maxTranslate() - _h), _u3 = t.maxTranslate(), _m2 = !0, c.allowMomentumBounce = !0) : _p3 = t.maxTranslate(), r.loop && r.centeredSlides && (_f = !0);else if (_p3 > t.minTranslate()) r.freeMode.momentumBounce ? (_p3 - t.minTranslate() > _h && (_p3 = t.minTranslate() + _h), _u3 = t.minTranslate(), _m2 = !0, c.allowMomentumBounce = !0) : _p3 = t.minTranslate(), r.loop && r.centeredSlides && (_f = !0);else if (r.freeMode.sticky) {\n                var _e59;\n                for (var _t42 = 0; _t42 < d.length; _t42 += 1) if (d[_t42] > -_p3) {\n                  _e59 = _t42;\n                  break;\n                }\n                _p3 = Math.abs(d[_e59] - _p3) < Math.abs(d[_e59 - 1] - _p3) || \"next\" === t.swipeDirection ? d[_e59] : d[_e59 - 1], _p3 = -_p3;\n              }\n              if (_f && i(\"transitionEnd\", function () {\n                t.loopFix();\n              }), 0 !== t.velocity) {\n                if (_e58 = o ? Math.abs((-_p3 - t.translate) / t.velocity) : Math.abs((_p3 - t.translate) / t.velocity), r.freeMode.sticky) {\n                  var _s41 = Math.abs((o ? -_p3 : _p3) - t.translate),\n                    _a23 = t.slidesSizesGrid[t.activeIndex];\n                  _e58 = _s41 < _a23 ? r.speed : _s41 < 2 * _a23 ? 1.5 * r.speed : 2.5 * r.speed;\n                }\n              } else if (r.freeMode.sticky) return void t.slideToClosest();\n              r.freeMode.momentumBounce && _m2 ? (t.updateProgress(_u3), t.setTransition(_e58), t.setTranslate(_p3), t.transitionStart(!0, t.swipeDirection), t.animating = !0, E(n, function () {\n                t && !t.destroyed && c.allowMomentumBounce && (a(\"momentumBounce\"), t.setTransition(r.speed), setTimeout(function () {\n                  t.setTranslate(_u3), E(n, function () {\n                    t && !t.destroyed && t.transitionEnd();\n                  });\n                }, 0));\n              })) : t.velocity ? (a(\"_freeModeNoMomentumRelease\"), t.updateProgress(_p3), t.setTransition(_e58), t.setTranslate(_p3), t.transitionStart(!0, t.swipeDirection), t.animating || (t.animating = !0, E(n, function () {\n                t && !t.destroyed && t.transitionEnd();\n              }))) : t.updateProgress(_p3), t.updateActiveIndex(), t.updateSlidesClasses();\n            } else {\n              if (r.freeMode.sticky) return void t.slideToClosest();\n              r.freeMode && a(\"_freeModeNoMomentumRelease\");\n            }\n            (!r.freeMode.momentum || p >= r.longSwipesMs) && (t.updateProgress(), t.updateActiveIndex(), t.updateSlidesClasses());\n          }\n        }\n      }\n    });\n  }, function (e) {\n    var t,\n      s,\n      a,\n      i = e.swiper,\n      r = e.extendParams;\n    r({\n      grid: {\n        rows: 1,\n        fill: \"column\"\n      }\n    });\n    var n = function n() {\n      var e = i.params.spaceBetween;\n      return \"string\" == typeof e && e.indexOf(\"%\") >= 0 ? e = parseFloat(e.replace(\"%\", \"\")) / 100 * i.size : \"string\" == typeof e && (e = parseFloat(e)), e;\n    };\n    i.grid = {\n      initSlides: function initSlides(e) {\n        var r = i.params.slidesPerView,\n          _i$params$grid = i.params.grid,\n          n = _i$params$grid.rows,\n          l = _i$params$grid.fill;\n        a = Math.floor(e / n), t = Math.floor(e / n) === e / n ? e : Math.ceil(e / n) * n, \"auto\" !== r && \"row\" === l && (t = Math.max(t, r * n)), s = t / n;\n      },\n      updateSlide: function updateSlide(e, r, l, o) {\n        var d = i.params.slidesPerGroup,\n          c = n(),\n          _i$params$grid2 = i.params.grid,\n          p = _i$params$grid2.rows,\n          u = _i$params$grid2.fill;\n        var m, h, f;\n        if (\"row\" === u && d > 1) {\n          var _s42 = Math.floor(e / (d * p)),\n            _a24 = e - p * d * _s42,\n            _i18 = 0 === _s42 ? d : Math.min(Math.ceil((l - _s42 * p * d) / p), d);\n          f = Math.floor(_a24 / _i18), h = _a24 - f * _i18 + _s42 * d, m = h + f * t / p, r.style.order = m;\n        } else \"column\" === u ? (h = Math.floor(e / p), f = e - h * p, (h > a || h === a && f === p - 1) && (f += 1, f >= p && (f = 0, h += 1))) : (f = Math.floor(e / s), h = e - f * s);\n        r.row = f, r.column = h, r.style[o(\"margin-top\")] = 0 !== f ? c && \"\".concat(c, \"px\") : \"\";\n      },\n      updateWrapperSize: function updateWrapperSize(e, s, a) {\n        var _i$params = i.params,\n          r = _i$params.centeredSlides,\n          l = _i$params.roundLengths,\n          o = n(),\n          d = i.params.grid.rows;\n        if (i.virtualSize = (e + o) * t, i.virtualSize = Math.ceil(i.virtualSize / d) - o, i.wrapperEl.style[a(\"width\")] = \"\".concat(i.virtualSize + o, \"px\"), r) {\n          var _e60 = [];\n          for (var _t43 = 0; _t43 < s.length; _t43 += 1) {\n            var _a25 = s[_t43];\n            l && (_a25 = Math.floor(_a25)), s[_t43] < i.virtualSize + s[0] && _e60.push(_a25);\n          }\n          s.splice(0, s.length), s.push.apply(s, _e60);\n        }\n      }\n    };\n  }, function (e) {\n    var t = e.swiper;\n    Object.assign(t, {\n      appendSlide: se.bind(t),\n      prependSlide: ae.bind(t),\n      addSlide: ie.bind(t),\n      removeSlide: re.bind(t),\n      removeAllSlides: ne.bind(t)\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      fadeEffect: {\n        crossFade: !1\n      }\n    }), le({\n      effect: \"fade\",\n      swiper: t,\n      on: a,\n      setTranslate: function setTranslate() {\n        var e = t.slides;\n        t.params.fadeEffect;\n        for (var _s43 = 0; _s43 < e.length; _s43 += 1) {\n          var _e61 = t.slides[_s43];\n          var _a26 = -_e61.swiperSlideOffset;\n          t.params.virtualTranslate || (_a26 -= t.translate);\n          var _i19 = 0;\n          t.isHorizontal() || (_i19 = _a26, _a26 = 0);\n          var _r15 = t.params.fadeEffect.crossFade ? Math.max(1 - Math.abs(_e61.progress), 0) : 1 + Math.min(Math.max(_e61.progress, -1), 0),\n            _n7 = oe(0, _e61);\n          _n7.style.opacity = _r15, _n7.style.transform = \"translate3d(\".concat(_a26, \"px, \").concat(_i19, \"px, 0px)\");\n        }\n      },\n      setTransition: function setTransition(e) {\n        var s = t.slides.map(function (e) {\n          return h(e);\n        });\n        s.forEach(function (t) {\n          t.style.transitionDuration = \"\".concat(e, \"ms\");\n        }), de({\n          swiper: t,\n          duration: e,\n          transformElements: s,\n          allSlides: !0\n        });\n      },\n      overwriteParams: function overwriteParams() {\n        return {\n          slidesPerView: 1,\n          slidesPerGroup: 1,\n          watchSlidesProgress: !0,\n          spaceBetween: 0,\n          virtualTranslate: !t.params.cssMode\n        };\n      }\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      cubeEffect: {\n        slideShadows: !0,\n        shadow: !0,\n        shadowOffset: 20,\n        shadowScale: .94\n      }\n    });\n    var i = function i(e, t, s) {\n      var a = s ? e.querySelector(\".swiper-slide-shadow-left\") : e.querySelector(\".swiper-slide-shadow-top\"),\n        i = s ? e.querySelector(\".swiper-slide-shadow-right\") : e.querySelector(\".swiper-slide-shadow-bottom\");\n      a || (a = g(\"div\", \"swiper-slide-shadow-\" + (s ? \"left\" : \"top\")), e.append(a)), i || (i = g(\"div\", \"swiper-slide-shadow-\" + (s ? \"right\" : \"bottom\")), e.append(i)), a && (a.style.opacity = Math.max(-t, 0)), i && (i.style.opacity = Math.max(t, 0));\n    };\n    le({\n      effect: \"cube\",\n      swiper: t,\n      on: a,\n      setTranslate: function setTranslate() {\n        var e = t.el,\n          s = t.wrapperEl,\n          a = t.slides,\n          r = t.width,\n          n = t.height,\n          l = t.rtlTranslate,\n          o = t.size,\n          d = t.browser,\n          c = t.params.cubeEffect,\n          p = t.isHorizontal(),\n          u = t.virtual && t.params.virtual.enabled;\n        var m,\n          h = 0;\n        c.shadow && (p ? (m = t.slidesEl.querySelector(\".swiper-cube-shadow\"), m || (m = g(\"div\", \"swiper-cube-shadow\"), t.slidesEl.append(m)), m.style.height = \"\".concat(r, \"px\")) : (m = e.querySelector(\".swiper-cube-shadow\"), m || (m = g(\"div\", \"swiper-cube-shadow\"), e.append(m))));\n        for (var _e62 = 0; _e62 < a.length; _e62 += 1) {\n          var _t44 = a[_e62];\n          var _s44 = _e62;\n          u && (_s44 = parseInt(_t44.getAttribute(\"data-swiper-slide-index\"), 10));\n          var _r16 = 90 * _s44,\n            _n8 = Math.floor(_r16 / 360);\n          l && (_r16 = -_r16, _n8 = Math.floor(-_r16 / 360));\n          var _d4 = Math.max(Math.min(_t44.progress, 1), -1);\n          var _m3 = 0,\n            _f2 = 0,\n            _g = 0;\n          _s44 % 4 == 0 ? (_m3 = 4 * -_n8 * o, _g = 0) : (_s44 - 1) % 4 == 0 ? (_m3 = 0, _g = 4 * -_n8 * o) : (_s44 - 2) % 4 == 0 ? (_m3 = o + 4 * _n8 * o, _g = o) : (_s44 - 3) % 4 == 0 && (_m3 = -o, _g = 3 * o + 4 * o * _n8), l && (_m3 = -_m3), p || (_f2 = _m3, _m3 = 0);\n          var _v = \"rotateX(\".concat(p ? 0 : -_r16, \"deg) rotateY(\").concat(p ? _r16 : 0, \"deg) translate3d(\").concat(_m3, \"px, \").concat(_f2, \"px, \").concat(_g, \"px)\");\n          _d4 <= 1 && _d4 > -1 && (h = 90 * _s44 + 90 * _d4, l && (h = 90 * -_s44 - 90 * _d4)), _t44.style.transform = _v, c.slideShadows && i(_t44, _d4, p);\n        }\n        if (s.style.transformOrigin = \"50% 50% -\".concat(o / 2, \"px\"), s.style[\"-webkit-transform-origin\"] = \"50% 50% -\".concat(o / 2, \"px\"), c.shadow) if (p) m.style.transform = \"translate3d(0px, \".concat(r / 2 + c.shadowOffset, \"px, \").concat(-r / 2, \"px) rotateX(90deg) rotateZ(0deg) scale(\").concat(c.shadowScale, \")\");else {\n          var _e63 = Math.abs(h) - 90 * Math.floor(Math.abs(h) / 90),\n            _t45 = 1.5 - (Math.sin(2 * _e63 * Math.PI / 360) / 2 + Math.cos(2 * _e63 * Math.PI / 360) / 2),\n            _s45 = c.shadowScale,\n            _a27 = c.shadowScale / _t45,\n            _i20 = c.shadowOffset;\n          m.style.transform = \"scale3d(\".concat(_s45, \", 1, \").concat(_a27, \") translate3d(0px, \").concat(n / 2 + _i20, \"px, \").concat(-n / 2 / _a27, \"px) rotateX(-90deg)\");\n        }\n        var f = (d.isSafari || d.isWebView) && d.needPerspectiveFix ? -o / 2 : 0;\n        s.style.transform = \"translate3d(0px,0,\".concat(f, \"px) rotateX(\").concat(t.isHorizontal() ? 0 : h, \"deg) rotateY(\").concat(t.isHorizontal() ? -h : 0, \"deg)\"), s.style.setProperty(\"--swiper-cube-translate-z\", \"\".concat(f, \"px\"));\n      },\n      setTransition: function setTransition(e) {\n        var s = t.el,\n          a = t.slides;\n        if (a.forEach(function (t) {\n          t.style.transitionDuration = \"\".concat(e, \"ms\"), t.querySelectorAll(\".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left\").forEach(function (t) {\n            t.style.transitionDuration = \"\".concat(e, \"ms\");\n          });\n        }), t.params.cubeEffect.shadow && !t.isHorizontal()) {\n          var _t46 = s.querySelector(\".swiper-cube-shadow\");\n          _t46 && (_t46.style.transitionDuration = \"\".concat(e, \"ms\"));\n        }\n      },\n      recreateShadows: function recreateShadows() {\n        var e = t.isHorizontal();\n        t.slides.forEach(function (t) {\n          var s = Math.max(Math.min(t.progress, 1), -1);\n          i(t, s, e);\n        });\n      },\n      getEffectParams: function getEffectParams() {\n        return t.params.cubeEffect;\n      },\n      perspective: function perspective() {\n        return !0;\n      },\n      overwriteParams: function overwriteParams() {\n        return {\n          slidesPerView: 1,\n          slidesPerGroup: 1,\n          watchSlidesProgress: !0,\n          resistanceRatio: 0,\n          spaceBetween: 0,\n          centeredSlides: !1,\n          virtualTranslate: !0\n        };\n      }\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      flipEffect: {\n        slideShadows: !0,\n        limitRotation: !0\n      }\n    });\n    var i = function i(e, s, a) {\n      var i = t.isHorizontal() ? e.querySelector(\".swiper-slide-shadow-left\") : e.querySelector(\".swiper-slide-shadow-top\"),\n        r = t.isHorizontal() ? e.querySelector(\".swiper-slide-shadow-right\") : e.querySelector(\".swiper-slide-shadow-bottom\");\n      i || (i = ce(0, e, t.isHorizontal() ? \"left\" : \"top\")), r || (r = ce(0, e, t.isHorizontal() ? \"right\" : \"bottom\")), i && (i.style.opacity = Math.max(-s, 0)), r && (r.style.opacity = Math.max(s, 0));\n    };\n    le({\n      effect: \"flip\",\n      swiper: t,\n      on: a,\n      setTranslate: function setTranslate() {\n        var e = t.slides,\n          s = t.rtlTranslate,\n          a = t.params.flipEffect;\n        for (var _r17 = 0; _r17 < e.length; _r17 += 1) {\n          var _n9 = e[_r17];\n          var _l8 = _n9.progress;\n          t.params.flipEffect.limitRotation && (_l8 = Math.max(Math.min(_n9.progress, 1), -1));\n          var _o8 = _n9.swiperSlideOffset;\n          var _d5 = -180 * _l8,\n            _c3 = 0,\n            _p4 = t.params.cssMode ? -_o8 - t.translate : -_o8,\n            _u4 = 0;\n          t.isHorizontal() ? s && (_d5 = -_d5) : (_u4 = _p4, _p4 = 0, _c3 = -_d5, _d5 = 0), _n9.style.zIndex = -Math.abs(Math.round(_l8)) + e.length, a.slideShadows && i(_n9, _l8);\n          var _m4 = \"translate3d(\".concat(_p4, \"px, \").concat(_u4, \"px, 0px) rotateX(\").concat(_c3, \"deg) rotateY(\").concat(_d5, \"deg)\");\n          oe(0, _n9).style.transform = _m4;\n        }\n      },\n      setTransition: function setTransition(e) {\n        var s = t.slides.map(function (e) {\n          return h(e);\n        });\n        s.forEach(function (t) {\n          t.style.transitionDuration = \"\".concat(e, \"ms\"), t.querySelectorAll(\".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left\").forEach(function (t) {\n            t.style.transitionDuration = \"\".concat(e, \"ms\");\n          });\n        }), de({\n          swiper: t,\n          duration: e,\n          transformElements: s\n        });\n      },\n      recreateShadows: function recreateShadows() {\n        t.params.flipEffect;\n        t.slides.forEach(function (e) {\n          var s = e.progress;\n          t.params.flipEffect.limitRotation && (s = Math.max(Math.min(e.progress, 1), -1)), i(e, s);\n        });\n      },\n      getEffectParams: function getEffectParams() {\n        return t.params.flipEffect;\n      },\n      perspective: function perspective() {\n        return !0;\n      },\n      overwriteParams: function overwriteParams() {\n        return {\n          slidesPerView: 1,\n          slidesPerGroup: 1,\n          watchSlidesProgress: !0,\n          spaceBetween: 0,\n          virtualTranslate: !t.params.cssMode\n        };\n      }\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      coverflowEffect: {\n        rotate: 50,\n        stretch: 0,\n        depth: 100,\n        scale: 1,\n        modifier: 1,\n        slideShadows: !0\n      }\n    }), le({\n      effect: \"coverflow\",\n      swiper: t,\n      on: a,\n      setTranslate: function setTranslate() {\n        var e = t.width,\n          s = t.height,\n          a = t.slides,\n          i = t.slidesSizesGrid,\n          r = t.params.coverflowEffect,\n          n = t.isHorizontal(),\n          l = t.translate,\n          o = n ? e / 2 - l : s / 2 - l,\n          d = n ? r.rotate : -r.rotate,\n          c = r.depth;\n        for (var _e64 = 0, _t47 = a.length; _e64 < _t47; _e64 += 1) {\n          var _t48 = a[_e64],\n            _s46 = i[_e64],\n            _l9 = (o - _t48.swiperSlideOffset - _s46 / 2) / _s46,\n            _p5 = \"function\" == typeof r.modifier ? r.modifier(_l9) : _l9 * r.modifier;\n          var _u5 = n ? d * _p5 : 0,\n            _m5 = n ? 0 : d * _p5,\n            _h2 = -c * Math.abs(_p5),\n            _f3 = r.stretch;\n          \"string\" == typeof _f3 && -1 !== _f3.indexOf(\"%\") && (_f3 = parseFloat(r.stretch) / 100 * _s46);\n          var _g2 = n ? 0 : _f3 * _p5,\n            _v2 = n ? _f3 * _p5 : 0,\n            _w = 1 - (1 - r.scale) * Math.abs(_p5);\n          Math.abs(_v2) < .001 && (_v2 = 0), Math.abs(_g2) < .001 && (_g2 = 0), Math.abs(_h2) < .001 && (_h2 = 0), Math.abs(_u5) < .001 && (_u5 = 0), Math.abs(_m5) < .001 && (_m5 = 0), Math.abs(_w) < .001 && (_w = 0);\n          var _b = \"translate3d(\".concat(_v2, \"px,\").concat(_g2, \"px,\").concat(_h2, \"px)  rotateX(\").concat(_m5, \"deg) rotateY(\").concat(_u5, \"deg) scale(\").concat(_w, \")\");\n          if (oe(0, _t48).style.transform = _b, _t48.style.zIndex = 1 - Math.abs(Math.round(_p5)), r.slideShadows) {\n            var _e65 = n ? _t48.querySelector(\".swiper-slide-shadow-left\") : _t48.querySelector(\".swiper-slide-shadow-top\"),\n              _s47 = n ? _t48.querySelector(\".swiper-slide-shadow-right\") : _t48.querySelector(\".swiper-slide-shadow-bottom\");\n            _e65 || (_e65 = ce(0, _t48, n ? \"left\" : \"top\")), _s47 || (_s47 = ce(0, _t48, n ? \"right\" : \"bottom\")), _e65 && (_e65.style.opacity = _p5 > 0 ? _p5 : 0), _s47 && (_s47.style.opacity = -_p5 > 0 ? -_p5 : 0);\n          }\n        }\n      },\n      setTransition: function setTransition(e) {\n        t.slides.map(function (e) {\n          return h(e);\n        }).forEach(function (t) {\n          t.style.transitionDuration = \"\".concat(e, \"ms\"), t.querySelectorAll(\".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left\").forEach(function (t) {\n            t.style.transitionDuration = \"\".concat(e, \"ms\");\n          });\n        });\n      },\n      perspective: function perspective() {\n        return !0;\n      },\n      overwriteParams: function overwriteParams() {\n        return {\n          watchSlidesProgress: !0\n        };\n      }\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      creativeEffect: {\n        limitProgress: 1,\n        shadowPerProgress: !1,\n        progressMultiplier: 1,\n        perspective: !0,\n        prev: {\n          translate: [0, 0, 0],\n          rotate: [0, 0, 0],\n          opacity: 1,\n          scale: 1\n        },\n        next: {\n          translate: [0, 0, 0],\n          rotate: [0, 0, 0],\n          opacity: 1,\n          scale: 1\n        }\n      }\n    });\n    var i = function i(e) {\n      return \"string\" == typeof e ? e : \"\".concat(e, \"px\");\n    };\n    le({\n      effect: \"creative\",\n      swiper: t,\n      on: a,\n      setTranslate: function setTranslate() {\n        var e = t.slides,\n          s = t.wrapperEl,\n          a = t.slidesSizesGrid,\n          r = t.params.creativeEffect,\n          n = r.progressMultiplier,\n          l = t.params.centeredSlides;\n        if (l) {\n          var _e66 = a[0] / 2 - t.params.slidesOffsetBefore || 0;\n          s.style.transform = \"translateX(calc(50% - \".concat(_e66, \"px))\");\n        }\n        var _loop = function _loop() {\n          var a = e[_s48],\n            o = a.progress,\n            d = Math.min(Math.max(a.progress, -r.limitProgress), r.limitProgress);\n          var c = d;\n          l || (c = Math.min(Math.max(a.originalProgress, -r.limitProgress), r.limitProgress));\n          var p = a.swiperSlideOffset,\n            u = [t.params.cssMode ? -p - t.translate : -p, 0, 0],\n            m = [0, 0, 0];\n          var h = !1;\n          t.isHorizontal() || (u[1] = u[0], u[0] = 0);\n          var f = {\n            translate: [0, 0, 0],\n            rotate: [0, 0, 0],\n            scale: 1,\n            opacity: 1\n          };\n          d < 0 ? (f = r.next, h = !0) : d > 0 && (f = r.prev, h = !0), u.forEach(function (e, t) {\n            u[t] = \"calc(\".concat(e, \"px + (\").concat(i(f.translate[t]), \" * \").concat(Math.abs(d * n), \"))\");\n          }), m.forEach(function (e, t) {\n            m[t] = f.rotate[t] * Math.abs(d * n);\n          }), a.style.zIndex = -Math.abs(Math.round(o)) + e.length;\n          var g = u.join(\", \"),\n            v = \"rotateX(\".concat(m[0], \"deg) rotateY(\").concat(m[1], \"deg) rotateZ(\").concat(m[2], \"deg)\"),\n            w = c < 0 ? \"scale(\".concat(1 + (1 - f.scale) * c * n, \")\") : \"scale(\".concat(1 - (1 - f.scale) * c * n, \")\"),\n            b = c < 0 ? 1 + (1 - f.opacity) * c * n : 1 - (1 - f.opacity) * c * n,\n            y = \"translate3d(\".concat(g, \") \").concat(v, \" \").concat(w);\n          if (h && f.shadow || !h) {\n            var _e67 = a.querySelector(\".swiper-slide-shadow\");\n            if (!_e67 && f.shadow && (_e67 = ce(0, a)), _e67) {\n              var _t49 = r.shadowPerProgress ? d * (1 / r.limitProgress) : d;\n              _e67.style.opacity = Math.min(Math.max(Math.abs(_t49), 0), 1);\n            }\n          }\n          var E = oe(0, a);\n          E.style.transform = y, E.style.opacity = b, f.origin && (E.style.transformOrigin = f.origin);\n        };\n        for (var _s48 = 0; _s48 < e.length; _s48 += 1) {\n          _loop();\n        }\n      },\n      setTransition: function setTransition(e) {\n        var s = t.slides.map(function (e) {\n          return h(e);\n        });\n        s.forEach(function (t) {\n          t.style.transitionDuration = \"\".concat(e, \"ms\"), t.querySelectorAll(\".swiper-slide-shadow\").forEach(function (t) {\n            t.style.transitionDuration = \"\".concat(e, \"ms\");\n          });\n        }), de({\n          swiper: t,\n          duration: e,\n          transformElements: s,\n          allSlides: !0\n        });\n      },\n      perspective: function perspective() {\n        return t.params.creativeEffect.perspective;\n      },\n      overwriteParams: function overwriteParams() {\n        return {\n          watchSlidesProgress: !0,\n          virtualTranslate: !t.params.cssMode\n        };\n      }\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      cardsEffect: {\n        slideShadows: !0,\n        rotate: !0,\n        perSlideRotate: 2,\n        perSlideOffset: 8\n      }\n    }), le({\n      effect: \"cards\",\n      swiper: t,\n      on: a,\n      setTranslate: function setTranslate() {\n        var e = t.slides,\n          s = t.activeIndex,\n          a = t.rtlTranslate,\n          i = t.params.cardsEffect,\n          _t$touchEventsData = t.touchEventsData,\n          r = _t$touchEventsData.startTranslate,\n          n = _t$touchEventsData.isTouched,\n          l = a ? -t.translate : t.translate;\n        for (var _o9 = 0; _o9 < e.length; _o9 += 1) {\n          var _d6 = e[_o9],\n            _c4 = _d6.progress,\n            _p6 = Math.min(Math.max(_c4, -4), 4);\n          var _u6 = _d6.swiperSlideOffset;\n          t.params.centeredSlides && !t.params.cssMode && (t.wrapperEl.style.transform = \"translateX(\".concat(t.minTranslate(), \"px)\")), t.params.centeredSlides && t.params.cssMode && (_u6 -= e[0].swiperSlideOffset);\n          var _m6 = t.params.cssMode ? -_u6 - t.translate : -_u6,\n            _h3 = 0;\n          var _f4 = -100 * Math.abs(_p6);\n          var _g3 = 1,\n            _v3 = -i.perSlideRotate * _p6,\n            _w2 = i.perSlideOffset - .75 * Math.abs(_p6);\n          var _b2 = t.virtual && t.params.virtual.enabled ? t.virtual.from + _o9 : _o9,\n            _y = (_b2 === s || _b2 === s - 1) && _p6 > 0 && _p6 < 1 && (n || t.params.cssMode) && l < r,\n            _E = (_b2 === s || _b2 === s + 1) && _p6 < 0 && _p6 > -1 && (n || t.params.cssMode) && l > r;\n          if (_y || _E) {\n            var _e68 = Math.pow(1 - Math.abs((Math.abs(_p6) - .5) / .5), .5);\n            _v3 += -28 * _p6 * _e68, _g3 += -.5 * _e68, _w2 += 96 * _e68, _h3 = -25 * _e68 * Math.abs(_p6) + \"%\";\n          }\n          if (_m6 = _p6 < 0 ? \"calc(\".concat(_m6, \"px \").concat(a ? \"-\" : \"+\", \" (\").concat(_w2 * Math.abs(_p6), \"%))\") : _p6 > 0 ? \"calc(\".concat(_m6, \"px \").concat(a ? \"-\" : \"+\", \" (-\").concat(_w2 * Math.abs(_p6), \"%))\") : \"\".concat(_m6, \"px\"), !t.isHorizontal()) {\n            var _e69 = _h3;\n            _h3 = _m6, _m6 = _e69;\n          }\n          var _x = _p6 < 0 ? \"\" + (1 + (1 - _g3) * _p6) : \"\" + (1 - (1 - _g3) * _p6),\n            _S = \"\\n        translate3d(\".concat(_m6, \", \").concat(_h3, \", \").concat(_f4, \"px)\\n        rotateZ(\").concat(i.rotate ? a ? -_v3 : _v3 : 0, \"deg)\\n        scale(\").concat(_x, \")\\n      \");\n          if (i.slideShadows) {\n            var _e70 = _d6.querySelector(\".swiper-slide-shadow\");\n            _e70 || (_e70 = ce(0, _d6)), _e70 && (_e70.style.opacity = Math.min(Math.max((Math.abs(_p6) - .5) / .5, 0), 1));\n          }\n          _d6.style.zIndex = -Math.abs(Math.round(_c4)) + e.length;\n          oe(0, _d6).style.transform = _S;\n        }\n      },\n      setTransition: function setTransition(e) {\n        var s = t.slides.map(function (e) {\n          return h(e);\n        });\n        s.forEach(function (t) {\n          t.style.transitionDuration = \"\".concat(e, \"ms\"), t.querySelectorAll(\".swiper-slide-shadow\").forEach(function (t) {\n            t.style.transitionDuration = \"\".concat(e, \"ms\");\n          });\n        }), de({\n          swiper: t,\n          duration: e,\n          transformElements: s\n        });\n      },\n      perspective: function perspective() {\n        return !0;\n      },\n      overwriteParams: function overwriteParams() {\n        return {\n          watchSlidesProgress: !0,\n          virtualTranslate: !t.params.cssMode\n        };\n      }\n    });\n  }];\n  return J.use(pe), J;\n});\n\n/*!\r\n * imagesLoaded PACKAGED v5.0.0\r\n * JavaScript is all like \"You images are done yet or what?\"\r\n * MIT License\r\n */\n!function (t, e) {\n  \"object\" == (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) && module.exports ? module.exports = e() : t.EvEmitter = e();\n}(\"undefined\" != typeof window ? window : undefined, function () {\n  function t() {}\n  var e = t.prototype;\n  return e.on = function (t, e) {\n    if (!t || !e) return this;\n    var i = this._events = this._events || {},\n      s = i[t] = i[t] || [];\n    return s.includes(e) || s.push(e), this;\n  }, e.once = function (t, e) {\n    if (!t || !e) return this;\n    this.on(t, e);\n    var i = this._onceEvents = this._onceEvents || {};\n    return (i[t] = i[t] || {})[e] = !0, this;\n  }, e.off = function (t, e) {\n    var i = this._events && this._events[t];\n    if (!i || !i.length) return this;\n    var s = i.indexOf(e);\n    return -1 != s && i.splice(s, 1), this;\n  }, e.emitEvent = function (t, e) {\n    var i = this._events && this._events[t];\n    if (!i || !i.length) return this;\n    i = i.slice(0), e = e || [];\n    var s = this._onceEvents && this._onceEvents[t];\n    var _iterator = _createForOfIteratorHelper(i),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var n = _step.value;\n        s && s[n] && (this.off(t, n), delete s[n]), n.apply(this, e);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    return this;\n  }, e.allOff = function () {\n    return delete this._events, delete this._onceEvents, this;\n  }, t;\n}),\n/*!\r\n * imagesLoaded v5.0.0\r\n * JavaScript is all like \"You images are done yet or what?\"\r\n * MIT License\r\n */\nfunction (t, e) {\n  \"object\" == (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) && module.exports ? module.exports = e(t, require(\"ev-emitter\")) : t.imagesLoaded = e(t, t.EvEmitter);\n}(\"undefined\" != typeof window ? window : undefined, function (t, e) {\n  var i = t.jQuery,\n    s = t.console;\n  function n(t, e, o) {\n    if (!(this instanceof n)) return new n(t, e, o);\n    var r = t;\n    var h;\n    (\"string\" == typeof t && (r = document.querySelectorAll(t)), r) ? (this.elements = (h = r, Array.isArray(h) ? h : \"object\" == _typeof(h) && \"number\" == typeof h.length ? _toConsumableArray(h) : [h]), this.options = {}, \"function\" == typeof e ? o = e : Object.assign(this.options, e), o && this.on(\"always\", o), this.getImages(), i && (this.jqDeferred = new i.Deferred()), setTimeout(this.check.bind(this))) : s.error(\"Bad element for imagesLoaded \".concat(r || t));\n  }\n  n.prototype = Object.create(e.prototype), n.prototype.getImages = function () {\n    this.images = [], this.elements.forEach(this.addElementImages, this);\n  };\n  var o = [1, 9, 11];\n  n.prototype.addElementImages = function (t) {\n    \"IMG\" === t.nodeName && this.addImage(t), !0 === this.options.background && this.addElementBackgroundImages(t);\n    var e = t.nodeType;\n    if (!e || !o.includes(e)) return;\n    var i = t.querySelectorAll(\"img\");\n    var _iterator2 = _createForOfIteratorHelper(i),\n      _step2;\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _t51 = _step2.value;\n        this.addImage(_t51);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n    if (\"string\" == typeof this.options.background) {\n      var _e71 = t.querySelectorAll(this.options.background);\n      var _iterator3 = _createForOfIteratorHelper(_e71),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _t50 = _step3.value;\n          this.addElementBackgroundImages(_t50);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  };\n  var r = /url\\((['\"])?(.*?)\\1\\)/gi;\n  function h(t) {\n    this.img = t;\n  }\n  function d(t, e) {\n    this.url = t, this.element = e, this.img = new Image();\n  }\n  return n.prototype.addElementBackgroundImages = function (t) {\n    var e = getComputedStyle(t);\n    if (!e) return;\n    var i = r.exec(e.backgroundImage);\n    for (; null !== i;) {\n      var _s49 = i && i[2];\n      _s49 && this.addBackground(_s49, t), i = r.exec(e.backgroundImage);\n    }\n  }, n.prototype.addImage = function (t) {\n    var e = new h(t);\n    this.images.push(e);\n  }, n.prototype.addBackground = function (t, e) {\n    var i = new d(t, e);\n    this.images.push(i);\n  }, n.prototype.check = function () {\n    var _this = this;\n    if (this.progressedCount = 0, this.hasAnyBroken = !1, !this.images.length) return void this.complete();\n    var t = function t(_t52, e, i) {\n      setTimeout(function () {\n        _this.progress(_t52, e, i);\n      });\n    };\n    this.images.forEach(function (e) {\n      e.once(\"progress\", t), e.check();\n    });\n  }, n.prototype.progress = function (t, e, i) {\n    this.progressedCount++, this.hasAnyBroken = this.hasAnyBroken || !t.isLoaded, this.emitEvent(\"progress\", [this, t, e]), this.jqDeferred && this.jqDeferred.notify && this.jqDeferred.notify(this, t), this.progressedCount === this.images.length && this.complete(), this.options.debug && s && s.log(\"progress: \".concat(i), t, e);\n  }, n.prototype.complete = function () {\n    var t = this.hasAnyBroken ? \"fail\" : \"done\";\n    if (this.isComplete = !0, this.emitEvent(t, [this]), this.emitEvent(\"always\", [this]), this.jqDeferred) {\n      var _t53 = this.hasAnyBroken ? \"reject\" : \"resolve\";\n      this.jqDeferred[_t53](this);\n    }\n  }, h.prototype = Object.create(e.prototype), h.prototype.check = function () {\n    this.getIsImageComplete() ? this.confirm(0 !== this.img.naturalWidth, \"naturalWidth\") : (this.proxyImage = new Image(), this.img.crossOrigin && (this.proxyImage.crossOrigin = this.img.crossOrigin), this.proxyImage.addEventListener(\"load\", this), this.proxyImage.addEventListener(\"error\", this), this.img.addEventListener(\"load\", this), this.img.addEventListener(\"error\", this), this.proxyImage.src = this.img.currentSrc || this.img.src);\n  }, h.prototype.getIsImageComplete = function () {\n    return this.img.complete && this.img.naturalWidth;\n  }, h.prototype.confirm = function (t, e) {\n    this.isLoaded = t;\n    var i = this.img.parentNode,\n      s = \"PICTURE\" === i.nodeName ? i : this.img;\n    this.emitEvent(\"progress\", [this, s, e]);\n  }, h.prototype.handleEvent = function (t) {\n    var e = \"on\" + t.type;\n    this[e] && this[e](t);\n  }, h.prototype.onload = function () {\n    this.confirm(!0, \"onload\"), this.unbindEvents();\n  }, h.prototype.onerror = function () {\n    this.confirm(!1, \"onerror\"), this.unbindEvents();\n  }, h.prototype.unbindEvents = function () {\n    this.proxyImage.removeEventListener(\"load\", this), this.proxyImage.removeEventListener(\"error\", this), this.img.removeEventListener(\"load\", this), this.img.removeEventListener(\"error\", this);\n  }, d.prototype = Object.create(h.prototype), d.prototype.check = function () {\n    this.img.addEventListener(\"load\", this), this.img.addEventListener(\"error\", this), this.img.src = this.url, this.getIsImageComplete() && (this.confirm(0 !== this.img.naturalWidth, \"naturalWidth\"), this.unbindEvents());\n  }, d.prototype.unbindEvents = function () {\n    this.img.removeEventListener(\"load\", this), this.img.removeEventListener(\"error\", this);\n  }, d.prototype.confirm = function (t, e) {\n    this.isLoaded = t, this.emitEvent(\"progress\", [this, this.element, e]);\n  }, n.makeJQueryPlugin = function (e) {\n    (e = e || t.jQuery) && (i = e, i.fn.imagesLoaded = function (t, e) {\n      return new n(this, t, e).jqDeferred.promise(i(this));\n    });\n  }, n.makeJQueryPlugin(), n;\n});\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\n  // Define the media query\n  // imagesLoaded( document.querySelector('.case-item-img-wrapper'), function( instance ) {\n  //     new Splide('.splide-weapons', {\n  //         drag: false,  \n  //         type   : 'loop',\n  //         perMove: 1,\n  //         perPage: 1,\n  //         // rewind : true,\n  //         isNavigation: false,\n  //         direction: 'ttb',\n  //         height: document.querySelector(\".case-item-img-wrapper\").offsetHeight,\n  //         pagination: false,\n  //         arrows: false,\n  //         gap: 0,\n  //         wheel: true,\n  //         // wheelMinThreshold: 2,\n  //         speed: 600,\n  //         wheelSleep: 1000,\n  //         easing: 'ease-in-out'\n  //     }).mount();\n  // });\n  var mobileHelpMenu = new Swiper('.splide-weapons', {\n    // mod: [Mousewheel],\n    speed: 1000,\n    loop: true,\n    direction: \"vertical\",\n    mousewheel: true,\n    slidesPerView: 1\n  });\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tYWluLmpzIiwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tYWluLmpzP2M0YzgiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1tcIkBAaXRlcmF0b3JcIl07IGlmICghaXQpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZTcyKSB7IHRocm93IF9lNzI7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IGl0LmNhbGwobyk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTczKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lNzM7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cbmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9XG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQociwgbCkgeyB2YXIgdCA9IG51bGwgPT0gciA/IG51bGwgOiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbXCJAQGl0ZXJhdG9yXCJdOyBpZiAobnVsbCAhPSB0KSB7IHZhciBlLCBuLCBpLCB1LCBhID0gW10sIGYgPSAhMCwgbyA9ICExOyB0cnkgeyBpZiAoaSA9ICh0ID0gdC5jYWxsKHIpKS5uZXh0LCAwID09PSBsKSB7IGlmIChPYmplY3QodCkgIT09IHQpIHJldHVybjsgZiA9ICExOyB9IGVsc2UgZm9yICg7ICEoZiA9IChlID0gaS5jYWxsKHQpKS5kb25lKSAmJiAoYS5wdXNoKGUudmFsdWUpLCBhLmxlbmd0aCAhPT0gbCk7IGYgPSAhMCk7IH0gY2F0Y2ggKHIpIHsgbyA9ICEwLCBuID0gcjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFmICYmIG51bGwgIT0gdC5yZXR1cm4gJiYgKHUgPSB0LnJldHVybigpLCBPYmplY3QodSkgIT09IHUpKSByZXR1cm47IH0gZmluYWxseSB7IGlmIChvKSB0aHJvdyBuOyB9IH0gcmV0dXJuIGE7IH0gfVxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9XG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH1cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIGl0ZXJbU3ltYm9sLml0ZXJhdG9yXSAhPSBudWxsIHx8IGl0ZXJbXCJAQGl0ZXJhdG9yXCJdICE9IG51bGwpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9XG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldOyByZXR1cm4gYXJyMjsgfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBrZXkgPSBfdG9Qcm9wZXJ0eUtleShrZXkpOyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogU3RyaW5nKGkpOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuLy8gaW1wb3J0IFNwbGlkZSBmcm9tICdAc3BsaWRlanMvc3BsaWRlJ1xuLyoqXHJcbiAqIFN3aXBlciA5LjQuMVxyXG4gKiBNb3N0IG1vZGVybiBtb2JpbGUgdG91Y2ggc2xpZGVyIGFuZCBmcmFtZXdvcmsgd2l0aCBoYXJkd2FyZSBhY2NlbGVyYXRlZCB0cmFuc2l0aW9uc1xyXG4gKiBodHRwczovL3N3aXBlcmpzLmNvbVxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDIzIFZsYWRpbWlyIEtoYXJsYW1waWRpXHJcbiAqXHJcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxyXG4gKlxyXG4gKiBSZWxlYXNlZCBvbjogSnVuZSAxMywgMjAyM1xyXG4gKi9cblxuIWZ1bmN0aW9uIChlLCB0KSB7XG4gIFwib2JqZWN0XCIgPT0gKHR5cGVvZiBleHBvcnRzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoZXhwb3J0cykpICYmIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIG1vZHVsZSA/IG1vZHVsZS5leHBvcnRzID0gdCgpIDogXCJmdW5jdGlvblwiID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZSh0KSA6IChlID0gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgZ2xvYmFsVGhpcyA/IGdsb2JhbFRoaXMgOiBlIHx8IHNlbGYpLlN3aXBlciA9IHQoKTtcbn0odGhpcywgZnVuY3Rpb24gKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICBmdW5jdGlvbiBlKGUpIHtcbiAgICByZXR1cm4gbnVsbCAhPT0gZSAmJiBcIm9iamVjdFwiID09IF90eXBlb2YoZSkgJiYgXCJjb25zdHJ1Y3RvclwiIGluIGUgJiYgZS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0O1xuICB9XG4gIGZ1bmN0aW9uIHQocywgYSkge1xuICAgIHZvaWQgMCA9PT0gcyAmJiAocyA9IHt9KSwgdm9pZCAwID09PSBhICYmIChhID0ge30pLCBPYmplY3Qua2V5cyhhKS5mb3JFYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICB2b2lkIDAgPT09IHNbaV0gPyBzW2ldID0gYVtpXSA6IGUoYVtpXSkgJiYgZShzW2ldKSAmJiBPYmplY3Qua2V5cyhhW2ldKS5sZW5ndGggPiAwICYmIHQoc1tpXSwgYVtpXSk7XG4gICAgfSk7XG4gIH1cbiAgdmFyIHMgPSB7XG4gICAgYm9keToge30sXG4gICAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcigpIHt9LFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIoKSB7fSxcbiAgICBhY3RpdmVFbGVtZW50OiB7XG4gICAgICBibHVyOiBmdW5jdGlvbiBibHVyKCkge30sXG4gICAgICBub2RlTmFtZTogXCJcIlxuICAgIH0sXG4gICAgcXVlcnlTZWxlY3RvcjogZnVuY3Rpb24gcXVlcnlTZWxlY3RvcigpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgcXVlcnlTZWxlY3RvckFsbDogZnVuY3Rpb24gcXVlcnlTZWxlY3RvckFsbCgpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9LFxuICAgIGdldEVsZW1lbnRCeUlkOiBmdW5jdGlvbiBnZXRFbGVtZW50QnlJZCgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgY3JlYXRlRXZlbnQ6IGZ1bmN0aW9uIGNyZWF0ZUV2ZW50KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdEV2ZW50OiBmdW5jdGlvbiBpbml0RXZlbnQoKSB7fVxuICAgICAgfTtcbiAgICB9LFxuICAgIGNyZWF0ZUVsZW1lbnQ6IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjaGlsZHJlbjogW10sXG4gICAgICAgIGNoaWxkTm9kZXM6IFtdLFxuICAgICAgICBzdHlsZToge30sXG4gICAgICAgIHNldEF0dHJpYnV0ZTogZnVuY3Rpb24gc2V0QXR0cmlidXRlKCkge30sXG4gICAgICAgIGdldEVsZW1lbnRzQnlUYWdOYW1lOiBmdW5jdGlvbiBnZXRFbGVtZW50c0J5VGFnTmFtZSgpIHtcbiAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSxcbiAgICBjcmVhdGVFbGVtZW50TlM6IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnROUygpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9LFxuICAgIGltcG9ydE5vZGU6IGZ1bmN0aW9uIGltcG9ydE5vZGUoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGxvY2F0aW9uOiB7XG4gICAgICBoYXNoOiBcIlwiLFxuICAgICAgaG9zdDogXCJcIixcbiAgICAgIGhvc3RuYW1lOiBcIlwiLFxuICAgICAgaHJlZjogXCJcIixcbiAgICAgIG9yaWdpbjogXCJcIixcbiAgICAgIHBhdGhuYW1lOiBcIlwiLFxuICAgICAgcHJvdG9jb2w6IFwiXCIsXG4gICAgICBzZWFyY2g6IFwiXCJcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIGEoKSB7XG4gICAgdmFyIGUgPSBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBkb2N1bWVudCA/IGRvY3VtZW50IDoge307XG4gICAgcmV0dXJuIHQoZSwgcyksIGU7XG4gIH1cbiAgdmFyIGkgPSB7XG4gICAgZG9jdW1lbnQ6IHMsXG4gICAgbmF2aWdhdG9yOiB7XG4gICAgICB1c2VyQWdlbnQ6IFwiXCJcbiAgICB9LFxuICAgIGxvY2F0aW9uOiB7XG4gICAgICBoYXNoOiBcIlwiLFxuICAgICAgaG9zdDogXCJcIixcbiAgICAgIGhvc3RuYW1lOiBcIlwiLFxuICAgICAgaHJlZjogXCJcIixcbiAgICAgIG9yaWdpbjogXCJcIixcbiAgICAgIHBhdGhuYW1lOiBcIlwiLFxuICAgICAgcHJvdG9jb2w6IFwiXCIsXG4gICAgICBzZWFyY2g6IFwiXCJcbiAgICB9LFxuICAgIGhpc3Rvcnk6IHtcbiAgICAgIHJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gcmVwbGFjZVN0YXRlKCkge30sXG4gICAgICBwdXNoU3RhdGU6IGZ1bmN0aW9uIHB1c2hTdGF0ZSgpIHt9LFxuICAgICAgZ286IGZ1bmN0aW9uIGdvKCkge30sXG4gICAgICBiYWNrOiBmdW5jdGlvbiBiYWNrKCkge31cbiAgICB9LFxuICAgIEN1c3RvbUV2ZW50OiBmdW5jdGlvbiBDdXN0b21FdmVudCgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcigpIHt9LFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIoKSB7fSxcbiAgICBnZXRDb21wdXRlZFN0eWxlOiBmdW5jdGlvbiBnZXRDb21wdXRlZFN0eWxlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0UHJvcGVydHlWYWx1ZTogZnVuY3Rpb24gZ2V0UHJvcGVydHlWYWx1ZSgpIHtcbiAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuICAgIEltYWdlOiBmdW5jdGlvbiBJbWFnZSgpIHt9LFxuICAgIERhdGU6IGZ1bmN0aW9uIERhdGUoKSB7fSxcbiAgICBzY3JlZW46IHt9LFxuICAgIHNldFRpbWVvdXQ6IGZ1bmN0aW9uIHNldFRpbWVvdXQoKSB7fSxcbiAgICBjbGVhclRpbWVvdXQ6IGZ1bmN0aW9uIGNsZWFyVGltZW91dCgpIHt9LFxuICAgIG1hdGNoTWVkaWE6IGZ1bmN0aW9uIG1hdGNoTWVkaWEoKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfSxcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWU6IGZ1bmN0aW9uIHJlcXVlc3RBbmltYXRpb25GcmFtZShlKSB7XG4gICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiA9PSB0eXBlb2Ygc2V0VGltZW91dCA/IChlKCksIG51bGwpIDogc2V0VGltZW91dChlLCAwKTtcbiAgICB9LFxuICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lOiBmdW5jdGlvbiBjYW5jZWxBbmltYXRpb25GcmFtZShlKSB7XG4gICAgICBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBzZXRUaW1lb3V0ICYmIGNsZWFyVGltZW91dChlKTtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIHIoKSB7XG4gICAgdmFyIGUgPSBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cgOiB7fTtcbiAgICByZXR1cm4gdChlLCBpKSwgZTtcbiAgfVxuICBmdW5jdGlvbiBuKGUsIHQpIHtcbiAgICByZXR1cm4gdm9pZCAwID09PSB0ICYmICh0ID0gMCksIHNldFRpbWVvdXQoZSwgdCk7XG4gIH1cbiAgZnVuY3Rpb24gbCgpIHtcbiAgICByZXR1cm4gRGF0ZS5ub3coKTtcbiAgfVxuICBmdW5jdGlvbiBvKGUsIHQpIHtcbiAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSBcInhcIik7XG4gICAgdmFyIHMgPSByKCk7XG4gICAgdmFyIGEsIGksIG47XG4gICAgdmFyIGwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHQgPSByKCk7XG4gICAgICB2YXIgcztcbiAgICAgIHJldHVybiB0LmdldENvbXB1dGVkU3R5bGUgJiYgKHMgPSB0LmdldENvbXB1dGVkU3R5bGUoZSwgbnVsbCkpLCAhcyAmJiBlLmN1cnJlbnRTdHlsZSAmJiAocyA9IGUuY3VycmVudFN0eWxlKSwgcyB8fCAocyA9IGUuc3R5bGUpLCBzO1xuICAgIH0oZSk7XG4gICAgcmV0dXJuIHMuV2ViS2l0Q1NTTWF0cml4ID8gKGkgPSBsLnRyYW5zZm9ybSB8fCBsLndlYmtpdFRyYW5zZm9ybSwgaS5zcGxpdChcIixcIikubGVuZ3RoID4gNiAmJiAoaSA9IGkuc3BsaXQoXCIsIFwiKS5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiBlLnJlcGxhY2UoXCIsXCIsIFwiLlwiKTtcbiAgICB9KS5qb2luKFwiLCBcIikpLCBuID0gbmV3IHMuV2ViS2l0Q1NTTWF0cml4KFwibm9uZVwiID09PSBpID8gXCJcIiA6IGkpKSA6IChuID0gbC5Nb3pUcmFuc2Zvcm0gfHwgbC5PVHJhbnNmb3JtIHx8IGwuTXNUcmFuc2Zvcm0gfHwgbC5tc1RyYW5zZm9ybSB8fCBsLnRyYW5zZm9ybSB8fCBsLmdldFByb3BlcnR5VmFsdWUoXCJ0cmFuc2Zvcm1cIikucmVwbGFjZShcInRyYW5zbGF0ZShcIiwgXCJtYXRyaXgoMSwgMCwgMCwgMSxcIiksIGEgPSBuLnRvU3RyaW5nKCkuc3BsaXQoXCIsXCIpKSwgXCJ4XCIgPT09IHQgJiYgKGkgPSBzLldlYktpdENTU01hdHJpeCA/IG4ubTQxIDogMTYgPT09IGEubGVuZ3RoID8gcGFyc2VGbG9hdChhWzEyXSkgOiBwYXJzZUZsb2F0KGFbNF0pKSwgXCJ5XCIgPT09IHQgJiYgKGkgPSBzLldlYktpdENTU01hdHJpeCA/IG4ubTQyIDogMTYgPT09IGEubGVuZ3RoID8gcGFyc2VGbG9hdChhWzEzXSkgOiBwYXJzZUZsb2F0KGFbNV0pKSwgaSB8fCAwO1xuICB9XG4gIGZ1bmN0aW9uIGQoZSkge1xuICAgIHJldHVybiBcIm9iamVjdFwiID09IF90eXBlb2YoZSkgJiYgbnVsbCAhPT0gZSAmJiBlLmNvbnN0cnVjdG9yICYmIFwiT2JqZWN0XCIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LCAtMSk7XG4gIH1cbiAgZnVuY3Rpb24gYyhlKSB7XG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyAmJiB2b2lkIDAgIT09IHdpbmRvdy5IVE1MRWxlbWVudCA/IGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCA6IGUgJiYgKDEgPT09IGUubm9kZVR5cGUgfHwgMTEgPT09IGUubm9kZVR5cGUpO1xuICB9XG4gIGZ1bmN0aW9uIHAoKSB7XG4gICAgdmFyIGUgPSBPYmplY3QoYXJndW1lbnRzLmxlbmd0aCA8PSAwID8gdm9pZCAwIDogYXJndW1lbnRzWzBdKSxcbiAgICAgIHQgPSBbXCJfX3Byb3RvX19cIiwgXCJjb25zdHJ1Y3RvclwiLCBcInByb3RvdHlwZVwiXTtcbiAgICBmb3IgKHZhciBfcyA9IDE7IF9zIDwgYXJndW1lbnRzLmxlbmd0aDsgX3MgKz0gMSkge1xuICAgICAgdmFyIF9hID0gX3MgPCAwIHx8IGFyZ3VtZW50cy5sZW5ndGggPD0gX3MgPyB2b2lkIDAgOiBhcmd1bWVudHNbX3NdO1xuICAgICAgaWYgKG51bGwgIT0gX2EgJiYgIWMoX2EpKSB7XG4gICAgICAgIHZhciBfczIgPSBPYmplY3Qua2V5cyhPYmplY3QoX2EpKS5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gdC5pbmRleE9mKGUpIDwgMDtcbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAodmFyIF90ID0gMCwgX2kgPSBfczIubGVuZ3RoOyBfdCA8IF9pOyBfdCArPSAxKSB7XG4gICAgICAgICAgdmFyIF9pMiA9IF9zMltfdF0sXG4gICAgICAgICAgICBfciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoX2EsIF9pMik7XG4gICAgICAgICAgdm9pZCAwICE9PSBfciAmJiBfci5lbnVtZXJhYmxlICYmIChkKGVbX2kyXSkgJiYgZChfYVtfaTJdKSA/IF9hW19pMl0uX19zd2lwZXJfXyA/IGVbX2kyXSA9IF9hW19pMl0gOiBwKGVbX2kyXSwgX2FbX2kyXSkgOiAhZChlW19pMl0pICYmIGQoX2FbX2kyXSkgPyAoZVtfaTJdID0ge30sIF9hW19pMl0uX19zd2lwZXJfXyA/IGVbX2kyXSA9IF9hW19pMl0gOiBwKGVbX2kyXSwgX2FbX2kyXSkpIDogZVtfaTJdID0gX2FbX2kyXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGU7XG4gIH1cbiAgZnVuY3Rpb24gdShlLCB0LCBzKSB7XG4gICAgZS5zdHlsZS5zZXRQcm9wZXJ0eSh0LCBzKTtcbiAgfVxuICBmdW5jdGlvbiBtKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUudGFyZ2V0UG9zaXRpb24sXG4gICAgICBhID0gZS5zaWRlO1xuICAgIHZhciBpID0gcigpLFxuICAgICAgbiA9IC10LnRyYW5zbGF0ZTtcbiAgICB2YXIgbCxcbiAgICAgIG8gPSBudWxsO1xuICAgIHZhciBkID0gdC5wYXJhbXMuc3BlZWQ7XG4gICAgdC53cmFwcGVyRWwuc3R5bGUuc2Nyb2xsU25hcFR5cGUgPSBcIm5vbmVcIiwgaS5jYW5jZWxBbmltYXRpb25GcmFtZSh0LmNzc01vZGVGcmFtZUlEKTtcbiAgICB2YXIgYyA9IHMgPiBuID8gXCJuZXh0XCIgOiBcInByZXZcIixcbiAgICAgIHAgPSBmdW5jdGlvbiBwKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFwibmV4dFwiID09PSBjICYmIGUgPj0gdCB8fCBcInByZXZcIiA9PT0gYyAmJiBlIDw9IHQ7XG4gICAgICB9LFxuICAgICAgdSA9IGZ1bmN0aW9uIHUoKSB7XG4gICAgICAgIGwgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgbnVsbCA9PT0gbyAmJiAobyA9IGwpO1xuICAgICAgICB2YXIgZSA9IE1hdGgubWF4KE1hdGgubWluKChsIC0gbykgLyBkLCAxKSwgMCksXG4gICAgICAgICAgciA9IC41IC0gTWF0aC5jb3MoZSAqIE1hdGguUEkpIC8gMjtcbiAgICAgICAgdmFyIGMgPSBuICsgciAqIChzIC0gbik7XG4gICAgICAgIGlmIChwKGMsIHMpICYmIChjID0gcyksIHQud3JhcHBlckVsLnNjcm9sbFRvKF9kZWZpbmVQcm9wZXJ0eSh7fSwgYSwgYykpLCBwKGMsIHMpKSByZXR1cm4gdC53cmFwcGVyRWwuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiLCB0LndyYXBwZXJFbC5zdHlsZS5zY3JvbGxTbmFwVHlwZSA9IFwiXCIsIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHQud3JhcHBlckVsLnN0eWxlLm92ZXJmbG93ID0gXCJcIiwgdC53cmFwcGVyRWwuc2Nyb2xsVG8oX2RlZmluZVByb3BlcnR5KHt9LCBhLCBjKSk7XG4gICAgICAgIH0pLCB2b2lkIGkuY2FuY2VsQW5pbWF0aW9uRnJhbWUodC5jc3NNb2RlRnJhbWVJRCk7XG4gICAgICAgIHQuY3NzTW9kZUZyYW1lSUQgPSBpLnJlcXVlc3RBbmltYXRpb25GcmFtZSh1KTtcbiAgICAgIH07XG4gICAgdSgpO1xuICB9XG4gIGZ1bmN0aW9uIGgoZSkge1xuICAgIHJldHVybiBlLnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLXNsaWRlLXRyYW5zZm9ybVwiKSB8fCBlLnNoYWRvd0VsICYmIGUuc2hhZG93RWwucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItc2xpZGUtdHJhbnNmb3JtXCIpIHx8IGU7XG4gIH1cbiAgZnVuY3Rpb24gZihlLCB0KSB7XG4gICAgcmV0dXJuIHZvaWQgMCA9PT0gdCAmJiAodCA9IFwiXCIpLCBfdG9Db25zdW1hYmxlQXJyYXkoZS5jaGlsZHJlbikuZmlsdGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gZS5tYXRjaGVzKHQpO1xuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIGcoZSwgdCkge1xuICAgIHZhciBfcyRjbGFzc0xpc3Q7XG4gICAgdm9pZCAwID09PSB0ICYmICh0ID0gW10pO1xuICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlKTtcbiAgICByZXR1cm4gKF9zJGNsYXNzTGlzdCA9IHMuY2xhc3NMaXN0KS5hZGQuYXBwbHkoX3MkY2xhc3NMaXN0LCBfdG9Db25zdW1hYmxlQXJyYXkoQXJyYXkuaXNBcnJheSh0KSA/IHQgOiBbdF0pKSwgcztcbiAgfVxuICBmdW5jdGlvbiB2KGUpIHtcbiAgICB2YXIgdCA9IHIoKSxcbiAgICAgIHMgPSBhKCksXG4gICAgICBpID0gZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgIG4gPSBzLmJvZHksXG4gICAgICBsID0gZS5jbGllbnRUb3AgfHwgbi5jbGllbnRUb3AgfHwgMCxcbiAgICAgIG8gPSBlLmNsaWVudExlZnQgfHwgbi5jbGllbnRMZWZ0IHx8IDAsXG4gICAgICBkID0gZSA9PT0gdCA/IHQuc2Nyb2xsWSA6IGUuc2Nyb2xsVG9wLFxuICAgICAgYyA9IGUgPT09IHQgPyB0LnNjcm9sbFggOiBlLnNjcm9sbExlZnQ7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvcDogaS50b3AgKyBkIC0gbCxcbiAgICAgIGxlZnQ6IGkubGVmdCArIGMgLSBvXG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiB3KGUsIHQpIHtcbiAgICByZXR1cm4gcigpLmdldENvbXB1dGVkU3R5bGUoZSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSh0KTtcbiAgfVxuICBmdW5jdGlvbiBiKGUpIHtcbiAgICB2YXIgdCxcbiAgICAgIHMgPSBlO1xuICAgIGlmIChzKSB7XG4gICAgICBmb3IgKHQgPSAwOyBudWxsICE9PSAocyA9IHMucHJldmlvdXNTaWJsaW5nKTspIDEgPT09IHMubm9kZVR5cGUgJiYgKHQgKz0gMSk7XG4gICAgICByZXR1cm4gdDtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24geShlLCB0KSB7XG4gICAgdmFyIHMgPSBbXTtcbiAgICB2YXIgYSA9IGUucGFyZW50RWxlbWVudDtcbiAgICBmb3IgKDsgYTspIHQgPyBhLm1hdGNoZXModCkgJiYgcy5wdXNoKGEpIDogcy5wdXNoKGEpLCBhID0gYS5wYXJlbnRFbGVtZW50O1xuICAgIHJldHVybiBzO1xuICB9XG4gIGZ1bmN0aW9uIEUoZSwgdCkge1xuICAgIHQgJiYgZS5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBmdW5jdGlvbiBzKGEpIHtcbiAgICAgIGEudGFyZ2V0ID09PSBlICYmICh0LmNhbGwoZSwgYSksIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgcykpO1xuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIHgoZSwgdCwgcykge1xuICAgIHZhciBhID0gcigpO1xuICAgIHJldHVybiBzID8gZVtcIndpZHRoXCIgPT09IHQgPyBcIm9mZnNldFdpZHRoXCIgOiBcIm9mZnNldEhlaWdodFwiXSArIHBhcnNlRmxvYXQoYS5nZXRDb21wdXRlZFN0eWxlKGUsIG51bGwpLmdldFByb3BlcnR5VmFsdWUoXCJ3aWR0aFwiID09PSB0ID8gXCJtYXJnaW4tcmlnaHRcIiA6IFwibWFyZ2luLXRvcFwiKSkgKyBwYXJzZUZsb2F0KGEuZ2V0Q29tcHV0ZWRTdHlsZShlLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKFwid2lkdGhcIiA9PT0gdCA/IFwibWFyZ2luLWxlZnRcIiA6IFwibWFyZ2luLWJvdHRvbVwiKSkgOiBlLm9mZnNldFdpZHRoO1xuICB9XG4gIHZhciBTLCBULCBNO1xuICBmdW5jdGlvbiBDKCkge1xuICAgIHJldHVybiBTIHx8IChTID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGUgPSByKCksXG4gICAgICAgIHQgPSBhKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzbW9vdGhTY3JvbGw6IHQuZG9jdW1lbnRFbGVtZW50ICYmIHQuZG9jdW1lbnRFbGVtZW50LnN0eWxlICYmIFwic2Nyb2xsQmVoYXZpb3JcIiBpbiB0LmRvY3VtZW50RWxlbWVudC5zdHlsZSxcbiAgICAgICAgdG91Y2g6ICEhKFwib250b3VjaHN0YXJ0XCIgaW4gZSB8fCBlLkRvY3VtZW50VG91Y2ggJiYgdCBpbnN0YW5jZW9mIGUuRG9jdW1lbnRUb3VjaClcbiAgICAgIH07XG4gICAgfSgpKSwgUztcbiAgfVxuICBmdW5jdGlvbiBQKGUpIHtcbiAgICByZXR1cm4gdm9pZCAwID09PSBlICYmIChlID0ge30pLCBUIHx8IChUID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBfcmVmID0gdm9pZCAwID09PSBlID8ge30gOiBlLFxuICAgICAgICB0ID0gX3JlZi51c2VyQWdlbnQ7XG4gICAgICB2YXIgcyA9IEMoKSxcbiAgICAgICAgYSA9IHIoKSxcbiAgICAgICAgaSA9IGEubmF2aWdhdG9yLnBsYXRmb3JtLFxuICAgICAgICBuID0gdCB8fCBhLm5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAgIGwgPSB7XG4gICAgICAgICAgaW9zOiAhMSxcbiAgICAgICAgICBhbmRyb2lkOiAhMVxuICAgICAgICB9LFxuICAgICAgICBvID0gYS5zY3JlZW4ud2lkdGgsXG4gICAgICAgIGQgPSBhLnNjcmVlbi5oZWlnaHQsXG4gICAgICAgIGMgPSBuLm1hdGNoKC8oQW5kcm9pZCk7P1tcXHNcXC9dKyhbXFxkLl0rKT8vKTtcbiAgICAgIHZhciBwID0gbi5tYXRjaCgvKGlQYWQpLipPU1xccyhbXFxkX10rKS8pO1xuICAgICAgdmFyIHUgPSBuLm1hdGNoKC8oaVBvZCkoLipPU1xccyhbXFxkX10rKSk/LyksXG4gICAgICAgIG0gPSAhcCAmJiBuLm1hdGNoKC8oaVBob25lXFxzT1N8aU9TKVxccyhbXFxkX10rKS8pLFxuICAgICAgICBoID0gXCJXaW4zMlwiID09PSBpO1xuICAgICAgdmFyIGYgPSBcIk1hY0ludGVsXCIgPT09IGk7XG4gICAgICByZXR1cm4gIXAgJiYgZiAmJiBzLnRvdWNoICYmIFtcIjEwMjR4MTM2NlwiLCBcIjEzNjZ4MTAyNFwiLCBcIjgzNHgxMTk0XCIsIFwiMTE5NHg4MzRcIiwgXCI4MzR4MTExMlwiLCBcIjExMTJ4ODM0XCIsIFwiNzY4eDEwMjRcIiwgXCIxMDI0eDc2OFwiLCBcIjgyMHgxMTgwXCIsIFwiMTE4MHg4MjBcIiwgXCI4MTB4MTA4MFwiLCBcIjEwODB4ODEwXCJdLmluZGV4T2YoXCJcIi5jb25jYXQobywgXCJ4XCIpLmNvbmNhdChkKSkgPj0gMCAmJiAocCA9IG4ubWF0Y2goLyhWZXJzaW9uKVxcLyhbXFxkLl0rKS8pLCBwIHx8IChwID0gWzAsIDEsIFwiMTNfMF8wXCJdKSwgZiA9ICExKSwgYyAmJiAhaCAmJiAobC5vcyA9IFwiYW5kcm9pZFwiLCBsLmFuZHJvaWQgPSAhMCksIChwIHx8IG0gfHwgdSkgJiYgKGwub3MgPSBcImlvc1wiLCBsLmlvcyA9ICEwKSwgbDtcbiAgICB9KGUpKSwgVDtcbiAgfVxuICBmdW5jdGlvbiBMKCkge1xuICAgIHJldHVybiBNIHx8IChNID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGUgPSByKCk7XG4gICAgICB2YXIgdCA9ICExO1xuICAgICAgZnVuY3Rpb24gcygpIHtcbiAgICAgICAgdmFyIHQgPSBlLm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuIHQuaW5kZXhPZihcInNhZmFyaVwiKSA+PSAwICYmIHQuaW5kZXhPZihcImNocm9tZVwiKSA8IDAgJiYgdC5pbmRleE9mKFwiYW5kcm9pZFwiKSA8IDA7XG4gICAgICB9XG4gICAgICBpZiAocygpKSB7XG4gICAgICAgIHZhciBfczMgPSBTdHJpbmcoZS5uYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgaWYgKF9zMy5pbmNsdWRlcyhcIlZlcnNpb24vXCIpKSB7XG4gICAgICAgICAgdmFyIF9zMyRzcGxpdCQxJHNwbGl0JDAkcyA9IF9zMy5zcGxpdChcIlZlcnNpb24vXCIpWzFdLnNwbGl0KFwiIFwiKVswXS5zcGxpdChcIi5cIikubWFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBOdW1iZXIoZSk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF9zMyRzcGxpdCQxJHNwbGl0JDAkczIgPSBfc2xpY2VkVG9BcnJheShfczMkc3BsaXQkMSRzcGxpdCQwJHMsIDIpLFxuICAgICAgICAgICAgX2UgPSBfczMkc3BsaXQkMSRzcGxpdCQwJHMyWzBdLFxuICAgICAgICAgICAgX2EyID0gX3MzJHNwbGl0JDEkc3BsaXQkMCRzMlsxXTtcbiAgICAgICAgICB0ID0gX2UgPCAxNiB8fCAxNiA9PT0gX2UgJiYgX2EyIDwgMjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNTYWZhcmk6IHQgfHwgcygpLFxuICAgICAgICBuZWVkUGVyc3BlY3RpdmVGaXg6IHQsXG4gICAgICAgIGlzV2ViVmlldzogLyhpUGhvbmV8aVBvZHxpUGFkKS4qQXBwbGVXZWJLaXQoPyEuKlNhZmFyaSkvaS50ZXN0KGUubmF2aWdhdG9yLnVzZXJBZ2VudClcbiAgICAgIH07XG4gICAgfSgpKSwgTTtcbiAgfVxuICB2YXIgeiA9IHtcbiAgICBvbjogZnVuY3Rpb24gb24oZSwgdCwgcykge1xuICAgICAgdmFyIGEgPSB0aGlzO1xuICAgICAgaWYgKCFhLmV2ZW50c0xpc3RlbmVycyB8fCBhLmRlc3Ryb3llZCkgcmV0dXJuIGE7XG4gICAgICBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiB0KSByZXR1cm4gYTtcbiAgICAgIHZhciBpID0gcyA/IFwidW5zaGlmdFwiIDogXCJwdXNoXCI7XG4gICAgICByZXR1cm4gZS5zcGxpdChcIiBcIikuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBhLmV2ZW50c0xpc3RlbmVyc1tlXSB8fCAoYS5ldmVudHNMaXN0ZW5lcnNbZV0gPSBbXSksIGEuZXZlbnRzTGlzdGVuZXJzW2VdW2ldKHQpO1xuICAgICAgfSksIGE7XG4gICAgfSxcbiAgICBvbmNlOiBmdW5jdGlvbiBvbmNlKGUsIHQsIHMpIHtcbiAgICAgIHZhciBhID0gdGhpcztcbiAgICAgIGlmICghYS5ldmVudHNMaXN0ZW5lcnMgfHwgYS5kZXN0cm95ZWQpIHJldHVybiBhO1xuICAgICAgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdCkgcmV0dXJuIGE7XG4gICAgICBmdW5jdGlvbiBpKCkge1xuICAgICAgICBhLm9mZihlLCBpKSwgaS5fX2VtaXR0ZXJQcm94eSAmJiBkZWxldGUgaS5fX2VtaXR0ZXJQcm94eTtcbiAgICAgICAgZm9yICh2YXIgcyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBuZXcgQXJyYXkocyksIG4gPSAwOyBuIDwgczsgbisrKSByW25dID0gYXJndW1lbnRzW25dO1xuICAgICAgICB0LmFwcGx5KGEsIHIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGkuX19lbWl0dGVyUHJveHkgPSB0LCBhLm9uKGUsIGksIHMpO1xuICAgIH0sXG4gICAgb25Bbnk6IGZ1bmN0aW9uIG9uQW55KGUsIHQpIHtcbiAgICAgIHZhciBzID0gdGhpcztcbiAgICAgIGlmICghcy5ldmVudHNMaXN0ZW5lcnMgfHwgcy5kZXN0cm95ZWQpIHJldHVybiBzO1xuICAgICAgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgZSkgcmV0dXJuIHM7XG4gICAgICB2YXIgYSA9IHQgPyBcInVuc2hpZnRcIiA6IFwicHVzaFwiO1xuICAgICAgcmV0dXJuIHMuZXZlbnRzQW55TGlzdGVuZXJzLmluZGV4T2YoZSkgPCAwICYmIHMuZXZlbnRzQW55TGlzdGVuZXJzW2FdKGUpLCBzO1xuICAgIH0sXG4gICAgb2ZmQW55OiBmdW5jdGlvbiBvZmZBbnkoZSkge1xuICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgaWYgKCF0LmV2ZW50c0xpc3RlbmVycyB8fCB0LmRlc3Ryb3llZCkgcmV0dXJuIHQ7XG4gICAgICBpZiAoIXQuZXZlbnRzQW55TGlzdGVuZXJzKSByZXR1cm4gdDtcbiAgICAgIHZhciBzID0gdC5ldmVudHNBbnlMaXN0ZW5lcnMuaW5kZXhPZihlKTtcbiAgICAgIHJldHVybiBzID49IDAgJiYgdC5ldmVudHNBbnlMaXN0ZW5lcnMuc3BsaWNlKHMsIDEpLCB0O1xuICAgIH0sXG4gICAgb2ZmOiBmdW5jdGlvbiBvZmYoZSwgdCkge1xuICAgICAgdmFyIHMgPSB0aGlzO1xuICAgICAgcmV0dXJuICFzLmV2ZW50c0xpc3RlbmVycyB8fCBzLmRlc3Ryb3llZCA/IHMgOiBzLmV2ZW50c0xpc3RlbmVycyA/IChlLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZvaWQgMCA9PT0gdCA/IHMuZXZlbnRzTGlzdGVuZXJzW2VdID0gW10gOiBzLmV2ZW50c0xpc3RlbmVyc1tlXSAmJiBzLmV2ZW50c0xpc3RlbmVyc1tlXS5mb3JFYWNoKGZ1bmN0aW9uIChhLCBpKSB7XG4gICAgICAgICAgKGEgPT09IHQgfHwgYS5fX2VtaXR0ZXJQcm94eSAmJiBhLl9fZW1pdHRlclByb3h5ID09PSB0KSAmJiBzLmV2ZW50c0xpc3RlbmVyc1tlXS5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH0pO1xuICAgICAgfSksIHMpIDogcztcbiAgICB9LFxuICAgIGVtaXQ6IGZ1bmN0aW9uIGVtaXQoKSB7XG4gICAgICB2YXIgZSA9IHRoaXM7XG4gICAgICBpZiAoIWUuZXZlbnRzTGlzdGVuZXJzIHx8IGUuZGVzdHJveWVkKSByZXR1cm4gZTtcbiAgICAgIGlmICghZS5ldmVudHNMaXN0ZW5lcnMpIHJldHVybiBlO1xuICAgICAgdmFyIHQsIHMsIGE7XG4gICAgICBmb3IgKHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IG5ldyBBcnJheShpKSwgbiA9IDA7IG4gPCBpOyBuKyspIHJbbl0gPSBhcmd1bWVudHNbbl07XG4gICAgICBcInN0cmluZ1wiID09IHR5cGVvZiByWzBdIHx8IEFycmF5LmlzQXJyYXkoclswXSkgPyAodCA9IHJbMF0sIHMgPSByLnNsaWNlKDEsIHIubGVuZ3RoKSwgYSA9IGUpIDogKHQgPSByWzBdLmV2ZW50cywgcyA9IHJbMF0uZGF0YSwgYSA9IHJbMF0uY29udGV4dCB8fCBlKSwgcy51bnNoaWZ0KGEpO1xuICAgICAgcmV0dXJuIChBcnJheS5pc0FycmF5KHQpID8gdCA6IHQuc3BsaXQoXCIgXCIpKS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIGUuZXZlbnRzQW55TGlzdGVuZXJzICYmIGUuZXZlbnRzQW55TGlzdGVuZXJzLmxlbmd0aCAmJiBlLmV2ZW50c0FueUxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS5hcHBseShhLCBbdF0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShzKSkpO1xuICAgICAgICB9KSwgZS5ldmVudHNMaXN0ZW5lcnMgJiYgZS5ldmVudHNMaXN0ZW5lcnNbdF0gJiYgZS5ldmVudHNMaXN0ZW5lcnNbdF0uZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUuYXBwbHkoYSwgcyk7XG4gICAgICAgIH0pO1xuICAgICAgfSksIGU7XG4gICAgfVxuICB9O1xuICB2YXIgQSA9IGZ1bmN0aW9uIEEoZSwgdCkge1xuICAgICAgaWYgKCFlIHx8IGUuZGVzdHJveWVkIHx8ICFlLnBhcmFtcykgcmV0dXJuO1xuICAgICAgdmFyIHMgPSB0LmNsb3Nlc3QoZS5pc0VsZW1lbnQgPyBcInN3aXBlci1zbGlkZVwiIDogXCIuXCIuY29uY2F0KGUucGFyYW1zLnNsaWRlQ2xhc3MpKTtcbiAgICAgIGlmIChzKSB7XG4gICAgICAgIHZhciBfdDIgPSBzLnF1ZXJ5U2VsZWN0b3IoXCIuXCIuY29uY2F0KGUucGFyYW1zLmxhenlQcmVsb2FkZXJDbGFzcykpO1xuICAgICAgICBfdDIgJiYgX3QyLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgJCA9IGZ1bmN0aW9uICQoZSwgdCkge1xuICAgICAgaWYgKCFlLnNsaWRlc1t0XSkgcmV0dXJuO1xuICAgICAgdmFyIHMgPSBlLnNsaWRlc1t0XS5xdWVyeVNlbGVjdG9yKCdbbG9hZGluZz1cImxhenlcIl0nKTtcbiAgICAgIHMgJiYgcy5yZW1vdmVBdHRyaWJ1dGUoXCJsb2FkaW5nXCIpO1xuICAgIH0sXG4gICAgSSA9IGZ1bmN0aW9uIEkoZSkge1xuICAgICAgaWYgKCFlIHx8IGUuZGVzdHJveWVkIHx8ICFlLnBhcmFtcykgcmV0dXJuO1xuICAgICAgdmFyIHQgPSBlLnBhcmFtcy5sYXp5UHJlbG9hZFByZXZOZXh0O1xuICAgICAgdmFyIHMgPSBlLnNsaWRlcy5sZW5ndGg7XG4gICAgICBpZiAoIXMgfHwgIXQgfHwgdCA8IDApIHJldHVybjtcbiAgICAgIHQgPSBNYXRoLm1pbih0LCBzKTtcbiAgICAgIHZhciBhID0gXCJhdXRvXCIgPT09IGUucGFyYW1zLnNsaWRlc1BlclZpZXcgPyBlLnNsaWRlc1BlclZpZXdEeW5hbWljKCkgOiBNYXRoLmNlaWwoZS5wYXJhbXMuc2xpZGVzUGVyVmlldyksXG4gICAgICAgIGkgPSBlLmFjdGl2ZUluZGV4O1xuICAgICAgaWYgKGUucGFyYW1zLmdyaWQgJiYgZS5wYXJhbXMuZ3JpZC5yb3dzID4gMSkge1xuICAgICAgICB2YXIgX3M0ID0gaSxcbiAgICAgICAgICBfcjIgPSBbX3M0IC0gdF07XG4gICAgICAgIHJldHVybiBfcjIucHVzaC5hcHBseShfcjIsIF90b0NvbnN1bWFibGVBcnJheShBcnJheS5mcm9tKHtcbiAgICAgICAgICBsZW5ndGg6IHRcbiAgICAgICAgfSkubWFwKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgcmV0dXJuIF9zNCArIGEgKyB0O1xuICAgICAgICB9KSkpLCB2b2lkIGUuc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKHQsIHMpIHtcbiAgICAgICAgICBfcjIuaW5jbHVkZXModC5jb2x1bW4pICYmICQoZSwgcyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdmFyIHIgPSBpICsgYSAtIDE7XG4gICAgICBpZiAoZS5wYXJhbXMucmV3aW5kIHx8IGUucGFyYW1zLmxvb3ApIGZvciAodmFyIF9hMyA9IGkgLSB0OyBfYTMgPD0gciArIHQ7IF9hMyArPSAxKSB7XG4gICAgICAgIHZhciBfdDMgPSAoX2EzICUgcyArIHMpICUgcztcbiAgICAgICAgKF90MyA8IGkgfHwgX3QzID4gcikgJiYgJChlLCBfdDMpO1xuICAgICAgfSBlbHNlIGZvciAodmFyIF9hNCA9IE1hdGgubWF4KGkgLSB0LCAwKTsgX2E0IDw9IE1hdGgubWluKHIgKyB0LCBzIC0gMSk7IF9hNCArPSAxKSBfYTQgIT09IGkgJiYgKF9hNCA+IHIgfHwgX2E0IDwgaSkgJiYgJChlLCBfYTQpO1xuICAgIH07XG4gIHZhciBrID0ge1xuICAgIHVwZGF0ZVNpemU6IGZ1bmN0aW9uIHVwZGF0ZVNpemUoKSB7XG4gICAgICB2YXIgZSA9IHRoaXM7XG4gICAgICB2YXIgdCwgcztcbiAgICAgIHZhciBhID0gZS5lbDtcbiAgICAgIHQgPSB2b2lkIDAgIT09IGUucGFyYW1zLndpZHRoICYmIG51bGwgIT09IGUucGFyYW1zLndpZHRoID8gZS5wYXJhbXMud2lkdGggOiBhLmNsaWVudFdpZHRoLCBzID0gdm9pZCAwICE9PSBlLnBhcmFtcy5oZWlnaHQgJiYgbnVsbCAhPT0gZS5wYXJhbXMuaGVpZ2h0ID8gZS5wYXJhbXMuaGVpZ2h0IDogYS5jbGllbnRIZWlnaHQsIDAgPT09IHQgJiYgZS5pc0hvcml6b250YWwoKSB8fCAwID09PSBzICYmIGUuaXNWZXJ0aWNhbCgpIHx8ICh0ID0gdCAtIHBhcnNlSW50KHcoYSwgXCJwYWRkaW5nLWxlZnRcIikgfHwgMCwgMTApIC0gcGFyc2VJbnQodyhhLCBcInBhZGRpbmctcmlnaHRcIikgfHwgMCwgMTApLCBzID0gcyAtIHBhcnNlSW50KHcoYSwgXCJwYWRkaW5nLXRvcFwiKSB8fCAwLCAxMCkgLSBwYXJzZUludCh3KGEsIFwicGFkZGluZy1ib3R0b21cIikgfHwgMCwgMTApLCBOdW1iZXIuaXNOYU4odCkgJiYgKHQgPSAwKSwgTnVtYmVyLmlzTmFOKHMpICYmIChzID0gMCksIE9iamVjdC5hc3NpZ24oZSwge1xuICAgICAgICB3aWR0aDogdCxcbiAgICAgICAgaGVpZ2h0OiBzLFxuICAgICAgICBzaXplOiBlLmlzSG9yaXpvbnRhbCgpID8gdCA6IHNcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIHVwZGF0ZVNsaWRlczogZnVuY3Rpb24gdXBkYXRlU2xpZGVzKCkge1xuICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgZnVuY3Rpb24gdCh0KSB7XG4gICAgICAgIHJldHVybiBlLmlzSG9yaXpvbnRhbCgpID8gdCA6IHtcbiAgICAgICAgICB3aWR0aDogXCJoZWlnaHRcIixcbiAgICAgICAgICBcIm1hcmdpbi10b3BcIjogXCJtYXJnaW4tbGVmdFwiLFxuICAgICAgICAgIFwibWFyZ2luLWJvdHRvbSBcIjogXCJtYXJnaW4tcmlnaHRcIixcbiAgICAgICAgICBcIm1hcmdpbi1sZWZ0XCI6IFwibWFyZ2luLXRvcFwiLFxuICAgICAgICAgIFwibWFyZ2luLXJpZ2h0XCI6IFwibWFyZ2luLWJvdHRvbVwiLFxuICAgICAgICAgIFwicGFkZGluZy1sZWZ0XCI6IFwicGFkZGluZy10b3BcIixcbiAgICAgICAgICBcInBhZGRpbmctcmlnaHRcIjogXCJwYWRkaW5nLWJvdHRvbVwiLFxuICAgICAgICAgIG1hcmdpblJpZ2h0OiBcIm1hcmdpbkJvdHRvbVwiXG4gICAgICAgIH1bdF07XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBzKGUsIHMpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoZS5nZXRQcm9wZXJ0eVZhbHVlKHQocykpIHx8IDApO1xuICAgICAgfVxuICAgICAgdmFyIGEgPSBlLnBhcmFtcyxcbiAgICAgICAgaSA9IGUud3JhcHBlckVsLFxuICAgICAgICByID0gZS5zbGlkZXNFbCxcbiAgICAgICAgbiA9IGUuc2l6ZSxcbiAgICAgICAgbCA9IGUucnRsVHJhbnNsYXRlLFxuICAgICAgICBvID0gZS53cm9uZ1JUTCxcbiAgICAgICAgZCA9IGUudmlydHVhbCAmJiBhLnZpcnR1YWwuZW5hYmxlZCxcbiAgICAgICAgYyA9IGQgPyBlLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCA6IGUuc2xpZGVzLmxlbmd0aCxcbiAgICAgICAgcCA9IGYociwgXCIuXCIuY29uY2F0KGUucGFyYW1zLnNsaWRlQ2xhc3MsIFwiLCBzd2lwZXItc2xpZGVcIikpLFxuICAgICAgICBtID0gZCA/IGUudmlydHVhbC5zbGlkZXMubGVuZ3RoIDogcC5sZW5ndGg7XG4gICAgICB2YXIgaCA9IFtdO1xuICAgICAgdmFyIGcgPSBbXSxcbiAgICAgICAgdiA9IFtdO1xuICAgICAgdmFyIGIgPSBhLnNsaWRlc09mZnNldEJlZm9yZTtcbiAgICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgYiAmJiAoYiA9IGEuc2xpZGVzT2Zmc2V0QmVmb3JlLmNhbGwoZSkpO1xuICAgICAgdmFyIHkgPSBhLnNsaWRlc09mZnNldEFmdGVyO1xuICAgICAgXCJmdW5jdGlvblwiID09IHR5cGVvZiB5ICYmICh5ID0gYS5zbGlkZXNPZmZzZXRBZnRlci5jYWxsKGUpKTtcbiAgICAgIHZhciBFID0gZS5zbmFwR3JpZC5sZW5ndGgsXG4gICAgICAgIFMgPSBlLnNsaWRlc0dyaWQubGVuZ3RoO1xuICAgICAgdmFyIFQgPSBhLnNwYWNlQmV0d2VlbixcbiAgICAgICAgTSA9IC1iLFxuICAgICAgICBDID0gMCxcbiAgICAgICAgUCA9IDA7XG4gICAgICBpZiAodm9pZCAwID09PSBuKSByZXR1cm47XG4gICAgICBcInN0cmluZ1wiID09IHR5cGVvZiBUICYmIFQuaW5kZXhPZihcIiVcIikgPj0gMCA/IFQgPSBwYXJzZUZsb2F0KFQucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwICogbiA6IFwic3RyaW5nXCIgPT0gdHlwZW9mIFQgJiYgKFQgPSBwYXJzZUZsb2F0KFQpKSwgZS52aXJ0dWFsU2l6ZSA9IC1ULCBwLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgbCA/IGUuc3R5bGUubWFyZ2luTGVmdCA9IFwiXCIgOiBlLnN0eWxlLm1hcmdpblJpZ2h0ID0gXCJcIiwgZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIlwiLCBlLnN0eWxlLm1hcmdpblRvcCA9IFwiXCI7XG4gICAgICB9KSwgYS5jZW50ZXJlZFNsaWRlcyAmJiBhLmNzc01vZGUgJiYgKHUoaSwgXCItLXN3aXBlci1jZW50ZXJlZC1vZmZzZXQtYmVmb3JlXCIsIFwiXCIpLCB1KGksIFwiLS1zd2lwZXItY2VudGVyZWQtb2Zmc2V0LWFmdGVyXCIsIFwiXCIpKTtcbiAgICAgIHZhciBMID0gYS5ncmlkICYmIGEuZ3JpZC5yb3dzID4gMSAmJiBlLmdyaWQ7XG4gICAgICB2YXIgejtcbiAgICAgIEwgJiYgZS5ncmlkLmluaXRTbGlkZXMobSk7XG4gICAgICB2YXIgQSA9IFwiYXV0b1wiID09PSBhLnNsaWRlc1BlclZpZXcgJiYgYS5icmVha3BvaW50cyAmJiBPYmplY3Qua2V5cyhhLmJyZWFrcG9pbnRzKS5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gYS5icmVha3BvaW50c1tlXS5zbGlkZXNQZXJWaWV3O1xuICAgICAgfSkubGVuZ3RoID4gMDtcbiAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IG07IF9pMyArPSAxKSB7XG4gICAgICAgIHZhciBfcjMgPSB2b2lkIDA7XG4gICAgICAgIGlmICh6ID0gMCwgcFtfaTNdICYmIChfcjMgPSBwW19pM10pLCBMICYmIGUuZ3JpZC51cGRhdGVTbGlkZShfaTMsIF9yMywgbSwgdCksICFwW19pM10gfHwgXCJub25lXCIgIT09IHcoX3IzLCBcImRpc3BsYXlcIikpIHtcbiAgICAgICAgICBpZiAoXCJhdXRvXCIgPT09IGEuc2xpZGVzUGVyVmlldykge1xuICAgICAgICAgICAgQSAmJiAocFtfaTNdLnN0eWxlW3QoXCJ3aWR0aFwiKV0gPSBcIlwiKTtcbiAgICAgICAgICAgIHZhciBfbiA9IGdldENvbXB1dGVkU3R5bGUoX3IzKSxcbiAgICAgICAgICAgICAgX2wgPSBfcjMuc3R5bGUudHJhbnNmb3JtLFxuICAgICAgICAgICAgICBfbyA9IF9yMy5zdHlsZS53ZWJraXRUcmFuc2Zvcm07XG4gICAgICAgICAgICBpZiAoX2wgJiYgKF9yMy5zdHlsZS50cmFuc2Zvcm0gPSBcIm5vbmVcIiksIF9vICYmIChfcjMuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gXCJub25lXCIpLCBhLnJvdW5kTGVuZ3RocykgeiA9IGUuaXNIb3Jpem9udGFsKCkgPyB4KF9yMywgXCJ3aWR0aFwiLCAhMCkgOiB4KF9yMywgXCJoZWlnaHRcIiwgITApO2Vsc2Uge1xuICAgICAgICAgICAgICB2YXIgX2UyID0gcyhfbiwgXCJ3aWR0aFwiKSxcbiAgICAgICAgICAgICAgICBfdDQgPSBzKF9uLCBcInBhZGRpbmctbGVmdFwiKSxcbiAgICAgICAgICAgICAgICBfYTUgPSBzKF9uLCBcInBhZGRpbmctcmlnaHRcIiksXG4gICAgICAgICAgICAgICAgX2k0ID0gcyhfbiwgXCJtYXJnaW4tbGVmdFwiKSxcbiAgICAgICAgICAgICAgICBfbDIgPSBzKF9uLCBcIm1hcmdpbi1yaWdodFwiKSxcbiAgICAgICAgICAgICAgICBfbzIgPSBfbi5nZXRQcm9wZXJ0eVZhbHVlKFwiYm94LXNpemluZ1wiKTtcbiAgICAgICAgICAgICAgaWYgKF9vMiAmJiBcImJvcmRlci1ib3hcIiA9PT0gX28yKSB6ID0gX2UyICsgX2k0ICsgX2wyO2Vsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBfcjQgPSBfcjMsXG4gICAgICAgICAgICAgICAgICBfczUgPSBfcjQuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICAgICAgICBfbjIgPSBfcjQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgeiA9IF9lMiArIF90NCArIF9hNSArIF9pNCArIF9sMiArIChfbjIgLSBfczUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfbCAmJiAoX3IzLnN0eWxlLnRyYW5zZm9ybSA9IF9sKSwgX28gJiYgKF9yMy5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSBfbyksIGEucm91bmRMZW5ndGhzICYmICh6ID0gTWF0aC5mbG9vcih6KSk7XG4gICAgICAgICAgfSBlbHNlIHogPSAobiAtIChhLnNsaWRlc1BlclZpZXcgLSAxKSAqIFQpIC8gYS5zbGlkZXNQZXJWaWV3LCBhLnJvdW5kTGVuZ3RocyAmJiAoeiA9IE1hdGguZmxvb3IoeikpLCBwW19pM10gJiYgKHBbX2kzXS5zdHlsZVt0KFwid2lkdGhcIildID0gXCJcIi5jb25jYXQoeiwgXCJweFwiKSk7XG4gICAgICAgICAgcFtfaTNdICYmIChwW19pM10uc3dpcGVyU2xpZGVTaXplID0geiksIHYucHVzaCh6KSwgYS5jZW50ZXJlZFNsaWRlcyA/IChNID0gTSArIHogLyAyICsgQyAvIDIgKyBULCAwID09PSBDICYmIDAgIT09IF9pMyAmJiAoTSA9IE0gLSBuIC8gMiAtIFQpLCAwID09PSBfaTMgJiYgKE0gPSBNIC0gbiAvIDIgLSBUKSwgTWF0aC5hYnMoTSkgPCAuMDAxICYmIChNID0gMCksIGEucm91bmRMZW5ndGhzICYmIChNID0gTWF0aC5mbG9vcihNKSksIFAgJSBhLnNsaWRlc1Blckdyb3VwID09IDAgJiYgaC5wdXNoKE0pLCBnLnB1c2goTSkpIDogKGEucm91bmRMZW5ndGhzICYmIChNID0gTWF0aC5mbG9vcihNKSksIChQIC0gTWF0aC5taW4oZS5wYXJhbXMuc2xpZGVzUGVyR3JvdXBTa2lwLCBQKSkgJSBlLnBhcmFtcy5zbGlkZXNQZXJHcm91cCA9PSAwICYmIGgucHVzaChNKSwgZy5wdXNoKE0pLCBNID0gTSArIHogKyBUKSwgZS52aXJ0dWFsU2l6ZSArPSB6ICsgVCwgQyA9IHosIFAgKz0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGUudmlydHVhbFNpemUgPSBNYXRoLm1heChlLnZpcnR1YWxTaXplLCBuKSArIHksIGwgJiYgbyAmJiAoXCJzbGlkZVwiID09PSBhLmVmZmVjdCB8fCBcImNvdmVyZmxvd1wiID09PSBhLmVmZmVjdCkgJiYgKGkuc3R5bGUud2lkdGggPSBcIlwiLmNvbmNhdChlLnZpcnR1YWxTaXplICsgVCwgXCJweFwiKSksIGEuc2V0V3JhcHBlclNpemUgJiYgKGkuc3R5bGVbdChcIndpZHRoXCIpXSA9IFwiXCIuY29uY2F0KGUudmlydHVhbFNpemUgKyBULCBcInB4XCIpKSwgTCAmJiBlLmdyaWQudXBkYXRlV3JhcHBlclNpemUoeiwgaCwgdCksICFhLmNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgIHZhciBfdDUgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX3M2ID0gMDsgX3M2IDwgaC5sZW5ndGg7IF9zNiArPSAxKSB7XG4gICAgICAgICAgdmFyIF9pNSA9IGhbX3M2XTtcbiAgICAgICAgICBhLnJvdW5kTGVuZ3RocyAmJiAoX2k1ID0gTWF0aC5mbG9vcihfaTUpKSwgaFtfczZdIDw9IGUudmlydHVhbFNpemUgLSBuICYmIF90NS5wdXNoKF9pNSk7XG4gICAgICAgIH1cbiAgICAgICAgaCA9IF90NSwgTWF0aC5mbG9vcihlLnZpcnR1YWxTaXplIC0gbikgLSBNYXRoLmZsb29yKGhbaC5sZW5ndGggLSAxXSkgPiAxICYmIGgucHVzaChlLnZpcnR1YWxTaXplIC0gbik7XG4gICAgICB9XG4gICAgICBpZiAoZCAmJiBhLmxvb3ApIHtcbiAgICAgICAgdmFyIF90NiA9IHZbMF0gKyBUO1xuICAgICAgICBpZiAoYS5zbGlkZXNQZXJHcm91cCA+IDEpIHtcbiAgICAgICAgICB2YXIgX3M3ID0gTWF0aC5jZWlsKChlLnZpcnR1YWwuc2xpZGVzQmVmb3JlICsgZS52aXJ0dWFsLnNsaWRlc0FmdGVyKSAvIGEuc2xpZGVzUGVyR3JvdXApLFxuICAgICAgICAgICAgX2k2ID0gX3Q2ICogYS5zbGlkZXNQZXJHcm91cDtcbiAgICAgICAgICBmb3IgKHZhciBfZTMgPSAwOyBfZTMgPCBfczc7IF9lMyArPSAxKSBoLnB1c2goaFtoLmxlbmd0aCAtIDFdICsgX2k2KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBfczggPSAwOyBfczggPCBlLnZpcnR1YWwuc2xpZGVzQmVmb3JlICsgZS52aXJ0dWFsLnNsaWRlc0FmdGVyOyBfczggKz0gMSkgMSA9PT0gYS5zbGlkZXNQZXJHcm91cCAmJiBoLnB1c2goaFtoLmxlbmd0aCAtIDFdICsgX3Q2KSwgZy5wdXNoKGdbZy5sZW5ndGggLSAxXSArIF90NiksIGUudmlydHVhbFNpemUgKz0gX3Q2O1xuICAgICAgfVxuICAgICAgaWYgKDAgPT09IGgubGVuZ3RoICYmIChoID0gWzBdKSwgMCAhPT0gVCkge1xuICAgICAgICB2YXIgX3M5ID0gZS5pc0hvcml6b250YWwoKSAmJiBsID8gXCJtYXJnaW5MZWZ0XCIgOiB0KFwibWFyZ2luUmlnaHRcIik7XG4gICAgICAgIHAuZmlsdGVyKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgcmV0dXJuICEoYS5jc3NNb2RlICYmICFhLmxvb3ApIHx8IHQgIT09IHAubGVuZ3RoIC0gMTtcbiAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUuc3R5bGVbX3M5XSA9IFwiXCIuY29uY2F0KFQsIFwicHhcIik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGEuY2VudGVyZWRTbGlkZXMgJiYgYS5jZW50ZXJlZFNsaWRlc0JvdW5kcykge1xuICAgICAgICB2YXIgX2U0ID0gMDtcbiAgICAgICAgdi5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgX2U0ICs9IHQgKyAoVCB8fCAwKTtcbiAgICAgICAgfSksIF9lNCAtPSBUO1xuICAgICAgICB2YXIgX3Q3ID0gX2U0IC0gbjtcbiAgICAgICAgaCA9IGgubWFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGUgPD0gMCA/IC1iIDogZSA+IF90NyA/IF90NyArIHkgOiBlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChhLmNlbnRlckluc3VmZmljaWVudFNsaWRlcykge1xuICAgICAgICB2YXIgX2U1ID0gMDtcbiAgICAgICAgaWYgKHYuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgIF9lNSArPSB0ICsgKFQgfHwgMCk7XG4gICAgICAgIH0pLCBfZTUgLT0gVCwgX2U1IDwgbikge1xuICAgICAgICAgIHZhciBfdDggPSAobiAtIF9lNSkgLyAyO1xuICAgICAgICAgIGguZm9yRWFjaChmdW5jdGlvbiAoZSwgcykge1xuICAgICAgICAgICAgaFtzXSA9IGUgLSBfdDg7XG4gICAgICAgICAgfSksIGcuZm9yRWFjaChmdW5jdGlvbiAoZSwgcykge1xuICAgICAgICAgICAgZ1tzXSA9IGUgKyBfdDg7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChPYmplY3QuYXNzaWduKGUsIHtcbiAgICAgICAgc2xpZGVzOiBwLFxuICAgICAgICBzbmFwR3JpZDogaCxcbiAgICAgICAgc2xpZGVzR3JpZDogZyxcbiAgICAgICAgc2xpZGVzU2l6ZXNHcmlkOiB2XG4gICAgICB9KSwgYS5jZW50ZXJlZFNsaWRlcyAmJiBhLmNzc01vZGUgJiYgIWEuY2VudGVyZWRTbGlkZXNCb3VuZHMpIHtcbiAgICAgICAgdShpLCBcIi0tc3dpcGVyLWNlbnRlcmVkLW9mZnNldC1iZWZvcmVcIiwgLWhbMF0gKyBcInB4XCIpLCB1KGksIFwiLS1zd2lwZXItY2VudGVyZWQtb2Zmc2V0LWFmdGVyXCIsIGUuc2l6ZSAvIDIgLSB2W3YubGVuZ3RoIC0gMV0gLyAyICsgXCJweFwiKTtcbiAgICAgICAgdmFyIF90OSA9IC1lLnNuYXBHcmlkWzBdLFxuICAgICAgICAgIF9zMTAgPSAtZS5zbGlkZXNHcmlkWzBdO1xuICAgICAgICBlLnNuYXBHcmlkID0gZS5zbmFwR3JpZC5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gZSArIF90OTtcbiAgICAgICAgfSksIGUuc2xpZGVzR3JpZCA9IGUuc2xpZGVzR3JpZC5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gZSArIF9zMTA7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKG0gIT09IGMgJiYgZS5lbWl0KFwic2xpZGVzTGVuZ3RoQ2hhbmdlXCIpLCBoLmxlbmd0aCAhPT0gRSAmJiAoZS5wYXJhbXMud2F0Y2hPdmVyZmxvdyAmJiBlLmNoZWNrT3ZlcmZsb3coKSwgZS5lbWl0KFwic25hcEdyaWRMZW5ndGhDaGFuZ2VcIikpLCBnLmxlbmd0aCAhPT0gUyAmJiBlLmVtaXQoXCJzbGlkZXNHcmlkTGVuZ3RoQ2hhbmdlXCIpLCBhLndhdGNoU2xpZGVzUHJvZ3Jlc3MgJiYgZS51cGRhdGVTbGlkZXNPZmZzZXQoKSwgIShkIHx8IGEuY3NzTW9kZSB8fCBcInNsaWRlXCIgIT09IGEuZWZmZWN0ICYmIFwiZmFkZVwiICE9PSBhLmVmZmVjdCkpIHtcbiAgICAgICAgdmFyIF90MTAgPSBcIlwiLmNvbmNhdChhLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MsIFwiYmFja2ZhY2UtaGlkZGVuXCIpLFxuICAgICAgICAgIF9zMTEgPSBlLmVsLmNsYXNzTGlzdC5jb250YWlucyhfdDEwKTtcbiAgICAgICAgbSA8PSBhLm1heEJhY2tmYWNlSGlkZGVuU2xpZGVzID8gX3MxMSB8fCBlLmVsLmNsYXNzTGlzdC5hZGQoX3QxMCkgOiBfczExICYmIGUuZWwuY2xhc3NMaXN0LnJlbW92ZShfdDEwKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHVwZGF0ZUF1dG9IZWlnaHQ6IGZ1bmN0aW9uIHVwZGF0ZUF1dG9IZWlnaHQoZSkge1xuICAgICAgdmFyIHQgPSB0aGlzLFxuICAgICAgICBzID0gW10sXG4gICAgICAgIGEgPSB0LnZpcnR1YWwgJiYgdC5wYXJhbXMudmlydHVhbC5lbmFibGVkO1xuICAgICAgdmFyIGksXG4gICAgICAgIHIgPSAwO1xuICAgICAgXCJudW1iZXJcIiA9PSB0eXBlb2YgZSA/IHQuc2V0VHJhbnNpdGlvbihlKSA6ICEwID09PSBlICYmIHQuc2V0VHJhbnNpdGlvbih0LnBhcmFtcy5zcGVlZCk7XG4gICAgICB2YXIgbiA9IGZ1bmN0aW9uIG4oZSkge1xuICAgICAgICByZXR1cm4gYSA/IHQuc2xpZGVzW3QuZ2V0U2xpZGVJbmRleEJ5RGF0YShlKV0gOiB0LnNsaWRlc1tlXTtcbiAgICAgIH07XG4gICAgICBpZiAoXCJhdXRvXCIgIT09IHQucGFyYW1zLnNsaWRlc1BlclZpZXcgJiYgdC5wYXJhbXMuc2xpZGVzUGVyVmlldyA+IDEpIHtcbiAgICAgICAgaWYgKHQucGFyYW1zLmNlbnRlcmVkU2xpZGVzKSAodC52aXNpYmxlU2xpZGVzIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICB9KTtlbHNlIGZvciAoaSA9IDA7IGkgPCBNYXRoLmNlaWwodC5wYXJhbXMuc2xpZGVzUGVyVmlldyk7IGkgKz0gMSkge1xuICAgICAgICAgIHZhciBfZTYgPSB0LmFjdGl2ZUluZGV4ICsgaTtcbiAgICAgICAgICBpZiAoX2U2ID4gdC5zbGlkZXMubGVuZ3RoICYmICFhKSBicmVhaztcbiAgICAgICAgICBzLnB1c2gobihfZTYpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHMucHVzaChuKHQuYWN0aXZlSW5kZXgpKTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSArPSAxKSBpZiAodm9pZCAwICE9PSBzW2ldKSB7XG4gICAgICAgIHZhciBfZTcgPSBzW2ldLm9mZnNldEhlaWdodDtcbiAgICAgICAgciA9IF9lNyA+IHIgPyBfZTcgOiByO1xuICAgICAgfVxuICAgICAgKHIgfHwgMCA9PT0gcikgJiYgKHQud3JhcHBlckVsLnN0eWxlLmhlaWdodCA9IFwiXCIuY29uY2F0KHIsIFwicHhcIikpO1xuICAgIH0sXG4gICAgdXBkYXRlU2xpZGVzT2Zmc2V0OiBmdW5jdGlvbiB1cGRhdGVTbGlkZXNPZmZzZXQoKSB7XG4gICAgICB2YXIgZSA9IHRoaXMsXG4gICAgICAgIHQgPSBlLnNsaWRlcyxcbiAgICAgICAgcyA9IGUuaXNFbGVtZW50ID8gZS5pc0hvcml6b250YWwoKSA/IGUud3JhcHBlckVsLm9mZnNldExlZnQgOiBlLndyYXBwZXJFbC5vZmZzZXRUb3AgOiAwO1xuICAgICAgZm9yICh2YXIgX2E2ID0gMDsgX2E2IDwgdC5sZW5ndGg7IF9hNiArPSAxKSB0W19hNl0uc3dpcGVyU2xpZGVPZmZzZXQgPSAoZS5pc0hvcml6b250YWwoKSA/IHRbX2E2XS5vZmZzZXRMZWZ0IDogdFtfYTZdLm9mZnNldFRvcCkgLSBzIC0gZS5jc3NPdmVyZmxvd0FkanVzdG1lbnQoKTtcbiAgICB9LFxuICAgIHVwZGF0ZVNsaWRlc1Byb2dyZXNzOiBmdW5jdGlvbiB1cGRhdGVTbGlkZXNQcm9ncmVzcyhlKSB7XG4gICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSB0aGlzICYmIHRoaXMudHJhbnNsYXRlIHx8IDApO1xuICAgICAgdmFyIHQgPSB0aGlzLFxuICAgICAgICBzID0gdC5wYXJhbXMsXG4gICAgICAgIGEgPSB0LnNsaWRlcyxcbiAgICAgICAgaSA9IHQucnRsVHJhbnNsYXRlLFxuICAgICAgICByID0gdC5zbmFwR3JpZDtcbiAgICAgIGlmICgwID09PSBhLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgdm9pZCAwID09PSBhWzBdLnN3aXBlclNsaWRlT2Zmc2V0ICYmIHQudXBkYXRlU2xpZGVzT2Zmc2V0KCk7XG4gICAgICB2YXIgbiA9IC1lO1xuICAgICAgaSAmJiAobiA9IGUpLCBhLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5jbGFzc0xpc3QucmVtb3ZlKHMuc2xpZGVWaXNpYmxlQ2xhc3MpO1xuICAgICAgfSksIHQudmlzaWJsZVNsaWRlc0luZGV4ZXMgPSBbXSwgdC52aXNpYmxlU2xpZGVzID0gW107XG4gICAgICB2YXIgbCA9IHMuc3BhY2VCZXR3ZWVuO1xuICAgICAgXCJzdHJpbmdcIiA9PSB0eXBlb2YgbCAmJiBsLmluZGV4T2YoXCIlXCIpID49IDAgPyBsID0gcGFyc2VGbG9hdChsLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMCAqIHQuc2l6ZSA6IFwic3RyaW5nXCIgPT0gdHlwZW9mIGwgJiYgKGwgPSBwYXJzZUZsb2F0KGwpKTtcbiAgICAgIGZvciAodmFyIF9lOCA9IDA7IF9lOCA8IGEubGVuZ3RoOyBfZTggKz0gMSkge1xuICAgICAgICB2YXIgX28zID0gYVtfZThdO1xuICAgICAgICB2YXIgX2QgPSBfbzMuc3dpcGVyU2xpZGVPZmZzZXQ7XG4gICAgICAgIHMuY3NzTW9kZSAmJiBzLmNlbnRlcmVkU2xpZGVzICYmIChfZCAtPSBhWzBdLnN3aXBlclNsaWRlT2Zmc2V0KTtcbiAgICAgICAgdmFyIF9jID0gKG4gKyAocy5jZW50ZXJlZFNsaWRlcyA/IHQubWluVHJhbnNsYXRlKCkgOiAwKSAtIF9kKSAvIChfbzMuc3dpcGVyU2xpZGVTaXplICsgbCksXG4gICAgICAgICAgX3AgPSAobiAtIHJbMF0gKyAocy5jZW50ZXJlZFNsaWRlcyA/IHQubWluVHJhbnNsYXRlKCkgOiAwKSAtIF9kKSAvIChfbzMuc3dpcGVyU2xpZGVTaXplICsgbCksXG4gICAgICAgICAgX3UgPSAtKG4gLSBfZCksXG4gICAgICAgICAgX20gPSBfdSArIHQuc2xpZGVzU2l6ZXNHcmlkW19lOF07XG4gICAgICAgIChfdSA+PSAwICYmIF91IDwgdC5zaXplIC0gMSB8fCBfbSA+IDEgJiYgX20gPD0gdC5zaXplIHx8IF91IDw9IDAgJiYgX20gPj0gdC5zaXplKSAmJiAodC52aXNpYmxlU2xpZGVzLnB1c2goX28zKSwgdC52aXNpYmxlU2xpZGVzSW5kZXhlcy5wdXNoKF9lOCksIGFbX2U4XS5jbGFzc0xpc3QuYWRkKHMuc2xpZGVWaXNpYmxlQ2xhc3MpKSwgX28zLnByb2dyZXNzID0gaSA/IC1fYyA6IF9jLCBfbzMub3JpZ2luYWxQcm9ncmVzcyA9IGkgPyAtX3AgOiBfcDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHVwZGF0ZVByb2dyZXNzOiBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcyhlKSB7XG4gICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICBpZiAodm9pZCAwID09PSBlKSB7XG4gICAgICAgIHZhciBfczEyID0gdC5ydGxUcmFuc2xhdGUgPyAtMSA6IDE7XG4gICAgICAgIGUgPSB0ICYmIHQudHJhbnNsYXRlICYmIHQudHJhbnNsYXRlICogX3MxMiB8fCAwO1xuICAgICAgfVxuICAgICAgdmFyIHMgPSB0LnBhcmFtcyxcbiAgICAgICAgYSA9IHQubWF4VHJhbnNsYXRlKCkgLSB0Lm1pblRyYW5zbGF0ZSgpO1xuICAgICAgdmFyIGkgPSB0LnByb2dyZXNzLFxuICAgICAgICByID0gdC5pc0JlZ2lubmluZyxcbiAgICAgICAgbiA9IHQuaXNFbmQsXG4gICAgICAgIGwgPSB0LnByb2dyZXNzTG9vcDtcbiAgICAgIHZhciBvID0gcixcbiAgICAgICAgZCA9IG47XG4gICAgICBpZiAoMCA9PT0gYSkgaSA9IDAsIHIgPSAhMCwgbiA9ICEwO2Vsc2Uge1xuICAgICAgICBpID0gKGUgLSB0Lm1pblRyYW5zbGF0ZSgpKSAvIGE7XG4gICAgICAgIHZhciBfczEzID0gTWF0aC5hYnMoZSAtIHQubWluVHJhbnNsYXRlKCkpIDwgMSxcbiAgICAgICAgICBfbDMgPSBNYXRoLmFicyhlIC0gdC5tYXhUcmFuc2xhdGUoKSkgPCAxO1xuICAgICAgICByID0gX3MxMyB8fCBpIDw9IDAsIG4gPSBfbDMgfHwgaSA+PSAxLCBfczEzICYmIChpID0gMCksIF9sMyAmJiAoaSA9IDEpO1xuICAgICAgfVxuICAgICAgaWYgKHMubG9vcCkge1xuICAgICAgICB2YXIgX3MxNCA9IHQuZ2V0U2xpZGVJbmRleEJ5RGF0YSgwKSxcbiAgICAgICAgICBfYTcgPSB0LmdldFNsaWRlSW5kZXhCeURhdGEodC5zbGlkZXMubGVuZ3RoIC0gMSksXG4gICAgICAgICAgX2k3ID0gdC5zbGlkZXNHcmlkW19zMTRdLFxuICAgICAgICAgIF9yNSA9IHQuc2xpZGVzR3JpZFtfYTddLFxuICAgICAgICAgIF9uMyA9IHQuc2xpZGVzR3JpZFt0LnNsaWRlc0dyaWQubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgX280ID0gTWF0aC5hYnMoZSk7XG4gICAgICAgIGwgPSBfbzQgPj0gX2k3ID8gKF9vNCAtIF9pNykgLyBfbjMgOiAoX280ICsgX24zIC0gX3I1KSAvIF9uMywgbCA+IDEgJiYgKGwgLT0gMSk7XG4gICAgICB9XG4gICAgICBPYmplY3QuYXNzaWduKHQsIHtcbiAgICAgICAgcHJvZ3Jlc3M6IGksXG4gICAgICAgIHByb2dyZXNzTG9vcDogbCxcbiAgICAgICAgaXNCZWdpbm5pbmc6IHIsXG4gICAgICAgIGlzRW5kOiBuXG4gICAgICB9KSwgKHMud2F0Y2hTbGlkZXNQcm9ncmVzcyB8fCBzLmNlbnRlcmVkU2xpZGVzICYmIHMuYXV0b0hlaWdodCkgJiYgdC51cGRhdGVTbGlkZXNQcm9ncmVzcyhlKSwgciAmJiAhbyAmJiB0LmVtaXQoXCJyZWFjaEJlZ2lubmluZyB0b0VkZ2VcIiksIG4gJiYgIWQgJiYgdC5lbWl0KFwicmVhY2hFbmQgdG9FZGdlXCIpLCAobyAmJiAhciB8fCBkICYmICFuKSAmJiB0LmVtaXQoXCJmcm9tRWRnZVwiKSwgdC5lbWl0KFwicHJvZ3Jlc3NcIiwgaSk7XG4gICAgfSxcbiAgICB1cGRhdGVTbGlkZXNDbGFzc2VzOiBmdW5jdGlvbiB1cGRhdGVTbGlkZXNDbGFzc2VzKCkge1xuICAgICAgdmFyIGUgPSB0aGlzLFxuICAgICAgICB0ID0gZS5zbGlkZXMsXG4gICAgICAgIHMgPSBlLnBhcmFtcyxcbiAgICAgICAgYSA9IGUuc2xpZGVzRWwsXG4gICAgICAgIGkgPSBlLmFjdGl2ZUluZGV4LFxuICAgICAgICByID0gZS52aXJ0dWFsICYmIHMudmlydHVhbC5lbmFibGVkLFxuICAgICAgICBuID0gZnVuY3Rpb24gbihlKSB7XG4gICAgICAgICAgcmV0dXJuIGYoYSwgXCIuXCIuY29uY2F0KHMuc2xpZGVDbGFzcykuY29uY2F0KGUsIFwiLCBzd2lwZXItc2xpZGVcIikuY29uY2F0KGUpKVswXTtcbiAgICAgICAgfTtcbiAgICAgIHZhciBsO1xuICAgICAgaWYgKHQuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLmNsYXNzTGlzdC5yZW1vdmUocy5zbGlkZUFjdGl2ZUNsYXNzLCBzLnNsaWRlTmV4dENsYXNzLCBzLnNsaWRlUHJldkNsYXNzKTtcbiAgICAgIH0pLCByKSB7XG4gICAgICAgIGlmIChzLmxvb3ApIHtcbiAgICAgICAgICB2YXIgX3QxMSA9IGkgLSBlLnZpcnR1YWwuc2xpZGVzQmVmb3JlO1xuICAgICAgICAgIF90MTEgPCAwICYmIChfdDExID0gZS52aXJ0dWFsLnNsaWRlcy5sZW5ndGggKyBfdDExKSwgX3QxMSA+PSBlLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCAmJiAoX3QxMSAtPSBlLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCksIGwgPSBuKFwiW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVxcXCJcIi5jb25jYXQoX3QxMSwgXCJcXFwiXVwiKSk7XG4gICAgICAgIH0gZWxzZSBsID0gbihcIltkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cXFwiXCIuY29uY2F0KGksIFwiXFxcIl1cIikpO1xuICAgICAgfSBlbHNlIGwgPSB0W2ldO1xuICAgICAgaWYgKGwpIHtcbiAgICAgICAgbC5jbGFzc0xpc3QuYWRkKHMuc2xpZGVBY3RpdmVDbGFzcyk7XG4gICAgICAgIHZhciBfZTkgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIHZhciBzID0gW107XG4gICAgICAgICAgZm9yICg7IGUubmV4dEVsZW1lbnRTaWJsaW5nOykge1xuICAgICAgICAgICAgdmFyIF9hOCA9IGUubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgdCA/IF9hOC5tYXRjaGVzKHQpICYmIHMucHVzaChfYTgpIDogcy5wdXNoKF9hOCksIGUgPSBfYTg7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICB9KGwsIFwiLlwiLmNvbmNhdChzLnNsaWRlQ2xhc3MsIFwiLCBzd2lwZXItc2xpZGVcIikpWzBdO1xuICAgICAgICBzLmxvb3AgJiYgIV9lOSAmJiAoX2U5ID0gdFswXSksIF9lOSAmJiBfZTkuY2xhc3NMaXN0LmFkZChzLnNsaWRlTmV4dENsYXNzKTtcbiAgICAgICAgdmFyIF9hOSA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgdmFyIHMgPSBbXTtcbiAgICAgICAgICBmb3IgKDsgZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOykge1xuICAgICAgICAgICAgdmFyIF9hMTAgPSBlLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICB0ID8gX2ExMC5tYXRjaGVzKHQpICYmIHMucHVzaChfYTEwKSA6IHMucHVzaChfYTEwKSwgZSA9IF9hMTA7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICB9KGwsIFwiLlwiLmNvbmNhdChzLnNsaWRlQ2xhc3MsIFwiLCBzd2lwZXItc2xpZGVcIikpWzBdO1xuICAgICAgICBzLmxvb3AgJiYgMCA9PT0gIV9hOSAmJiAoX2E5ID0gdFt0Lmxlbmd0aCAtIDFdKSwgX2E5ICYmIF9hOS5jbGFzc0xpc3QuYWRkKHMuc2xpZGVQcmV2Q2xhc3MpO1xuICAgICAgfVxuICAgICAgZS5lbWl0U2xpZGVzQ2xhc3NlcygpO1xuICAgIH0sXG4gICAgdXBkYXRlQWN0aXZlSW5kZXg6IGZ1bmN0aW9uIHVwZGF0ZUFjdGl2ZUluZGV4KGUpIHtcbiAgICAgIHZhciB0ID0gdGhpcyxcbiAgICAgICAgcyA9IHQucnRsVHJhbnNsYXRlID8gdC50cmFuc2xhdGUgOiAtdC50cmFuc2xhdGUsXG4gICAgICAgIGEgPSB0LnNuYXBHcmlkLFxuICAgICAgICBpID0gdC5wYXJhbXMsXG4gICAgICAgIHIgPSB0LmFjdGl2ZUluZGV4LFxuICAgICAgICBuID0gdC5yZWFsSW5kZXgsXG4gICAgICAgIGwgPSB0LnNuYXBJbmRleDtcbiAgICAgIHZhciBvLFxuICAgICAgICBkID0gZTtcbiAgICAgIHZhciBjID0gZnVuY3Rpb24gYyhlKSB7XG4gICAgICAgIHZhciBzID0gZSAtIHQudmlydHVhbC5zbGlkZXNCZWZvcmU7XG4gICAgICAgIHJldHVybiBzIDwgMCAmJiAocyA9IHQudmlydHVhbC5zbGlkZXMubGVuZ3RoICsgcyksIHMgPj0gdC52aXJ0dWFsLnNsaWRlcy5sZW5ndGggJiYgKHMgLT0gdC52aXJ0dWFsLnNsaWRlcy5sZW5ndGgpLCBzO1xuICAgICAgfTtcbiAgICAgIGlmICh2b2lkIDAgPT09IGQgJiYgKGQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdCA9IGUuc2xpZGVzR3JpZCxcbiAgICAgICAgICBzID0gZS5wYXJhbXMsXG4gICAgICAgICAgYSA9IGUucnRsVHJhbnNsYXRlID8gZS50cmFuc2xhdGUgOiAtZS50cmFuc2xhdGU7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBmb3IgKHZhciBfZTEwID0gMDsgX2UxMCA8IHQubGVuZ3RoOyBfZTEwICs9IDEpIHZvaWQgMCAhPT0gdFtfZTEwICsgMV0gPyBhID49IHRbX2UxMF0gJiYgYSA8IHRbX2UxMCArIDFdIC0gKHRbX2UxMCArIDFdIC0gdFtfZTEwXSkgLyAyID8gaSA9IF9lMTAgOiBhID49IHRbX2UxMF0gJiYgYSA8IHRbX2UxMCArIDFdICYmIChpID0gX2UxMCArIDEpIDogYSA+PSB0W19lMTBdICYmIChpID0gX2UxMCk7XG4gICAgICAgIHJldHVybiBzLm5vcm1hbGl6ZVNsaWRlSW5kZXggJiYgKGkgPCAwIHx8IHZvaWQgMCA9PT0gaSkgJiYgKGkgPSAwKSwgaTtcbiAgICAgIH0odCkpLCBhLmluZGV4T2YocykgPj0gMCkgbyA9IGEuaW5kZXhPZihzKTtlbHNlIHtcbiAgICAgICAgdmFyIF9lMTEgPSBNYXRoLm1pbihpLnNsaWRlc1Blckdyb3VwU2tpcCwgZCk7XG4gICAgICAgIG8gPSBfZTExICsgTWF0aC5mbG9vcigoZCAtIF9lMTEpIC8gaS5zbGlkZXNQZXJHcm91cCk7XG4gICAgICB9XG4gICAgICBpZiAobyA+PSBhLmxlbmd0aCAmJiAobyA9IGEubGVuZ3RoIC0gMSksIGQgPT09IHIpIHJldHVybiBvICE9PSBsICYmICh0LnNuYXBJbmRleCA9IG8sIHQuZW1pdChcInNuYXBJbmRleENoYW5nZVwiKSksIHZvaWQgKHQucGFyYW1zLmxvb3AgJiYgdC52aXJ0dWFsICYmIHQucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCAmJiAodC5yZWFsSW5kZXggPSBjKGQpKSk7XG4gICAgICB2YXIgcDtcbiAgICAgIHAgPSB0LnZpcnR1YWwgJiYgaS52aXJ0dWFsLmVuYWJsZWQgJiYgaS5sb29wID8gYyhkKSA6IHQuc2xpZGVzW2RdID8gcGFyc2VJbnQodC5zbGlkZXNbZF0uZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIikgfHwgZCwgMTApIDogZCwgT2JqZWN0LmFzc2lnbih0LCB7XG4gICAgICAgIHByZXZpb3VzU25hcEluZGV4OiBsLFxuICAgICAgICBzbmFwSW5kZXg6IG8sXG4gICAgICAgIHByZXZpb3VzUmVhbEluZGV4OiBuLFxuICAgICAgICByZWFsSW5kZXg6IHAsXG4gICAgICAgIHByZXZpb3VzSW5kZXg6IHIsXG4gICAgICAgIGFjdGl2ZUluZGV4OiBkXG4gICAgICB9KSwgdC5pbml0aWFsaXplZCAmJiBJKHQpLCB0LmVtaXQoXCJhY3RpdmVJbmRleENoYW5nZVwiKSwgdC5lbWl0KFwic25hcEluZGV4Q2hhbmdlXCIpLCBuICE9PSBwICYmIHQuZW1pdChcInJlYWxJbmRleENoYW5nZVwiKSwgKHQuaW5pdGlhbGl6ZWQgfHwgdC5wYXJhbXMucnVuQ2FsbGJhY2tzT25Jbml0KSAmJiB0LmVtaXQoXCJzbGlkZUNoYW5nZVwiKTtcbiAgICB9LFxuICAgIHVwZGF0ZUNsaWNrZWRTbGlkZTogZnVuY3Rpb24gdXBkYXRlQ2xpY2tlZFNsaWRlKGUpIHtcbiAgICAgIHZhciB0ID0gdGhpcyxcbiAgICAgICAgcyA9IHQucGFyYW1zLFxuICAgICAgICBhID0gZS5jbG9zZXN0KFwiLlwiLmNvbmNhdChzLnNsaWRlQ2xhc3MsIFwiLCBzd2lwZXItc2xpZGVcIikpO1xuICAgICAgdmFyIGksXG4gICAgICAgIHIgPSAhMTtcbiAgICAgIGlmIChhKSBmb3IgKHZhciBfZTEyID0gMDsgX2UxMiA8IHQuc2xpZGVzLmxlbmd0aDsgX2UxMiArPSAxKSBpZiAodC5zbGlkZXNbX2UxMl0gPT09IGEpIHtcbiAgICAgICAgciA9ICEwLCBpID0gX2UxMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoIWEgfHwgIXIpIHJldHVybiB0LmNsaWNrZWRTbGlkZSA9IHZvaWQgMCwgdm9pZCAodC5jbGlja2VkSW5kZXggPSB2b2lkIDApO1xuICAgICAgdC5jbGlja2VkU2xpZGUgPSBhLCB0LnZpcnR1YWwgJiYgdC5wYXJhbXMudmlydHVhbC5lbmFibGVkID8gdC5jbGlja2VkSW5kZXggPSBwYXJzZUludChhLmdldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIpLCAxMCkgOiB0LmNsaWNrZWRJbmRleCA9IGksIHMuc2xpZGVUb0NsaWNrZWRTbGlkZSAmJiB2b2lkIDAgIT09IHQuY2xpY2tlZEluZGV4ICYmIHQuY2xpY2tlZEluZGV4ICE9PSB0LmFjdGl2ZUluZGV4ICYmIHQuc2xpZGVUb0NsaWNrZWRTbGlkZSgpO1xuICAgIH1cbiAgfTtcbiAgdmFyIE8gPSB7XG4gICAgZ2V0VHJhbnNsYXRlOiBmdW5jdGlvbiBnZXRUcmFuc2xhdGUoZSkge1xuICAgICAgdm9pZCAwID09PSBlICYmIChlID0gdGhpcy5pc0hvcml6b250YWwoKSA/IFwieFwiIDogXCJ5XCIpO1xuICAgICAgdmFyIHQgPSB0aGlzLnBhcmFtcyxcbiAgICAgICAgcyA9IHRoaXMucnRsVHJhbnNsYXRlLFxuICAgICAgICBhID0gdGhpcy50cmFuc2xhdGUsXG4gICAgICAgIGkgPSB0aGlzLndyYXBwZXJFbDtcbiAgICAgIGlmICh0LnZpcnR1YWxUcmFuc2xhdGUpIHJldHVybiBzID8gLWEgOiBhO1xuICAgICAgaWYgKHQuY3NzTW9kZSkgcmV0dXJuIGE7XG4gICAgICB2YXIgciA9IG8oaSwgZSk7XG4gICAgICByZXR1cm4gciArPSB0aGlzLmNzc092ZXJmbG93QWRqdXN0bWVudCgpLCBzICYmIChyID0gLXIpLCByIHx8IDA7XG4gICAgfSxcbiAgICBzZXRUcmFuc2xhdGU6IGZ1bmN0aW9uIHNldFRyYW5zbGF0ZShlLCB0KSB7XG4gICAgICB2YXIgcyA9IHRoaXMsXG4gICAgICAgIGEgPSBzLnJ0bFRyYW5zbGF0ZSxcbiAgICAgICAgaSA9IHMucGFyYW1zLFxuICAgICAgICByID0gcy53cmFwcGVyRWwsXG4gICAgICAgIG4gPSBzLnByb2dyZXNzO1xuICAgICAgdmFyIGwsXG4gICAgICAgIG8gPSAwLFxuICAgICAgICBkID0gMDtcbiAgICAgIHMuaXNIb3Jpem9udGFsKCkgPyBvID0gYSA/IC1lIDogZSA6IGQgPSBlLCBpLnJvdW5kTGVuZ3RocyAmJiAobyA9IE1hdGguZmxvb3IobyksIGQgPSBNYXRoLmZsb29yKGQpKSwgcy5wcmV2aW91c1RyYW5zbGF0ZSA9IHMudHJhbnNsYXRlLCBzLnRyYW5zbGF0ZSA9IHMuaXNIb3Jpem9udGFsKCkgPyBvIDogZCwgaS5jc3NNb2RlID8gcltzLmlzSG9yaXpvbnRhbCgpID8gXCJzY3JvbGxMZWZ0XCIgOiBcInNjcm9sbFRvcFwiXSA9IHMuaXNIb3Jpem9udGFsKCkgPyAtbyA6IC1kIDogaS52aXJ0dWFsVHJhbnNsYXRlIHx8IChzLmlzSG9yaXpvbnRhbCgpID8gbyAtPSBzLmNzc092ZXJmbG93QWRqdXN0bWVudCgpIDogZCAtPSBzLmNzc092ZXJmbG93QWRqdXN0bWVudCgpLCByLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoXCIuY29uY2F0KG8sIFwicHgsIFwiKS5jb25jYXQoZCwgXCJweCwgMHB4KVwiKSk7XG4gICAgICB2YXIgYyA9IHMubWF4VHJhbnNsYXRlKCkgLSBzLm1pblRyYW5zbGF0ZSgpO1xuICAgICAgbCA9IDAgPT09IGMgPyAwIDogKGUgLSBzLm1pblRyYW5zbGF0ZSgpKSAvIGMsIGwgIT09IG4gJiYgcy51cGRhdGVQcm9ncmVzcyhlKSwgcy5lbWl0KFwic2V0VHJhbnNsYXRlXCIsIHMudHJhbnNsYXRlLCB0KTtcbiAgICB9LFxuICAgIG1pblRyYW5zbGF0ZTogZnVuY3Rpb24gbWluVHJhbnNsYXRlKCkge1xuICAgICAgcmV0dXJuIC10aGlzLnNuYXBHcmlkWzBdO1xuICAgIH0sXG4gICAgbWF4VHJhbnNsYXRlOiBmdW5jdGlvbiBtYXhUcmFuc2xhdGUoKSB7XG4gICAgICByZXR1cm4gLXRoaXMuc25hcEdyaWRbdGhpcy5zbmFwR3JpZC5sZW5ndGggLSAxXTtcbiAgICB9LFxuICAgIHRyYW5zbGF0ZVRvOiBmdW5jdGlvbiB0cmFuc2xhdGVUbyhlLCB0LCBzLCBhLCBpKSB7XG4gICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSAwKSwgdm9pZCAwID09PSB0ICYmICh0ID0gdGhpcy5wYXJhbXMuc3BlZWQpLCB2b2lkIDAgPT09IHMgJiYgKHMgPSAhMCksIHZvaWQgMCA9PT0gYSAmJiAoYSA9ICEwKTtcbiAgICAgIHZhciByID0gdGhpcyxcbiAgICAgICAgbiA9IHIucGFyYW1zLFxuICAgICAgICBsID0gci53cmFwcGVyRWw7XG4gICAgICBpZiAoci5hbmltYXRpbmcgJiYgbi5wcmV2ZW50SW50ZXJhY3Rpb25PblRyYW5zaXRpb24pIHJldHVybiAhMTtcbiAgICAgIHZhciBvID0gci5taW5UcmFuc2xhdGUoKSxcbiAgICAgICAgZCA9IHIubWF4VHJhbnNsYXRlKCk7XG4gICAgICB2YXIgYztcbiAgICAgIGlmIChjID0gYSAmJiBlID4gbyA/IG8gOiBhICYmIGUgPCBkID8gZCA6IGUsIHIudXBkYXRlUHJvZ3Jlc3MoYyksIG4uY3NzTW9kZSkge1xuICAgICAgICB2YXIgX2UxMyA9IHIuaXNIb3Jpem9udGFsKCk7XG4gICAgICAgIGlmICgwID09PSB0KSBsW19lMTMgPyBcInNjcm9sbExlZnRcIiA6IFwic2Nyb2xsVG9wXCJdID0gLWM7ZWxzZSB7XG4gICAgICAgICAgaWYgKCFyLnN1cHBvcnQuc21vb3RoU2Nyb2xsKSByZXR1cm4gbSh7XG4gICAgICAgICAgICBzd2lwZXI6IHIsXG4gICAgICAgICAgICB0YXJnZXRQb3NpdGlvbjogLWMsXG4gICAgICAgICAgICBzaWRlOiBfZTEzID8gXCJsZWZ0XCIgOiBcInRvcFwiXG4gICAgICAgICAgfSksICEwO1xuICAgICAgICAgIGwuc2Nyb2xsVG8oX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eSh7fSwgX2UxMyA/IFwibGVmdFwiIDogXCJ0b3BcIiwgLWMpLCBcImJlaGF2aW9yXCIsIFwic21vb3RoXCIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgICB9XG4gICAgICByZXR1cm4gMCA9PT0gdCA/IChyLnNldFRyYW5zaXRpb24oMCksIHIuc2V0VHJhbnNsYXRlKGMpLCBzICYmIChyLmVtaXQoXCJiZWZvcmVUcmFuc2l0aW9uU3RhcnRcIiwgdCwgaSksIHIuZW1pdChcInRyYW5zaXRpb25FbmRcIikpKSA6IChyLnNldFRyYW5zaXRpb24odCksIHIuc2V0VHJhbnNsYXRlKGMpLCBzICYmIChyLmVtaXQoXCJiZWZvcmVUcmFuc2l0aW9uU3RhcnRcIiwgdCwgaSksIHIuZW1pdChcInRyYW5zaXRpb25TdGFydFwiKSksIHIuYW5pbWF0aW5nIHx8IChyLmFuaW1hdGluZyA9ICEwLCByLm9uVHJhbnNsYXRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCB8fCAoci5vblRyYW5zbGF0ZVRvV3JhcHBlclRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICByICYmICFyLmRlc3Ryb3llZCAmJiBlLnRhcmdldCA9PT0gdGhpcyAmJiAoci53cmFwcGVyRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgci5vblRyYW5zbGF0ZVRvV3JhcHBlclRyYW5zaXRpb25FbmQpLCByLm9uVHJhbnNsYXRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCA9IG51bGwsIGRlbGV0ZSByLm9uVHJhbnNsYXRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCwgcyAmJiByLmVtaXQoXCJ0cmFuc2l0aW9uRW5kXCIpKTtcbiAgICAgIH0pLCByLndyYXBwZXJFbC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCByLm9uVHJhbnNsYXRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCkpKSwgITA7XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBEKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUucnVuQ2FsbGJhY2tzLFxuICAgICAgYSA9IGUuZGlyZWN0aW9uLFxuICAgICAgaSA9IGUuc3RlcDtcbiAgICB2YXIgciA9IHQuYWN0aXZlSW5kZXgsXG4gICAgICBuID0gdC5wcmV2aW91c0luZGV4O1xuICAgIHZhciBsID0gYTtcbiAgICBpZiAobCB8fCAobCA9IHIgPiBuID8gXCJuZXh0XCIgOiByIDwgbiA/IFwicHJldlwiIDogXCJyZXNldFwiKSwgdC5lbWl0KFwidHJhbnNpdGlvblwiLmNvbmNhdChpKSksIHMgJiYgciAhPT0gbikge1xuICAgICAgaWYgKFwicmVzZXRcIiA9PT0gbCkgcmV0dXJuIHZvaWQgdC5lbWl0KFwic2xpZGVSZXNldFRyYW5zaXRpb25cIi5jb25jYXQoaSkpO1xuICAgICAgdC5lbWl0KFwic2xpZGVDaGFuZ2VUcmFuc2l0aW9uXCIuY29uY2F0KGkpKSwgXCJuZXh0XCIgPT09IGwgPyB0LmVtaXQoXCJzbGlkZU5leHRUcmFuc2l0aW9uXCIuY29uY2F0KGkpKSA6IHQuZW1pdChcInNsaWRlUHJldlRyYW5zaXRpb25cIi5jb25jYXQoaSkpO1xuICAgIH1cbiAgfVxuICB2YXIgRyA9IHtcbiAgICBzbGlkZVRvOiBmdW5jdGlvbiBzbGlkZVRvKGUsIHQsIHMsIGEsIGkpIHtcbiAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IDApLCB2b2lkIDAgPT09IHQgJiYgKHQgPSB0aGlzLnBhcmFtcy5zcGVlZCksIHZvaWQgMCA9PT0gcyAmJiAocyA9ICEwKSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiAoZSA9IHBhcnNlSW50KGUsIDEwKSk7XG4gICAgICB2YXIgciA9IHRoaXM7XG4gICAgICB2YXIgbiA9IGU7XG4gICAgICBuIDwgMCAmJiAobiA9IDApO1xuICAgICAgdmFyIGwgPSByLnBhcmFtcyxcbiAgICAgICAgbyA9IHIuc25hcEdyaWQsXG4gICAgICAgIGQgPSByLnNsaWRlc0dyaWQsXG4gICAgICAgIGMgPSByLnByZXZpb3VzSW5kZXgsXG4gICAgICAgIHAgPSByLmFjdGl2ZUluZGV4LFxuICAgICAgICB1ID0gci5ydGxUcmFuc2xhdGUsXG4gICAgICAgIGggPSByLndyYXBwZXJFbCxcbiAgICAgICAgZiA9IHIuZW5hYmxlZDtcbiAgICAgIGlmIChyLmFuaW1hdGluZyAmJiBsLnByZXZlbnRJbnRlcmFjdGlvbk9uVHJhbnNpdGlvbiB8fCAhZiAmJiAhYSAmJiAhaSkgcmV0dXJuICExO1xuICAgICAgdmFyIGcgPSBNYXRoLm1pbihyLnBhcmFtcy5zbGlkZXNQZXJHcm91cFNraXAsIG4pO1xuICAgICAgdmFyIHYgPSBnICsgTWF0aC5mbG9vcigobiAtIGcpIC8gci5wYXJhbXMuc2xpZGVzUGVyR3JvdXApO1xuICAgICAgdiA+PSBvLmxlbmd0aCAmJiAodiA9IG8ubGVuZ3RoIC0gMSk7XG4gICAgICB2YXIgdyA9IC1vW3ZdO1xuICAgICAgaWYgKGwubm9ybWFsaXplU2xpZGVJbmRleCkgZm9yICh2YXIgX2UxNCA9IDA7IF9lMTQgPCBkLmxlbmd0aDsgX2UxNCArPSAxKSB7XG4gICAgICAgIHZhciBfdDEyID0gLU1hdGguZmxvb3IoMTAwICogdyksXG4gICAgICAgICAgX3MxNSA9IE1hdGguZmxvb3IoMTAwICogZFtfZTE0XSksXG4gICAgICAgICAgX2ExMSA9IE1hdGguZmxvb3IoMTAwICogZFtfZTE0ICsgMV0pO1xuICAgICAgICB2b2lkIDAgIT09IGRbX2UxNCArIDFdID8gX3QxMiA+PSBfczE1ICYmIF90MTIgPCBfYTExIC0gKF9hMTEgLSBfczE1KSAvIDIgPyBuID0gX2UxNCA6IF90MTIgPj0gX3MxNSAmJiBfdDEyIDwgX2ExMSAmJiAobiA9IF9lMTQgKyAxKSA6IF90MTIgPj0gX3MxNSAmJiAobiA9IF9lMTQpO1xuICAgICAgfVxuICAgICAgaWYgKHIuaW5pdGlhbGl6ZWQgJiYgbiAhPT0gcCkge1xuICAgICAgICBpZiAoIXIuYWxsb3dTbGlkZU5leHQgJiYgKHUgPyB3ID4gci50cmFuc2xhdGUgJiYgdyA+IHIubWluVHJhbnNsYXRlKCkgOiB3IDwgci50cmFuc2xhdGUgJiYgdyA8IHIubWluVHJhbnNsYXRlKCkpKSByZXR1cm4gITE7XG4gICAgICAgIGlmICghci5hbGxvd1NsaWRlUHJldiAmJiB3ID4gci50cmFuc2xhdGUgJiYgdyA+IHIubWF4VHJhbnNsYXRlKCkgJiYgKHAgfHwgMCkgIT09IG4pIHJldHVybiAhMTtcbiAgICAgIH1cbiAgICAgIHZhciBiO1xuICAgICAgaWYgKG4gIT09IChjIHx8IDApICYmIHMgJiYgci5lbWl0KFwiYmVmb3JlU2xpZGVDaGFuZ2VTdGFydFwiKSwgci51cGRhdGVQcm9ncmVzcyh3KSwgYiA9IG4gPiBwID8gXCJuZXh0XCIgOiBuIDwgcCA/IFwicHJldlwiIDogXCJyZXNldFwiLCB1ICYmIC13ID09PSByLnRyYW5zbGF0ZSB8fCAhdSAmJiB3ID09PSByLnRyYW5zbGF0ZSkgcmV0dXJuIHIudXBkYXRlQWN0aXZlSW5kZXgobiksIGwuYXV0b0hlaWdodCAmJiByLnVwZGF0ZUF1dG9IZWlnaHQoKSwgci51cGRhdGVTbGlkZXNDbGFzc2VzKCksIFwic2xpZGVcIiAhPT0gbC5lZmZlY3QgJiYgci5zZXRUcmFuc2xhdGUodyksIFwicmVzZXRcIiAhPT0gYiAmJiAoci50cmFuc2l0aW9uU3RhcnQocywgYiksIHIudHJhbnNpdGlvbkVuZChzLCBiKSksICExO1xuICAgICAgaWYgKGwuY3NzTW9kZSkge1xuICAgICAgICB2YXIgX2UxNSA9IHIuaXNIb3Jpem9udGFsKCksXG4gICAgICAgICAgX3MxNiA9IHUgPyB3IDogLXc7XG4gICAgICAgIGlmICgwID09PSB0KSB7XG4gICAgICAgICAgdmFyIF90MTMgPSByLnZpcnR1YWwgJiYgci5wYXJhbXMudmlydHVhbC5lbmFibGVkO1xuICAgICAgICAgIF90MTMgJiYgKHIud3JhcHBlckVsLnN0eWxlLnNjcm9sbFNuYXBUeXBlID0gXCJub25lXCIsIHIuX2ltbWVkaWF0ZVZpcnR1YWwgPSAhMCksIF90MTMgJiYgIXIuX2Nzc01vZGVWaXJ0dWFsSW5pdGlhbFNldCAmJiByLnBhcmFtcy5pbml0aWFsU2xpZGUgPiAwID8gKHIuX2Nzc01vZGVWaXJ0dWFsSW5pdGlhbFNldCA9ICEwLCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaFtfZTE1ID8gXCJzY3JvbGxMZWZ0XCIgOiBcInNjcm9sbFRvcFwiXSA9IF9zMTY7XG4gICAgICAgICAgfSkpIDogaFtfZTE1ID8gXCJzY3JvbGxMZWZ0XCIgOiBcInNjcm9sbFRvcFwiXSA9IF9zMTYsIF90MTMgJiYgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHIud3JhcHBlckVsLnN0eWxlLnNjcm9sbFNuYXBUeXBlID0gXCJcIiwgci5faW1tZWRpYXRlVmlydHVhbCA9ICExO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghci5zdXBwb3J0LnNtb290aFNjcm9sbCkgcmV0dXJuIG0oe1xuICAgICAgICAgICAgc3dpcGVyOiByLFxuICAgICAgICAgICAgdGFyZ2V0UG9zaXRpb246IF9zMTYsXG4gICAgICAgICAgICBzaWRlOiBfZTE1ID8gXCJsZWZ0XCIgOiBcInRvcFwiXG4gICAgICAgICAgfSksICEwO1xuICAgICAgICAgIGguc2Nyb2xsVG8oX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eSh7fSwgX2UxNSA/IFwibGVmdFwiIDogXCJ0b3BcIiwgX3MxNiksIFwiYmVoYXZpb3JcIiwgXCJzbW9vdGhcIikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByLnNldFRyYW5zaXRpb24odCksIHIuc2V0VHJhbnNsYXRlKHcpLCByLnVwZGF0ZUFjdGl2ZUluZGV4KG4pLCByLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKSwgci5lbWl0KFwiYmVmb3JlVHJhbnNpdGlvblN0YXJ0XCIsIHQsIGEpLCByLnRyYW5zaXRpb25TdGFydChzLCBiKSwgMCA9PT0gdCA/IHIudHJhbnNpdGlvbkVuZChzLCBiKSA6IHIuYW5pbWF0aW5nIHx8IChyLmFuaW1hdGluZyA9ICEwLCByLm9uU2xpZGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kIHx8IChyLm9uU2xpZGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgciAmJiAhci5kZXN0cm95ZWQgJiYgZS50YXJnZXQgPT09IHRoaXMgJiYgKHIud3JhcHBlckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIHIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQpLCByLm9uU2xpZGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kID0gbnVsbCwgZGVsZXRlIHIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQsIHIudHJhbnNpdGlvbkVuZChzLCBiKSk7XG4gICAgICB9KSwgci53cmFwcGVyRWwuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgci5vblNsaWRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCkpLCAhMDtcbiAgICB9LFxuICAgIHNsaWRlVG9Mb29wOiBmdW5jdGlvbiBzbGlkZVRvTG9vcChlLCB0LCBzLCBhKSB7XG4gICAgICBpZiAodm9pZCAwID09PSBlICYmIChlID0gMCksIHZvaWQgMCA9PT0gdCAmJiAodCA9IHRoaXMucGFyYW1zLnNwZWVkKSwgdm9pZCAwID09PSBzICYmIChzID0gITApLCBcInN0cmluZ1wiID09IHR5cGVvZiBlKSB7XG4gICAgICAgIGUgPSBwYXJzZUludChlLCAxMCk7XG4gICAgICB9XG4gICAgICB2YXIgaSA9IHRoaXM7XG4gICAgICB2YXIgciA9IGU7XG4gICAgICByZXR1cm4gaS5wYXJhbXMubG9vcCAmJiAoaS52aXJ0dWFsICYmIGkucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCA/IHIgKz0gaS52aXJ0dWFsLnNsaWRlc0JlZm9yZSA6IHIgPSBpLmdldFNsaWRlSW5kZXhCeURhdGEocikpLCBpLnNsaWRlVG8ociwgdCwgcywgYSk7XG4gICAgfSxcbiAgICBzbGlkZU5leHQ6IGZ1bmN0aW9uIHNsaWRlTmV4dChlLCB0LCBzKSB7XG4gICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSB0aGlzLnBhcmFtcy5zcGVlZCksIHZvaWQgMCA9PT0gdCAmJiAodCA9ICEwKTtcbiAgICAgIHZhciBhID0gdGhpcyxcbiAgICAgICAgaSA9IGEuZW5hYmxlZCxcbiAgICAgICAgciA9IGEucGFyYW1zLFxuICAgICAgICBuID0gYS5hbmltYXRpbmc7XG4gICAgICBpZiAoIWkpIHJldHVybiBhO1xuICAgICAgdmFyIGwgPSByLnNsaWRlc1Blckdyb3VwO1xuICAgICAgXCJhdXRvXCIgPT09IHIuc2xpZGVzUGVyVmlldyAmJiAxID09PSByLnNsaWRlc1Blckdyb3VwICYmIHIuc2xpZGVzUGVyR3JvdXBBdXRvICYmIChsID0gTWF0aC5tYXgoYS5zbGlkZXNQZXJWaWV3RHluYW1pYyhcImN1cnJlbnRcIiwgITApLCAxKSk7XG4gICAgICB2YXIgbyA9IGEuYWN0aXZlSW5kZXggPCByLnNsaWRlc1Blckdyb3VwU2tpcCA/IDEgOiBsLFxuICAgICAgICBkID0gYS52aXJ0dWFsICYmIHIudmlydHVhbC5lbmFibGVkO1xuICAgICAgaWYgKHIubG9vcCkge1xuICAgICAgICBpZiAobiAmJiAhZCAmJiByLmxvb3BQcmV2ZW50c1NsaWRpbmcpIHJldHVybiAhMTtcbiAgICAgICAgYS5sb29wRml4KHtcbiAgICAgICAgICBkaXJlY3Rpb246IFwibmV4dFwiXG4gICAgICAgIH0pLCBhLl9jbGllbnRMZWZ0ID0gYS53cmFwcGVyRWwuY2xpZW50TGVmdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByLnJld2luZCAmJiBhLmlzRW5kID8gYS5zbGlkZVRvKDAsIGUsIHQsIHMpIDogYS5zbGlkZVRvKGEuYWN0aXZlSW5kZXggKyBvLCBlLCB0LCBzKTtcbiAgICB9LFxuICAgIHNsaWRlUHJldjogZnVuY3Rpb24gc2xpZGVQcmV2KGUsIHQsIHMpIHtcbiAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IHRoaXMucGFyYW1zLnNwZWVkKSwgdm9pZCAwID09PSB0ICYmICh0ID0gITApO1xuICAgICAgdmFyIGEgPSB0aGlzLFxuICAgICAgICBpID0gYS5wYXJhbXMsXG4gICAgICAgIHIgPSBhLnNuYXBHcmlkLFxuICAgICAgICBuID0gYS5zbGlkZXNHcmlkLFxuICAgICAgICBsID0gYS5ydGxUcmFuc2xhdGUsXG4gICAgICAgIG8gPSBhLmVuYWJsZWQsXG4gICAgICAgIGQgPSBhLmFuaW1hdGluZztcbiAgICAgIGlmICghbykgcmV0dXJuIGE7XG4gICAgICB2YXIgYyA9IGEudmlydHVhbCAmJiBpLnZpcnR1YWwuZW5hYmxlZDtcbiAgICAgIGlmIChpLmxvb3ApIHtcbiAgICAgICAgaWYgKGQgJiYgIWMgJiYgaS5sb29wUHJldmVudHNTbGlkaW5nKSByZXR1cm4gITE7XG4gICAgICAgIGEubG9vcEZpeCh7XG4gICAgICAgICAgZGlyZWN0aW9uOiBcInByZXZcIlxuICAgICAgICB9KSwgYS5fY2xpZW50TGVmdCA9IGEud3JhcHBlckVsLmNsaWVudExlZnQ7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBwKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgPCAwID8gLU1hdGguZmxvb3IoTWF0aC5hYnMoZSkpIDogTWF0aC5mbG9vcihlKTtcbiAgICAgIH1cbiAgICAgIHZhciB1ID0gcChsID8gYS50cmFuc2xhdGUgOiAtYS50cmFuc2xhdGUpLFxuICAgICAgICBtID0gci5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gcChlKTtcbiAgICAgICAgfSk7XG4gICAgICB2YXIgaCA9IHJbbS5pbmRleE9mKHUpIC0gMV07XG4gICAgICBpZiAodm9pZCAwID09PSBoICYmIGkuY3NzTW9kZSkge1xuICAgICAgICB2YXIgX2UxNjtcbiAgICAgICAgci5mb3JFYWNoKGZ1bmN0aW9uICh0LCBzKSB7XG4gICAgICAgICAgdSA+PSB0ICYmIChfZTE2ID0gcyk7XG4gICAgICAgIH0pLCB2b2lkIDAgIT09IF9lMTYgJiYgKGggPSByW19lMTYgPiAwID8gX2UxNiAtIDEgOiBfZTE2XSk7XG4gICAgICB9XG4gICAgICB2YXIgZiA9IDA7XG4gICAgICBpZiAodm9pZCAwICE9PSBoICYmIChmID0gbi5pbmRleE9mKGgpLCBmIDwgMCAmJiAoZiA9IGEuYWN0aXZlSW5kZXggLSAxKSwgXCJhdXRvXCIgPT09IGkuc2xpZGVzUGVyVmlldyAmJiAxID09PSBpLnNsaWRlc1Blckdyb3VwICYmIGkuc2xpZGVzUGVyR3JvdXBBdXRvICYmIChmID0gZiAtIGEuc2xpZGVzUGVyVmlld0R5bmFtaWMoXCJwcmV2aW91c1wiLCAhMCkgKyAxLCBmID0gTWF0aC5tYXgoZiwgMCkpKSwgaS5yZXdpbmQgJiYgYS5pc0JlZ2lubmluZykge1xuICAgICAgICB2YXIgX2k4ID0gYS5wYXJhbXMudmlydHVhbCAmJiBhLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgJiYgYS52aXJ0dWFsID8gYS52aXJ0dWFsLnNsaWRlcy5sZW5ndGggLSAxIDogYS5zbGlkZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgcmV0dXJuIGEuc2xpZGVUbyhfaTgsIGUsIHQsIHMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGEuc2xpZGVUbyhmLCBlLCB0LCBzKTtcbiAgICB9LFxuICAgIHNsaWRlUmVzZXQ6IGZ1bmN0aW9uIHNsaWRlUmVzZXQoZSwgdCwgcykge1xuICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZSAmJiAoZSA9IHRoaXMucGFyYW1zLnNwZWVkKSwgdm9pZCAwID09PSB0ICYmICh0ID0gITApLCB0aGlzLnNsaWRlVG8odGhpcy5hY3RpdmVJbmRleCwgZSwgdCwgcyk7XG4gICAgfSxcbiAgICBzbGlkZVRvQ2xvc2VzdDogZnVuY3Rpb24gc2xpZGVUb0Nsb3Nlc3QoZSwgdCwgcywgYSkge1xuICAgICAgdm9pZCAwID09PSBlICYmIChlID0gdGhpcy5wYXJhbXMuc3BlZWQpLCB2b2lkIDAgPT09IHQgJiYgKHQgPSAhMCksIHZvaWQgMCA9PT0gYSAmJiAoYSA9IC41KTtcbiAgICAgIHZhciBpID0gdGhpcztcbiAgICAgIHZhciByID0gaS5hY3RpdmVJbmRleDtcbiAgICAgIHZhciBuID0gTWF0aC5taW4oaS5wYXJhbXMuc2xpZGVzUGVyR3JvdXBTa2lwLCByKSxcbiAgICAgICAgbCA9IG4gKyBNYXRoLmZsb29yKChyIC0gbikgLyBpLnBhcmFtcy5zbGlkZXNQZXJHcm91cCksXG4gICAgICAgIG8gPSBpLnJ0bFRyYW5zbGF0ZSA/IGkudHJhbnNsYXRlIDogLWkudHJhbnNsYXRlO1xuICAgICAgaWYgKG8gPj0gaS5zbmFwR3JpZFtsXSkge1xuICAgICAgICB2YXIgX2UxNyA9IGkuc25hcEdyaWRbbF07XG4gICAgICAgIG8gLSBfZTE3ID4gKGkuc25hcEdyaWRbbCArIDFdIC0gX2UxNykgKiBhICYmIChyICs9IGkucGFyYW1zLnNsaWRlc1Blckdyb3VwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBfZTE4ID0gaS5zbmFwR3JpZFtsIC0gMV07XG4gICAgICAgIG8gLSBfZTE4IDw9IChpLnNuYXBHcmlkW2xdIC0gX2UxOCkgKiBhICYmIChyIC09IGkucGFyYW1zLnNsaWRlc1Blckdyb3VwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByID0gTWF0aC5tYXgociwgMCksIHIgPSBNYXRoLm1pbihyLCBpLnNsaWRlc0dyaWQubGVuZ3RoIC0gMSksIGkuc2xpZGVUbyhyLCBlLCB0LCBzKTtcbiAgICB9LFxuICAgIHNsaWRlVG9DbGlja2VkU2xpZGU6IGZ1bmN0aW9uIHNsaWRlVG9DbGlja2VkU2xpZGUoKSB7XG4gICAgICB2YXIgZSA9IHRoaXMsXG4gICAgICAgIHQgPSBlLnBhcmFtcyxcbiAgICAgICAgcyA9IGUuc2xpZGVzRWwsXG4gICAgICAgIGEgPSBcImF1dG9cIiA9PT0gdC5zbGlkZXNQZXJWaWV3ID8gZS5zbGlkZXNQZXJWaWV3RHluYW1pYygpIDogdC5zbGlkZXNQZXJWaWV3O1xuICAgICAgdmFyIGksXG4gICAgICAgIHIgPSBlLmNsaWNrZWRJbmRleDtcbiAgICAgIHZhciBsID0gZS5pc0VsZW1lbnQgPyBcInN3aXBlci1zbGlkZVwiIDogXCIuXCIuY29uY2F0KHQuc2xpZGVDbGFzcyk7XG4gICAgICBpZiAodC5sb29wKSB7XG4gICAgICAgIGlmIChlLmFuaW1hdGluZykgcmV0dXJuO1xuICAgICAgICBpID0gcGFyc2VJbnQoZS5jbGlja2VkU2xpZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIiksIDEwKSwgdC5jZW50ZXJlZFNsaWRlcyA/IHIgPCBlLmxvb3BlZFNsaWRlcyAtIGEgLyAyIHx8IHIgPiBlLnNsaWRlcy5sZW5ndGggLSBlLmxvb3BlZFNsaWRlcyArIGEgLyAyID8gKGUubG9vcEZpeCgpLCByID0gZS5nZXRTbGlkZUluZGV4KGYocywgXCJcIi5jb25jYXQobCwgXCJbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XFxcIlwiKS5jb25jYXQoaSwgXCJcXFwiXVwiKSlbMF0pLCBuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBlLnNsaWRlVG8ocik7XG4gICAgICAgIH0pKSA6IGUuc2xpZGVUbyhyKSA6IHIgPiBlLnNsaWRlcy5sZW5ndGggLSBhID8gKGUubG9vcEZpeCgpLCByID0gZS5nZXRTbGlkZUluZGV4KGYocywgXCJcIi5jb25jYXQobCwgXCJbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XFxcIlwiKS5jb25jYXQoaSwgXCJcXFwiXVwiKSlbMF0pLCBuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBlLnNsaWRlVG8ocik7XG4gICAgICAgIH0pKSA6IGUuc2xpZGVUbyhyKTtcbiAgICAgIH0gZWxzZSBlLnNsaWRlVG8ocik7XG4gICAgfVxuICB9O1xuICB2YXIgSCA9IHtcbiAgICBsb29wQ3JlYXRlOiBmdW5jdGlvbiBsb29wQ3JlYXRlKGUpIHtcbiAgICAgIHZhciB0ID0gdGhpcyxcbiAgICAgICAgcyA9IHQucGFyYW1zLFxuICAgICAgICBhID0gdC5zbGlkZXNFbDtcbiAgICAgIGlmICghcy5sb29wIHx8IHQudmlydHVhbCAmJiB0LnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQpIHJldHVybjtcbiAgICAgIGYoYSwgXCIuXCIuY29uY2F0KHMuc2xpZGVDbGFzcywgXCIsIHN3aXBlci1zbGlkZVwiKSkuZm9yRWFjaChmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICBlLnNldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIsIHQpO1xuICAgICAgfSksIHQubG9vcEZpeCh7XG4gICAgICAgIHNsaWRlUmVhbEluZGV4OiBlLFxuICAgICAgICBkaXJlY3Rpb246IHMuY2VudGVyZWRTbGlkZXMgPyB2b2lkIDAgOiBcIm5leHRcIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICBsb29wRml4OiBmdW5jdGlvbiBsb29wRml4KGUpIHtcbiAgICAgIHZhciBfcmVmMiA9IHZvaWQgMCA9PT0gZSA/IHt9IDogZSxcbiAgICAgICAgdCA9IF9yZWYyLnNsaWRlUmVhbEluZGV4LFxuICAgICAgICBfcmVmMiRzbGlkZVRvID0gX3JlZjIuc2xpZGVUbyxcbiAgICAgICAgcyA9IF9yZWYyJHNsaWRlVG8gPT09IHZvaWQgMCA/ICEwIDogX3JlZjIkc2xpZGVUbyxcbiAgICAgICAgYSA9IF9yZWYyLmRpcmVjdGlvbixcbiAgICAgICAgaSA9IF9yZWYyLnNldFRyYW5zbGF0ZSxcbiAgICAgICAgciA9IF9yZWYyLmFjdGl2ZVNsaWRlSW5kZXgsXG4gICAgICAgIG4gPSBfcmVmMi5ieUNvbnRyb2xsZXIsXG4gICAgICAgIGwgPSBfcmVmMi5ieU1vdXNld2hlZWw7XG4gICAgICB2YXIgbyA9IHRoaXM7XG4gICAgICBpZiAoIW8ucGFyYW1zLmxvb3ApIHJldHVybjtcbiAgICAgIG8uZW1pdChcImJlZm9yZUxvb3BGaXhcIik7XG4gICAgICB2YXIgZCA9IG8uc2xpZGVzLFxuICAgICAgICBjID0gby5hbGxvd1NsaWRlUHJldixcbiAgICAgICAgcCA9IG8uYWxsb3dTbGlkZU5leHQsXG4gICAgICAgIHUgPSBvLnNsaWRlc0VsLFxuICAgICAgICBtID0gby5wYXJhbXM7XG4gICAgICBpZiAoby5hbGxvd1NsaWRlUHJldiA9ICEwLCBvLmFsbG93U2xpZGVOZXh0ID0gITAsIG8udmlydHVhbCAmJiBtLnZpcnR1YWwuZW5hYmxlZCkgcmV0dXJuIHMgJiYgKG0uY2VudGVyZWRTbGlkZXMgfHwgMCAhPT0gby5zbmFwSW5kZXggPyBtLmNlbnRlcmVkU2xpZGVzICYmIG8uc25hcEluZGV4IDwgbS5zbGlkZXNQZXJWaWV3ID8gby5zbGlkZVRvKG8udmlydHVhbC5zbGlkZXMubGVuZ3RoICsgby5zbmFwSW5kZXgsIDAsICExLCAhMCkgOiBvLnNuYXBJbmRleCA9PT0gby5zbmFwR3JpZC5sZW5ndGggLSAxICYmIG8uc2xpZGVUbyhvLnZpcnR1YWwuc2xpZGVzQmVmb3JlLCAwLCAhMSwgITApIDogby5zbGlkZVRvKG8udmlydHVhbC5zbGlkZXMubGVuZ3RoLCAwLCAhMSwgITApKSwgby5hbGxvd1NsaWRlUHJldiA9IGMsIG8uYWxsb3dTbGlkZU5leHQgPSBwLCB2b2lkIG8uZW1pdChcImxvb3BGaXhcIik7XG4gICAgICB2YXIgaCA9IFwiYXV0b1wiID09PSBtLnNsaWRlc1BlclZpZXcgPyBvLnNsaWRlc1BlclZpZXdEeW5hbWljKCkgOiBNYXRoLmNlaWwocGFyc2VGbG9hdChtLnNsaWRlc1BlclZpZXcsIDEwKSk7XG4gICAgICB2YXIgZiA9IG0ubG9vcGVkU2xpZGVzIHx8IGg7XG4gICAgICBmICUgbS5zbGlkZXNQZXJHcm91cCAhPSAwICYmIChmICs9IG0uc2xpZGVzUGVyR3JvdXAgLSBmICUgbS5zbGlkZXNQZXJHcm91cCksIG8ubG9vcGVkU2xpZGVzID0gZjtcbiAgICAgIHZhciBnID0gW10sXG4gICAgICAgIHYgPSBbXTtcbiAgICAgIHZhciB3ID0gby5hY3RpdmVJbmRleDtcbiAgICAgIHZvaWQgMCA9PT0gciA/IHIgPSBvLmdldFNsaWRlSW5kZXgoby5zbGlkZXMuZmlsdGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBlLmNsYXNzTGlzdC5jb250YWlucyhtLnNsaWRlQWN0aXZlQ2xhc3MpO1xuICAgICAgfSlbMF0pIDogdyA9IHI7XG4gICAgICB2YXIgYiA9IFwibmV4dFwiID09PSBhIHx8ICFhLFxuICAgICAgICB5ID0gXCJwcmV2XCIgPT09IGEgfHwgIWE7XG4gICAgICB2YXIgRSA9IDAsXG4gICAgICAgIHggPSAwO1xuICAgICAgaWYgKHIgPCBmKSB7XG4gICAgICAgIEUgPSBNYXRoLm1heChmIC0gciwgbS5zbGlkZXNQZXJHcm91cCk7XG4gICAgICAgIGZvciAodmFyIF9lMTkgPSAwOyBfZTE5IDwgZiAtIHI7IF9lMTkgKz0gMSkge1xuICAgICAgICAgIHZhciBfdDE0ID0gX2UxOSAtIE1hdGguZmxvb3IoX2UxOSAvIGQubGVuZ3RoKSAqIGQubGVuZ3RoO1xuICAgICAgICAgIGcucHVzaChkLmxlbmd0aCAtIF90MTQgLSAxKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyID4gby5zbGlkZXMubGVuZ3RoIC0gMiAqIGYpIHtcbiAgICAgICAgeCA9IE1hdGgubWF4KHIgLSAoby5zbGlkZXMubGVuZ3RoIC0gMiAqIGYpLCBtLnNsaWRlc1Blckdyb3VwKTtcbiAgICAgICAgZm9yICh2YXIgX2UyMCA9IDA7IF9lMjAgPCB4OyBfZTIwICs9IDEpIHtcbiAgICAgICAgICB2YXIgX3QxNSA9IF9lMjAgLSBNYXRoLmZsb29yKF9lMjAgLyBkLmxlbmd0aCkgKiBkLmxlbmd0aDtcbiAgICAgICAgICB2LnB1c2goX3QxNSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh5ICYmIGcuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBvLnNsaWRlc1tlXS5zd2lwZXJMb29wTW92ZURPTSA9ICEwLCB1LnByZXBlbmQoby5zbGlkZXNbZV0pLCBvLnNsaWRlc1tlXS5zd2lwZXJMb29wTW92ZURPTSA9ICExO1xuICAgICAgfSksIGIgJiYgdi5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIG8uc2xpZGVzW2VdLnN3aXBlckxvb3BNb3ZlRE9NID0gITAsIHUuYXBwZW5kKG8uc2xpZGVzW2VdKSwgby5zbGlkZXNbZV0uc3dpcGVyTG9vcE1vdmVET00gPSAhMTtcbiAgICAgIH0pLCBvLnJlY2FsY1NsaWRlcygpLCBcImF1dG9cIiA9PT0gbS5zbGlkZXNQZXJWaWV3ICYmIG8udXBkYXRlU2xpZGVzKCksIG0ud2F0Y2hTbGlkZXNQcm9ncmVzcyAmJiBvLnVwZGF0ZVNsaWRlc09mZnNldCgpLCBzKSBpZiAoZy5sZW5ndGggPiAwICYmIHkpIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkge1xuICAgICAgICAgIHZhciBfZTIxID0gby5zbGlkZXNHcmlkW3ddLFxuICAgICAgICAgICAgX3QxNiA9IG8uc2xpZGVzR3JpZFt3ICsgRV0gLSBfZTIxO1xuICAgICAgICAgIGwgPyBvLnNldFRyYW5zbGF0ZShvLnRyYW5zbGF0ZSAtIF90MTYpIDogKG8uc2xpZGVUbyh3ICsgRSwgMCwgITEsICEwKSwgaSAmJiAoby50b3VjaGVzW28uaXNIb3Jpem9udGFsKCkgPyBcInN0YXJ0WFwiIDogXCJzdGFydFlcIl0gKz0gX3QxNikpO1xuICAgICAgICB9IGVsc2UgaSAmJiBvLnNsaWRlVG9Mb29wKHQsIDAsICExLCAhMCk7XG4gICAgICB9IGVsc2UgaWYgKHYubGVuZ3RoID4gMCAmJiBiKSBpZiAodm9pZCAwID09PSB0KSB7XG4gICAgICAgIHZhciBfZTIyID0gby5zbGlkZXNHcmlkW3ddLFxuICAgICAgICAgIF90MTcgPSBvLnNsaWRlc0dyaWRbdyAtIHhdIC0gX2UyMjtcbiAgICAgICAgbCA/IG8uc2V0VHJhbnNsYXRlKG8udHJhbnNsYXRlIC0gX3QxNykgOiAoby5zbGlkZVRvKHcgLSB4LCAwLCAhMSwgITApLCBpICYmIChvLnRvdWNoZXNbby5pc0hvcml6b250YWwoKSA/IFwic3RhcnRYXCIgOiBcInN0YXJ0WVwiXSArPSBfdDE3KSk7XG4gICAgICB9IGVsc2Ugby5zbGlkZVRvTG9vcCh0LCAwLCAhMSwgITApO1xuICAgICAgaWYgKG8uYWxsb3dTbGlkZVByZXYgPSBjLCBvLmFsbG93U2xpZGVOZXh0ID0gcCwgby5jb250cm9sbGVyICYmIG8uY29udHJvbGxlci5jb250cm9sICYmICFuKSB7XG4gICAgICAgIHZhciBfZTIzID0ge1xuICAgICAgICAgIHNsaWRlUmVhbEluZGV4OiB0LFxuICAgICAgICAgIHNsaWRlVG86ICExLFxuICAgICAgICAgIGRpcmVjdGlvbjogYSxcbiAgICAgICAgICBzZXRUcmFuc2xhdGU6IGksXG4gICAgICAgICAgYWN0aXZlU2xpZGVJbmRleDogcixcbiAgICAgICAgICBieUNvbnRyb2xsZXI6ICEwXG4gICAgICAgIH07XG4gICAgICAgIEFycmF5LmlzQXJyYXkoby5jb250cm9sbGVyLmNvbnRyb2wpID8gby5jb250cm9sbGVyLmNvbnRyb2wuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgICF0LmRlc3Ryb3llZCAmJiB0LnBhcmFtcy5sb29wICYmIHQubG9vcEZpeChfZTIzKTtcbiAgICAgICAgfSkgOiBvLmNvbnRyb2xsZXIuY29udHJvbCBpbnN0YW5jZW9mIG8uY29uc3RydWN0b3IgJiYgby5jb250cm9sbGVyLmNvbnRyb2wucGFyYW1zLmxvb3AgJiYgby5jb250cm9sbGVyLmNvbnRyb2wubG9vcEZpeChfZTIzKTtcbiAgICAgIH1cbiAgICAgIG8uZW1pdChcImxvb3BGaXhcIik7XG4gICAgfSxcbiAgICBsb29wRGVzdHJveTogZnVuY3Rpb24gbG9vcERlc3Ryb3koKSB7XG4gICAgICB2YXIgZSA9IHRoaXMsXG4gICAgICAgIHQgPSBlLnBhcmFtcyxcbiAgICAgICAgcyA9IGUuc2xpZGVzRWw7XG4gICAgICBpZiAoIXQubG9vcCB8fCBlLnZpcnR1YWwgJiYgZS5wYXJhbXMudmlydHVhbC5lbmFibGVkKSByZXR1cm47XG4gICAgICBlLnJlY2FsY1NsaWRlcygpO1xuICAgICAgdmFyIGEgPSBbXTtcbiAgICAgIGUuc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHQgPSB2b2lkIDAgPT09IGUuc3dpcGVyU2xpZGVJbmRleCA/IDEgKiBlLmdldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIpIDogZS5zd2lwZXJTbGlkZUluZGV4O1xuICAgICAgICBhW3RdID0gZTtcbiAgICAgIH0pLCBlLnNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIik7XG4gICAgICB9KSwgYS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHMuYXBwZW5kKGUpO1xuICAgICAgfSksIGUucmVjYWxjU2xpZGVzKCksIGUuc2xpZGVUbyhlLnJlYWxJbmRleCwgMCk7XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBYKGUpIHtcbiAgICB2YXIgdCA9IHRoaXMsXG4gICAgICBzID0gYSgpLFxuICAgICAgaSA9IHIoKSxcbiAgICAgIG4gPSB0LnRvdWNoRXZlbnRzRGF0YTtcbiAgICBuLmV2Q2FjaGUucHVzaChlKTtcbiAgICB2YXIgbyA9IHQucGFyYW1zLFxuICAgICAgZCA9IHQudG91Y2hlcyxcbiAgICAgIGMgPSB0LmVuYWJsZWQ7XG4gICAgaWYgKCFjKSByZXR1cm47XG4gICAgaWYgKCFvLnNpbXVsYXRlVG91Y2ggJiYgXCJtb3VzZVwiID09PSBlLnBvaW50ZXJUeXBlKSByZXR1cm47XG4gICAgaWYgKHQuYW5pbWF0aW5nICYmIG8ucHJldmVudEludGVyYWN0aW9uT25UcmFuc2l0aW9uKSByZXR1cm47XG4gICAgIXQuYW5pbWF0aW5nICYmIG8uY3NzTW9kZSAmJiBvLmxvb3AgJiYgdC5sb29wRml4KCk7XG4gICAgdmFyIHAgPSBlO1xuICAgIHAub3JpZ2luYWxFdmVudCAmJiAocCA9IHAub3JpZ2luYWxFdmVudCk7XG4gICAgdmFyIHUgPSBwLnRhcmdldDtcbiAgICBpZiAoXCJ3cmFwcGVyXCIgPT09IG8udG91Y2hFdmVudHNUYXJnZXQgJiYgIXQud3JhcHBlckVsLmNvbnRhaW5zKHUpKSByZXR1cm47XG4gICAgaWYgKFwid2hpY2hcIiBpbiBwICYmIDMgPT09IHAud2hpY2gpIHJldHVybjtcbiAgICBpZiAoXCJidXR0b25cIiBpbiBwICYmIHAuYnV0dG9uID4gMCkgcmV0dXJuO1xuICAgIGlmIChuLmlzVG91Y2hlZCAmJiBuLmlzTW92ZWQpIHJldHVybjtcbiAgICB2YXIgbSA9ICEhby5ub1N3aXBpbmdDbGFzcyAmJiBcIlwiICE9PSBvLm5vU3dpcGluZ0NsYXNzLFxuICAgICAgaCA9IGUuY29tcG9zZWRQYXRoID8gZS5jb21wb3NlZFBhdGgoKSA6IGUucGF0aDtcbiAgICBtICYmIHAudGFyZ2V0ICYmIHAudGFyZ2V0LnNoYWRvd1Jvb3QgJiYgaCAmJiAodSA9IGhbMF0pO1xuICAgIHZhciBmID0gby5ub1N3aXBpbmdTZWxlY3RvciA/IG8ubm9Td2lwaW5nU2VsZWN0b3IgOiBcIi5cIi5jb25jYXQoby5ub1N3aXBpbmdDbGFzcyksXG4gICAgICBnID0gISghcC50YXJnZXQgfHwgIXAudGFyZ2V0LnNoYWRvd1Jvb3QpO1xuICAgIGlmIChvLm5vU3dpcGluZyAmJiAoZyA/IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICByZXR1cm4gdm9pZCAwID09PSB0ICYmICh0ID0gdGhpcyksIGZ1bmN0aW9uIHQocykge1xuICAgICAgICBpZiAoIXMgfHwgcyA9PT0gYSgpIHx8IHMgPT09IHIoKSkgcmV0dXJuIG51bGw7XG4gICAgICAgIHMuYXNzaWduZWRTbG90ICYmIChzID0gcy5hc3NpZ25lZFNsb3QpO1xuICAgICAgICB2YXIgaSA9IHMuY2xvc2VzdChlKTtcbiAgICAgICAgcmV0dXJuIGkgfHwgcy5nZXRSb290Tm9kZSA/IGkgfHwgdChzLmdldFJvb3ROb2RlKCkuaG9zdCkgOiBudWxsO1xuICAgICAgfSh0KTtcbiAgICB9KGYsIHUpIDogdS5jbG9zZXN0KGYpKSkgcmV0dXJuIHZvaWQgKHQuYWxsb3dDbGljayA9ICEwKTtcbiAgICBpZiAoby5zd2lwZUhhbmRsZXIgJiYgIXUuY2xvc2VzdChvLnN3aXBlSGFuZGxlcikpIHJldHVybjtcbiAgICBkLmN1cnJlbnRYID0gcC5wYWdlWCwgZC5jdXJyZW50WSA9IHAucGFnZVk7XG4gICAgdmFyIHYgPSBkLmN1cnJlbnRYLFxuICAgICAgdyA9IGQuY3VycmVudFksXG4gICAgICBiID0gby5lZGdlU3dpcGVEZXRlY3Rpb24gfHwgby5pT1NFZGdlU3dpcGVEZXRlY3Rpb24sXG4gICAgICB5ID0gby5lZGdlU3dpcGVUaHJlc2hvbGQgfHwgby5pT1NFZGdlU3dpcGVUaHJlc2hvbGQ7XG4gICAgaWYgKGIgJiYgKHYgPD0geSB8fCB2ID49IGkuaW5uZXJXaWR0aCAtIHkpKSB7XG4gICAgICBpZiAoXCJwcmV2ZW50XCIgIT09IGIpIHJldHVybjtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgT2JqZWN0LmFzc2lnbihuLCB7XG4gICAgICBpc1RvdWNoZWQ6ICEwLFxuICAgICAgaXNNb3ZlZDogITEsXG4gICAgICBhbGxvd1RvdWNoQ2FsbGJhY2tzOiAhMCxcbiAgICAgIGlzU2Nyb2xsaW5nOiB2b2lkIDAsXG4gICAgICBzdGFydE1vdmluZzogdm9pZCAwXG4gICAgfSksIGQuc3RhcnRYID0gdiwgZC5zdGFydFkgPSB3LCBuLnRvdWNoU3RhcnRUaW1lID0gbCgpLCB0LmFsbG93Q2xpY2sgPSAhMCwgdC51cGRhdGVTaXplKCksIHQuc3dpcGVEaXJlY3Rpb24gPSB2b2lkIDAsIG8udGhyZXNob2xkID4gMCAmJiAobi5hbGxvd1RocmVzaG9sZE1vdmUgPSAhMSk7XG4gICAgdmFyIEUgPSAhMDtcbiAgICB1Lm1hdGNoZXMobi5mb2N1c2FibGVFbGVtZW50cykgJiYgKEUgPSAhMSwgXCJTRUxFQ1RcIiA9PT0gdS5ub2RlTmFtZSAmJiAobi5pc1RvdWNoZWQgPSAhMSkpLCBzLmFjdGl2ZUVsZW1lbnQgJiYgcy5hY3RpdmVFbGVtZW50Lm1hdGNoZXMobi5mb2N1c2FibGVFbGVtZW50cykgJiYgcy5hY3RpdmVFbGVtZW50ICE9PSB1ICYmIHMuYWN0aXZlRWxlbWVudC5ibHVyKCk7XG4gICAgdmFyIHggPSBFICYmIHQuYWxsb3dUb3VjaE1vdmUgJiYgby50b3VjaFN0YXJ0UHJldmVudERlZmF1bHQ7XG4gICAgIW8udG91Y2hTdGFydEZvcmNlUHJldmVudERlZmF1bHQgJiYgIXggfHwgdS5pc0NvbnRlbnRFZGl0YWJsZSB8fCBwLnByZXZlbnREZWZhdWx0KCksIG8uZnJlZU1vZGUgJiYgby5mcmVlTW9kZS5lbmFibGVkICYmIHQuZnJlZU1vZGUgJiYgdC5hbmltYXRpbmcgJiYgIW8uY3NzTW9kZSAmJiB0LmZyZWVNb2RlLm9uVG91Y2hTdGFydCgpLCB0LmVtaXQoXCJ0b3VjaFN0YXJ0XCIsIHApO1xuICB9XG4gIGZ1bmN0aW9uIFkoZSkge1xuICAgIHZhciB0ID0gYSgpLFxuICAgICAgcyA9IHRoaXMsXG4gICAgICBpID0gcy50b3VjaEV2ZW50c0RhdGEsXG4gICAgICByID0gcy5wYXJhbXMsXG4gICAgICBuID0gcy50b3VjaGVzLFxuICAgICAgbyA9IHMucnRsVHJhbnNsYXRlLFxuICAgICAgZCA9IHMuZW5hYmxlZDtcbiAgICBpZiAoIWQpIHJldHVybjtcbiAgICBpZiAoIXIuc2ltdWxhdGVUb3VjaCAmJiBcIm1vdXNlXCIgPT09IGUucG9pbnRlclR5cGUpIHJldHVybjtcbiAgICB2YXIgYyA9IGU7XG4gICAgaWYgKGMub3JpZ2luYWxFdmVudCAmJiAoYyA9IGMub3JpZ2luYWxFdmVudCksICFpLmlzVG91Y2hlZCkgcmV0dXJuIHZvaWQgKGkuc3RhcnRNb3ZpbmcgJiYgaS5pc1Njcm9sbGluZyAmJiBzLmVtaXQoXCJ0b3VjaE1vdmVPcHBvc2l0ZVwiLCBjKSk7XG4gICAgdmFyIHAgPSBpLmV2Q2FjaGUuZmluZEluZGV4KGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gZS5wb2ludGVySWQgPT09IGMucG9pbnRlcklkO1xuICAgIH0pO1xuICAgIHAgPj0gMCAmJiAoaS5ldkNhY2hlW3BdID0gYyk7XG4gICAgdmFyIHUgPSBpLmV2Q2FjaGUubGVuZ3RoID4gMSA/IGkuZXZDYWNoZVswXSA6IGMsXG4gICAgICBtID0gdS5wYWdlWCxcbiAgICAgIGggPSB1LnBhZ2VZO1xuICAgIGlmIChjLnByZXZlbnRlZEJ5TmVzdGVkU3dpcGVyKSByZXR1cm4gbi5zdGFydFggPSBtLCB2b2lkIChuLnN0YXJ0WSA9IGgpO1xuICAgIGlmICghcy5hbGxvd1RvdWNoTW92ZSkgcmV0dXJuIGMudGFyZ2V0Lm1hdGNoZXMoaS5mb2N1c2FibGVFbGVtZW50cykgfHwgKHMuYWxsb3dDbGljayA9ICExKSwgdm9pZCAoaS5pc1RvdWNoZWQgJiYgKE9iamVjdC5hc3NpZ24obiwge1xuICAgICAgc3RhcnRYOiBtLFxuICAgICAgc3RhcnRZOiBoLFxuICAgICAgcHJldlg6IHMudG91Y2hlcy5jdXJyZW50WCxcbiAgICAgIHByZXZZOiBzLnRvdWNoZXMuY3VycmVudFksXG4gICAgICBjdXJyZW50WDogbSxcbiAgICAgIGN1cnJlbnRZOiBoXG4gICAgfSksIGkudG91Y2hTdGFydFRpbWUgPSBsKCkpKTtcbiAgICBpZiAoci50b3VjaFJlbGVhc2VPbkVkZ2VzICYmICFyLmxvb3ApIGlmIChzLmlzVmVydGljYWwoKSkge1xuICAgICAgaWYgKGggPCBuLnN0YXJ0WSAmJiBzLnRyYW5zbGF0ZSA8PSBzLm1heFRyYW5zbGF0ZSgpIHx8IGggPiBuLnN0YXJ0WSAmJiBzLnRyYW5zbGF0ZSA+PSBzLm1pblRyYW5zbGF0ZSgpKSByZXR1cm4gaS5pc1RvdWNoZWQgPSAhMSwgdm9pZCAoaS5pc01vdmVkID0gITEpO1xuICAgIH0gZWxzZSBpZiAobSA8IG4uc3RhcnRYICYmIHMudHJhbnNsYXRlIDw9IHMubWF4VHJhbnNsYXRlKCkgfHwgbSA+IG4uc3RhcnRYICYmIHMudHJhbnNsYXRlID49IHMubWluVHJhbnNsYXRlKCkpIHJldHVybjtcbiAgICBpZiAodC5hY3RpdmVFbGVtZW50ICYmIGMudGFyZ2V0ID09PSB0LmFjdGl2ZUVsZW1lbnQgJiYgYy50YXJnZXQubWF0Y2hlcyhpLmZvY3VzYWJsZUVsZW1lbnRzKSkgcmV0dXJuIGkuaXNNb3ZlZCA9ICEwLCB2b2lkIChzLmFsbG93Q2xpY2sgPSAhMSk7XG4gICAgaWYgKGkuYWxsb3dUb3VjaENhbGxiYWNrcyAmJiBzLmVtaXQoXCJ0b3VjaE1vdmVcIiwgYyksIGMudGFyZ2V0VG91Y2hlcyAmJiBjLnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkgcmV0dXJuO1xuICAgIG4uY3VycmVudFggPSBtLCBuLmN1cnJlbnRZID0gaDtcbiAgICB2YXIgZiA9IG4uY3VycmVudFggLSBuLnN0YXJ0WCxcbiAgICAgIGcgPSBuLmN1cnJlbnRZIC0gbi5zdGFydFk7XG4gICAgaWYgKHMucGFyYW1zLnRocmVzaG9sZCAmJiBNYXRoLnNxcnQoTWF0aC5wb3coZiwgMikgKyBNYXRoLnBvdyhnLCAyKSkgPCBzLnBhcmFtcy50aHJlc2hvbGQpIHJldHVybjtcbiAgICBpZiAodm9pZCAwID09PSBpLmlzU2Nyb2xsaW5nKSB7XG4gICAgICB2YXIgX2UyNDtcbiAgICAgIHMuaXNIb3Jpem9udGFsKCkgJiYgbi5jdXJyZW50WSA9PT0gbi5zdGFydFkgfHwgcy5pc1ZlcnRpY2FsKCkgJiYgbi5jdXJyZW50WCA9PT0gbi5zdGFydFggPyBpLmlzU2Nyb2xsaW5nID0gITEgOiBmICogZiArIGcgKiBnID49IDI1ICYmIChfZTI0ID0gMTgwICogTWF0aC5hdGFuMihNYXRoLmFicyhnKSwgTWF0aC5hYnMoZikpIC8gTWF0aC5QSSwgaS5pc1Njcm9sbGluZyA9IHMuaXNIb3Jpem9udGFsKCkgPyBfZTI0ID4gci50b3VjaEFuZ2xlIDogOTAgLSBfZTI0ID4gci50b3VjaEFuZ2xlKTtcbiAgICB9XG4gICAgaWYgKGkuaXNTY3JvbGxpbmcgJiYgcy5lbWl0KFwidG91Y2hNb3ZlT3Bwb3NpdGVcIiwgYyksIHZvaWQgMCA9PT0gaS5zdGFydE1vdmluZyAmJiAobi5jdXJyZW50WCA9PT0gbi5zdGFydFggJiYgbi5jdXJyZW50WSA9PT0gbi5zdGFydFkgfHwgKGkuc3RhcnRNb3ZpbmcgPSAhMCkpLCBpLmlzU2Nyb2xsaW5nIHx8IHMuem9vbSAmJiBzLnBhcmFtcy56b29tICYmIHMucGFyYW1zLnpvb20uZW5hYmxlZCAmJiBpLmV2Q2FjaGUubGVuZ3RoID4gMSkgcmV0dXJuIHZvaWQgKGkuaXNUb3VjaGVkID0gITEpO1xuICAgIGlmICghaS5zdGFydE1vdmluZykgcmV0dXJuO1xuICAgIHMuYWxsb3dDbGljayA9ICExLCAhci5jc3NNb2RlICYmIGMuY2FuY2VsYWJsZSAmJiBjLnByZXZlbnREZWZhdWx0KCksIHIudG91Y2hNb3ZlU3RvcFByb3BhZ2F0aW9uICYmICFyLm5lc3RlZCAmJiBjLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHZhciB2ID0gcy5pc0hvcml6b250YWwoKSA/IGYgOiBnLFxuICAgICAgdyA9IHMuaXNIb3Jpem9udGFsKCkgPyBuLmN1cnJlbnRYIC0gbi5wcmV2aW91c1ggOiBuLmN1cnJlbnRZIC0gbi5wcmV2aW91c1k7XG4gICAgci5vbmVXYXlNb3ZlbWVudCAmJiAodiA9IE1hdGguYWJzKHYpICogKG8gPyAxIDogLTEpLCB3ID0gTWF0aC5hYnModykgKiAobyA/IDEgOiAtMSkpLCBuLmRpZmYgPSB2LCB2ICo9IHIudG91Y2hSYXRpbywgbyAmJiAodiA9IC12LCB3ID0gLXcpO1xuICAgIHZhciBiID0gcy50b3VjaGVzRGlyZWN0aW9uO1xuICAgIHMuc3dpcGVEaXJlY3Rpb24gPSB2ID4gMCA/IFwicHJldlwiIDogXCJuZXh0XCIsIHMudG91Y2hlc0RpcmVjdGlvbiA9IHcgPiAwID8gXCJwcmV2XCIgOiBcIm5leHRcIjtcbiAgICB2YXIgeSA9IHMucGFyYW1zLmxvb3AgJiYgIXIuY3NzTW9kZTtcbiAgICBpZiAoIWkuaXNNb3ZlZCkge1xuICAgICAgaWYgKHkgJiYgcy5sb29wRml4KHtcbiAgICAgICAgZGlyZWN0aW9uOiBzLnN3aXBlRGlyZWN0aW9uXG4gICAgICB9KSwgaS5zdGFydFRyYW5zbGF0ZSA9IHMuZ2V0VHJhbnNsYXRlKCksIHMuc2V0VHJhbnNpdGlvbigwKSwgcy5hbmltYXRpbmcpIHtcbiAgICAgICAgdmFyIF9lMjUgPSBuZXcgd2luZG93LkN1c3RvbUV2ZW50KFwidHJhbnNpdGlvbmVuZFwiLCB7XG4gICAgICAgICAgYnViYmxlczogITAsXG4gICAgICAgICAgY2FuY2VsYWJsZTogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHMud3JhcHBlckVsLmRpc3BhdGNoRXZlbnQoX2UyNSk7XG4gICAgICB9XG4gICAgICBpLmFsbG93TW9tZW50dW1Cb3VuY2UgPSAhMSwgIXIuZ3JhYkN1cnNvciB8fCAhMCAhPT0gcy5hbGxvd1NsaWRlTmV4dCAmJiAhMCAhPT0gcy5hbGxvd1NsaWRlUHJldiB8fCBzLnNldEdyYWJDdXJzb3IoITApLCBzLmVtaXQoXCJzbGlkZXJGaXJzdE1vdmVcIiwgYyk7XG4gICAgfVxuICAgIHZhciBFO1xuICAgIGkuaXNNb3ZlZCAmJiBiICE9PSBzLnRvdWNoZXNEaXJlY3Rpb24gJiYgeSAmJiBNYXRoLmFicyh2KSA+PSAxICYmIChzLmxvb3BGaXgoe1xuICAgICAgZGlyZWN0aW9uOiBzLnN3aXBlRGlyZWN0aW9uLFxuICAgICAgc2V0VHJhbnNsYXRlOiAhMFxuICAgIH0pLCBFID0gITApLCBzLmVtaXQoXCJzbGlkZXJNb3ZlXCIsIGMpLCBpLmlzTW92ZWQgPSAhMCwgaS5jdXJyZW50VHJhbnNsYXRlID0gdiArIGkuc3RhcnRUcmFuc2xhdGU7XG4gICAgdmFyIHggPSAhMCxcbiAgICAgIFMgPSByLnJlc2lzdGFuY2VSYXRpbztcbiAgICBpZiAoci50b3VjaFJlbGVhc2VPbkVkZ2VzICYmIChTID0gMCksIHYgPiAwID8gKHkgJiYgIUUgJiYgaS5jdXJyZW50VHJhbnNsYXRlID4gKHIuY2VudGVyZWRTbGlkZXMgPyBzLm1pblRyYW5zbGF0ZSgpIC0gcy5zaXplIC8gMiA6IHMubWluVHJhbnNsYXRlKCkpICYmIHMubG9vcEZpeCh7XG4gICAgICBkaXJlY3Rpb246IFwicHJldlwiLFxuICAgICAgc2V0VHJhbnNsYXRlOiAhMCxcbiAgICAgIGFjdGl2ZVNsaWRlSW5kZXg6IDBcbiAgICB9KSwgaS5jdXJyZW50VHJhbnNsYXRlID4gcy5taW5UcmFuc2xhdGUoKSAmJiAoeCA9ICExLCByLnJlc2lzdGFuY2UgJiYgKGkuY3VycmVudFRyYW5zbGF0ZSA9IHMubWluVHJhbnNsYXRlKCkgLSAxICsgTWF0aC5wb3coLXMubWluVHJhbnNsYXRlKCkgKyBpLnN0YXJ0VHJhbnNsYXRlICsgdiwgUykpKSkgOiB2IDwgMCAmJiAoeSAmJiAhRSAmJiBpLmN1cnJlbnRUcmFuc2xhdGUgPCAoci5jZW50ZXJlZFNsaWRlcyA/IHMubWF4VHJhbnNsYXRlKCkgKyBzLnNpemUgLyAyIDogcy5tYXhUcmFuc2xhdGUoKSkgJiYgcy5sb29wRml4KHtcbiAgICAgIGRpcmVjdGlvbjogXCJuZXh0XCIsXG4gICAgICBzZXRUcmFuc2xhdGU6ICEwLFxuICAgICAgYWN0aXZlU2xpZGVJbmRleDogcy5zbGlkZXMubGVuZ3RoIC0gKFwiYXV0b1wiID09PSByLnNsaWRlc1BlclZpZXcgPyBzLnNsaWRlc1BlclZpZXdEeW5hbWljKCkgOiBNYXRoLmNlaWwocGFyc2VGbG9hdChyLnNsaWRlc1BlclZpZXcsIDEwKSkpXG4gICAgfSksIGkuY3VycmVudFRyYW5zbGF0ZSA8IHMubWF4VHJhbnNsYXRlKCkgJiYgKHggPSAhMSwgci5yZXNpc3RhbmNlICYmIChpLmN1cnJlbnRUcmFuc2xhdGUgPSBzLm1heFRyYW5zbGF0ZSgpICsgMSAtIE1hdGgucG93KHMubWF4VHJhbnNsYXRlKCkgLSBpLnN0YXJ0VHJhbnNsYXRlIC0gdiwgUykpKSksIHggJiYgKGMucHJldmVudGVkQnlOZXN0ZWRTd2lwZXIgPSAhMCksICFzLmFsbG93U2xpZGVOZXh0ICYmIFwibmV4dFwiID09PSBzLnN3aXBlRGlyZWN0aW9uICYmIGkuY3VycmVudFRyYW5zbGF0ZSA8IGkuc3RhcnRUcmFuc2xhdGUgJiYgKGkuY3VycmVudFRyYW5zbGF0ZSA9IGkuc3RhcnRUcmFuc2xhdGUpLCAhcy5hbGxvd1NsaWRlUHJldiAmJiBcInByZXZcIiA9PT0gcy5zd2lwZURpcmVjdGlvbiAmJiBpLmN1cnJlbnRUcmFuc2xhdGUgPiBpLnN0YXJ0VHJhbnNsYXRlICYmIChpLmN1cnJlbnRUcmFuc2xhdGUgPSBpLnN0YXJ0VHJhbnNsYXRlKSwgcy5hbGxvd1NsaWRlUHJldiB8fCBzLmFsbG93U2xpZGVOZXh0IHx8IChpLmN1cnJlbnRUcmFuc2xhdGUgPSBpLnN0YXJ0VHJhbnNsYXRlKSwgci50aHJlc2hvbGQgPiAwKSB7XG4gICAgICBpZiAoIShNYXRoLmFicyh2KSA+IHIudGhyZXNob2xkIHx8IGkuYWxsb3dUaHJlc2hvbGRNb3ZlKSkgcmV0dXJuIHZvaWQgKGkuY3VycmVudFRyYW5zbGF0ZSA9IGkuc3RhcnRUcmFuc2xhdGUpO1xuICAgICAgaWYgKCFpLmFsbG93VGhyZXNob2xkTW92ZSkgcmV0dXJuIGkuYWxsb3dUaHJlc2hvbGRNb3ZlID0gITAsIG4uc3RhcnRYID0gbi5jdXJyZW50WCwgbi5zdGFydFkgPSBuLmN1cnJlbnRZLCBpLmN1cnJlbnRUcmFuc2xhdGUgPSBpLnN0YXJ0VHJhbnNsYXRlLCB2b2lkIChuLmRpZmYgPSBzLmlzSG9yaXpvbnRhbCgpID8gbi5jdXJyZW50WCAtIG4uc3RhcnRYIDogbi5jdXJyZW50WSAtIG4uc3RhcnRZKTtcbiAgICB9XG4gICAgci5mb2xsb3dGaW5nZXIgJiYgIXIuY3NzTW9kZSAmJiAoKHIuZnJlZU1vZGUgJiYgci5mcmVlTW9kZS5lbmFibGVkICYmIHMuZnJlZU1vZGUgfHwgci53YXRjaFNsaWRlc1Byb2dyZXNzKSAmJiAocy51cGRhdGVBY3RpdmVJbmRleCgpLCBzLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKSksIHIuZnJlZU1vZGUgJiYgci5mcmVlTW9kZS5lbmFibGVkICYmIHMuZnJlZU1vZGUgJiYgcy5mcmVlTW9kZS5vblRvdWNoTW92ZSgpLCBzLnVwZGF0ZVByb2dyZXNzKGkuY3VycmVudFRyYW5zbGF0ZSksIHMuc2V0VHJhbnNsYXRlKGkuY3VycmVudFRyYW5zbGF0ZSkpO1xuICB9XG4gIGZ1bmN0aW9uIEIoZSkge1xuICAgIHZhciB0ID0gdGhpcyxcbiAgICAgIHMgPSB0LnRvdWNoRXZlbnRzRGF0YSxcbiAgICAgIGEgPSBzLmV2Q2FjaGUuZmluZEluZGV4KGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiB0LnBvaW50ZXJJZCA9PT0gZS5wb2ludGVySWQ7XG4gICAgICB9KTtcbiAgICBpZiAoYSA+PSAwICYmIHMuZXZDYWNoZS5zcGxpY2UoYSwgMSksIFtcInBvaW50ZXJjYW5jZWxcIiwgXCJwb2ludGVyb3V0XCIsIFwicG9pbnRlcmxlYXZlXCJdLmluY2x1ZGVzKGUudHlwZSkpIHtcbiAgICAgIGlmICghKFwicG9pbnRlcmNhbmNlbFwiID09PSBlLnR5cGUgJiYgKHQuYnJvd3Nlci5pc1NhZmFyaSB8fCB0LmJyb3dzZXIuaXNXZWJWaWV3KSkpIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGkgPSB0LnBhcmFtcyxcbiAgICAgIHIgPSB0LnRvdWNoZXMsXG4gICAgICBvID0gdC5ydGxUcmFuc2xhdGUsXG4gICAgICBkID0gdC5zbGlkZXNHcmlkLFxuICAgICAgYyA9IHQuZW5hYmxlZDtcbiAgICBpZiAoIWMpIHJldHVybjtcbiAgICBpZiAoIWkuc2ltdWxhdGVUb3VjaCAmJiBcIm1vdXNlXCIgPT09IGUucG9pbnRlclR5cGUpIHJldHVybjtcbiAgICB2YXIgcCA9IGU7XG4gICAgaWYgKHAub3JpZ2luYWxFdmVudCAmJiAocCA9IHAub3JpZ2luYWxFdmVudCksIHMuYWxsb3dUb3VjaENhbGxiYWNrcyAmJiB0LmVtaXQoXCJ0b3VjaEVuZFwiLCBwKSwgcy5hbGxvd1RvdWNoQ2FsbGJhY2tzID0gITEsICFzLmlzVG91Y2hlZCkgcmV0dXJuIHMuaXNNb3ZlZCAmJiBpLmdyYWJDdXJzb3IgJiYgdC5zZXRHcmFiQ3Vyc29yKCExKSwgcy5pc01vdmVkID0gITEsIHZvaWQgKHMuc3RhcnRNb3ZpbmcgPSAhMSk7XG4gICAgaS5ncmFiQ3Vyc29yICYmIHMuaXNNb3ZlZCAmJiBzLmlzVG91Y2hlZCAmJiAoITAgPT09IHQuYWxsb3dTbGlkZU5leHQgfHwgITAgPT09IHQuYWxsb3dTbGlkZVByZXYpICYmIHQuc2V0R3JhYkN1cnNvcighMSk7XG4gICAgdmFyIHUgPSBsKCksXG4gICAgICBtID0gdSAtIHMudG91Y2hTdGFydFRpbWU7XG4gICAgaWYgKHQuYWxsb3dDbGljaykge1xuICAgICAgdmFyIF9lMjYgPSBwLnBhdGggfHwgcC5jb21wb3NlZFBhdGggJiYgcC5jb21wb3NlZFBhdGgoKTtcbiAgICAgIHQudXBkYXRlQ2xpY2tlZFNsaWRlKF9lMjYgJiYgX2UyNlswXSB8fCBwLnRhcmdldCksIHQuZW1pdChcInRhcCBjbGlja1wiLCBwKSwgbSA8IDMwMCAmJiB1IC0gcy5sYXN0Q2xpY2tUaW1lIDwgMzAwICYmIHQuZW1pdChcImRvdWJsZVRhcCBkb3VibGVDbGlja1wiLCBwKTtcbiAgICB9XG4gICAgaWYgKHMubGFzdENsaWNrVGltZSA9IGwoKSwgbihmdW5jdGlvbiAoKSB7XG4gICAgICB0LmRlc3Ryb3llZCB8fCAodC5hbGxvd0NsaWNrID0gITApO1xuICAgIH0pLCAhcy5pc1RvdWNoZWQgfHwgIXMuaXNNb3ZlZCB8fCAhdC5zd2lwZURpcmVjdGlvbiB8fCAwID09PSByLmRpZmYgfHwgcy5jdXJyZW50VHJhbnNsYXRlID09PSBzLnN0YXJ0VHJhbnNsYXRlKSByZXR1cm4gcy5pc1RvdWNoZWQgPSAhMSwgcy5pc01vdmVkID0gITEsIHZvaWQgKHMuc3RhcnRNb3ZpbmcgPSAhMSk7XG4gICAgdmFyIGg7XG4gICAgaWYgKHMuaXNUb3VjaGVkID0gITEsIHMuaXNNb3ZlZCA9ICExLCBzLnN0YXJ0TW92aW5nID0gITEsIGggPSBpLmZvbGxvd0ZpbmdlciA/IG8gPyB0LnRyYW5zbGF0ZSA6IC10LnRyYW5zbGF0ZSA6IC1zLmN1cnJlbnRUcmFuc2xhdGUsIGkuY3NzTW9kZSkgcmV0dXJuO1xuICAgIGlmIChpLmZyZWVNb2RlICYmIGkuZnJlZU1vZGUuZW5hYmxlZCkgcmV0dXJuIHZvaWQgdC5mcmVlTW9kZS5vblRvdWNoRW5kKHtcbiAgICAgIGN1cnJlbnRQb3M6IGhcbiAgICB9KTtcbiAgICB2YXIgZiA9IDAsXG4gICAgICBnID0gdC5zbGlkZXNTaXplc0dyaWRbMF07XG4gICAgZm9yICh2YXIgX2UyNyA9IDA7IF9lMjcgPCBkLmxlbmd0aDsgX2UyNyArPSBfZTI3IDwgaS5zbGlkZXNQZXJHcm91cFNraXAgPyAxIDogaS5zbGlkZXNQZXJHcm91cCkge1xuICAgICAgdmFyIF90MTggPSBfZTI3IDwgaS5zbGlkZXNQZXJHcm91cFNraXAgLSAxID8gMSA6IGkuc2xpZGVzUGVyR3JvdXA7XG4gICAgICB2b2lkIDAgIT09IGRbX2UyNyArIF90MThdID8gaCA+PSBkW19lMjddICYmIGggPCBkW19lMjcgKyBfdDE4XSAmJiAoZiA9IF9lMjcsIGcgPSBkW19lMjcgKyBfdDE4XSAtIGRbX2UyN10pIDogaCA+PSBkW19lMjddICYmIChmID0gX2UyNywgZyA9IGRbZC5sZW5ndGggLSAxXSAtIGRbZC5sZW5ndGggLSAyXSk7XG4gICAgfVxuICAgIHZhciB2ID0gbnVsbCxcbiAgICAgIHcgPSBudWxsO1xuICAgIGkucmV3aW5kICYmICh0LmlzQmVnaW5uaW5nID8gdyA9IGkudmlydHVhbCAmJiBpLnZpcnR1YWwuZW5hYmxlZCAmJiB0LnZpcnR1YWwgPyB0LnZpcnR1YWwuc2xpZGVzLmxlbmd0aCAtIDEgOiB0LnNsaWRlcy5sZW5ndGggLSAxIDogdC5pc0VuZCAmJiAodiA9IDApKTtcbiAgICB2YXIgYiA9IChoIC0gZFtmXSkgLyBnLFxuICAgICAgeSA9IGYgPCBpLnNsaWRlc1Blckdyb3VwU2tpcCAtIDEgPyAxIDogaS5zbGlkZXNQZXJHcm91cDtcbiAgICBpZiAobSA+IGkubG9uZ1N3aXBlc01zKSB7XG4gICAgICBpZiAoIWkubG9uZ1N3aXBlcykgcmV0dXJuIHZvaWQgdC5zbGlkZVRvKHQuYWN0aXZlSW5kZXgpO1xuICAgICAgXCJuZXh0XCIgPT09IHQuc3dpcGVEaXJlY3Rpb24gJiYgKGIgPj0gaS5sb25nU3dpcGVzUmF0aW8gPyB0LnNsaWRlVG8oaS5yZXdpbmQgJiYgdC5pc0VuZCA/IHYgOiBmICsgeSkgOiB0LnNsaWRlVG8oZikpLCBcInByZXZcIiA9PT0gdC5zd2lwZURpcmVjdGlvbiAmJiAoYiA+IDEgLSBpLmxvbmdTd2lwZXNSYXRpbyA/IHQuc2xpZGVUbyhmICsgeSkgOiBudWxsICE9PSB3ICYmIGIgPCAwICYmIE1hdGguYWJzKGIpID4gaS5sb25nU3dpcGVzUmF0aW8gPyB0LnNsaWRlVG8odykgOiB0LnNsaWRlVG8oZikpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIWkuc2hvcnRTd2lwZXMpIHJldHVybiB2b2lkIHQuc2xpZGVUbyh0LmFjdGl2ZUluZGV4KTtcbiAgICAgIHQubmF2aWdhdGlvbiAmJiAocC50YXJnZXQgPT09IHQubmF2aWdhdGlvbi5uZXh0RWwgfHwgcC50YXJnZXQgPT09IHQubmF2aWdhdGlvbi5wcmV2RWwpID8gcC50YXJnZXQgPT09IHQubmF2aWdhdGlvbi5uZXh0RWwgPyB0LnNsaWRlVG8oZiArIHkpIDogdC5zbGlkZVRvKGYpIDogKFwibmV4dFwiID09PSB0LnN3aXBlRGlyZWN0aW9uICYmIHQuc2xpZGVUbyhudWxsICE9PSB2ID8gdiA6IGYgKyB5KSwgXCJwcmV2XCIgPT09IHQuc3dpcGVEaXJlY3Rpb24gJiYgdC5zbGlkZVRvKG51bGwgIT09IHcgPyB3IDogZikpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBOKCkge1xuICAgIHZhciBlID0gdGhpcyxcbiAgICAgIHQgPSBlLnBhcmFtcyxcbiAgICAgIHMgPSBlLmVsO1xuICAgIGlmIChzICYmIDAgPT09IHMub2Zmc2V0V2lkdGgpIHJldHVybjtcbiAgICB0LmJyZWFrcG9pbnRzICYmIGUuc2V0QnJlYWtwb2ludCgpO1xuICAgIHZhciBhID0gZS5hbGxvd1NsaWRlTmV4dCxcbiAgICAgIGkgPSBlLmFsbG93U2xpZGVQcmV2LFxuICAgICAgciA9IGUuc25hcEdyaWQsXG4gICAgICBuID0gZS52aXJ0dWFsICYmIGUucGFyYW1zLnZpcnR1YWwuZW5hYmxlZDtcbiAgICBlLmFsbG93U2xpZGVOZXh0ID0gITAsIGUuYWxsb3dTbGlkZVByZXYgPSAhMCwgZS51cGRhdGVTaXplKCksIGUudXBkYXRlU2xpZGVzKCksIGUudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgIHZhciBsID0gbiAmJiB0Lmxvb3A7XG4gICAgIShcImF1dG9cIiA9PT0gdC5zbGlkZXNQZXJWaWV3IHx8IHQuc2xpZGVzUGVyVmlldyA+IDEpIHx8ICFlLmlzRW5kIHx8IGUuaXNCZWdpbm5pbmcgfHwgZS5wYXJhbXMuY2VudGVyZWRTbGlkZXMgfHwgbCA/IGUucGFyYW1zLmxvb3AgJiYgIW4gPyBlLnNsaWRlVG9Mb29wKGUucmVhbEluZGV4LCAwLCAhMSwgITApIDogZS5zbGlkZVRvKGUuYWN0aXZlSW5kZXgsIDAsICExLCAhMCkgOiBlLnNsaWRlVG8oZS5zbGlkZXMubGVuZ3RoIC0gMSwgMCwgITEsICEwKSwgZS5hdXRvcGxheSAmJiBlLmF1dG9wbGF5LnJ1bm5pbmcgJiYgZS5hdXRvcGxheS5wYXVzZWQgJiYgKGNsZWFyVGltZW91dChlLmF1dG9wbGF5LnJlc2l6ZVRpbWVvdXQpLCBlLmF1dG9wbGF5LnJlc2l6ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGUuYXV0b3BsYXkgJiYgZS5hdXRvcGxheS5ydW5uaW5nICYmIGUuYXV0b3BsYXkucGF1c2VkICYmIGUuYXV0b3BsYXkucmVzdW1lKCk7XG4gICAgfSwgNTAwKSksIGUuYWxsb3dTbGlkZVByZXYgPSBpLCBlLmFsbG93U2xpZGVOZXh0ID0gYSwgZS5wYXJhbXMud2F0Y2hPdmVyZmxvdyAmJiByICE9PSBlLnNuYXBHcmlkICYmIGUuY2hlY2tPdmVyZmxvdygpO1xuICB9XG4gIGZ1bmN0aW9uIHEoZSkge1xuICAgIHZhciB0ID0gdGhpcztcbiAgICB0LmVuYWJsZWQgJiYgKHQuYWxsb3dDbGljayB8fCAodC5wYXJhbXMucHJldmVudENsaWNrcyAmJiBlLnByZXZlbnREZWZhdWx0KCksIHQucGFyYW1zLnByZXZlbnRDbGlja3NQcm9wYWdhdGlvbiAmJiB0LmFuaW1hdGluZyAmJiAoZS5zdG9wUHJvcGFnYXRpb24oKSwgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSkpKTtcbiAgfVxuICBmdW5jdGlvbiBSKCkge1xuICAgIHZhciBlID0gdGhpcyxcbiAgICAgIHQgPSBlLndyYXBwZXJFbCxcbiAgICAgIHMgPSBlLnJ0bFRyYW5zbGF0ZSxcbiAgICAgIGEgPSBlLmVuYWJsZWQ7XG4gICAgaWYgKCFhKSByZXR1cm47XG4gICAgdmFyIGk7XG4gICAgZS5wcmV2aW91c1RyYW5zbGF0ZSA9IGUudHJhbnNsYXRlLCBlLmlzSG9yaXpvbnRhbCgpID8gZS50cmFuc2xhdGUgPSAtdC5zY3JvbGxMZWZ0IDogZS50cmFuc2xhdGUgPSAtdC5zY3JvbGxUb3AsIDAgPT09IGUudHJhbnNsYXRlICYmIChlLnRyYW5zbGF0ZSA9IDApLCBlLnVwZGF0ZUFjdGl2ZUluZGV4KCksIGUudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgIHZhciByID0gZS5tYXhUcmFuc2xhdGUoKSAtIGUubWluVHJhbnNsYXRlKCk7XG4gICAgaSA9IDAgPT09IHIgPyAwIDogKGUudHJhbnNsYXRlIC0gZS5taW5UcmFuc2xhdGUoKSkgLyByLCBpICE9PSBlLnByb2dyZXNzICYmIGUudXBkYXRlUHJvZ3Jlc3MocyA/IC1lLnRyYW5zbGF0ZSA6IGUudHJhbnNsYXRlKSwgZS5lbWl0KFwic2V0VHJhbnNsYXRlXCIsIGUudHJhbnNsYXRlLCAhMSk7XG4gIH1cbiAgZnVuY3Rpb24gRihlKSB7XG4gICAgdmFyIHQgPSB0aGlzO1xuICAgIEEodCwgZS50YXJnZXQpLCB0LnBhcmFtcy5jc3NNb2RlIHx8IFwiYXV0b1wiICE9PSB0LnBhcmFtcy5zbGlkZXNQZXJWaWV3ICYmICF0LnBhcmFtcy5hdXRvSGVpZ2h0IHx8IHQudXBkYXRlKCk7XG4gIH1cbiAgdmFyIF8gPSAhMTtcbiAgZnVuY3Rpb24gVigpIHt9XG4gIHZhciBqID0gZnVuY3Rpb24gaihlLCB0KSB7XG4gICAgdmFyIHMgPSBhKCksXG4gICAgICBpID0gZS5wYXJhbXMsXG4gICAgICByID0gZS5lbCxcbiAgICAgIG4gPSBlLndyYXBwZXJFbCxcbiAgICAgIGwgPSBlLmRldmljZSxcbiAgICAgIG8gPSAhIWkubmVzdGVkLFxuICAgICAgZCA9IFwib25cIiA9PT0gdCA/IFwiYWRkRXZlbnRMaXN0ZW5lclwiIDogXCJyZW1vdmVFdmVudExpc3RlbmVyXCIsXG4gICAgICBjID0gdDtcbiAgICByW2RdKFwicG9pbnRlcmRvd25cIiwgZS5vblRvdWNoU3RhcnQsIHtcbiAgICAgIHBhc3NpdmU6ICExXG4gICAgfSksIHNbZF0oXCJwb2ludGVybW92ZVwiLCBlLm9uVG91Y2hNb3ZlLCB7XG4gICAgICBwYXNzaXZlOiAhMSxcbiAgICAgIGNhcHR1cmU6IG9cbiAgICB9KSwgc1tkXShcInBvaW50ZXJ1cFwiLCBlLm9uVG91Y2hFbmQsIHtcbiAgICAgIHBhc3NpdmU6ICEwXG4gICAgfSksIHNbZF0oXCJwb2ludGVyY2FuY2VsXCIsIGUub25Ub3VjaEVuZCwge1xuICAgICAgcGFzc2l2ZTogITBcbiAgICB9KSwgc1tkXShcInBvaW50ZXJvdXRcIiwgZS5vblRvdWNoRW5kLCB7XG4gICAgICBwYXNzaXZlOiAhMFxuICAgIH0pLCBzW2RdKFwicG9pbnRlcmxlYXZlXCIsIGUub25Ub3VjaEVuZCwge1xuICAgICAgcGFzc2l2ZTogITBcbiAgICB9KSwgKGkucHJldmVudENsaWNrcyB8fCBpLnByZXZlbnRDbGlja3NQcm9wYWdhdGlvbikgJiYgcltkXShcImNsaWNrXCIsIGUub25DbGljaywgITApLCBpLmNzc01vZGUgJiYgbltkXShcInNjcm9sbFwiLCBlLm9uU2Nyb2xsKSwgaS51cGRhdGVPbldpbmRvd1Jlc2l6ZSA/IGVbY10obC5pb3MgfHwgbC5hbmRyb2lkID8gXCJyZXNpemUgb3JpZW50YXRpb25jaGFuZ2Ugb2JzZXJ2ZXJVcGRhdGVcIiA6IFwicmVzaXplIG9ic2VydmVyVXBkYXRlXCIsIE4sICEwKSA6IGVbY10oXCJvYnNlcnZlclVwZGF0ZVwiLCBOLCAhMCksIHJbZF0oXCJsb2FkXCIsIGUub25Mb2FkLCB7XG4gICAgICBjYXB0dXJlOiAhMFxuICAgIH0pO1xuICB9O1xuICB2YXIgVyA9IGZ1bmN0aW9uIFcoZSwgdCkge1xuICAgIHJldHVybiBlLmdyaWQgJiYgdC5ncmlkICYmIHQuZ3JpZC5yb3dzID4gMTtcbiAgfTtcbiAgdmFyIFUgPSB7XG4gICAgaW5pdDogITAsXG4gICAgZGlyZWN0aW9uOiBcImhvcml6b250YWxcIixcbiAgICBvbmVXYXlNb3ZlbWVudDogITEsXG4gICAgdG91Y2hFdmVudHNUYXJnZXQ6IFwid3JhcHBlclwiLFxuICAgIGluaXRpYWxTbGlkZTogMCxcbiAgICBzcGVlZDogMzAwLFxuICAgIGNzc01vZGU6ICExLFxuICAgIHVwZGF0ZU9uV2luZG93UmVzaXplOiAhMCxcbiAgICByZXNpemVPYnNlcnZlcjogITAsXG4gICAgbmVzdGVkOiAhMSxcbiAgICBjcmVhdGVFbGVtZW50czogITEsXG4gICAgZW5hYmxlZDogITAsXG4gICAgZm9jdXNhYmxlRWxlbWVudHM6IFwiaW5wdXQsIHNlbGVjdCwgb3B0aW9uLCB0ZXh0YXJlYSwgYnV0dG9uLCB2aWRlbywgbGFiZWxcIixcbiAgICB3aWR0aDogbnVsbCxcbiAgICBoZWlnaHQ6IG51bGwsXG4gICAgcHJldmVudEludGVyYWN0aW9uT25UcmFuc2l0aW9uOiAhMSxcbiAgICB1c2VyQWdlbnQ6IG51bGwsXG4gICAgdXJsOiBudWxsLFxuICAgIGVkZ2VTd2lwZURldGVjdGlvbjogITEsXG4gICAgZWRnZVN3aXBlVGhyZXNob2xkOiAyMCxcbiAgICBhdXRvSGVpZ2h0OiAhMSxcbiAgICBzZXRXcmFwcGVyU2l6ZTogITEsXG4gICAgdmlydHVhbFRyYW5zbGF0ZTogITEsXG4gICAgZWZmZWN0OiBcInNsaWRlXCIsXG4gICAgYnJlYWtwb2ludHM6IHZvaWQgMCxcbiAgICBicmVha3BvaW50c0Jhc2U6IFwid2luZG93XCIsXG4gICAgc3BhY2VCZXR3ZWVuOiAwLFxuICAgIHNsaWRlc1BlclZpZXc6IDEsXG4gICAgc2xpZGVzUGVyR3JvdXA6IDEsXG4gICAgc2xpZGVzUGVyR3JvdXBTa2lwOiAwLFxuICAgIHNsaWRlc1Blckdyb3VwQXV0bzogITEsXG4gICAgY2VudGVyZWRTbGlkZXM6ICExLFxuICAgIGNlbnRlcmVkU2xpZGVzQm91bmRzOiAhMSxcbiAgICBzbGlkZXNPZmZzZXRCZWZvcmU6IDAsXG4gICAgc2xpZGVzT2Zmc2V0QWZ0ZXI6IDAsXG4gICAgbm9ybWFsaXplU2xpZGVJbmRleDogITAsXG4gICAgY2VudGVySW5zdWZmaWNpZW50U2xpZGVzOiAhMSxcbiAgICB3YXRjaE92ZXJmbG93OiAhMCxcbiAgICByb3VuZExlbmd0aHM6ICExLFxuICAgIHRvdWNoUmF0aW86IDEsXG4gICAgdG91Y2hBbmdsZTogNDUsXG4gICAgc2ltdWxhdGVUb3VjaDogITAsXG4gICAgc2hvcnRTd2lwZXM6ICEwLFxuICAgIGxvbmdTd2lwZXM6ICEwLFxuICAgIGxvbmdTd2lwZXNSYXRpbzogLjUsXG4gICAgbG9uZ1N3aXBlc01zOiAzMDAsXG4gICAgZm9sbG93RmluZ2VyOiAhMCxcbiAgICBhbGxvd1RvdWNoTW92ZTogITAsXG4gICAgdGhyZXNob2xkOiA1LFxuICAgIHRvdWNoTW92ZVN0b3BQcm9wYWdhdGlvbjogITEsXG4gICAgdG91Y2hTdGFydFByZXZlbnREZWZhdWx0OiAhMCxcbiAgICB0b3VjaFN0YXJ0Rm9yY2VQcmV2ZW50RGVmYXVsdDogITEsXG4gICAgdG91Y2hSZWxlYXNlT25FZGdlczogITEsXG4gICAgdW5pcXVlTmF2RWxlbWVudHM6ICEwLFxuICAgIHJlc2lzdGFuY2U6ICEwLFxuICAgIHJlc2lzdGFuY2VSYXRpbzogLjg1LFxuICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6ICExLFxuICAgIGdyYWJDdXJzb3I6ICExLFxuICAgIHByZXZlbnRDbGlja3M6ICEwLFxuICAgIHByZXZlbnRDbGlja3NQcm9wYWdhdGlvbjogITAsXG4gICAgc2xpZGVUb0NsaWNrZWRTbGlkZTogITEsXG4gICAgbG9vcDogITEsXG4gICAgbG9vcGVkU2xpZGVzOiBudWxsLFxuICAgIGxvb3BQcmV2ZW50c1NsaWRpbmc6ICEwLFxuICAgIHJld2luZDogITEsXG4gICAgYWxsb3dTbGlkZVByZXY6ICEwLFxuICAgIGFsbG93U2xpZGVOZXh0OiAhMCxcbiAgICBzd2lwZUhhbmRsZXI6IG51bGwsXG4gICAgbm9Td2lwaW5nOiAhMCxcbiAgICBub1N3aXBpbmdDbGFzczogXCJzd2lwZXItbm8tc3dpcGluZ1wiLFxuICAgIG5vU3dpcGluZ1NlbGVjdG9yOiBudWxsLFxuICAgIHBhc3NpdmVMaXN0ZW5lcnM6ICEwLFxuICAgIG1heEJhY2tmYWNlSGlkZGVuU2xpZGVzOiAxMCxcbiAgICBjb250YWluZXJNb2RpZmllckNsYXNzOiBcInN3aXBlci1cIixcbiAgICBzbGlkZUNsYXNzOiBcInN3aXBlci1zbGlkZVwiLFxuICAgIHNsaWRlQWN0aXZlQ2xhc3M6IFwic3dpcGVyLXNsaWRlLWFjdGl2ZVwiLFxuICAgIHNsaWRlVmlzaWJsZUNsYXNzOiBcInN3aXBlci1zbGlkZS12aXNpYmxlXCIsXG4gICAgc2xpZGVOZXh0Q2xhc3M6IFwic3dpcGVyLXNsaWRlLW5leHRcIixcbiAgICBzbGlkZVByZXZDbGFzczogXCJzd2lwZXItc2xpZGUtcHJldlwiLFxuICAgIHdyYXBwZXJDbGFzczogXCJzd2lwZXItd3JhcHBlclwiLFxuICAgIGxhenlQcmVsb2FkZXJDbGFzczogXCJzd2lwZXItbGF6eS1wcmVsb2FkZXJcIixcbiAgICBsYXp5UHJlbG9hZFByZXZOZXh0OiAwLFxuICAgIHJ1bkNhbGxiYWNrc09uSW5pdDogITAsXG4gICAgX2VtaXRDbGFzc2VzOiAhMVxuICB9O1xuICBmdW5jdGlvbiBLKGUsIHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHMpIHtcbiAgICAgIHZvaWQgMCA9PT0gcyAmJiAocyA9IHt9KTtcbiAgICAgIHZhciBhID0gT2JqZWN0LmtleXMocylbMF0sXG4gICAgICAgIGkgPSBzW2FdO1xuICAgICAgXCJvYmplY3RcIiA9PSBfdHlwZW9mKGkpICYmIG51bGwgIT09IGkgPyAoW1wibmF2aWdhdGlvblwiLCBcInBhZ2luYXRpb25cIiwgXCJzY3JvbGxiYXJcIl0uaW5kZXhPZihhKSA+PSAwICYmICEwID09PSBlW2FdICYmIChlW2FdID0ge1xuICAgICAgICBhdXRvOiAhMFxuICAgICAgfSksIGEgaW4gZSAmJiBcImVuYWJsZWRcIiBpbiBpID8gKCEwID09PSBlW2FdICYmIChlW2FdID0ge1xuICAgICAgICBlbmFibGVkOiAhMFxuICAgICAgfSksIFwib2JqZWN0XCIgIT0gX3R5cGVvZihlW2FdKSB8fCBcImVuYWJsZWRcIiBpbiBlW2FdIHx8IChlW2FdLmVuYWJsZWQgPSAhMCksIGVbYV0gfHwgKGVbYV0gPSB7XG4gICAgICAgIGVuYWJsZWQ6ICExXG4gICAgICB9KSwgcCh0LCBzKSkgOiBwKHQsIHMpKSA6IHAodCwgcyk7XG4gICAgfTtcbiAgfVxuICB2YXIgWiA9IHtcbiAgICAgIGV2ZW50c0VtaXR0ZXI6IHosXG4gICAgICB1cGRhdGU6IGssXG4gICAgICB0cmFuc2xhdGU6IE8sXG4gICAgICB0cmFuc2l0aW9uOiB7XG4gICAgICAgIHNldFRyYW5zaXRpb246IGZ1bmN0aW9uIHNldFRyYW5zaXRpb24oZSwgdCkge1xuICAgICAgICAgIHZhciBzID0gdGhpcztcbiAgICAgICAgICBzLnBhcmFtcy5jc3NNb2RlIHx8IChzLndyYXBwZXJFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdChlLCBcIm1zXCIpKSwgcy5lbWl0KFwic2V0VHJhbnNpdGlvblwiLCBlLCB0KTtcbiAgICAgICAgfSxcbiAgICAgICAgdHJhbnNpdGlvblN0YXJ0OiBmdW5jdGlvbiB0cmFuc2l0aW9uU3RhcnQoZSwgdCkge1xuICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9ICEwKTtcbiAgICAgICAgICB2YXIgcyA9IHRoaXMsXG4gICAgICAgICAgICBhID0gcy5wYXJhbXM7XG4gICAgICAgICAgYS5jc3NNb2RlIHx8IChhLmF1dG9IZWlnaHQgJiYgcy51cGRhdGVBdXRvSGVpZ2h0KCksIEQoe1xuICAgICAgICAgICAgc3dpcGVyOiBzLFxuICAgICAgICAgICAgcnVuQ2FsbGJhY2tzOiBlLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiB0LFxuICAgICAgICAgICAgc3RlcDogXCJTdGFydFwiXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9LFxuICAgICAgICB0cmFuc2l0aW9uRW5kOiBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kKGUsIHQpIHtcbiAgICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSAhMCk7XG4gICAgICAgICAgdmFyIHMgPSB0aGlzLFxuICAgICAgICAgICAgYSA9IHMucGFyYW1zO1xuICAgICAgICAgIHMuYW5pbWF0aW5nID0gITEsIGEuY3NzTW9kZSB8fCAocy5zZXRUcmFuc2l0aW9uKDApLCBEKHtcbiAgICAgICAgICAgIHN3aXBlcjogcyxcbiAgICAgICAgICAgIHJ1bkNhbGxiYWNrczogZSxcbiAgICAgICAgICAgIGRpcmVjdGlvbjogdCxcbiAgICAgICAgICAgIHN0ZXA6IFwiRW5kXCJcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzbGlkZTogRyxcbiAgICAgIGxvb3A6IEgsXG4gICAgICBncmFiQ3Vyc29yOiB7XG4gICAgICAgIHNldEdyYWJDdXJzb3I6IGZ1bmN0aW9uIHNldEdyYWJDdXJzb3IoZSkge1xuICAgICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgICBpZiAoIXQucGFyYW1zLnNpbXVsYXRlVG91Y2ggfHwgdC5wYXJhbXMud2F0Y2hPdmVyZmxvdyAmJiB0LmlzTG9ja2VkIHx8IHQucGFyYW1zLmNzc01vZGUpIHJldHVybjtcbiAgICAgICAgICB2YXIgcyA9IFwiY29udGFpbmVyXCIgPT09IHQucGFyYW1zLnRvdWNoRXZlbnRzVGFyZ2V0ID8gdC5lbCA6IHQud3JhcHBlckVsO1xuICAgICAgICAgIHQuaXNFbGVtZW50ICYmICh0Ll9fcHJldmVudE9ic2VydmVyX18gPSAhMCksIHMuc3R5bGUuY3Vyc29yID0gXCJtb3ZlXCIsIHMuc3R5bGUuY3Vyc29yID0gZSA/IFwiZ3JhYmJpbmdcIiA6IFwiZ3JhYlwiLCB0LmlzRWxlbWVudCAmJiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdC5fX3ByZXZlbnRPYnNlcnZlcl9fID0gITE7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHVuc2V0R3JhYkN1cnNvcjogZnVuY3Rpb24gdW5zZXRHcmFiQ3Vyc29yKCkge1xuICAgICAgICAgIHZhciBlID0gdGhpcztcbiAgICAgICAgICBlLnBhcmFtcy53YXRjaE92ZXJmbG93ICYmIGUuaXNMb2NrZWQgfHwgZS5wYXJhbXMuY3NzTW9kZSB8fCAoZS5pc0VsZW1lbnQgJiYgKGUuX19wcmV2ZW50T2JzZXJ2ZXJfXyA9ICEwKSwgZVtcImNvbnRhaW5lclwiID09PSBlLnBhcmFtcy50b3VjaEV2ZW50c1RhcmdldCA/IFwiZWxcIiA6IFwid3JhcHBlckVsXCJdLnN0eWxlLmN1cnNvciA9IFwiXCIsIGUuaXNFbGVtZW50ICYmIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlLl9fcHJldmVudE9ic2VydmVyX18gPSAhMTtcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBldmVudHM6IHtcbiAgICAgICAgYXR0YWNoRXZlbnRzOiBmdW5jdGlvbiBhdHRhY2hFdmVudHMoKSB7XG4gICAgICAgICAgdmFyIGUgPSB0aGlzLFxuICAgICAgICAgICAgdCA9IGEoKSxcbiAgICAgICAgICAgIHMgPSBlLnBhcmFtcztcbiAgICAgICAgICBlLm9uVG91Y2hTdGFydCA9IFguYmluZChlKSwgZS5vblRvdWNoTW92ZSA9IFkuYmluZChlKSwgZS5vblRvdWNoRW5kID0gQi5iaW5kKGUpLCBzLmNzc01vZGUgJiYgKGUub25TY3JvbGwgPSBSLmJpbmQoZSkpLCBlLm9uQ2xpY2sgPSBxLmJpbmQoZSksIGUub25Mb2FkID0gRi5iaW5kKGUpLCBfIHx8ICh0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIFYpLCBfID0gITApLCBqKGUsIFwib25cIik7XG4gICAgICAgIH0sXG4gICAgICAgIGRldGFjaEV2ZW50czogZnVuY3Rpb24gZGV0YWNoRXZlbnRzKCkge1xuICAgICAgICAgIGoodGhpcywgXCJvZmZcIik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBicmVha3BvaW50czoge1xuICAgICAgICBzZXRCcmVha3BvaW50OiBmdW5jdGlvbiBzZXRCcmVha3BvaW50KCkge1xuICAgICAgICAgIHZhciBlID0gdGhpcyxcbiAgICAgICAgICAgIHQgPSBlLnJlYWxJbmRleCxcbiAgICAgICAgICAgIHMgPSBlLmluaXRpYWxpemVkLFxuICAgICAgICAgICAgYSA9IGUucGFyYW1zLFxuICAgICAgICAgICAgaSA9IGUuZWwsXG4gICAgICAgICAgICByID0gYS5icmVha3BvaW50cztcbiAgICAgICAgICBpZiAoIXIgfHwgciAmJiAwID09PSBPYmplY3Qua2V5cyhyKS5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgICB2YXIgbiA9IGUuZ2V0QnJlYWtwb2ludChyLCBlLnBhcmFtcy5icmVha3BvaW50c0Jhc2UsIGUuZWwpO1xuICAgICAgICAgIGlmICghbiB8fCBlLmN1cnJlbnRCcmVha3BvaW50ID09PSBuKSByZXR1cm47XG4gICAgICAgICAgdmFyIGwgPSAobiBpbiByID8gcltuXSA6IHZvaWQgMCkgfHwgZS5vcmlnaW5hbFBhcmFtcyxcbiAgICAgICAgICAgIG8gPSBXKGUsIGEpLFxuICAgICAgICAgICAgZCA9IFcoZSwgbCksXG4gICAgICAgICAgICBjID0gYS5lbmFibGVkO1xuICAgICAgICAgIG8gJiYgIWQgPyAoaS5jbGFzc0xpc3QucmVtb3ZlKFwiXCIuY29uY2F0KGEuY29udGFpbmVyTW9kaWZpZXJDbGFzcywgXCJncmlkXCIpLCBcIlwiLmNvbmNhdChhLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MsIFwiZ3JpZC1jb2x1bW5cIikpLCBlLmVtaXRDb250YWluZXJDbGFzc2VzKCkpIDogIW8gJiYgZCAmJiAoaS5jbGFzc0xpc3QuYWRkKFwiXCIuY29uY2F0KGEuY29udGFpbmVyTW9kaWZpZXJDbGFzcywgXCJncmlkXCIpKSwgKGwuZ3JpZC5maWxsICYmIFwiY29sdW1uXCIgPT09IGwuZ3JpZC5maWxsIHx8ICFsLmdyaWQuZmlsbCAmJiBcImNvbHVtblwiID09PSBhLmdyaWQuZmlsbCkgJiYgaS5jbGFzc0xpc3QuYWRkKFwiXCIuY29uY2F0KGEuY29udGFpbmVyTW9kaWZpZXJDbGFzcywgXCJncmlkLWNvbHVtblwiKSksIGUuZW1pdENvbnRhaW5lckNsYXNzZXMoKSksIFtcIm5hdmlnYXRpb25cIiwgXCJwYWdpbmF0aW9uXCIsIFwic2Nyb2xsYmFyXCJdLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGxbdF0pIHJldHVybjtcbiAgICAgICAgICAgIHZhciBzID0gYVt0XSAmJiBhW3RdLmVuYWJsZWQsXG4gICAgICAgICAgICAgIGkgPSBsW3RdICYmIGxbdF0uZW5hYmxlZDtcbiAgICAgICAgICAgIHMgJiYgIWkgJiYgZVt0XS5kaXNhYmxlKCksICFzICYmIGkgJiYgZVt0XS5lbmFibGUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgdSA9IGwuZGlyZWN0aW9uICYmIGwuZGlyZWN0aW9uICE9PSBhLmRpcmVjdGlvbixcbiAgICAgICAgICAgIG0gPSBhLmxvb3AgJiYgKGwuc2xpZGVzUGVyVmlldyAhPT0gYS5zbGlkZXNQZXJWaWV3IHx8IHUpO1xuICAgICAgICAgIHUgJiYgcyAmJiBlLmNoYW5nZURpcmVjdGlvbigpLCBwKGUucGFyYW1zLCBsKTtcbiAgICAgICAgICB2YXIgaCA9IGUucGFyYW1zLmVuYWJsZWQ7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihlLCB7XG4gICAgICAgICAgICBhbGxvd1RvdWNoTW92ZTogZS5wYXJhbXMuYWxsb3dUb3VjaE1vdmUsXG4gICAgICAgICAgICBhbGxvd1NsaWRlTmV4dDogZS5wYXJhbXMuYWxsb3dTbGlkZU5leHQsXG4gICAgICAgICAgICBhbGxvd1NsaWRlUHJldjogZS5wYXJhbXMuYWxsb3dTbGlkZVByZXZcbiAgICAgICAgICB9KSwgYyAmJiAhaCA/IGUuZGlzYWJsZSgpIDogIWMgJiYgaCAmJiBlLmVuYWJsZSgpLCBlLmN1cnJlbnRCcmVha3BvaW50ID0gbiwgZS5lbWl0KFwiX2JlZm9yZUJyZWFrcG9pbnRcIiwgbCksIG0gJiYgcyAmJiAoZS5sb29wRGVzdHJveSgpLCBlLmxvb3BDcmVhdGUodCksIGUudXBkYXRlU2xpZGVzKCkpLCBlLmVtaXQoXCJicmVha3BvaW50XCIsIGwpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRCcmVha3BvaW50OiBmdW5jdGlvbiBnZXRCcmVha3BvaW50KGUsIHQsIHMpIHtcbiAgICAgICAgICBpZiAodm9pZCAwID09PSB0ICYmICh0ID0gXCJ3aW5kb3dcIiksICFlIHx8IFwiY29udGFpbmVyXCIgPT09IHQgJiYgIXMpIHJldHVybjtcbiAgICAgICAgICB2YXIgYSA9ICExO1xuICAgICAgICAgIHZhciBpID0gcigpLFxuICAgICAgICAgICAgbiA9IFwid2luZG93XCIgPT09IHQgPyBpLmlubmVySGVpZ2h0IDogcy5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICBsID0gT2JqZWN0LmtleXMoZSkubWFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIDAgPT09IGUuaW5kZXhPZihcIkBcIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3QxOSA9IHBhcnNlRmxvYXQoZS5zdWJzdHIoMSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZTogbiAqIF90MTksXG4gICAgICAgICAgICAgICAgICBwb2ludDogZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZSxcbiAgICAgICAgICAgICAgICBwb2ludDogZVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgbC5zb3J0KGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZS52YWx1ZSwgMTApIC0gcGFyc2VJbnQodC52YWx1ZSwgMTApO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGZvciAodmFyIF9lMjggPSAwOyBfZTI4IDwgbC5sZW5ndGg7IF9lMjggKz0gMSkge1xuICAgICAgICAgICAgdmFyIF9sJF9lID0gbFtfZTI4XSxcbiAgICAgICAgICAgICAgX3I2ID0gX2wkX2UucG9pbnQsXG4gICAgICAgICAgICAgIF9uNCA9IF9sJF9lLnZhbHVlO1xuICAgICAgICAgICAgXCJ3aW5kb3dcIiA9PT0gdCA/IGkubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IFwiLmNvbmNhdChfbjQsIFwicHgpXCIpKS5tYXRjaGVzICYmIChhID0gX3I2KSA6IF9uNCA8PSBzLmNsaWVudFdpZHRoICYmIChhID0gX3I2KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGEgfHwgXCJtYXhcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNoZWNrT3ZlcmZsb3c6IHtcbiAgICAgICAgY2hlY2tPdmVyZmxvdzogZnVuY3Rpb24gY2hlY2tPdmVyZmxvdygpIHtcbiAgICAgICAgICB2YXIgZSA9IHRoaXMsXG4gICAgICAgICAgICB0ID0gZS5pc0xvY2tlZCxcbiAgICAgICAgICAgIHMgPSBlLnBhcmFtcyxcbiAgICAgICAgICAgIGEgPSBzLnNsaWRlc09mZnNldEJlZm9yZTtcbiAgICAgICAgICBpZiAoYSkge1xuICAgICAgICAgICAgdmFyIF90MjAgPSBlLnNsaWRlcy5sZW5ndGggLSAxLFxuICAgICAgICAgICAgICBfczE3ID0gZS5zbGlkZXNHcmlkW190MjBdICsgZS5zbGlkZXNTaXplc0dyaWRbX3QyMF0gKyAyICogYTtcbiAgICAgICAgICAgIGUuaXNMb2NrZWQgPSBlLnNpemUgPiBfczE3O1xuICAgICAgICAgIH0gZWxzZSBlLmlzTG9ja2VkID0gMSA9PT0gZS5zbmFwR3JpZC5sZW5ndGg7XG4gICAgICAgICAgITAgPT09IHMuYWxsb3dTbGlkZU5leHQgJiYgKGUuYWxsb3dTbGlkZU5leHQgPSAhZS5pc0xvY2tlZCksICEwID09PSBzLmFsbG93U2xpZGVQcmV2ICYmIChlLmFsbG93U2xpZGVQcmV2ID0gIWUuaXNMb2NrZWQpLCB0ICYmIHQgIT09IGUuaXNMb2NrZWQgJiYgKGUuaXNFbmQgPSAhMSksIHQgIT09IGUuaXNMb2NrZWQgJiYgZS5lbWl0KGUuaXNMb2NrZWQgPyBcImxvY2tcIiA6IFwidW5sb2NrXCIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2xhc3Nlczoge1xuICAgICAgICBhZGRDbGFzc2VzOiBmdW5jdGlvbiBhZGRDbGFzc2VzKCkge1xuICAgICAgICAgIHZhciBfaSRjbGFzc0xpc3Q7XG4gICAgICAgICAgdmFyIGUgPSB0aGlzLFxuICAgICAgICAgICAgdCA9IGUuY2xhc3NOYW1lcyxcbiAgICAgICAgICAgIHMgPSBlLnBhcmFtcyxcbiAgICAgICAgICAgIGEgPSBlLnJ0bCxcbiAgICAgICAgICAgIGkgPSBlLmVsLFxuICAgICAgICAgICAgciA9IGUuZGV2aWNlLFxuICAgICAgICAgICAgbiA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICAgIHZhciBzID0gW107XG4gICAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBcIm9iamVjdFwiID09IF90eXBlb2YoZSkgPyBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgICBlW2FdICYmIHMucHVzaCh0ICsgYSk7XG4gICAgICAgICAgICAgICAgfSkgOiBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIHMucHVzaCh0ICsgZSk7XG4gICAgICAgICAgICAgIH0pLCBzO1xuICAgICAgICAgICAgfShbXCJpbml0aWFsaXplZFwiLCBzLmRpcmVjdGlvbiwge1xuICAgICAgICAgICAgICBcImZyZWUtbW9kZVwiOiBlLnBhcmFtcy5mcmVlTW9kZSAmJiBzLmZyZWVNb2RlLmVuYWJsZWRcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgYXV0b2hlaWdodDogcy5hdXRvSGVpZ2h0XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIHJ0bDogYVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBncmlkOiBzLmdyaWQgJiYgcy5ncmlkLnJvd3MgPiAxXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIFwiZ3JpZC1jb2x1bW5cIjogcy5ncmlkICYmIHMuZ3JpZC5yb3dzID4gMSAmJiBcImNvbHVtblwiID09PSBzLmdyaWQuZmlsbFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBhbmRyb2lkOiByLmFuZHJvaWRcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgaW9zOiByLmlvc1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBcImNzcy1tb2RlXCI6IHMuY3NzTW9kZVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBjZW50ZXJlZDogcy5jc3NNb2RlICYmIHMuY2VudGVyZWRTbGlkZXNcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgXCJ3YXRjaC1wcm9ncmVzc1wiOiBzLndhdGNoU2xpZGVzUHJvZ3Jlc3NcbiAgICAgICAgICAgIH1dLCBzLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MpO1xuICAgICAgICAgIHQucHVzaC5hcHBseSh0LCBfdG9Db25zdW1hYmxlQXJyYXkobikpLCAoX2kkY2xhc3NMaXN0ID0gaS5jbGFzc0xpc3QpLmFkZC5hcHBseShfaSRjbGFzc0xpc3QsIF90b0NvbnN1bWFibGVBcnJheSh0KSksIGUuZW1pdENvbnRhaW5lckNsYXNzZXMoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlQ2xhc3NlczogZnVuY3Rpb24gcmVtb3ZlQ2xhc3NlcygpIHtcbiAgICAgICAgICB2YXIgX2UkY2xhc3NMaXN0O1xuICAgICAgICAgIHZhciBlID0gdGhpcy5lbCxcbiAgICAgICAgICAgIHQgPSB0aGlzLmNsYXNzTmFtZXM7XG4gICAgICAgICAgKF9lJGNsYXNzTGlzdCA9IGUuY2xhc3NMaXN0KS5yZW1vdmUuYXBwbHkoX2UkY2xhc3NMaXN0LCBfdG9Db25zdW1hYmxlQXJyYXkodCkpLCB0aGlzLmVtaXRDb250YWluZXJDbGFzc2VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFEgPSB7fTtcbiAgdmFyIEogPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEooKSB7XG4gICAgICB2YXIgX2k5LCBfaTEwLCBfbCRtb2R1bGVzO1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEopO1xuICAgICAgdmFyIGUsIHQ7XG4gICAgICBmb3IgKHZhciBzID0gYXJndW1lbnRzLmxlbmd0aCwgaSA9IG5ldyBBcnJheShzKSwgciA9IDA7IHIgPCBzOyByKyspIGlbcl0gPSBhcmd1bWVudHNbcl07XG4gICAgICAxID09PSBpLmxlbmd0aCAmJiBpWzBdLmNvbnN0cnVjdG9yICYmIFwiT2JqZWN0XCIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpWzBdKS5zbGljZSg4LCAtMSkgPyB0ID0gaVswXSA6IChfaTkgPSBpLCBfaTEwID0gX3NsaWNlZFRvQXJyYXkoX2k5LCAyKSwgZSA9IF9pMTBbMF0sIHQgPSBfaTEwWzFdLCBfaTkpLCB0IHx8ICh0ID0ge30pLCB0ID0gcCh7fSwgdCksIGUgJiYgIXQuZWwgJiYgKHQuZWwgPSBlKTtcbiAgICAgIHZhciBuID0gYSgpO1xuICAgICAgaWYgKHQuZWwgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC5lbCAmJiBuLnF1ZXJ5U2VsZWN0b3JBbGwodC5lbCkubGVuZ3RoID4gMSkge1xuICAgICAgICB2YXIgX2UyOSA9IFtdO1xuICAgICAgICByZXR1cm4gbi5xdWVyeVNlbGVjdG9yQWxsKHQuZWwpLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICB2YXIgYSA9IHAoe30sIHQsIHtcbiAgICAgICAgICAgIGVsOiBzXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgX2UyOS5wdXNoKG5ldyBKKGEpKTtcbiAgICAgICAgfSksIF9lMjk7XG4gICAgICB9XG4gICAgICB2YXIgbCA9IHRoaXM7XG4gICAgICBsLl9fc3dpcGVyX18gPSAhMCwgbC5zdXBwb3J0ID0gQygpLCBsLmRldmljZSA9IFAoe1xuICAgICAgICB1c2VyQWdlbnQ6IHQudXNlckFnZW50XG4gICAgICB9KSwgbC5icm93c2VyID0gTCgpLCBsLmV2ZW50c0xpc3RlbmVycyA9IHt9LCBsLmV2ZW50c0FueUxpc3RlbmVycyA9IFtdLCBsLm1vZHVsZXMgPSBfdG9Db25zdW1hYmxlQXJyYXkobC5fX21vZHVsZXNfXyksIHQubW9kdWxlcyAmJiBBcnJheS5pc0FycmF5KHQubW9kdWxlcykgJiYgKF9sJG1vZHVsZXMgPSBsLm1vZHVsZXMpLnB1c2guYXBwbHkoX2wkbW9kdWxlcywgX3RvQ29uc3VtYWJsZUFycmF5KHQubW9kdWxlcykpO1xuICAgICAgdmFyIG8gPSB7fTtcbiAgICAgIGwubW9kdWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUoe1xuICAgICAgICAgIHBhcmFtczogdCxcbiAgICAgICAgICBzd2lwZXI6IGwsXG4gICAgICAgICAgZXh0ZW5kUGFyYW1zOiBLKHQsIG8pLFxuICAgICAgICAgIG9uOiBsLm9uLmJpbmQobCksXG4gICAgICAgICAgb25jZTogbC5vbmNlLmJpbmQobCksXG4gICAgICAgICAgb2ZmOiBsLm9mZi5iaW5kKGwpLFxuICAgICAgICAgIGVtaXQ6IGwuZW1pdC5iaW5kKGwpXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICB2YXIgZCA9IHAoe30sIFUsIG8pO1xuICAgICAgcmV0dXJuIGwucGFyYW1zID0gcCh7fSwgZCwgUSwgdCksIGwub3JpZ2luYWxQYXJhbXMgPSBwKHt9LCBsLnBhcmFtcyksIGwucGFzc2VkUGFyYW1zID0gcCh7fSwgdCksIGwucGFyYW1zICYmIGwucGFyYW1zLm9uICYmIE9iamVjdC5rZXlzKGwucGFyYW1zLm9uKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGwub24oZSwgbC5wYXJhbXMub25bZV0pO1xuICAgICAgfSksIGwucGFyYW1zICYmIGwucGFyYW1zLm9uQW55ICYmIGwub25BbnkobC5wYXJhbXMub25BbnkpLCBPYmplY3QuYXNzaWduKGwsIHtcbiAgICAgICAgZW5hYmxlZDogbC5wYXJhbXMuZW5hYmxlZCxcbiAgICAgICAgZWw6IGUsXG4gICAgICAgIGNsYXNzTmFtZXM6IFtdLFxuICAgICAgICBzbGlkZXM6IFtdLFxuICAgICAgICBzbGlkZXNHcmlkOiBbXSxcbiAgICAgICAgc25hcEdyaWQ6IFtdLFxuICAgICAgICBzbGlkZXNTaXplc0dyaWQ6IFtdLFxuICAgICAgICBpc0hvcml6b250YWw6IGZ1bmN0aW9uIGlzSG9yaXpvbnRhbCgpIHtcbiAgICAgICAgICByZXR1cm4gXCJob3Jpem9udGFsXCIgPT09IGwucGFyYW1zLmRpcmVjdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgaXNWZXJ0aWNhbDogZnVuY3Rpb24gaXNWZXJ0aWNhbCgpIHtcbiAgICAgICAgICByZXR1cm4gXCJ2ZXJ0aWNhbFwiID09PSBsLnBhcmFtcy5kaXJlY3Rpb247XG4gICAgICAgIH0sXG4gICAgICAgIGFjdGl2ZUluZGV4OiAwLFxuICAgICAgICByZWFsSW5kZXg6IDAsXG4gICAgICAgIGlzQmVnaW5uaW5nOiAhMCxcbiAgICAgICAgaXNFbmQ6ICExLFxuICAgICAgICB0cmFuc2xhdGU6IDAsXG4gICAgICAgIHByZXZpb3VzVHJhbnNsYXRlOiAwLFxuICAgICAgICBwcm9ncmVzczogMCxcbiAgICAgICAgdmVsb2NpdHk6IDAsXG4gICAgICAgIGFuaW1hdGluZzogITEsXG4gICAgICAgIGNzc092ZXJmbG93QWRqdXN0bWVudDogZnVuY3Rpb24gY3NzT3ZlcmZsb3dBZGp1c3RtZW50KCkge1xuICAgICAgICAgIHJldHVybiBNYXRoLnRydW5jKHRoaXMudHJhbnNsYXRlIC8gTWF0aC5wb3coMiwgMjMpKSAqIE1hdGgucG93KDIsIDIzKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWxsb3dTbGlkZU5leHQ6IGwucGFyYW1zLmFsbG93U2xpZGVOZXh0LFxuICAgICAgICBhbGxvd1NsaWRlUHJldjogbC5wYXJhbXMuYWxsb3dTbGlkZVByZXYsXG4gICAgICAgIHRvdWNoRXZlbnRzRGF0YToge1xuICAgICAgICAgIGlzVG91Y2hlZDogdm9pZCAwLFxuICAgICAgICAgIGlzTW92ZWQ6IHZvaWQgMCxcbiAgICAgICAgICBhbGxvd1RvdWNoQ2FsbGJhY2tzOiB2b2lkIDAsXG4gICAgICAgICAgdG91Y2hTdGFydFRpbWU6IHZvaWQgMCxcbiAgICAgICAgICBpc1Njcm9sbGluZzogdm9pZCAwLFxuICAgICAgICAgIGN1cnJlbnRUcmFuc2xhdGU6IHZvaWQgMCxcbiAgICAgICAgICBzdGFydFRyYW5zbGF0ZTogdm9pZCAwLFxuICAgICAgICAgIGFsbG93VGhyZXNob2xkTW92ZTogdm9pZCAwLFxuICAgICAgICAgIGZvY3VzYWJsZUVsZW1lbnRzOiBsLnBhcmFtcy5mb2N1c2FibGVFbGVtZW50cyxcbiAgICAgICAgICBsYXN0Q2xpY2tUaW1lOiAwLFxuICAgICAgICAgIGNsaWNrVGltZW91dDogdm9pZCAwLFxuICAgICAgICAgIHZlbG9jaXRpZXM6IFtdLFxuICAgICAgICAgIGFsbG93TW9tZW50dW1Cb3VuY2U6IHZvaWQgMCxcbiAgICAgICAgICBzdGFydE1vdmluZzogdm9pZCAwLFxuICAgICAgICAgIGV2Q2FjaGU6IFtdXG4gICAgICAgIH0sXG4gICAgICAgIGFsbG93Q2xpY2s6ICEwLFxuICAgICAgICBhbGxvd1RvdWNoTW92ZTogbC5wYXJhbXMuYWxsb3dUb3VjaE1vdmUsXG4gICAgICAgIHRvdWNoZXM6IHtcbiAgICAgICAgICBzdGFydFg6IDAsXG4gICAgICAgICAgc3RhcnRZOiAwLFxuICAgICAgICAgIGN1cnJlbnRYOiAwLFxuICAgICAgICAgIGN1cnJlbnRZOiAwLFxuICAgICAgICAgIGRpZmY6IDBcbiAgICAgICAgfSxcbiAgICAgICAgaW1hZ2VzVG9Mb2FkOiBbXSxcbiAgICAgICAgaW1hZ2VzTG9hZGVkOiAwXG4gICAgICB9KSwgbC5lbWl0KFwiX3N3aXBlclwiKSwgbC5wYXJhbXMuaW5pdCAmJiBsLmluaXQoKSwgbDtcbiAgICB9XG4gICAgX2NyZWF0ZUNsYXNzKEosIFt7XG4gICAgICBrZXk6IFwiZ2V0U2xpZGVJbmRleFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNsaWRlSW5kZXgoZSkge1xuICAgICAgICB2YXIgdCA9IHRoaXMuc2xpZGVzRWwsXG4gICAgICAgICAgcyA9IHRoaXMucGFyYW1zLFxuICAgICAgICAgIGEgPSBiKGYodCwgXCIuXCIuY29uY2F0KHMuc2xpZGVDbGFzcywgXCIsIHN3aXBlci1zbGlkZVwiKSlbMF0pO1xuICAgICAgICByZXR1cm4gYihlKSAtIGE7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImdldFNsaWRlSW5kZXhCeURhdGFcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTbGlkZUluZGV4QnlEYXRhKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2xpZGVJbmRleCh0aGlzLnNsaWRlcy5maWx0ZXIoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICByZXR1cm4gMSAqIHQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIikgPT09IGU7XG4gICAgICAgIH0pWzBdKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicmVjYWxjU2xpZGVzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVjYWxjU2xpZGVzKCkge1xuICAgICAgICB2YXIgZSA9IHRoaXMuc2xpZGVzRWwsXG4gICAgICAgICAgdCA9IHRoaXMucGFyYW1zO1xuICAgICAgICB0aGlzLnNsaWRlcyA9IGYoZSwgXCIuXCIuY29uY2F0KHQuc2xpZGVDbGFzcywgXCIsIHN3aXBlci1zbGlkZVwiKSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImVuYWJsZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICBlLmVuYWJsZWQgfHwgKGUuZW5hYmxlZCA9ICEwLCBlLnBhcmFtcy5ncmFiQ3Vyc29yICYmIGUuc2V0R3JhYkN1cnNvcigpLCBlLmVtaXQoXCJlbmFibGVcIikpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkaXNhYmxlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICBlLmVuYWJsZWQgJiYgKGUuZW5hYmxlZCA9ICExLCBlLnBhcmFtcy5ncmFiQ3Vyc29yICYmIGUudW5zZXRHcmFiQ3Vyc29yKCksIGUuZW1pdChcImRpc2FibGVcIikpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzZXRQcm9ncmVzc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFByb2dyZXNzKGUsIHQpIHtcbiAgICAgICAgdmFyIHMgPSB0aGlzO1xuICAgICAgICBlID0gTWF0aC5taW4oTWF0aC5tYXgoZSwgMCksIDEpO1xuICAgICAgICB2YXIgYSA9IHMubWluVHJhbnNsYXRlKCksXG4gICAgICAgICAgaSA9IChzLm1heFRyYW5zbGF0ZSgpIC0gYSkgKiBlICsgYTtcbiAgICAgICAgcy50cmFuc2xhdGVUbyhpLCB2b2lkIDAgPT09IHQgPyAwIDogdCksIHMudXBkYXRlQWN0aXZlSW5kZXgoKSwgcy51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImVtaXRDb250YWluZXJDbGFzc2VzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZW1pdENvbnRhaW5lckNsYXNzZXMoKSB7XG4gICAgICAgIHZhciBlID0gdGhpcztcbiAgICAgICAgaWYgKCFlLnBhcmFtcy5fZW1pdENsYXNzZXMgfHwgIWUuZWwpIHJldHVybjtcbiAgICAgICAgdmFyIHQgPSBlLmVsLmNsYXNzTmFtZS5zcGxpdChcIiBcIikuZmlsdGVyKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgcmV0dXJuIDAgPT09IHQuaW5kZXhPZihcInN3aXBlclwiKSB8fCAwID09PSB0LmluZGV4T2YoZS5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzcyk7XG4gICAgICAgIH0pO1xuICAgICAgICBlLmVtaXQoXCJfY29udGFpbmVyQ2xhc3Nlc1wiLCB0LmpvaW4oXCIgXCIpKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0U2xpZGVDbGFzc2VzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2xpZGVDbGFzc2VzKGUpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdC5kZXN0cm95ZWQgPyBcIlwiIDogZS5jbGFzc05hbWUuc3BsaXQoXCIgXCIpLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiAwID09PSBlLmluZGV4T2YoXCJzd2lwZXItc2xpZGVcIikgfHwgMCA9PT0gZS5pbmRleE9mKHQucGFyYW1zLnNsaWRlQ2xhc3MpO1xuICAgICAgICB9KS5qb2luKFwiIFwiKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZW1pdFNsaWRlc0NsYXNzZXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBlbWl0U2xpZGVzQ2xhc3NlcygpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICBpZiAoIWUucGFyYW1zLl9lbWl0Q2xhc3NlcyB8fCAhZS5lbCkgcmV0dXJuO1xuICAgICAgICB2YXIgdCA9IFtdO1xuICAgICAgICBlLnNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgdmFyIGEgPSBlLmdldFNsaWRlQ2xhc3NlcyhzKTtcbiAgICAgICAgICB0LnB1c2goe1xuICAgICAgICAgICAgc2xpZGVFbDogcyxcbiAgICAgICAgICAgIGNsYXNzTmFtZXM6IGFcbiAgICAgICAgICB9KSwgZS5lbWl0KFwiX3NsaWRlQ2xhc3NcIiwgcywgYSk7XG4gICAgICAgIH0pLCBlLmVtaXQoXCJfc2xpZGVDbGFzc2VzXCIsIHQpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzbGlkZXNQZXJWaWV3RHluYW1pY1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNsaWRlc1BlclZpZXdEeW5hbWljKGUsIHQpIHtcbiAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gXCJjdXJyZW50XCIpLCB2b2lkIDAgPT09IHQgJiYgKHQgPSAhMSk7XG4gICAgICAgIHZhciBzID0gdGhpcy5wYXJhbXMsXG4gICAgICAgICAgYSA9IHRoaXMuc2xpZGVzLFxuICAgICAgICAgIGkgPSB0aGlzLnNsaWRlc0dyaWQsXG4gICAgICAgICAgciA9IHRoaXMuc2xpZGVzU2l6ZXNHcmlkLFxuICAgICAgICAgIG4gPSB0aGlzLnNpemUsXG4gICAgICAgICAgbCA9IHRoaXMuYWN0aXZlSW5kZXg7XG4gICAgICAgIHZhciBvID0gMTtcbiAgICAgICAgaWYgKHMuY2VudGVyZWRTbGlkZXMpIHtcbiAgICAgICAgICB2YXIgX2UzMCxcbiAgICAgICAgICAgIF90MjEgPSBhW2xdID8gYVtsXS5zd2lwZXJTbGlkZVNpemUgOiAwO1xuICAgICAgICAgIGZvciAodmFyIF9zMTggPSBsICsgMTsgX3MxOCA8IGEubGVuZ3RoOyBfczE4ICs9IDEpIGFbX3MxOF0gJiYgIV9lMzAgJiYgKF90MjEgKz0gYVtfczE4XS5zd2lwZXJTbGlkZVNpemUsIG8gKz0gMSwgX3QyMSA+IG4gJiYgKF9lMzAgPSAhMCkpO1xuICAgICAgICAgIGZvciAodmFyIF9zMTkgPSBsIC0gMTsgX3MxOSA+PSAwOyBfczE5IC09IDEpIGFbX3MxOV0gJiYgIV9lMzAgJiYgKF90MjEgKz0gYVtfczE5XS5zd2lwZXJTbGlkZVNpemUsIG8gKz0gMSwgX3QyMSA+IG4gJiYgKF9lMzAgPSAhMCkpO1xuICAgICAgICB9IGVsc2UgaWYgKFwiY3VycmVudFwiID09PSBlKSBmb3IgKHZhciBfZTMxID0gbCArIDE7IF9lMzEgPCBhLmxlbmd0aDsgX2UzMSArPSAxKSB7XG4gICAgICAgICAgKHQgPyBpW19lMzFdICsgcltfZTMxXSAtIGlbbF0gPCBuIDogaVtfZTMxXSAtIGlbbF0gPCBuKSAmJiAobyArPSAxKTtcbiAgICAgICAgfSBlbHNlIGZvciAodmFyIF9lMzIgPSBsIC0gMTsgX2UzMiA+PSAwOyBfZTMyIC09IDEpIHtcbiAgICAgICAgICBpW2xdIC0gaVtfZTMyXSA8IG4gJiYgKG8gKz0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG87XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInVwZGF0ZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICBpZiAoIWUgfHwgZS5kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgICAgdmFyIHQgPSBlLnNuYXBHcmlkLFxuICAgICAgICAgIHMgPSBlLnBhcmFtcztcbiAgICAgICAgZnVuY3Rpb24gYSgpIHtcbiAgICAgICAgICB2YXIgdCA9IGUucnRsVHJhbnNsYXRlID8gLTEgKiBlLnRyYW5zbGF0ZSA6IGUudHJhbnNsYXRlLFxuICAgICAgICAgICAgcyA9IE1hdGgubWluKE1hdGgubWF4KHQsIGUubWF4VHJhbnNsYXRlKCkpLCBlLm1pblRyYW5zbGF0ZSgpKTtcbiAgICAgICAgICBlLnNldFRyYW5zbGF0ZShzKSwgZS51cGRhdGVBY3RpdmVJbmRleCgpLCBlLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaTtcbiAgICAgICAgaWYgKHMuYnJlYWtwb2ludHMgJiYgZS5zZXRCcmVha3BvaW50KCksIF90b0NvbnN1bWFibGVBcnJheShlLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tsb2FkaW5nPVwibGF6eVwiXScpKS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdC5jb21wbGV0ZSAmJiBBKGUsIHQpO1xuICAgICAgICB9KSwgZS51cGRhdGVTaXplKCksIGUudXBkYXRlU2xpZGVzKCksIGUudXBkYXRlUHJvZ3Jlc3MoKSwgZS51cGRhdGVTbGlkZXNDbGFzc2VzKCksIHMuZnJlZU1vZGUgJiYgcy5mcmVlTW9kZS5lbmFibGVkICYmICFzLmNzc01vZGUpIGEoKSwgcy5hdXRvSGVpZ2h0ICYmIGUudXBkYXRlQXV0b0hlaWdodCgpO2Vsc2Uge1xuICAgICAgICAgIGlmICgoXCJhdXRvXCIgPT09IHMuc2xpZGVzUGVyVmlldyB8fCBzLnNsaWRlc1BlclZpZXcgPiAxKSAmJiBlLmlzRW5kICYmICFzLmNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgICAgICB2YXIgX3QyMiA9IGUudmlydHVhbCAmJiBzLnZpcnR1YWwuZW5hYmxlZCA/IGUudmlydHVhbC5zbGlkZXMgOiBlLnNsaWRlcztcbiAgICAgICAgICAgIGkgPSBlLnNsaWRlVG8oX3QyMi5sZW5ndGggLSAxLCAwLCAhMSwgITApO1xuICAgICAgICAgIH0gZWxzZSBpID0gZS5zbGlkZVRvKGUuYWN0aXZlSW5kZXgsIDAsICExLCAhMCk7XG4gICAgICAgICAgaSB8fCBhKCk7XG4gICAgICAgIH1cbiAgICAgICAgcy53YXRjaE92ZXJmbG93ICYmIHQgIT09IGUuc25hcEdyaWQgJiYgZS5jaGVja092ZXJmbG93KCksIGUuZW1pdChcInVwZGF0ZVwiKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2hhbmdlRGlyZWN0aW9uXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlRGlyZWN0aW9uKGUsIHQpIHtcbiAgICAgICAgdm9pZCAwID09PSB0ICYmICh0ID0gITApO1xuICAgICAgICB2YXIgcyA9IHRoaXMsXG4gICAgICAgICAgYSA9IHMucGFyYW1zLmRpcmVjdGlvbjtcbiAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBcImhvcml6b250YWxcIiA9PT0gYSA/IFwidmVydGljYWxcIiA6IFwiaG9yaXpvbnRhbFwiKSwgZSA9PT0gYSB8fCBcImhvcml6b250YWxcIiAhPT0gZSAmJiBcInZlcnRpY2FsXCIgIT09IGUgfHwgKHMuZWwuY2xhc3NMaXN0LnJlbW92ZShcIlwiLmNvbmNhdChzLnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzKS5jb25jYXQoYSkpLCBzLmVsLmNsYXNzTGlzdC5hZGQoXCJcIi5jb25jYXQocy5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzcykuY29uY2F0KGUpKSwgcy5lbWl0Q29udGFpbmVyQ2xhc3NlcygpLCBzLnBhcmFtcy5kaXJlY3Rpb24gPSBlLCBzLnNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgXCJ2ZXJ0aWNhbFwiID09PSBlID8gdC5zdHlsZS53aWR0aCA9IFwiXCIgOiB0LnN0eWxlLmhlaWdodCA9IFwiXCI7XG4gICAgICAgIH0pLCBzLmVtaXQoXCJjaGFuZ2VEaXJlY3Rpb25cIiksIHQgJiYgcy51cGRhdGUoKSksIHM7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImNoYW5nZUxhbmd1YWdlRGlyZWN0aW9uXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlTGFuZ3VhZ2VEaXJlY3Rpb24oZSkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIHQucnRsICYmIFwicnRsXCIgPT09IGUgfHwgIXQucnRsICYmIFwibHRyXCIgPT09IGUgfHwgKHQucnRsID0gXCJydGxcIiA9PT0gZSwgdC5ydGxUcmFuc2xhdGUgPSBcImhvcml6b250YWxcIiA9PT0gdC5wYXJhbXMuZGlyZWN0aW9uICYmIHQucnRsLCB0LnJ0bCA/ICh0LmVsLmNsYXNzTGlzdC5hZGQoXCJcIi5jb25jYXQodC5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzcywgXCJydGxcIikpLCB0LmVsLmRpciA9IFwicnRsXCIpIDogKHQuZWwuY2xhc3NMaXN0LnJlbW92ZShcIlwiLmNvbmNhdCh0LnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzLCBcInJ0bFwiKSksIHQuZWwuZGlyID0gXCJsdHJcIiksIHQudXBkYXRlKCkpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJtb3VudFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vdW50KGUpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICBpZiAodC5tb3VudGVkKSByZXR1cm4gITA7XG4gICAgICAgIHZhciBzID0gZSB8fCB0LnBhcmFtcy5lbDtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHMgJiYgKHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHMpKSwgIXMpIHJldHVybiAhMTtcbiAgICAgICAgcy5zd2lwZXIgPSB0LCBzLnNoYWRvd0VsICYmICh0LmlzRWxlbWVudCA9ICEwKTtcbiAgICAgICAgdmFyIGEgPSBmdW5jdGlvbiBhKCkge1xuICAgICAgICAgIHJldHVybiBcIi5cIi5jb25jYXQoKHQucGFyYW1zLndyYXBwZXJDbGFzcyB8fCBcIlwiKS50cmltKCkuc3BsaXQoXCIgXCIpLmpvaW4oXCIuXCIpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKHMgJiYgcy5zaGFkb3dSb290ICYmIHMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoYSgpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGYocywgYSgpKVswXTtcbiAgICAgICAgfSgpO1xuICAgICAgICByZXR1cm4gIWkgJiYgdC5wYXJhbXMuY3JlYXRlRWxlbWVudHMgJiYgKGkgPSBnKFwiZGl2XCIsIHQucGFyYW1zLndyYXBwZXJDbGFzcyksIHMuYXBwZW5kKGkpLCBmKHMsIFwiLlwiLmNvbmNhdCh0LnBhcmFtcy5zbGlkZUNsYXNzKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGkuYXBwZW5kKGUpO1xuICAgICAgICB9KSksIE9iamVjdC5hc3NpZ24odCwge1xuICAgICAgICAgIGVsOiBzLFxuICAgICAgICAgIHdyYXBwZXJFbDogaSxcbiAgICAgICAgICBzbGlkZXNFbDogdC5pc0VsZW1lbnQgPyBzIDogaSxcbiAgICAgICAgICBtb3VudGVkOiAhMCxcbiAgICAgICAgICBydGw6IFwicnRsXCIgPT09IHMuZGlyLnRvTG93ZXJDYXNlKCkgfHwgXCJydGxcIiA9PT0gdyhzLCBcImRpcmVjdGlvblwiKSxcbiAgICAgICAgICBydGxUcmFuc2xhdGU6IFwiaG9yaXpvbnRhbFwiID09PSB0LnBhcmFtcy5kaXJlY3Rpb24gJiYgKFwicnRsXCIgPT09IHMuZGlyLnRvTG93ZXJDYXNlKCkgfHwgXCJydGxcIiA9PT0gdyhzLCBcImRpcmVjdGlvblwiKSksXG4gICAgICAgICAgd3JvbmdSVEw6IFwiLXdlYmtpdC1ib3hcIiA9PT0gdyhpLCBcImRpc3BsYXlcIilcbiAgICAgICAgfSksICEwO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgaWYgKHQuaW5pdGlhbGl6ZWQpIHJldHVybiB0O1xuICAgICAgICByZXR1cm4gITEgPT09IHQubW91bnQoZSkgfHwgKHQuZW1pdChcImJlZm9yZUluaXRcIiksIHQucGFyYW1zLmJyZWFrcG9pbnRzICYmIHQuc2V0QnJlYWtwb2ludCgpLCB0LmFkZENsYXNzZXMoKSwgdC51cGRhdGVTaXplKCksIHQudXBkYXRlU2xpZGVzKCksIHQucGFyYW1zLndhdGNoT3ZlcmZsb3cgJiYgdC5jaGVja092ZXJmbG93KCksIHQucGFyYW1zLmdyYWJDdXJzb3IgJiYgdC5lbmFibGVkICYmIHQuc2V0R3JhYkN1cnNvcigpLCB0LnBhcmFtcy5sb29wICYmIHQudmlydHVhbCAmJiB0LnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyB0LnNsaWRlVG8odC5wYXJhbXMuaW5pdGlhbFNsaWRlICsgdC52aXJ0dWFsLnNsaWRlc0JlZm9yZSwgMCwgdC5wYXJhbXMucnVuQ2FsbGJhY2tzT25Jbml0LCAhMSwgITApIDogdC5zbGlkZVRvKHQucGFyYW1zLmluaXRpYWxTbGlkZSwgMCwgdC5wYXJhbXMucnVuQ2FsbGJhY2tzT25Jbml0LCAhMSwgITApLCB0LnBhcmFtcy5sb29wICYmIHQubG9vcENyZWF0ZSgpLCB0LmF0dGFjaEV2ZW50cygpLCBfdG9Db25zdW1hYmxlQXJyYXkodC5lbC5xdWVyeVNlbGVjdG9yQWxsKCdbbG9hZGluZz1cImxhenlcIl0nKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUuY29tcGxldGUgPyBBKHQsIGUpIDogZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgQSh0LCBlLnRhcmdldCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pLCBJKHQpLCB0LmluaXRpYWxpemVkID0gITAsIEkodCksIHQuZW1pdChcImluaXRcIiksIHQuZW1pdChcImFmdGVySW5pdFwiKSksIHQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KGUsIHQpIHtcbiAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gITApLCB2b2lkIDAgPT09IHQgJiYgKHQgPSAhMCk7XG4gICAgICAgIHZhciBzID0gdGhpcyxcbiAgICAgICAgICBhID0gcy5wYXJhbXMsXG4gICAgICAgICAgaSA9IHMuZWwsXG4gICAgICAgICAgciA9IHMud3JhcHBlckVsLFxuICAgICAgICAgIG4gPSBzLnNsaWRlcztcbiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gcy5wYXJhbXMgfHwgcy5kZXN0cm95ZWQgfHwgKHMuZW1pdChcImJlZm9yZURlc3Ryb3lcIiksIHMuaW5pdGlhbGl6ZWQgPSAhMSwgcy5kZXRhY2hFdmVudHMoKSwgYS5sb29wICYmIHMubG9vcERlc3Ryb3koKSwgdCAmJiAocy5yZW1vdmVDbGFzc2VzKCksIGkucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIiksIHIucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIiksIG4gJiYgbi5sZW5ndGggJiYgbi5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS5jbGFzc0xpc3QucmVtb3ZlKGEuc2xpZGVWaXNpYmxlQ2xhc3MsIGEuc2xpZGVBY3RpdmVDbGFzcywgYS5zbGlkZU5leHRDbGFzcywgYS5zbGlkZVByZXZDbGFzcyksIGUucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIiksIGUucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIik7XG4gICAgICAgIH0pKSwgcy5lbWl0KFwiZGVzdHJveVwiKSwgT2JqZWN0LmtleXMocy5ldmVudHNMaXN0ZW5lcnMpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBzLm9mZihlKTtcbiAgICAgICAgfSksICExICE9PSBlICYmIChzLmVsLnN3aXBlciA9IG51bGwsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdmFyIHQgPSBlO1xuICAgICAgICAgIE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHRbZV0gPSBudWxsO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGRlbGV0ZSB0W2VdO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICB9KTtcbiAgICAgICAgfShzKSksIHMuZGVzdHJveWVkID0gITApLCBudWxsO1xuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImV4dGVuZERlZmF1bHRzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZXh0ZW5kRGVmYXVsdHMoZSkge1xuICAgICAgICBwKFEsIGUpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJleHRlbmRlZERlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIFE7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIFU7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImluc3RhbGxNb2R1bGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbnN0YWxsTW9kdWxlKGUpIHtcbiAgICAgICAgSi5wcm90b3R5cGUuX19tb2R1bGVzX18gfHwgKEoucHJvdG90eXBlLl9fbW9kdWxlc19fID0gW10pO1xuICAgICAgICB2YXIgdCA9IEoucHJvdG90eXBlLl9fbW9kdWxlc19fO1xuICAgICAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUgJiYgdC5pbmRleE9mKGUpIDwgMCAmJiB0LnB1c2goZSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInVzZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVzZShlKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGUpID8gKGUuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBKLmluc3RhbGxNb2R1bGUoZSk7XG4gICAgICAgIH0pLCBKKSA6IChKLmluc3RhbGxNb2R1bGUoZSksIEopO1xuICAgICAgfVxuICAgIH1dKTtcbiAgICByZXR1cm4gSjtcbiAgfSgpO1xuICBmdW5jdGlvbiBlZShlLCB0LCBzLCBhKSB7XG4gICAgcmV0dXJuIGUucGFyYW1zLmNyZWF0ZUVsZW1lbnRzICYmIE9iamVjdC5rZXlzKGEpLmZvckVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgIGlmICghc1tpXSAmJiAhMCA9PT0gcy5hdXRvKSB7XG4gICAgICAgIHZhciBfcjcgPSBmKGUuZWwsIFwiLlwiLmNvbmNhdChhW2ldKSlbMF07XG4gICAgICAgIF9yNyB8fCAoX3I3ID0gZyhcImRpdlwiLCBhW2ldKSwgX3I3LmNsYXNzTmFtZSA9IGFbaV0sIGUuZWwuYXBwZW5kKF9yNykpLCBzW2ldID0gX3I3LCB0W2ldID0gX3I3O1xuICAgICAgfVxuICAgIH0pLCBzO1xuICB9XG4gIGZ1bmN0aW9uIHRlKGUpIHtcbiAgICByZXR1cm4gdm9pZCAwID09PSBlICYmIChlID0gXCJcIiksIFwiLlwiLmNvbmNhdChlLnRyaW0oKS5yZXBsYWNlKC8oW1xcLjohK1xcL10pL2csIFwiXFxcXCQxXCIpLnJlcGxhY2UoLyAvZywgXCIuXCIpKTtcbiAgfVxuICBmdW5jdGlvbiBzZShlKSB7XG4gICAgdmFyIHQgPSB0aGlzLFxuICAgICAgcyA9IHQucGFyYW1zLFxuICAgICAgYSA9IHQuc2xpZGVzRWw7XG4gICAgcy5sb29wICYmIHQubG9vcERlc3Ryb3koKTtcbiAgICB2YXIgaSA9IGZ1bmN0aW9uIGkoZSkge1xuICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHtcbiAgICAgICAgdmFyIF90MjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBfdDIzLmlubmVySFRNTCA9IGUsIGEuYXBwZW5kKF90MjMuY2hpbGRyZW5bMF0pLCBfdDIzLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICB9IGVsc2UgYS5hcHBlbmQoZSk7XG4gICAgfTtcbiAgICBpZiAoXCJvYmplY3RcIiA9PSBfdHlwZW9mKGUpICYmIFwibGVuZ3RoXCIgaW4gZSkgZm9yICh2YXIgX3QyNCA9IDA7IF90MjQgPCBlLmxlbmd0aDsgX3QyNCArPSAxKSBlW190MjRdICYmIGkoZVtfdDI0XSk7ZWxzZSBpKGUpO1xuICAgIHQucmVjYWxjU2xpZGVzKCksIHMubG9vcCAmJiB0Lmxvb3BDcmVhdGUoKSwgcy5vYnNlcnZlciAmJiAhdC5pc0VsZW1lbnQgfHwgdC51cGRhdGUoKTtcbiAgfVxuICBmdW5jdGlvbiBhZShlKSB7XG4gICAgdmFyIHQgPSB0aGlzLFxuICAgICAgcyA9IHQucGFyYW1zLFxuICAgICAgYSA9IHQuYWN0aXZlSW5kZXgsXG4gICAgICBpID0gdC5zbGlkZXNFbDtcbiAgICBzLmxvb3AgJiYgdC5sb29wRGVzdHJveSgpO1xuICAgIHZhciByID0gYSArIDE7XG4gICAgdmFyIG4gPSBmdW5jdGlvbiBuKGUpIHtcbiAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlKSB7XG4gICAgICAgIHZhciBfdDI1ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgX3QyNS5pbm5lckhUTUwgPSBlLCBpLnByZXBlbmQoX3QyNS5jaGlsZHJlblswXSksIF90MjUuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgIH0gZWxzZSBpLnByZXBlbmQoZSk7XG4gICAgfTtcbiAgICBpZiAoXCJvYmplY3RcIiA9PSBfdHlwZW9mKGUpICYmIFwibGVuZ3RoXCIgaW4gZSkge1xuICAgICAgZm9yICh2YXIgX3QyNiA9IDA7IF90MjYgPCBlLmxlbmd0aDsgX3QyNiArPSAxKSBlW190MjZdICYmIG4oZVtfdDI2XSk7XG4gICAgICByID0gYSArIGUubGVuZ3RoO1xuICAgIH0gZWxzZSBuKGUpO1xuICAgIHQucmVjYWxjU2xpZGVzKCksIHMubG9vcCAmJiB0Lmxvb3BDcmVhdGUoKSwgcy5vYnNlcnZlciAmJiAhdC5pc0VsZW1lbnQgfHwgdC51cGRhdGUoKSwgdC5zbGlkZVRvKHIsIDAsICExKTtcbiAgfVxuICBmdW5jdGlvbiBpZShlLCB0KSB7XG4gICAgdmFyIHMgPSB0aGlzLFxuICAgICAgYSA9IHMucGFyYW1zLFxuICAgICAgaSA9IHMuYWN0aXZlSW5kZXgsXG4gICAgICByID0gcy5zbGlkZXNFbDtcbiAgICB2YXIgbiA9IGk7XG4gICAgYS5sb29wICYmIChuIC09IHMubG9vcGVkU2xpZGVzLCBzLmxvb3BEZXN0cm95KCksIHMucmVjYWxjU2xpZGVzKCkpO1xuICAgIHZhciBsID0gcy5zbGlkZXMubGVuZ3RoO1xuICAgIGlmIChlIDw9IDApIHJldHVybiB2b2lkIHMucHJlcGVuZFNsaWRlKHQpO1xuICAgIGlmIChlID49IGwpIHJldHVybiB2b2lkIHMuYXBwZW5kU2xpZGUodCk7XG4gICAgdmFyIG8gPSBuID4gZSA/IG4gKyAxIDogbjtcbiAgICB2YXIgZCA9IFtdO1xuICAgIGZvciAodmFyIF90MjcgPSBsIC0gMTsgX3QyNyA+PSBlOyBfdDI3IC09IDEpIHtcbiAgICAgIHZhciBfZTMzID0gcy5zbGlkZXNbX3QyN107XG4gICAgICBfZTMzLnJlbW92ZSgpLCBkLnVuc2hpZnQoX2UzMyk7XG4gICAgfVxuICAgIGlmIChcIm9iamVjdFwiID09IF90eXBlb2YodCkgJiYgXCJsZW5ndGhcIiBpbiB0KSB7XG4gICAgICBmb3IgKHZhciBfZTM0ID0gMDsgX2UzNCA8IHQubGVuZ3RoOyBfZTM0ICs9IDEpIHRbX2UzNF0gJiYgci5hcHBlbmQodFtfZTM0XSk7XG4gICAgICBvID0gbiA+IGUgPyBuICsgdC5sZW5ndGggOiBuO1xuICAgIH0gZWxzZSByLmFwcGVuZCh0KTtcbiAgICBmb3IgKHZhciBfZTM1ID0gMDsgX2UzNSA8IGQubGVuZ3RoOyBfZTM1ICs9IDEpIHIuYXBwZW5kKGRbX2UzNV0pO1xuICAgIHMucmVjYWxjU2xpZGVzKCksIGEubG9vcCAmJiBzLmxvb3BDcmVhdGUoKSwgYS5vYnNlcnZlciAmJiAhcy5pc0VsZW1lbnQgfHwgcy51cGRhdGUoKSwgYS5sb29wID8gcy5zbGlkZVRvKG8gKyBzLmxvb3BlZFNsaWRlcywgMCwgITEpIDogcy5zbGlkZVRvKG8sIDAsICExKTtcbiAgfVxuICBmdW5jdGlvbiByZShlKSB7XG4gICAgdmFyIHQgPSB0aGlzLFxuICAgICAgcyA9IHQucGFyYW1zLFxuICAgICAgYSA9IHQuYWN0aXZlSW5kZXg7XG4gICAgdmFyIGkgPSBhO1xuICAgIHMubG9vcCAmJiAoaSAtPSB0Lmxvb3BlZFNsaWRlcywgdC5sb29wRGVzdHJveSgpKTtcbiAgICB2YXIgcixcbiAgICAgIG4gPSBpO1xuICAgIGlmIChcIm9iamVjdFwiID09IF90eXBlb2YoZSkgJiYgXCJsZW5ndGhcIiBpbiBlKSB7XG4gICAgICBmb3IgKHZhciBfczIwID0gMDsgX3MyMCA8IGUubGVuZ3RoOyBfczIwICs9IDEpIHIgPSBlW19zMjBdLCB0LnNsaWRlc1tyXSAmJiB0LnNsaWRlc1tyXS5yZW1vdmUoKSwgciA8IG4gJiYgKG4gLT0gMSk7XG4gICAgICBuID0gTWF0aC5tYXgobiwgMCk7XG4gICAgfSBlbHNlIHIgPSBlLCB0LnNsaWRlc1tyXSAmJiB0LnNsaWRlc1tyXS5yZW1vdmUoKSwgciA8IG4gJiYgKG4gLT0gMSksIG4gPSBNYXRoLm1heChuLCAwKTtcbiAgICB0LnJlY2FsY1NsaWRlcygpLCBzLmxvb3AgJiYgdC5sb29wQ3JlYXRlKCksIHMub2JzZXJ2ZXIgJiYgIXQuaXNFbGVtZW50IHx8IHQudXBkYXRlKCksIHMubG9vcCA/IHQuc2xpZGVUbyhuICsgdC5sb29wZWRTbGlkZXMsIDAsICExKSA6IHQuc2xpZGVUbyhuLCAwLCAhMSk7XG4gIH1cbiAgZnVuY3Rpb24gbmUoKSB7XG4gICAgdmFyIGUgPSB0aGlzLFxuICAgICAgdCA9IFtdO1xuICAgIGZvciAodmFyIF9zMjEgPSAwOyBfczIxIDwgZS5zbGlkZXMubGVuZ3RoOyBfczIxICs9IDEpIHQucHVzaChfczIxKTtcbiAgICBlLnJlbW92ZVNsaWRlKHQpO1xuICB9XG4gIGZ1bmN0aW9uIGxlKGUpIHtcbiAgICB2YXIgdCA9IGUuZWZmZWN0LFxuICAgICAgcyA9IGUuc3dpcGVyLFxuICAgICAgYSA9IGUub24sXG4gICAgICBpID0gZS5zZXRUcmFuc2xhdGUsXG4gICAgICByID0gZS5zZXRUcmFuc2l0aW9uLFxuICAgICAgbiA9IGUub3ZlcndyaXRlUGFyYW1zLFxuICAgICAgbCA9IGUucGVyc3BlY3RpdmUsXG4gICAgICBvID0gZS5yZWNyZWF0ZVNoYWRvd3MsXG4gICAgICBkID0gZS5nZXRFZmZlY3RQYXJhbXM7XG4gICAgdmFyIGM7XG4gICAgYShcImJlZm9yZUluaXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHMucGFyYW1zLmVmZmVjdCAhPT0gdCkgcmV0dXJuO1xuICAgICAgcy5jbGFzc05hbWVzLnB1c2goXCJcIi5jb25jYXQocy5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzcykuY29uY2F0KHQpKSwgbCAmJiBsKCkgJiYgcy5jbGFzc05hbWVzLnB1c2goXCJcIi5jb25jYXQocy5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzcywgXCIzZFwiKSk7XG4gICAgICB2YXIgZSA9IG4gPyBuKCkgOiB7fTtcbiAgICAgIE9iamVjdC5hc3NpZ24ocy5wYXJhbXMsIGUpLCBPYmplY3QuYXNzaWduKHMub3JpZ2luYWxQYXJhbXMsIGUpO1xuICAgIH0pLCBhKFwic2V0VHJhbnNsYXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHMucGFyYW1zLmVmZmVjdCA9PT0gdCAmJiBpKCk7XG4gICAgfSksIGEoXCJzZXRUcmFuc2l0aW9uXCIsIGZ1bmN0aW9uIChlLCBhKSB7XG4gICAgICBzLnBhcmFtcy5lZmZlY3QgPT09IHQgJiYgcihhKTtcbiAgICB9KSwgYShcInRyYW5zaXRpb25FbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHMucGFyYW1zLmVmZmVjdCA9PT0gdCAmJiBvKSB7XG4gICAgICAgIGlmICghZCB8fCAhZCgpLnNsaWRlU2hhZG93cykgcmV0dXJuO1xuICAgICAgICBzLnNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS5xdWVyeVNlbGVjdG9yQWxsKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wLCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tLCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0XCIpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnJlbW92ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KSwgbygpO1xuICAgICAgfVxuICAgIH0pLCBhKFwidmlydHVhbFVwZGF0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzLnBhcmFtcy5lZmZlY3QgPT09IHQgJiYgKHMuc2xpZGVzLmxlbmd0aCB8fCAoYyA9ICEwKSwgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYyAmJiBzLnNsaWRlcyAmJiBzLnNsaWRlcy5sZW5ndGggJiYgKGkoKSwgYyA9ICExKTtcbiAgICAgIH0pKTtcbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBvZShlLCB0KSB7XG4gICAgdmFyIHMgPSBoKHQpO1xuICAgIHJldHVybiBzICE9PSB0ICYmIChzLnN0eWxlLmJhY2tmYWNlVmlzaWJpbGl0eSA9IFwiaGlkZGVuXCIsIHMuc3R5bGVbXCItd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHlcIl0gPSBcImhpZGRlblwiKSwgcztcbiAgfVxuICBmdW5jdGlvbiBkZShlKSB7XG4gICAgdmFyIHQgPSBlLnN3aXBlcixcbiAgICAgIHMgPSBlLmR1cmF0aW9uLFxuICAgICAgYSA9IGUudHJhbnNmb3JtRWxlbWVudHMsXG4gICAgICBpID0gZS5hbGxTbGlkZXM7XG4gICAgdmFyIHIgPSB0LmFjdGl2ZUluZGV4O1xuICAgIGlmICh0LnBhcmFtcy52aXJ0dWFsVHJhbnNsYXRlICYmIDAgIT09IHMpIHtcbiAgICAgIHZhciBfZTM2LFxuICAgICAgICBfczIyID0gITE7XG4gICAgICBfZTM2ID0gaSA/IGEgOiBhLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgcyA9IGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwic3dpcGVyLXNsaWRlLXRyYW5zZm9ybVwiKSA/IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgaWYgKCFlLnBhcmVudEVsZW1lbnQpIHJldHVybiB0LnNsaWRlcy5maWx0ZXIoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0LnNoYWRvd0VsICYmIHQuc2hhZG93RWwgPT09IGUucGFyZW50Tm9kZTtcbiAgICAgICAgICB9KVswXTtcbiAgICAgICAgICByZXR1cm4gZS5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9KGUpIDogZTtcbiAgICAgICAgcmV0dXJuIHQuZ2V0U2xpZGVJbmRleChzKSA9PT0gcjtcbiAgICAgIH0pLCBfZTM2LmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgRShlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKF9zMjIpIHJldHVybjtcbiAgICAgICAgICBpZiAoIXQgfHwgdC5kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgICAgICBfczIyID0gITAsIHQuYW5pbWF0aW5nID0gITE7XG4gICAgICAgICAgdmFyIGUgPSBuZXcgd2luZG93LkN1c3RvbUV2ZW50KFwidHJhbnNpdGlvbmVuZFwiLCB7XG4gICAgICAgICAgICBidWJibGVzOiAhMCxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6ICEwXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdC53cmFwcGVyRWwuZGlzcGF0Y2hFdmVudChlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gY2UoZSwgdCwgcykge1xuICAgIHZhciBhID0gXCJzd2lwZXItc2xpZGUtc2hhZG93XCIgKyAocyA/IFwiLVwiLmNvbmNhdChzKSA6IFwiXCIpLFxuICAgICAgaSA9IGgodCk7XG4gICAgdmFyIHIgPSBpLnF1ZXJ5U2VsZWN0b3IoXCIuXCIuY29uY2F0KGEpKTtcbiAgICByZXR1cm4gciB8fCAociA9IGcoXCJkaXZcIiwgXCJzd2lwZXItc2xpZGUtc2hhZG93XCIgKyAocyA/IFwiLVwiLmNvbmNhdChzKSA6IFwiXCIpKSwgaS5hcHBlbmQocikpLCByO1xuICB9XG4gIE9iamVjdC5rZXlzKFopLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICBPYmplY3Qua2V5cyhaW2VdKS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICBKLnByb3RvdHlwZVt0XSA9IFpbZV1bdF07XG4gICAgfSk7XG4gIH0pLCBKLnVzZShbZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUub24sXG4gICAgICBhID0gZS5lbWl0O1xuICAgIHZhciBpID0gcigpO1xuICAgIHZhciBuID0gbnVsbCxcbiAgICAgIGwgPSBudWxsO1xuICAgIHZhciBvID0gZnVuY3Rpb24gbygpIHtcbiAgICAgICAgdCAmJiAhdC5kZXN0cm95ZWQgJiYgdC5pbml0aWFsaXplZCAmJiAoYShcImJlZm9yZVJlc2l6ZVwiKSwgYShcInJlc2l6ZVwiKSk7XG4gICAgICB9LFxuICAgICAgZCA9IGZ1bmN0aW9uIGQoKSB7XG4gICAgICAgIHQgJiYgIXQuZGVzdHJveWVkICYmIHQuaW5pdGlhbGl6ZWQgJiYgYShcIm9yaWVudGF0aW9uY2hhbmdlXCIpO1xuICAgICAgfTtcbiAgICBzKFwiaW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0LnBhcmFtcy5yZXNpemVPYnNlcnZlciAmJiB2b2lkIDAgIT09IGkuUmVzaXplT2JzZXJ2ZXIgPyB0ICYmICF0LmRlc3Ryb3llZCAmJiB0LmluaXRpYWxpemVkICYmIChuID0gbmV3IFJlc2l6ZU9ic2VydmVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGwgPSBpLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHMgPSB0LndpZHRoLFxuICAgICAgICAgICAgYSA9IHQuaGVpZ2h0O1xuICAgICAgICAgIHZhciBpID0gcyxcbiAgICAgICAgICAgIHIgPSBhO1xuICAgICAgICAgIGUuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHMgPSBlLmNvbnRlbnRCb3hTaXplLFxuICAgICAgICAgICAgICBhID0gZS5jb250ZW50UmVjdCxcbiAgICAgICAgICAgICAgbiA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgbiAmJiBuICE9PSB0LmVsIHx8IChpID0gYSA/IGEud2lkdGggOiAoc1swXSB8fCBzKS5pbmxpbmVTaXplLCByID0gYSA/IGEuaGVpZ2h0IDogKHNbMF0gfHwgcykuYmxvY2tTaXplKTtcbiAgICAgICAgICB9KSwgaSA9PT0gcyAmJiByID09PSBhIHx8IG8oKTtcbiAgICAgICAgfSk7XG4gICAgICB9KSwgbi5vYnNlcnZlKHQuZWwpKSA6IChpLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgbyksIGkuYWRkRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsIGQpKTtcbiAgICB9KSwgcyhcImRlc3Ryb3lcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgbCAmJiBpLmNhbmNlbEFuaW1hdGlvbkZyYW1lKGwpLCBuICYmIG4udW5vYnNlcnZlICYmIHQuZWwgJiYgKG4udW5vYnNlcnZlKHQuZWwpLCBuID0gbnVsbCksIGkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvKSwgaS5yZW1vdmVFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgZCk7XG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQgPSBlLnN3aXBlcixcbiAgICAgIHMgPSBlLmV4dGVuZFBhcmFtcyxcbiAgICAgIGEgPSBlLm9uLFxuICAgICAgaSA9IGUuZW1pdDtcbiAgICB2YXIgbiA9IFtdLFxuICAgICAgbCA9IHIoKSxcbiAgICAgIG8gPSBmdW5jdGlvbiBvKGUsIHMpIHtcbiAgICAgICAgdm9pZCAwID09PSBzICYmIChzID0ge30pO1xuICAgICAgICB2YXIgYSA9IG5ldyAobC5NdXRhdGlvbk9ic2VydmVyIHx8IGwuV2Via2l0TXV0YXRpb25PYnNlcnZlcikoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBpZiAodC5fX3ByZXZlbnRPYnNlcnZlcl9fKSByZXR1cm47XG4gICAgICAgICAgaWYgKDEgPT09IGUubGVuZ3RoKSByZXR1cm4gdm9pZCBpKFwib2JzZXJ2ZXJVcGRhdGVcIiwgZVswXSk7XG4gICAgICAgICAgdmFyIHMgPSBmdW5jdGlvbiBzKCkge1xuICAgICAgICAgICAgaShcIm9ic2VydmVyVXBkYXRlXCIsIGVbMF0pO1xuICAgICAgICAgIH07XG4gICAgICAgICAgbC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPyBsLnJlcXVlc3RBbmltYXRpb25GcmFtZShzKSA6IGwuc2V0VGltZW91dChzLCAwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGEub2JzZXJ2ZShlLCB7XG4gICAgICAgICAgYXR0cmlidXRlczogdm9pZCAwID09PSBzLmF0dHJpYnV0ZXMgfHwgcy5hdHRyaWJ1dGVzLFxuICAgICAgICAgIGNoaWxkTGlzdDogdm9pZCAwID09PSBzLmNoaWxkTGlzdCB8fCBzLmNoaWxkTGlzdCxcbiAgICAgICAgICBjaGFyYWN0ZXJEYXRhOiB2b2lkIDAgPT09IHMuY2hhcmFjdGVyRGF0YSB8fCBzLmNoYXJhY3RlckRhdGFcbiAgICAgICAgfSksIG4ucHVzaChhKTtcbiAgICAgIH07XG4gICAgcyh7XG4gICAgICBvYnNlcnZlcjogITEsXG4gICAgICBvYnNlcnZlUGFyZW50czogITEsXG4gICAgICBvYnNlcnZlU2xpZGVDaGlsZHJlbjogITFcbiAgICB9KSwgYShcImluaXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHQucGFyYW1zLm9ic2VydmVyKSB7XG4gICAgICAgIGlmICh0LnBhcmFtcy5vYnNlcnZlUGFyZW50cykge1xuICAgICAgICAgIHZhciBfZTM3ID0geSh0LmVsKTtcbiAgICAgICAgICBmb3IgKHZhciBfdDI4ID0gMDsgX3QyOCA8IF9lMzcubGVuZ3RoOyBfdDI4ICs9IDEpIG8oX2UzN1tfdDI4XSk7XG4gICAgICAgIH1cbiAgICAgICAgbyh0LmVsLCB7XG4gICAgICAgICAgY2hpbGRMaXN0OiB0LnBhcmFtcy5vYnNlcnZlU2xpZGVDaGlsZHJlblxuICAgICAgICB9KSwgbyh0LndyYXBwZXJFbCwge1xuICAgICAgICAgIGF0dHJpYnV0ZXM6ICExXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLCBhKFwiZGVzdHJveVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBuLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5kaXNjb25uZWN0KCk7XG4gICAgICB9KSwgbi5zcGxpY2UoMCwgbi5sZW5ndGgpO1xuICAgIH0pO1xuICB9XSk7XG4gIHZhciBwZSA9IFtmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0LFxuICAgICAgcyA9IGUuc3dpcGVyLFxuICAgICAgaSA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgciA9IGUub24sXG4gICAgICBuID0gZS5lbWl0O1xuICAgIGkoe1xuICAgICAgdmlydHVhbDoge1xuICAgICAgICBlbmFibGVkOiAhMSxcbiAgICAgICAgc2xpZGVzOiBbXSxcbiAgICAgICAgY2FjaGU6ICEwLFxuICAgICAgICByZW5kZXJTbGlkZTogbnVsbCxcbiAgICAgICAgcmVuZGVyRXh0ZXJuYWw6IG51bGwsXG4gICAgICAgIHJlbmRlckV4dGVybmFsVXBkYXRlOiAhMCxcbiAgICAgICAgYWRkU2xpZGVzQmVmb3JlOiAwLFxuICAgICAgICBhZGRTbGlkZXNBZnRlcjogMFxuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBsID0gYSgpO1xuICAgIHMudmlydHVhbCA9IHtcbiAgICAgIGNhY2hlOiB7fSxcbiAgICAgIGZyb206IHZvaWQgMCxcbiAgICAgIHRvOiB2b2lkIDAsXG4gICAgICBzbGlkZXM6IFtdLFxuICAgICAgb2Zmc2V0OiAwLFxuICAgICAgc2xpZGVzR3JpZDogW11cbiAgICB9O1xuICAgIHZhciBvID0gbC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGZ1bmN0aW9uIGQoZSwgdCkge1xuICAgICAgdmFyIGEgPSBzLnBhcmFtcy52aXJ0dWFsO1xuICAgICAgaWYgKGEuY2FjaGUgJiYgcy52aXJ0dWFsLmNhY2hlW3RdKSByZXR1cm4gcy52aXJ0dWFsLmNhY2hlW3RdO1xuICAgICAgdmFyIGk7XG4gICAgICByZXR1cm4gYS5yZW5kZXJTbGlkZSA/IChpID0gYS5yZW5kZXJTbGlkZS5jYWxsKHMsIGUsIHQpLCBcInN0cmluZ1wiID09IHR5cGVvZiBpICYmIChvLmlubmVySFRNTCA9IGksIGkgPSBvLmNoaWxkcmVuWzBdKSkgOiBpID0gcy5pc0VsZW1lbnQgPyBnKFwic3dpcGVyLXNsaWRlXCIpIDogZyhcImRpdlwiLCBzLnBhcmFtcy5zbGlkZUNsYXNzKSwgaS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiLCB0KSwgYS5yZW5kZXJTbGlkZSB8fCAoaS5pbm5lckhUTUwgPSBlKSwgYS5jYWNoZSAmJiAocy52aXJ0dWFsLmNhY2hlW3RdID0gaSksIGk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGMoZSkge1xuICAgICAgdmFyIF9zJHBhcmFtcyA9IHMucGFyYW1zLFxuICAgICAgICB0ID0gX3MkcGFyYW1zLnNsaWRlc1BlclZpZXcsXG4gICAgICAgIGEgPSBfcyRwYXJhbXMuc2xpZGVzUGVyR3JvdXAsXG4gICAgICAgIGkgPSBfcyRwYXJhbXMuY2VudGVyZWRTbGlkZXMsXG4gICAgICAgIHIgPSBfcyRwYXJhbXMubG9vcCxcbiAgICAgICAgX3MkcGFyYW1zJHZpcnR1YWwgPSBzLnBhcmFtcy52aXJ0dWFsLFxuICAgICAgICBsID0gX3MkcGFyYW1zJHZpcnR1YWwuYWRkU2xpZGVzQmVmb3JlLFxuICAgICAgICBvID0gX3MkcGFyYW1zJHZpcnR1YWwuYWRkU2xpZGVzQWZ0ZXIsXG4gICAgICAgIF9zJHZpcnR1YWwgPSBzLnZpcnR1YWwsXG4gICAgICAgIGMgPSBfcyR2aXJ0dWFsLmZyb20sXG4gICAgICAgIHAgPSBfcyR2aXJ0dWFsLnRvLFxuICAgICAgICB1ID0gX3MkdmlydHVhbC5zbGlkZXMsXG4gICAgICAgIG0gPSBfcyR2aXJ0dWFsLnNsaWRlc0dyaWQsXG4gICAgICAgIGggPSBfcyR2aXJ0dWFsLm9mZnNldDtcbiAgICAgIHMucGFyYW1zLmNzc01vZGUgfHwgcy51cGRhdGVBY3RpdmVJbmRleCgpO1xuICAgICAgdmFyIGcgPSBzLmFjdGl2ZUluZGV4IHx8IDA7XG4gICAgICB2YXIgdiwgdywgYjtcbiAgICAgIHYgPSBzLnJ0bFRyYW5zbGF0ZSA/IFwicmlnaHRcIiA6IHMuaXNIb3Jpem9udGFsKCkgPyBcImxlZnRcIiA6IFwidG9wXCIsIGkgPyAodyA9IE1hdGguZmxvb3IodCAvIDIpICsgYSArIG8sIGIgPSBNYXRoLmZsb29yKHQgLyAyKSArIGEgKyBsKSA6ICh3ID0gdCArIChhIC0gMSkgKyBvLCBiID0gKHIgPyB0IDogYSkgKyBsKTtcbiAgICAgIHZhciB5ID0gZyAtIGIsXG4gICAgICAgIEUgPSBnICsgdztcbiAgICAgIHIgfHwgKHkgPSBNYXRoLm1heCh5LCAwKSwgRSA9IE1hdGgubWluKEUsIHUubGVuZ3RoIC0gMSkpO1xuICAgICAgdmFyIHggPSAocy5zbGlkZXNHcmlkW3ldIHx8IDApIC0gKHMuc2xpZGVzR3JpZFswXSB8fCAwKTtcbiAgICAgIGZ1bmN0aW9uIFMoKSB7XG4gICAgICAgIHMudXBkYXRlU2xpZGVzKCksIHMudXBkYXRlUHJvZ3Jlc3MoKSwgcy51cGRhdGVTbGlkZXNDbGFzc2VzKCksIG4oXCJ2aXJ0dWFsVXBkYXRlXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHIgJiYgZyA+PSBiID8gKHkgLT0gYiwgaSB8fCAoeCArPSBzLnNsaWRlc0dyaWRbMF0pKSA6IHIgJiYgZyA8IGIgJiYgKHkgPSAtYiwgaSAmJiAoeCArPSBzLnNsaWRlc0dyaWRbMF0pKSwgT2JqZWN0LmFzc2lnbihzLnZpcnR1YWwsIHtcbiAgICAgICAgZnJvbTogeSxcbiAgICAgICAgdG86IEUsXG4gICAgICAgIG9mZnNldDogeCxcbiAgICAgICAgc2xpZGVzR3JpZDogcy5zbGlkZXNHcmlkLFxuICAgICAgICBzbGlkZXNCZWZvcmU6IGIsXG4gICAgICAgIHNsaWRlc0FmdGVyOiB3XG4gICAgICB9KSwgYyA9PT0geSAmJiBwID09PSBFICYmICFlKSByZXR1cm4gcy5zbGlkZXNHcmlkICE9PSBtICYmIHggIT09IGggJiYgcy5zbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnN0eWxlW3ZdID0geCAtIE1hdGguYWJzKHMuY3NzT3ZlcmZsb3dBZGp1c3RtZW50KCkpICsgXCJweFwiO1xuICAgICAgfSksIHMudXBkYXRlUHJvZ3Jlc3MoKSwgdm9pZCBuKFwidmlydHVhbFVwZGF0ZVwiKTtcbiAgICAgIGlmIChzLnBhcmFtcy52aXJ0dWFsLnJlbmRlckV4dGVybmFsKSByZXR1cm4gcy5wYXJhbXMudmlydHVhbC5yZW5kZXJFeHRlcm5hbC5jYWxsKHMsIHtcbiAgICAgICAgb2Zmc2V0OiB4LFxuICAgICAgICBmcm9tOiB5LFxuICAgICAgICB0bzogRSxcbiAgICAgICAgc2xpZGVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGUgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBfdDI5ID0geTsgX3QyOSA8PSBFOyBfdDI5ICs9IDEpIGUucHVzaCh1W190MjldKTtcbiAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfSgpXG4gICAgICB9KSwgdm9pZCAocy5wYXJhbXMudmlydHVhbC5yZW5kZXJFeHRlcm5hbFVwZGF0ZSA/IFMoKSA6IG4oXCJ2aXJ0dWFsVXBkYXRlXCIpKTtcbiAgICAgIHZhciBUID0gW10sXG4gICAgICAgIE0gPSBbXSxcbiAgICAgICAgQyA9IGZ1bmN0aW9uIEMoZSkge1xuICAgICAgICAgIHZhciB0ID0gZTtcbiAgICAgICAgICByZXR1cm4gZSA8IDAgPyB0ID0gdS5sZW5ndGggKyBlIDogdCA+PSB1Lmxlbmd0aCAmJiAodCAtPSB1Lmxlbmd0aCksIHQ7XG4gICAgICAgIH07XG4gICAgICBpZiAoZSkgcy5zbGlkZXNFbC5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiLmNvbmNhdChzLnBhcmFtcy5zbGlkZUNsYXNzLCBcIiwgc3dpcGVyLXNsaWRlXCIpKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucmVtb3ZlKCk7XG4gICAgICB9KTtlbHNlIGZvciAodmFyIF9lMzggPSBjOyBfZTM4IDw9IHA7IF9lMzggKz0gMSkgaWYgKF9lMzggPCB5IHx8IF9lMzggPiBFKSB7XG4gICAgICAgIHZhciBfdDMwID0gQyhfZTM4KTtcbiAgICAgICAgcy5zbGlkZXNFbC5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiLmNvbmNhdChzLnBhcmFtcy5zbGlkZUNsYXNzLCBcIltkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cXFwiXCIpLmNvbmNhdChfdDMwLCBcIlxcXCJdLCBzd2lwZXItc2xpZGVbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XFxcIlwiKS5jb25jYXQoX3QzMCwgXCJcXFwiXVwiKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdmFyIFAgPSByID8gLXUubGVuZ3RoIDogMCxcbiAgICAgICAgTCA9IHIgPyAyICogdS5sZW5ndGggOiB1Lmxlbmd0aDtcbiAgICAgIGZvciAodmFyIF90MzEgPSBQOyBfdDMxIDwgTDsgX3QzMSArPSAxKSBpZiAoX3QzMSA+PSB5ICYmIF90MzEgPD0gRSkge1xuICAgICAgICB2YXIgX3MyMyA9IEMoX3QzMSk7XG4gICAgICAgIHZvaWQgMCA9PT0gcCB8fCBlID8gTS5wdXNoKF9zMjMpIDogKF90MzEgPiBwICYmIE0ucHVzaChfczIzKSwgX3QzMSA8IGMgJiYgVC5wdXNoKF9zMjMpKTtcbiAgICAgIH1cbiAgICAgIGlmIChNLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcy5zbGlkZXNFbC5hcHBlbmQoZCh1W2VdLCBlKSk7XG4gICAgICB9KSwgcikgZm9yICh2YXIgX2UzOSA9IFQubGVuZ3RoIC0gMTsgX2UzOSA+PSAwOyBfZTM5IC09IDEpIHtcbiAgICAgICAgdmFyIF90MzIgPSBUW19lMzldO1xuICAgICAgICBzLnNsaWRlc0VsLnByZXBlbmQoZCh1W190MzJdLCBfdDMyKSk7XG4gICAgICB9IGVsc2UgVC5zb3J0KGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0IC0gZTtcbiAgICAgIH0pLCBULmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcy5zbGlkZXNFbC5wcmVwZW5kKGQodVtlXSwgZSkpO1xuICAgICAgfSk7XG4gICAgICBmKHMuc2xpZGVzRWwsIFwiLnN3aXBlci1zbGlkZSwgc3dpcGVyLXNsaWRlXCIpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5zdHlsZVt2XSA9IHggLSBNYXRoLmFicyhzLmNzc092ZXJmbG93QWRqdXN0bWVudCgpKSArIFwicHhcIjtcbiAgICAgIH0pLCBTKCk7XG4gICAgfVxuICAgIHIoXCJiZWZvcmVJbml0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghcy5wYXJhbXMudmlydHVhbC5lbmFibGVkKSByZXR1cm47XG4gICAgICB2YXIgZTtcbiAgICAgIGlmICh2b2lkIDAgPT09IHMucGFzc2VkUGFyYW1zLnZpcnR1YWwuc2xpZGVzKSB7XG4gICAgICAgIHZhciBfdDMzID0gX3RvQ29uc3VtYWJsZUFycmF5KHMuc2xpZGVzRWwuY2hpbGRyZW4pLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBlLm1hdGNoZXMoXCIuXCIuY29uY2F0KHMucGFyYW1zLnNsaWRlQ2xhc3MsIFwiLCBzd2lwZXItc2xpZGVcIikpO1xuICAgICAgICB9KTtcbiAgICAgICAgX3QzMyAmJiBfdDMzLmxlbmd0aCAmJiAocy52aXJ0dWFsLnNsaWRlcyA9IF90b0NvbnN1bWFibGVBcnJheShfdDMzKSwgZSA9ICEwLCBfdDMzLmZvckVhY2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICBlLnNldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIsIHQpLCBzLnZpcnR1YWwuY2FjaGVbdF0gPSBlLCBlLnJlbW92ZSgpO1xuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgICBlIHx8IChzLnZpcnR1YWwuc2xpZGVzID0gcy5wYXJhbXMudmlydHVhbC5zbGlkZXMpLCBzLmNsYXNzTmFtZXMucHVzaChcIlwiLmNvbmNhdChzLnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzLCBcInZpcnR1YWxcIikpLCBzLnBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzID0gITAsIHMub3JpZ2luYWxQYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcyA9ICEwLCBzLnBhcmFtcy5pbml0aWFsU2xpZGUgfHwgYygpO1xuICAgIH0pLCByKFwic2V0VHJhbnNsYXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHMucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCAmJiAocy5wYXJhbXMuY3NzTW9kZSAmJiAhcy5faW1tZWRpYXRlVmlydHVhbCA/IChjbGVhclRpbWVvdXQodCksIHQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYygpO1xuICAgICAgfSwgMTAwKSkgOiBjKCkpO1xuICAgIH0pLCByKFwiaW5pdCB1cGRhdGUgcmVzaXplXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHMucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCAmJiBzLnBhcmFtcy5jc3NNb2RlICYmIHUocy53cmFwcGVyRWwsIFwiLS1zd2lwZXItdmlydHVhbC1zaXplXCIsIFwiXCIuY29uY2F0KHMudmlydHVhbFNpemUsIFwicHhcIikpO1xuICAgIH0pLCBPYmplY3QuYXNzaWduKHMudmlydHVhbCwge1xuICAgICAgYXBwZW5kU2xpZGU6IGZ1bmN0aW9uIGFwcGVuZFNsaWRlKGUpIHtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgPT0gX3R5cGVvZihlKSAmJiBcImxlbmd0aFwiIGluIGUpIGZvciAodmFyIF90MzQgPSAwOyBfdDM0IDwgZS5sZW5ndGg7IF90MzQgKz0gMSkgZVtfdDM0XSAmJiBzLnZpcnR1YWwuc2xpZGVzLnB1c2goZVtfdDM0XSk7ZWxzZSBzLnZpcnR1YWwuc2xpZGVzLnB1c2goZSk7XG4gICAgICAgIGMoITApO1xuICAgICAgfSxcbiAgICAgIHByZXBlbmRTbGlkZTogZnVuY3Rpb24gcHJlcGVuZFNsaWRlKGUpIHtcbiAgICAgICAgdmFyIHQgPSBzLmFjdGl2ZUluZGV4O1xuICAgICAgICB2YXIgYSA9IHQgKyAxLFxuICAgICAgICAgIGkgPSAxO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkge1xuICAgICAgICAgIGZvciAodmFyIF90MzUgPSAwOyBfdDM1IDwgZS5sZW5ndGg7IF90MzUgKz0gMSkgZVtfdDM1XSAmJiBzLnZpcnR1YWwuc2xpZGVzLnVuc2hpZnQoZVtfdDM1XSk7XG4gICAgICAgICAgYSA9IHQgKyBlLmxlbmd0aCwgaSA9IGUubGVuZ3RoO1xuICAgICAgICB9IGVsc2Ugcy52aXJ0dWFsLnNsaWRlcy51bnNoaWZ0KGUpO1xuICAgICAgICBpZiAocy5wYXJhbXMudmlydHVhbC5jYWNoZSkge1xuICAgICAgICAgIHZhciBfZTQwID0gcy52aXJ0dWFsLmNhY2hlLFxuICAgICAgICAgICAgX3QzNiA9IHt9O1xuICAgICAgICAgIE9iamVjdC5rZXlzKF9lNDApLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgIHZhciBhID0gX2U0MFtzXSxcbiAgICAgICAgICAgICAgciA9IGEuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIik7XG4gICAgICAgICAgICByICYmIGEuc2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIiwgcGFyc2VJbnQociwgMTApICsgaSksIF90MzZbcGFyc2VJbnQocywgMTApICsgaV0gPSBhO1xuICAgICAgICAgIH0pLCBzLnZpcnR1YWwuY2FjaGUgPSBfdDM2O1xuICAgICAgICB9XG4gICAgICAgIGMoITApLCBzLnNsaWRlVG8oYSwgMCk7XG4gICAgICB9LFxuICAgICAgcmVtb3ZlU2xpZGU6IGZ1bmN0aW9uIHJlbW92ZVNsaWRlKGUpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuO1xuICAgICAgICB2YXIgdCA9IHMuYWN0aXZlSW5kZXg7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSBmb3IgKHZhciBfYTEyID0gZS5sZW5ndGggLSAxOyBfYTEyID49IDA7IF9hMTIgLT0gMSkgcy52aXJ0dWFsLnNsaWRlcy5zcGxpY2UoZVtfYTEyXSwgMSksIHMucGFyYW1zLnZpcnR1YWwuY2FjaGUgJiYgZGVsZXRlIHMudmlydHVhbC5jYWNoZVtlW19hMTJdXSwgZVtfYTEyXSA8IHQgJiYgKHQgLT0gMSksIHQgPSBNYXRoLm1heCh0LCAwKTtlbHNlIHMudmlydHVhbC5zbGlkZXMuc3BsaWNlKGUsIDEpLCBzLnBhcmFtcy52aXJ0dWFsLmNhY2hlICYmIGRlbGV0ZSBzLnZpcnR1YWwuY2FjaGVbZV0sIGUgPCB0ICYmICh0IC09IDEpLCB0ID0gTWF0aC5tYXgodCwgMCk7XG4gICAgICAgIGMoITApLCBzLnNsaWRlVG8odCwgMCk7XG4gICAgICB9LFxuICAgICAgcmVtb3ZlQWxsU2xpZGVzOiBmdW5jdGlvbiByZW1vdmVBbGxTbGlkZXMoKSB7XG4gICAgICAgIHMudmlydHVhbC5zbGlkZXMgPSBbXSwgcy5wYXJhbXMudmlydHVhbC5jYWNoZSAmJiAocy52aXJ0dWFsLmNhY2hlID0ge30pLCBjKCEwKSwgcy5zbGlkZVRvKDAsIDApO1xuICAgICAgfSxcbiAgICAgIHVwZGF0ZTogY1xuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICBpID0gZS5vbixcbiAgICAgIG4gPSBlLmVtaXQ7XG4gICAgdmFyIGwgPSBhKCksXG4gICAgICBvID0gcigpO1xuICAgIGZ1bmN0aW9uIGQoZSkge1xuICAgICAgaWYgKCF0LmVuYWJsZWQpIHJldHVybjtcbiAgICAgIHZhciBzID0gdC5ydGxUcmFuc2xhdGU7XG4gICAgICB2YXIgYSA9IGU7XG4gICAgICBhLm9yaWdpbmFsRXZlbnQgJiYgKGEgPSBhLm9yaWdpbmFsRXZlbnQpO1xuICAgICAgdmFyIGkgPSBhLmtleUNvZGUgfHwgYS5jaGFyQ29kZSxcbiAgICAgICAgciA9IHQucGFyYW1zLmtleWJvYXJkLnBhZ2VVcERvd24sXG4gICAgICAgIGQgPSByICYmIDMzID09PSBpLFxuICAgICAgICBjID0gciAmJiAzNCA9PT0gaSxcbiAgICAgICAgcCA9IDM3ID09PSBpLFxuICAgICAgICB1ID0gMzkgPT09IGksXG4gICAgICAgIG0gPSAzOCA9PT0gaSxcbiAgICAgICAgaCA9IDQwID09PSBpO1xuICAgICAgaWYgKCF0LmFsbG93U2xpZGVOZXh0ICYmICh0LmlzSG9yaXpvbnRhbCgpICYmIHUgfHwgdC5pc1ZlcnRpY2FsKCkgJiYgaCB8fCBjKSkgcmV0dXJuICExO1xuICAgICAgaWYgKCF0LmFsbG93U2xpZGVQcmV2ICYmICh0LmlzSG9yaXpvbnRhbCgpICYmIHAgfHwgdC5pc1ZlcnRpY2FsKCkgJiYgbSB8fCBkKSkgcmV0dXJuICExO1xuICAgICAgaWYgKCEoYS5zaGlmdEtleSB8fCBhLmFsdEtleSB8fCBhLmN0cmxLZXkgfHwgYS5tZXRhS2V5IHx8IGwuYWN0aXZlRWxlbWVudCAmJiBsLmFjdGl2ZUVsZW1lbnQubm9kZU5hbWUgJiYgKFwiaW5wdXRcIiA9PT0gbC5hY3RpdmVFbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgfHwgXCJ0ZXh0YXJlYVwiID09PSBsLmFjdGl2ZUVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkpKSB7XG4gICAgICAgIGlmICh0LnBhcmFtcy5rZXlib2FyZC5vbmx5SW5WaWV3cG9ydCAmJiAoZCB8fCBjIHx8IHAgfHwgdSB8fCBtIHx8IGgpKSB7XG4gICAgICAgICAgdmFyIF9lNDEgPSAhMTtcbiAgICAgICAgICBpZiAoeSh0LmVsLCBcIi5cIi5jb25jYXQodC5wYXJhbXMuc2xpZGVDbGFzcywgXCIsIHN3aXBlci1zbGlkZVwiKSkubGVuZ3RoID4gMCAmJiAwID09PSB5KHQuZWwsIFwiLlwiLmNvbmNhdCh0LnBhcmFtcy5zbGlkZUFjdGl2ZUNsYXNzKSkubGVuZ3RoKSByZXR1cm47XG4gICAgICAgICAgdmFyIF9hMTMgPSB0LmVsLFxuICAgICAgICAgICAgX2kxMSA9IF9hMTMuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICBfcjggPSBfYTEzLmNsaWVudEhlaWdodCxcbiAgICAgICAgICAgIF9uNSA9IG8uaW5uZXJXaWR0aCxcbiAgICAgICAgICAgIF9sNCA9IG8uaW5uZXJIZWlnaHQsXG4gICAgICAgICAgICBfZDIgPSB2KF9hMTMpO1xuICAgICAgICAgIHMgJiYgKF9kMi5sZWZ0IC09IF9hMTMuc2Nyb2xsTGVmdCk7XG4gICAgICAgICAgdmFyIF9jMiA9IFtbX2QyLmxlZnQsIF9kMi50b3BdLCBbX2QyLmxlZnQgKyBfaTExLCBfZDIudG9wXSwgW19kMi5sZWZ0LCBfZDIudG9wICsgX3I4XSwgW19kMi5sZWZ0ICsgX2kxMSwgX2QyLnRvcCArIF9yOF1dO1xuICAgICAgICAgIGZvciAodmFyIF90MzcgPSAwOyBfdDM3IDwgX2MyLmxlbmd0aDsgX3QzNyArPSAxKSB7XG4gICAgICAgICAgICB2YXIgX3MyNCA9IF9jMltfdDM3XTtcbiAgICAgICAgICAgIGlmIChfczI0WzBdID49IDAgJiYgX3MyNFswXSA8PSBfbjUgJiYgX3MyNFsxXSA+PSAwICYmIF9zMjRbMV0gPD0gX2w0KSB7XG4gICAgICAgICAgICAgIGlmICgwID09PSBfczI0WzBdICYmIDAgPT09IF9zMjRbMV0pIGNvbnRpbnVlO1xuICAgICAgICAgICAgICBfZTQxID0gITA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghX2U0MSkgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHQuaXNIb3Jpem9udGFsKCkgPyAoKGQgfHwgYyB8fCBwIHx8IHUpICYmIChhLnByZXZlbnREZWZhdWx0ID8gYS5wcmV2ZW50RGVmYXVsdCgpIDogYS5yZXR1cm5WYWx1ZSA9ICExKSwgKChjIHx8IHUpICYmICFzIHx8IChkIHx8IHApICYmIHMpICYmIHQuc2xpZGVOZXh0KCksICgoZCB8fCBwKSAmJiAhcyB8fCAoYyB8fCB1KSAmJiBzKSAmJiB0LnNsaWRlUHJldigpKSA6ICgoZCB8fCBjIHx8IG0gfHwgaCkgJiYgKGEucHJldmVudERlZmF1bHQgPyBhLnByZXZlbnREZWZhdWx0KCkgOiBhLnJldHVyblZhbHVlID0gITEpLCAoYyB8fCBoKSAmJiB0LnNsaWRlTmV4dCgpLCAoZCB8fCBtKSAmJiB0LnNsaWRlUHJldigpKSwgbihcImtleVByZXNzXCIsIGkpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjKCkge1xuICAgICAgdC5rZXlib2FyZC5lbmFibGVkIHx8IChsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGQpLCB0LmtleWJvYXJkLmVuYWJsZWQgPSAhMCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHAoKSB7XG4gICAgICB0LmtleWJvYXJkLmVuYWJsZWQgJiYgKGwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZCksIHQua2V5Ym9hcmQuZW5hYmxlZCA9ICExKTtcbiAgICB9XG4gICAgdC5rZXlib2FyZCA9IHtcbiAgICAgIGVuYWJsZWQ6ICExXG4gICAgfSwgcyh7XG4gICAgICBrZXlib2FyZDoge1xuICAgICAgICBlbmFibGVkOiAhMSxcbiAgICAgICAgb25seUluVmlld3BvcnQ6ICEwLFxuICAgICAgICBwYWdlVXBEb3duOiAhMFxuICAgICAgfVxuICAgIH0pLCBpKFwiaW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0LnBhcmFtcy5rZXlib2FyZC5lbmFibGVkICYmIGMoKTtcbiAgICB9KSwgaShcImRlc3Ryb3lcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdC5rZXlib2FyZC5lbmFibGVkICYmIHAoKTtcbiAgICB9KSwgT2JqZWN0LmFzc2lnbih0LmtleWJvYXJkLCB7XG4gICAgICBlbmFibGU6IGMsXG4gICAgICBkaXNhYmxlOiBwXG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQgPSBlLnN3aXBlcixcbiAgICAgIHMgPSBlLmV4dGVuZFBhcmFtcyxcbiAgICAgIGEgPSBlLm9uLFxuICAgICAgaSA9IGUuZW1pdDtcbiAgICB2YXIgbyA9IHIoKTtcbiAgICB2YXIgZDtcbiAgICBzKHtcbiAgICAgIG1vdXNld2hlZWw6IHtcbiAgICAgICAgZW5hYmxlZDogITEsXG4gICAgICAgIHJlbGVhc2VPbkVkZ2VzOiAhMSxcbiAgICAgICAgaW52ZXJ0OiAhMSxcbiAgICAgICAgZm9yY2VUb0F4aXM6ICExLFxuICAgICAgICBzZW5zaXRpdml0eTogMSxcbiAgICAgICAgZXZlbnRzVGFyZ2V0OiBcImNvbnRhaW5lclwiLFxuICAgICAgICB0aHJlc2hvbGREZWx0YTogbnVsbCxcbiAgICAgICAgdGhyZXNob2xkVGltZTogbnVsbCxcbiAgICAgICAgbm9Nb3VzZXdoZWVsQ2xhc3M6IFwic3dpcGVyLW5vLW1vdXNld2hlZWxcIlxuICAgICAgfVxuICAgIH0pLCB0Lm1vdXNld2hlZWwgPSB7XG4gICAgICBlbmFibGVkOiAhMVxuICAgIH07XG4gICAgdmFyIGMsXG4gICAgICBwID0gbCgpO1xuICAgIHZhciB1ID0gW107XG4gICAgZnVuY3Rpb24gbSgpIHtcbiAgICAgIHQuZW5hYmxlZCAmJiAodC5tb3VzZUVudGVyZWQgPSAhMCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGgoKSB7XG4gICAgICB0LmVuYWJsZWQgJiYgKHQubW91c2VFbnRlcmVkID0gITEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmKGUpIHtcbiAgICAgIHJldHVybiAhKHQucGFyYW1zLm1vdXNld2hlZWwudGhyZXNob2xkRGVsdGEgJiYgZS5kZWx0YSA8IHQucGFyYW1zLm1vdXNld2hlZWwudGhyZXNob2xkRGVsdGEpICYmICEodC5wYXJhbXMubW91c2V3aGVlbC50aHJlc2hvbGRUaW1lICYmIGwoKSAtIHAgPCB0LnBhcmFtcy5tb3VzZXdoZWVsLnRocmVzaG9sZFRpbWUpICYmIChlLmRlbHRhID49IDYgJiYgbCgpIC0gcCA8IDYwIHx8IChlLmRpcmVjdGlvbiA8IDAgPyB0LmlzRW5kICYmICF0LnBhcmFtcy5sb29wIHx8IHQuYW5pbWF0aW5nIHx8ICh0LnNsaWRlTmV4dCgpLCBpKFwic2Nyb2xsXCIsIGUucmF3KSkgOiB0LmlzQmVnaW5uaW5nICYmICF0LnBhcmFtcy5sb29wIHx8IHQuYW5pbWF0aW5nIHx8ICh0LnNsaWRlUHJldigpLCBpKFwic2Nyb2xsXCIsIGUucmF3KSksIHAgPSBuZXcgby5EYXRlKCkuZ2V0VGltZSgpLCAhMSkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnKGUpIHtcbiAgICAgIHZhciBzID0gZSxcbiAgICAgICAgYSA9ICEwO1xuICAgICAgaWYgKCF0LmVuYWJsZWQpIHJldHVybjtcbiAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KFwiLlwiLmNvbmNhdCh0LnBhcmFtcy5tb3VzZXdoZWVsLm5vTW91c2V3aGVlbENsYXNzKSkpIHJldHVybjtcbiAgICAgIHZhciByID0gdC5wYXJhbXMubW91c2V3aGVlbDtcbiAgICAgIHQucGFyYW1zLmNzc01vZGUgJiYgcy5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyIG8gPSB0LmVsO1xuICAgICAgXCJjb250YWluZXJcIiAhPT0gdC5wYXJhbXMubW91c2V3aGVlbC5ldmVudHNUYXJnZXQgJiYgKG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHQucGFyYW1zLm1vdXNld2hlZWwuZXZlbnRzVGFyZ2V0KSk7XG4gICAgICB2YXIgcCA9IG8gJiYgby5jb250YWlucyhzLnRhcmdldCk7XG4gICAgICBpZiAoIXQubW91c2VFbnRlcmVkICYmICFwICYmICFyLnJlbGVhc2VPbkVkZ2VzKSByZXR1cm4gITA7XG4gICAgICBzLm9yaWdpbmFsRXZlbnQgJiYgKHMgPSBzLm9yaWdpbmFsRXZlbnQpO1xuICAgICAgdmFyIG0gPSAwO1xuICAgICAgdmFyIGggPSB0LnJ0bFRyYW5zbGF0ZSA/IC0xIDogMSxcbiAgICAgICAgZyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdmFyIHQgPSAwLFxuICAgICAgICAgICAgcyA9IDAsXG4gICAgICAgICAgICBhID0gMCxcbiAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgIHJldHVybiBcImRldGFpbFwiIGluIGUgJiYgKHMgPSBlLmRldGFpbCksIFwid2hlZWxEZWx0YVwiIGluIGUgJiYgKHMgPSAtZS53aGVlbERlbHRhIC8gMTIwKSwgXCJ3aGVlbERlbHRhWVwiIGluIGUgJiYgKHMgPSAtZS53aGVlbERlbHRhWSAvIDEyMCksIFwid2hlZWxEZWx0YVhcIiBpbiBlICYmICh0ID0gLWUud2hlZWxEZWx0YVggLyAxMjApLCBcImF4aXNcIiBpbiBlICYmIGUuYXhpcyA9PT0gZS5IT1JJWk9OVEFMX0FYSVMgJiYgKHQgPSBzLCBzID0gMCksIGEgPSAxMCAqIHQsIGkgPSAxMCAqIHMsIFwiZGVsdGFZXCIgaW4gZSAmJiAoaSA9IGUuZGVsdGFZKSwgXCJkZWx0YVhcIiBpbiBlICYmIChhID0gZS5kZWx0YVgpLCBlLnNoaWZ0S2V5ICYmICFhICYmIChhID0gaSwgaSA9IDApLCAoYSB8fCBpKSAmJiBlLmRlbHRhTW9kZSAmJiAoMSA9PT0gZS5kZWx0YU1vZGUgPyAoYSAqPSA0MCwgaSAqPSA0MCkgOiAoYSAqPSA4MDAsIGkgKj0gODAwKSksIGEgJiYgIXQgJiYgKHQgPSBhIDwgMSA/IC0xIDogMSksIGkgJiYgIXMgJiYgKHMgPSBpIDwgMSA/IC0xIDogMSksIHtcbiAgICAgICAgICAgIHNwaW5YOiB0LFxuICAgICAgICAgICAgc3Bpblk6IHMsXG4gICAgICAgICAgICBwaXhlbFg6IGEsXG4gICAgICAgICAgICBwaXhlbFk6IGlcbiAgICAgICAgICB9O1xuICAgICAgICB9KHMpO1xuICAgICAgaWYgKHIuZm9yY2VUb0F4aXMpIHtcbiAgICAgICAgaWYgKHQuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgICBpZiAoIShNYXRoLmFicyhnLnBpeGVsWCkgPiBNYXRoLmFicyhnLnBpeGVsWSkpKSByZXR1cm4gITA7XG4gICAgICAgICAgbSA9IC1nLnBpeGVsWCAqIGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCEoTWF0aC5hYnMoZy5waXhlbFkpID4gTWF0aC5hYnMoZy5waXhlbFgpKSkgcmV0dXJuICEwO1xuICAgICAgICAgIG0gPSAtZy5waXhlbFk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBtID0gTWF0aC5hYnMoZy5waXhlbFgpID4gTWF0aC5hYnMoZy5waXhlbFkpID8gLWcucGl4ZWxYICogaCA6IC1nLnBpeGVsWTtcbiAgICAgIGlmICgwID09PSBtKSByZXR1cm4gITA7XG4gICAgICByLmludmVydCAmJiAobSA9IC1tKTtcbiAgICAgIHZhciB2ID0gdC5nZXRUcmFuc2xhdGUoKSArIG0gKiByLnNlbnNpdGl2aXR5O1xuICAgICAgaWYgKHYgPj0gdC5taW5UcmFuc2xhdGUoKSAmJiAodiA9IHQubWluVHJhbnNsYXRlKCkpLCB2IDw9IHQubWF4VHJhbnNsYXRlKCkgJiYgKHYgPSB0Lm1heFRyYW5zbGF0ZSgpKSwgYSA9ICEhdC5wYXJhbXMubG9vcCB8fCAhKHYgPT09IHQubWluVHJhbnNsYXRlKCkgfHwgdiA9PT0gdC5tYXhUcmFuc2xhdGUoKSksIGEgJiYgdC5wYXJhbXMubmVzdGVkICYmIHMuc3RvcFByb3BhZ2F0aW9uKCksIHQucGFyYW1zLmZyZWVNb2RlICYmIHQucGFyYW1zLmZyZWVNb2RlLmVuYWJsZWQpIHtcbiAgICAgICAgdmFyIF9lNDIgPSB7XG4gICAgICAgICAgICB0aW1lOiBsKCksXG4gICAgICAgICAgICBkZWx0YTogTWF0aC5hYnMobSksXG4gICAgICAgICAgICBkaXJlY3Rpb246IE1hdGguc2lnbihtKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgX2ExNCA9IGMgJiYgX2U0Mi50aW1lIDwgYy50aW1lICsgNTAwICYmIF9lNDIuZGVsdGEgPD0gYy5kZWx0YSAmJiBfZTQyLmRpcmVjdGlvbiA9PT0gYy5kaXJlY3Rpb247XG4gICAgICAgIGlmICghX2ExNCkge1xuICAgICAgICAgIGMgPSB2b2lkIDA7XG4gICAgICAgICAgdmFyIF9sNSA9IHQuZ2V0VHJhbnNsYXRlKCkgKyBtICogci5zZW5zaXRpdml0eTtcbiAgICAgICAgICB2YXIgX281ID0gdC5pc0JlZ2lubmluZyxcbiAgICAgICAgICAgIF9wMiA9IHQuaXNFbmQ7XG4gICAgICAgICAgaWYgKF9sNSA+PSB0Lm1pblRyYW5zbGF0ZSgpICYmIChfbDUgPSB0Lm1pblRyYW5zbGF0ZSgpKSwgX2w1IDw9IHQubWF4VHJhbnNsYXRlKCkgJiYgKF9sNSA9IHQubWF4VHJhbnNsYXRlKCkpLCB0LnNldFRyYW5zaXRpb24oMCksIHQuc2V0VHJhbnNsYXRlKF9sNSksIHQudXBkYXRlUHJvZ3Jlc3MoKSwgdC51cGRhdGVBY3RpdmVJbmRleCgpLCB0LnVwZGF0ZVNsaWRlc0NsYXNzZXMoKSwgKCFfbzUgJiYgdC5pc0JlZ2lubmluZyB8fCAhX3AyICYmIHQuaXNFbmQpICYmIHQudXBkYXRlU2xpZGVzQ2xhc3NlcygpLCB0LnBhcmFtcy5sb29wICYmIHQubG9vcEZpeCh7XG4gICAgICAgICAgICBkaXJlY3Rpb246IF9lNDIuZGlyZWN0aW9uIDwgMCA/IFwibmV4dFwiIDogXCJwcmV2XCIsXG4gICAgICAgICAgICBieU1vdXNld2hlZWw6ICEwXG4gICAgICAgICAgfSksIHQucGFyYW1zLmZyZWVNb2RlLnN0aWNreSkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGQpLCBkID0gdm9pZCAwLCB1Lmxlbmd0aCA+PSAxNSAmJiB1LnNoaWZ0KCk7XG4gICAgICAgICAgICB2YXIgX3MyNSA9IHUubGVuZ3RoID8gdVt1Lmxlbmd0aCAtIDFdIDogdm9pZCAwLFxuICAgICAgICAgICAgICBfYTE1ID0gdVswXTtcbiAgICAgICAgICAgIGlmICh1LnB1c2goX2U0MiksIF9zMjUgJiYgKF9lNDIuZGVsdGEgPiBfczI1LmRlbHRhIHx8IF9lNDIuZGlyZWN0aW9uICE9PSBfczI1LmRpcmVjdGlvbikpIHUuc3BsaWNlKDApO2Vsc2UgaWYgKHUubGVuZ3RoID49IDE1ICYmIF9lNDIudGltZSAtIF9hMTUudGltZSA8IDUwMCAmJiBfYTE1LmRlbHRhIC0gX2U0Mi5kZWx0YSA+PSAxICYmIF9lNDIuZGVsdGEgPD0gNikge1xuICAgICAgICAgICAgICB2YXIgX3MyNiA9IG0gPiAwID8gLjggOiAuMjtcbiAgICAgICAgICAgICAgYyA9IF9lNDIsIHUuc3BsaWNlKDApLCBkID0gbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdC5zbGlkZVRvQ2xvc2VzdCh0LnBhcmFtcy5zcGVlZCwgITAsIHZvaWQgMCwgX3MyNik7XG4gICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZCB8fCAoZCA9IG4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBjID0gX2U0MiwgdS5zcGxpY2UoMCksIHQuc2xpZGVUb0Nsb3Nlc3QodC5wYXJhbXMuc3BlZWQsICEwLCB2b2lkIDAsIC41KTtcbiAgICAgICAgICAgIH0sIDUwMCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoX2ExNCB8fCBpKFwic2Nyb2xsXCIsIHMpLCB0LnBhcmFtcy5hdXRvcGxheSAmJiB0LnBhcmFtcy5hdXRvcGxheURpc2FibGVPbkludGVyYWN0aW9uICYmIHQuYXV0b3BsYXkuc3RvcCgpLCBfbDUgPT09IHQubWluVHJhbnNsYXRlKCkgfHwgX2w1ID09PSB0Lm1heFRyYW5zbGF0ZSgpKSByZXR1cm4gITA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBfczI3ID0ge1xuICAgICAgICAgIHRpbWU6IGwoKSxcbiAgICAgICAgICBkZWx0YTogTWF0aC5hYnMobSksXG4gICAgICAgICAgZGlyZWN0aW9uOiBNYXRoLnNpZ24obSksXG4gICAgICAgICAgcmF3OiBlXG4gICAgICAgIH07XG4gICAgICAgIHUubGVuZ3RoID49IDIgJiYgdS5zaGlmdCgpO1xuICAgICAgICB2YXIgX2ExNiA9IHUubGVuZ3RoID8gdVt1Lmxlbmd0aCAtIDFdIDogdm9pZCAwO1xuICAgICAgICBpZiAodS5wdXNoKF9zMjcpLCBfYTE2ID8gKF9zMjcuZGlyZWN0aW9uICE9PSBfYTE2LmRpcmVjdGlvbiB8fCBfczI3LmRlbHRhID4gX2ExNi5kZWx0YSB8fCBfczI3LnRpbWUgPiBfYTE2LnRpbWUgKyAxNTApICYmIGYoX3MyNykgOiBmKF9zMjcpLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHZhciBzID0gdC5wYXJhbXMubW91c2V3aGVlbDtcbiAgICAgICAgICBpZiAoZS5kaXJlY3Rpb24gPCAwKSB7XG4gICAgICAgICAgICBpZiAodC5pc0VuZCAmJiAhdC5wYXJhbXMubG9vcCAmJiBzLnJlbGVhc2VPbkVkZ2VzKSByZXR1cm4gITA7XG4gICAgICAgICAgfSBlbHNlIGlmICh0LmlzQmVnaW5uaW5nICYmICF0LnBhcmFtcy5sb29wICYmIHMucmVsZWFzZU9uRWRnZXMpIHJldHVybiAhMDtcbiAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgIH0oX3MyNykpIHJldHVybiAhMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzLnByZXZlbnREZWZhdWx0ID8gcy5wcmV2ZW50RGVmYXVsdCgpIDogcy5yZXR1cm5WYWx1ZSA9ICExLCAhMTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdihlKSB7XG4gICAgICB2YXIgcyA9IHQuZWw7XG4gICAgICBcImNvbnRhaW5lclwiICE9PSB0LnBhcmFtcy5tb3VzZXdoZWVsLmV2ZW50c1RhcmdldCAmJiAocyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodC5wYXJhbXMubW91c2V3aGVlbC5ldmVudHNUYXJnZXQpKSwgc1tlXShcIm1vdXNlZW50ZXJcIiwgbSksIHNbZV0oXCJtb3VzZWxlYXZlXCIsIGgpLCBzW2VdKFwid2hlZWxcIiwgZyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHcoKSB7XG4gICAgICByZXR1cm4gdC5wYXJhbXMuY3NzTW9kZSA/ICh0LndyYXBwZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgZyksICEwKSA6ICF0Lm1vdXNld2hlZWwuZW5hYmxlZCAmJiAodihcImFkZEV2ZW50TGlzdGVuZXJcIiksIHQubW91c2V3aGVlbC5lbmFibGVkID0gITAsICEwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYigpIHtcbiAgICAgIHJldHVybiB0LnBhcmFtcy5jc3NNb2RlID8gKHQud3JhcHBlckVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGcpLCAhMCkgOiAhIXQubW91c2V3aGVlbC5lbmFibGVkICYmICh2KFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiKSwgdC5tb3VzZXdoZWVsLmVuYWJsZWQgPSAhMSwgITApO1xuICAgIH1cbiAgICBhKFwiaW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAhdC5wYXJhbXMubW91c2V3aGVlbC5lbmFibGVkICYmIHQucGFyYW1zLmNzc01vZGUgJiYgYigpLCB0LnBhcmFtcy5tb3VzZXdoZWVsLmVuYWJsZWQgJiYgdygpO1xuICAgIH0pLCBhKFwiZGVzdHJveVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0LnBhcmFtcy5jc3NNb2RlICYmIHcoKSwgdC5tb3VzZXdoZWVsLmVuYWJsZWQgJiYgYigpO1xuICAgIH0pLCBPYmplY3QuYXNzaWduKHQubW91c2V3aGVlbCwge1xuICAgICAgZW5hYmxlOiB3LFxuICAgICAgZGlzYWJsZTogYlxuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICBhID0gZS5vbixcbiAgICAgIGkgPSBlLmVtaXQ7XG4gICAgcyh7XG4gICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIG5leHRFbDogbnVsbCxcbiAgICAgICAgcHJldkVsOiBudWxsLFxuICAgICAgICBoaWRlT25DbGljazogITEsXG4gICAgICAgIGRpc2FibGVkQ2xhc3M6IFwic3dpcGVyLWJ1dHRvbi1kaXNhYmxlZFwiLFxuICAgICAgICBoaWRkZW5DbGFzczogXCJzd2lwZXItYnV0dG9uLWhpZGRlblwiLFxuICAgICAgICBsb2NrQ2xhc3M6IFwic3dpcGVyLWJ1dHRvbi1sb2NrXCIsXG4gICAgICAgIG5hdmlnYXRpb25EaXNhYmxlZENsYXNzOiBcInN3aXBlci1uYXZpZ2F0aW9uLWRpc2FibGVkXCJcbiAgICAgIH1cbiAgICB9KSwgdC5uYXZpZ2F0aW9uID0ge1xuICAgICAgbmV4dEVsOiBudWxsLFxuICAgICAgcHJldkVsOiBudWxsXG4gICAgfTtcbiAgICB2YXIgciA9IGZ1bmN0aW9uIHIoZSkge1xuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZSkgfHwgKGUgPSBbZV0uZmlsdGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiAhIWU7XG4gICAgICB9KSksIGU7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBuKGUpIHtcbiAgICAgIHZhciBzO1xuICAgICAgcmV0dXJuIGUgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiB0LmlzRWxlbWVudCAmJiAocyA9IHQuZWwuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKGUpLCBzKSA/IHMgOiAoZSAmJiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiAocyA9IF90b0NvbnN1bWFibGVBcnJheShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGUpKSksIHQucGFyYW1zLnVuaXF1ZU5hdkVsZW1lbnRzICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgcy5sZW5ndGggPiAxICYmIDEgPT09IHQuZWwucXVlcnlTZWxlY3RvckFsbChlKS5sZW5ndGggJiYgKHMgPSB0LmVsLnF1ZXJ5U2VsZWN0b3IoZSkpKSwgZSAmJiAhcyA/IGUgOiBzKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbChlLCBzKSB7XG4gICAgICB2YXIgYSA9IHQucGFyYW1zLm5hdmlnYXRpb247XG4gICAgICAoZSA9IHIoZSkpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIF9lJGNsYXNzTGlzdDI7XG4gICAgICAgIGUgJiYgKChfZSRjbGFzc0xpc3QyID0gZS5jbGFzc0xpc3QpW3MgPyBcImFkZFwiIDogXCJyZW1vdmVcIl0uYXBwbHkoX2UkY2xhc3NMaXN0MiwgX3RvQ29uc3VtYWJsZUFycmF5KGEuZGlzYWJsZWRDbGFzcy5zcGxpdChcIiBcIikpKSwgXCJCVVRUT05cIiA9PT0gZS50YWdOYW1lICYmIChlLmRpc2FibGVkID0gcyksIHQucGFyYW1zLndhdGNoT3ZlcmZsb3cgJiYgdC5lbmFibGVkICYmIGUuY2xhc3NMaXN0W3QuaXNMb2NrZWQgPyBcImFkZFwiIDogXCJyZW1vdmVcIl0oYS5sb2NrQ2xhc3MpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvKCkge1xuICAgICAgdmFyIF90JG5hdmlnYXRpb24gPSB0Lm5hdmlnYXRpb24sXG4gICAgICAgIGUgPSBfdCRuYXZpZ2F0aW9uLm5leHRFbCxcbiAgICAgICAgcyA9IF90JG5hdmlnYXRpb24ucHJldkVsO1xuICAgICAgaWYgKHQucGFyYW1zLmxvb3ApIHJldHVybiBsKHMsICExKSwgdm9pZCBsKGUsICExKTtcbiAgICAgIGwocywgdC5pc0JlZ2lubmluZyAmJiAhdC5wYXJhbXMucmV3aW5kKSwgbChlLCB0LmlzRW5kICYmICF0LnBhcmFtcy5yZXdpbmQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKSwgKCF0LmlzQmVnaW5uaW5nIHx8IHQucGFyYW1zLmxvb3AgfHwgdC5wYXJhbXMucmV3aW5kKSAmJiAodC5zbGlkZVByZXYoKSwgaShcIm5hdmlnYXRpb25QcmV2XCIpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYyhlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCksICghdC5pc0VuZCB8fCB0LnBhcmFtcy5sb29wIHx8IHQucGFyYW1zLnJld2luZCkgJiYgKHQuc2xpZGVOZXh0KCksIGkoXCJuYXZpZ2F0aW9uTmV4dFwiKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHAoKSB7XG4gICAgICB2YXIgZSA9IHQucGFyYW1zLm5hdmlnYXRpb247XG4gICAgICBpZiAodC5wYXJhbXMubmF2aWdhdGlvbiA9IGVlKHQsIHQub3JpZ2luYWxQYXJhbXMubmF2aWdhdGlvbiwgdC5wYXJhbXMubmF2aWdhdGlvbiwge1xuICAgICAgICBuZXh0RWw6IFwic3dpcGVyLWJ1dHRvbi1uZXh0XCIsXG4gICAgICAgIHByZXZFbDogXCJzd2lwZXItYnV0dG9uLXByZXZcIlxuICAgICAgfSksICFlLm5leHRFbCAmJiAhZS5wcmV2RWwpIHJldHVybjtcbiAgICAgIHZhciBzID0gbihlLm5leHRFbCksXG4gICAgICAgIGEgPSBuKGUucHJldkVsKTtcbiAgICAgIE9iamVjdC5hc3NpZ24odC5uYXZpZ2F0aW9uLCB7XG4gICAgICAgIG5leHRFbDogcyxcbiAgICAgICAgcHJldkVsOiBhXG4gICAgICB9KSwgcyA9IHIocyksIGEgPSByKGEpO1xuICAgICAgdmFyIGkgPSBmdW5jdGlvbiBpKHMsIGEpIHtcbiAgICAgICAgdmFyIF9zJGNsYXNzTGlzdDI7XG4gICAgICAgIHMgJiYgcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgXCJuZXh0XCIgPT09IGEgPyBjIDogZCksICF0LmVuYWJsZWQgJiYgcyAmJiAoX3MkY2xhc3NMaXN0MiA9IHMuY2xhc3NMaXN0KS5hZGQuYXBwbHkoX3MkY2xhc3NMaXN0MiwgX3RvQ29uc3VtYWJsZUFycmF5KGUubG9ja0NsYXNzLnNwbGl0KFwiIFwiKSkpO1xuICAgICAgfTtcbiAgICAgIHMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gaShlLCBcIm5leHRcIik7XG4gICAgICB9KSwgYS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBpKGUsIFwicHJldlwiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1KCkge1xuICAgICAgdmFyIF90JG5hdmlnYXRpb24yID0gdC5uYXZpZ2F0aW9uLFxuICAgICAgICBlID0gX3QkbmF2aWdhdGlvbjIubmV4dEVsLFxuICAgICAgICBzID0gX3QkbmF2aWdhdGlvbjIucHJldkVsO1xuICAgICAgZSA9IHIoZSksIHMgPSByKHMpO1xuICAgICAgdmFyIGEgPSBmdW5jdGlvbiBhKGUsIHMpIHtcbiAgICAgICAgdmFyIF9lJGNsYXNzTGlzdDM7XG4gICAgICAgIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIFwibmV4dFwiID09PSBzID8gYyA6IGQpLCAoX2UkY2xhc3NMaXN0MyA9IGUuY2xhc3NMaXN0KS5yZW1vdmUuYXBwbHkoX2UkY2xhc3NMaXN0MywgX3RvQ29uc3VtYWJsZUFycmF5KHQucGFyYW1zLm5hdmlnYXRpb24uZGlzYWJsZWRDbGFzcy5zcGxpdChcIiBcIikpKTtcbiAgICAgIH07XG4gICAgICBlLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIGEoZSwgXCJuZXh0XCIpO1xuICAgICAgfSksIHMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gYShlLCBcInByZXZcIik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgYShcImluaXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgITEgPT09IHQucGFyYW1zLm5hdmlnYXRpb24uZW5hYmxlZCA/IG0oKSA6IChwKCksIG8oKSk7XG4gICAgfSksIGEoXCJ0b0VkZ2UgZnJvbUVkZ2UgbG9jayB1bmxvY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgbygpO1xuICAgIH0pLCBhKFwiZGVzdHJveVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB1KCk7XG4gICAgfSksIGEoXCJlbmFibGUgZGlzYWJsZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3QkbmF2aWdhdGlvbjMgPSB0Lm5hdmlnYXRpb24sXG4gICAgICAgIGUgPSBfdCRuYXZpZ2F0aW9uMy5uZXh0RWwsXG4gICAgICAgIHMgPSBfdCRuYXZpZ2F0aW9uMy5wcmV2RWw7XG4gICAgICBlID0gcihlKSwgcyA9IHIocyksIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZSksIF90b0NvbnN1bWFibGVBcnJheShzKSkuZmlsdGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiAhIWU7XG4gICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBlLmNsYXNzTGlzdFt0LmVuYWJsZWQgPyBcInJlbW92ZVwiIDogXCJhZGRcIl0odC5wYXJhbXMubmF2aWdhdGlvbi5sb2NrQ2xhc3MpO1xuICAgICAgfSk7XG4gICAgfSksIGEoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSwgcykge1xuICAgICAgdmFyIF90JG5hdmlnYXRpb240ID0gdC5uYXZpZ2F0aW9uLFxuICAgICAgICBhID0gX3QkbmF2aWdhdGlvbjQubmV4dEVsLFxuICAgICAgICBuID0gX3QkbmF2aWdhdGlvbjQucHJldkVsO1xuICAgICAgYSA9IHIoYSksIG4gPSByKG4pO1xuICAgICAgdmFyIGwgPSBzLnRhcmdldDtcbiAgICAgIGlmICh0LnBhcmFtcy5uYXZpZ2F0aW9uLmhpZGVPbkNsaWNrICYmICFuLmluY2x1ZGVzKGwpICYmICFhLmluY2x1ZGVzKGwpKSB7XG4gICAgICAgIGlmICh0LnBhZ2luYXRpb24gJiYgdC5wYXJhbXMucGFnaW5hdGlvbiAmJiB0LnBhcmFtcy5wYWdpbmF0aW9uLmNsaWNrYWJsZSAmJiAodC5wYWdpbmF0aW9uLmVsID09PSBsIHx8IHQucGFnaW5hdGlvbi5lbC5jb250YWlucyhsKSkpIHJldHVybjtcbiAgICAgICAgdmFyIF9lNDM7XG4gICAgICAgIGEubGVuZ3RoID8gX2U0MyA9IGFbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKHQucGFyYW1zLm5hdmlnYXRpb24uaGlkZGVuQ2xhc3MpIDogbi5sZW5ndGggJiYgKF9lNDMgPSBuWzBdLmNsYXNzTGlzdC5jb250YWlucyh0LnBhcmFtcy5uYXZpZ2F0aW9uLmhpZGRlbkNsYXNzKSksIGkoITAgPT09IF9lNDMgPyBcIm5hdmlnYXRpb25TaG93XCIgOiBcIm5hdmlnYXRpb25IaWRlXCIpLCBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGEpLCBfdG9Db25zdW1hYmxlQXJyYXkobikpLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiAhIWU7XG4gICAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gZS5jbGFzc0xpc3QudG9nZ2xlKHQucGFyYW1zLm5hdmlnYXRpb24uaGlkZGVuQ2xhc3MpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgbSA9IGZ1bmN0aW9uIG0oKSB7XG4gICAgICB2YXIgX3QkZWwkY2xhc3NMaXN0O1xuICAgICAgKF90JGVsJGNsYXNzTGlzdCA9IHQuZWwuY2xhc3NMaXN0KS5hZGQuYXBwbHkoX3QkZWwkY2xhc3NMaXN0LCBfdG9Db25zdW1hYmxlQXJyYXkodC5wYXJhbXMubmF2aWdhdGlvbi5uYXZpZ2F0aW9uRGlzYWJsZWRDbGFzcy5zcGxpdChcIiBcIikpKSwgdSgpO1xuICAgIH07XG4gICAgT2JqZWN0LmFzc2lnbih0Lm5hdmlnYXRpb24sIHtcbiAgICAgIGVuYWJsZTogZnVuY3Rpb24gZW5hYmxlKCkge1xuICAgICAgICB2YXIgX3QkZWwkY2xhc3NMaXN0MjtcbiAgICAgICAgKF90JGVsJGNsYXNzTGlzdDIgPSB0LmVsLmNsYXNzTGlzdCkucmVtb3ZlLmFwcGx5KF90JGVsJGNsYXNzTGlzdDIsIF90b0NvbnN1bWFibGVBcnJheSh0LnBhcmFtcy5uYXZpZ2F0aW9uLm5hdmlnYXRpb25EaXNhYmxlZENsYXNzLnNwbGl0KFwiIFwiKSkpLCBwKCksIG8oKTtcbiAgICAgIH0sXG4gICAgICBkaXNhYmxlOiBtLFxuICAgICAgdXBkYXRlOiBvLFxuICAgICAgaW5pdDogcCxcbiAgICAgIGRlc3Ryb3k6IHVcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgYSA9IGUub24sXG4gICAgICBpID0gZS5lbWl0O1xuICAgIHZhciByID0gXCJzd2lwZXItcGFnaW5hdGlvblwiO1xuICAgIHZhciBuO1xuICAgIHMoe1xuICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogbnVsbCxcbiAgICAgICAgYnVsbGV0RWxlbWVudDogXCJzcGFuXCIsXG4gICAgICAgIGNsaWNrYWJsZTogITEsXG4gICAgICAgIGhpZGVPbkNsaWNrOiAhMSxcbiAgICAgICAgcmVuZGVyQnVsbGV0OiBudWxsLFxuICAgICAgICByZW5kZXJQcm9ncmVzc2JhcjogbnVsbCxcbiAgICAgICAgcmVuZGVyRnJhY3Rpb246IG51bGwsXG4gICAgICAgIHJlbmRlckN1c3RvbTogbnVsbCxcbiAgICAgICAgcHJvZ3Jlc3NiYXJPcHBvc2l0ZTogITEsXG4gICAgICAgIHR5cGU6IFwiYnVsbGV0c1wiLFxuICAgICAgICBkeW5hbWljQnVsbGV0czogITEsXG4gICAgICAgIGR5bmFtaWNNYWluQnVsbGV0czogMSxcbiAgICAgICAgZm9ybWF0RnJhY3Rpb25DdXJyZW50OiBmdW5jdGlvbiBmb3JtYXRGcmFjdGlvbkN1cnJlbnQoZSkge1xuICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9LFxuICAgICAgICBmb3JtYXRGcmFjdGlvblRvdGFsOiBmdW5jdGlvbiBmb3JtYXRGcmFjdGlvblRvdGFsKGUpIHtcbiAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfSxcbiAgICAgICAgYnVsbGV0Q2xhc3M6IFwiXCIuY29uY2F0KHIsIFwiLWJ1bGxldFwiKSxcbiAgICAgICAgYnVsbGV0QWN0aXZlQ2xhc3M6IFwiXCIuY29uY2F0KHIsIFwiLWJ1bGxldC1hY3RpdmVcIiksXG4gICAgICAgIG1vZGlmaWVyQ2xhc3M6IFwiXCIuY29uY2F0KHIsIFwiLVwiKSxcbiAgICAgICAgY3VycmVudENsYXNzOiBcIlwiLmNvbmNhdChyLCBcIi1jdXJyZW50XCIpLFxuICAgICAgICB0b3RhbENsYXNzOiBcIlwiLmNvbmNhdChyLCBcIi10b3RhbFwiKSxcbiAgICAgICAgaGlkZGVuQ2xhc3M6IFwiXCIuY29uY2F0KHIsIFwiLWhpZGRlblwiKSxcbiAgICAgICAgcHJvZ3Jlc3NiYXJGaWxsQ2xhc3M6IFwiXCIuY29uY2F0KHIsIFwiLXByb2dyZXNzYmFyLWZpbGxcIiksXG4gICAgICAgIHByb2dyZXNzYmFyT3Bwb3NpdGVDbGFzczogXCJcIi5jb25jYXQociwgXCItcHJvZ3Jlc3NiYXItb3Bwb3NpdGVcIiksXG4gICAgICAgIGNsaWNrYWJsZUNsYXNzOiBcIlwiLmNvbmNhdChyLCBcIi1jbGlja2FibGVcIiksXG4gICAgICAgIGxvY2tDbGFzczogXCJcIi5jb25jYXQociwgXCItbG9ja1wiKSxcbiAgICAgICAgaG9yaXpvbnRhbENsYXNzOiBcIlwiLmNvbmNhdChyLCBcIi1ob3Jpem9udGFsXCIpLFxuICAgICAgICB2ZXJ0aWNhbENsYXNzOiBcIlwiLmNvbmNhdChyLCBcIi12ZXJ0aWNhbFwiKSxcbiAgICAgICAgcGFnaW5hdGlvbkRpc2FibGVkQ2xhc3M6IFwiXCIuY29uY2F0KHIsIFwiLWRpc2FibGVkXCIpXG4gICAgICB9XG4gICAgfSksIHQucGFnaW5hdGlvbiA9IHtcbiAgICAgIGVsOiBudWxsLFxuICAgICAgYnVsbGV0czogW11cbiAgICB9O1xuICAgIHZhciBsID0gMDtcbiAgICB2YXIgbyA9IGZ1bmN0aW9uIG8oZSkge1xuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZSkgfHwgKGUgPSBbZV0uZmlsdGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiAhIWU7XG4gICAgICB9KSksIGU7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBkKCkge1xuICAgICAgcmV0dXJuICF0LnBhcmFtcy5wYWdpbmF0aW9uLmVsIHx8ICF0LnBhZ2luYXRpb24uZWwgfHwgQXJyYXkuaXNBcnJheSh0LnBhZ2luYXRpb24uZWwpICYmIDAgPT09IHQucGFnaW5hdGlvbi5lbC5sZW5ndGg7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGMoZSwgcykge1xuICAgICAgdmFyIGEgPSB0LnBhcmFtcy5wYWdpbmF0aW9uLmJ1bGxldEFjdGl2ZUNsYXNzO1xuICAgICAgZSAmJiAoZSA9IGVbKFwicHJldlwiID09PSBzID8gXCJwcmV2aW91c1wiIDogXCJuZXh0XCIpICsgXCJFbGVtZW50U2libGluZ1wiXSkgJiYgKGUuY2xhc3NMaXN0LmFkZChcIlwiLmNvbmNhdChhLCBcIi1cIikuY29uY2F0KHMpKSwgKGUgPSBlWyhcInByZXZcIiA9PT0gcyA/IFwicHJldmlvdXNcIiA6IFwibmV4dFwiKSArIFwiRWxlbWVudFNpYmxpbmdcIl0pICYmIGUuY2xhc3NMaXN0LmFkZChcIlwiLmNvbmNhdChhLCBcIi1cIikuY29uY2F0KHMsIFwiLVwiKS5jb25jYXQocykpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcChlKSB7XG4gICAgICB2YXIgcyA9IGUudGFyZ2V0LmNsb3Nlc3QodGUodC5wYXJhbXMucGFnaW5hdGlvbi5idWxsZXRDbGFzcykpO1xuICAgICAgaWYgKCFzKSByZXR1cm47XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgYSA9IGIocykgKiB0LnBhcmFtcy5zbGlkZXNQZXJHcm91cDtcbiAgICAgIGlmICh0LnBhcmFtcy5sb29wKSB7XG4gICAgICAgIGlmICh0LnJlYWxJbmRleCA9PT0gYSkgcmV0dXJuO1xuICAgICAgICB2YXIgX2U0NCA9IHQuZ2V0U2xpZGVJbmRleEJ5RGF0YShhKSxcbiAgICAgICAgICBfczI4ID0gdC5nZXRTbGlkZUluZGV4QnlEYXRhKHQucmVhbEluZGV4KTtcbiAgICAgICAgX2U0NCA+IHQuc2xpZGVzLmxlbmd0aCAtIHQubG9vcGVkU2xpZGVzICYmIHQubG9vcEZpeCh7XG4gICAgICAgICAgZGlyZWN0aW9uOiBfZTQ0ID4gX3MyOCA/IFwibmV4dFwiIDogXCJwcmV2XCIsXG4gICAgICAgICAgYWN0aXZlU2xpZGVJbmRleDogX2U0NCxcbiAgICAgICAgICBzbGlkZVRvOiAhMVxuICAgICAgICB9KSwgdC5zbGlkZVRvTG9vcChhKTtcbiAgICAgIH0gZWxzZSB0LnNsaWRlVG8oYSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHUoKSB7XG4gICAgICB2YXIgZSA9IHQucnRsLFxuICAgICAgICBzID0gdC5wYXJhbXMucGFnaW5hdGlvbjtcbiAgICAgIGlmIChkKCkpIHJldHVybjtcbiAgICAgIHZhciBhLFxuICAgICAgICByLFxuICAgICAgICBwID0gdC5wYWdpbmF0aW9uLmVsO1xuICAgICAgcCA9IG8ocCk7XG4gICAgICB2YXIgdSA9IHQudmlydHVhbCAmJiB0LnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyB0LnZpcnR1YWwuc2xpZGVzLmxlbmd0aCA6IHQuc2xpZGVzLmxlbmd0aCxcbiAgICAgICAgbSA9IHQucGFyYW1zLmxvb3AgPyBNYXRoLmNlaWwodSAvIHQucGFyYW1zLnNsaWRlc1Blckdyb3VwKSA6IHQuc25hcEdyaWQubGVuZ3RoO1xuICAgICAgaWYgKHQucGFyYW1zLmxvb3AgPyAociA9IHQucHJldmlvdXNSZWFsSW5kZXggfHwgMCwgYSA9IHQucGFyYW1zLnNsaWRlc1Blckdyb3VwID4gMSA/IE1hdGguZmxvb3IodC5yZWFsSW5kZXggLyB0LnBhcmFtcy5zbGlkZXNQZXJHcm91cCkgOiB0LnJlYWxJbmRleCkgOiB2b2lkIDAgIT09IHQuc25hcEluZGV4ID8gKGEgPSB0LnNuYXBJbmRleCwgciA9IHQucHJldmlvdXNTbmFwSW5kZXgpIDogKHIgPSB0LnByZXZpb3VzSW5kZXggfHwgMCwgYSA9IHQuYWN0aXZlSW5kZXggfHwgMCksIFwiYnVsbGV0c1wiID09PSBzLnR5cGUgJiYgdC5wYWdpbmF0aW9uLmJ1bGxldHMgJiYgdC5wYWdpbmF0aW9uLmJ1bGxldHMubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgX2kxMiA9IHQucGFnaW5hdGlvbi5idWxsZXRzO1xuICAgICAgICB2YXIgX282LCBfZDMsIF91MjtcbiAgICAgICAgaWYgKHMuZHluYW1pY0J1bGxldHMgJiYgKG4gPSB4KF9pMTJbMF0sIHQuaXNIb3Jpem9udGFsKCkgPyBcIndpZHRoXCIgOiBcImhlaWdodFwiLCAhMCksIHAuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUuc3R5bGVbdC5pc0hvcml6b250YWwoKSA/IFwid2lkdGhcIiA6IFwiaGVpZ2h0XCJdID0gbiAqIChzLmR5bmFtaWNNYWluQnVsbGV0cyArIDQpICsgXCJweFwiO1xuICAgICAgICB9KSwgcy5keW5hbWljTWFpbkJ1bGxldHMgPiAxICYmIHZvaWQgMCAhPT0gciAmJiAobCArPSBhIC0gKHIgfHwgMCksIGwgPiBzLmR5bmFtaWNNYWluQnVsbGV0cyAtIDEgPyBsID0gcy5keW5hbWljTWFpbkJ1bGxldHMgLSAxIDogbCA8IDAgJiYgKGwgPSAwKSksIF9vNiA9IE1hdGgubWF4KGEgLSBsLCAwKSwgX2QzID0gX282ICsgKE1hdGgubWluKF9pMTIubGVuZ3RoLCBzLmR5bmFtaWNNYWluQnVsbGV0cykgLSAxKSwgX3UyID0gKF9kMyArIF9vNikgLyAyKSwgX2kxMi5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdmFyIF9lJGNsYXNzTGlzdDQ7XG4gICAgICAgICAgdmFyIHQgPSBfdG9Db25zdW1hYmxlQXJyYXkoW1wiXCIsIFwiLW5leHRcIiwgXCItbmV4dC1uZXh0XCIsIFwiLXByZXZcIiwgXCItcHJldi1wcmV2XCIsIFwiLW1haW5cIl0ubWFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIi5jb25jYXQocy5idWxsZXRBY3RpdmVDbGFzcykuY29uY2F0KGUpO1xuICAgICAgICAgIH0pKS5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIGUuaW5jbHVkZXMoXCIgXCIpID8gZS5zcGxpdChcIiBcIikgOiBlO1xuICAgICAgICAgIH0pLmZsYXQoKTtcbiAgICAgICAgICAoX2UkY2xhc3NMaXN0NCA9IGUuY2xhc3NMaXN0KS5yZW1vdmUuYXBwbHkoX2UkY2xhc3NMaXN0NCwgX3RvQ29uc3VtYWJsZUFycmF5KHQpKTtcbiAgICAgICAgfSksIHAubGVuZ3RoID4gMSkgX2kxMi5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdmFyIF9lJGNsYXNzTGlzdDUsIF9lJGNsYXNzTGlzdDY7XG4gICAgICAgICAgdmFyIGkgPSBiKGUpO1xuICAgICAgICAgIGkgPT09IGEgPyAoX2UkY2xhc3NMaXN0NSA9IGUuY2xhc3NMaXN0KS5hZGQuYXBwbHkoX2UkY2xhc3NMaXN0NSwgX3RvQ29uc3VtYWJsZUFycmF5KHMuYnVsbGV0QWN0aXZlQ2xhc3Muc3BsaXQoXCIgXCIpKSkgOiB0LmlzRWxlbWVudCAmJiBlLnNldEF0dHJpYnV0ZShcInBhcnRcIiwgXCJidWxsZXRcIiksIHMuZHluYW1pY0J1bGxldHMgJiYgKGkgPj0gX282ICYmIGkgPD0gX2QzICYmIChfZSRjbGFzc0xpc3Q2ID0gZS5jbGFzc0xpc3QpLmFkZC5hcHBseShfZSRjbGFzc0xpc3Q2LCBfdG9Db25zdW1hYmxlQXJyYXkoXCJcIi5jb25jYXQocy5idWxsZXRBY3RpdmVDbGFzcywgXCItbWFpblwiKS5zcGxpdChcIiBcIikpKSwgaSA9PT0gX282ICYmIGMoZSwgXCJwcmV2XCIpLCBpID09PSBfZDMgJiYgYyhlLCBcIm5leHRcIikpO1xuICAgICAgICB9KTtlbHNlIHtcbiAgICAgICAgICB2YXIgX2U0NSRjbGFzc0xpc3Q7XG4gICAgICAgICAgdmFyIF9lNDUgPSBfaTEyW2FdO1xuICAgICAgICAgIGlmIChfZTQ1ICYmIChfZTQ1JGNsYXNzTGlzdCA9IF9lNDUuY2xhc3NMaXN0KS5hZGQuYXBwbHkoX2U0NSRjbGFzc0xpc3QsIF90b0NvbnN1bWFibGVBcnJheShzLmJ1bGxldEFjdGl2ZUNsYXNzLnNwbGl0KFwiIFwiKSkpLCB0LmlzRWxlbWVudCAmJiBfaTEyLmZvckVhY2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIGUuc2V0QXR0cmlidXRlKFwicGFydFwiLCB0ID09PSBhID8gXCJidWxsZXQtYWN0aXZlXCIgOiBcImJ1bGxldFwiKTtcbiAgICAgICAgICB9KSwgcy5keW5hbWljQnVsbGV0cykge1xuICAgICAgICAgICAgdmFyIF9lNDYgPSBfaTEyW19vNl0sXG4gICAgICAgICAgICAgIF90MzggPSBfaTEyW19kM107XG4gICAgICAgICAgICBmb3IgKHZhciBfZTQ3ID0gX282OyBfZTQ3IDw9IF9kMzsgX2U0NyArPSAxKSB7XG4gICAgICAgICAgICAgIHZhciBfaTEyJF9lNDckY2xhc3NMaXN0O1xuICAgICAgICAgICAgICBfaTEyW19lNDddICYmIChfaTEyJF9lNDckY2xhc3NMaXN0ID0gX2kxMltfZTQ3XS5jbGFzc0xpc3QpLmFkZC5hcHBseShfaTEyJF9lNDckY2xhc3NMaXN0LCBfdG9Db25zdW1hYmxlQXJyYXkoXCJcIi5jb25jYXQocy5idWxsZXRBY3RpdmVDbGFzcywgXCItbWFpblwiKS5zcGxpdChcIiBcIikpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGMoX2U0NiwgXCJwcmV2XCIpLCBjKF90MzgsIFwibmV4dFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMuZHluYW1pY0J1bGxldHMpIHtcbiAgICAgICAgICB2YXIgX2ExNyA9IE1hdGgubWluKF9pMTIubGVuZ3RoLCBzLmR5bmFtaWNNYWluQnVsbGV0cyArIDQpLFxuICAgICAgICAgICAgX3I5ID0gKG4gKiBfYTE3IC0gbikgLyAyIC0gX3UyICogbixcbiAgICAgICAgICAgIF9sNiA9IGUgPyBcInJpZ2h0XCIgOiBcImxlZnRcIjtcbiAgICAgICAgICBfaTEyLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUuc3R5bGVbdC5pc0hvcml6b250YWwoKSA/IF9sNiA6IFwidG9wXCJdID0gXCJcIi5jb25jYXQoX3I5LCBcInB4XCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBwLmZvckVhY2goZnVuY3Rpb24gKGUsIHIpIHtcbiAgICAgICAgaWYgKFwiZnJhY3Rpb25cIiA9PT0gcy50eXBlICYmIChlLnF1ZXJ5U2VsZWN0b3JBbGwodGUocy5jdXJyZW50Q2xhc3MpKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS50ZXh0Q29udGVudCA9IHMuZm9ybWF0RnJhY3Rpb25DdXJyZW50KGEgKyAxKTtcbiAgICAgICAgfSksIGUucXVlcnlTZWxlY3RvckFsbCh0ZShzLnRvdGFsQ2xhc3MpKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS50ZXh0Q29udGVudCA9IHMuZm9ybWF0RnJhY3Rpb25Ub3RhbChtKTtcbiAgICAgICAgfSkpLCBcInByb2dyZXNzYmFyXCIgPT09IHMudHlwZSkge1xuICAgICAgICAgIHZhciBfaTEzO1xuICAgICAgICAgIF9pMTMgPSBzLnByb2dyZXNzYmFyT3Bwb3NpdGUgPyB0LmlzSG9yaXpvbnRhbCgpID8gXCJ2ZXJ0aWNhbFwiIDogXCJob3Jpem9udGFsXCIgOiB0LmlzSG9yaXpvbnRhbCgpID8gXCJob3Jpem9udGFsXCIgOiBcInZlcnRpY2FsXCI7XG4gICAgICAgICAgdmFyIF9yMTAgPSAoYSArIDEpIC8gbTtcbiAgICAgICAgICB2YXIgX242ID0gMSxcbiAgICAgICAgICAgIF9sNyA9IDE7XG4gICAgICAgICAgXCJob3Jpem9udGFsXCIgPT09IF9pMTMgPyBfbjYgPSBfcjEwIDogX2w3ID0gX3IxMCwgZS5xdWVyeVNlbGVjdG9yQWxsKHRlKHMucHJvZ3Jlc3NiYXJGaWxsQ2xhc3MpKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlWChcIi5jb25jYXQoX242LCBcIikgc2NhbGVZKFwiKS5jb25jYXQoX2w3LCBcIilcIiksIGUuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCJcIi5jb25jYXQodC5wYXJhbXMuc3BlZWQsIFwibXNcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXCJjdXN0b21cIiA9PT0gcy50eXBlICYmIHMucmVuZGVyQ3VzdG9tID8gKGUuaW5uZXJIVE1MID0gcy5yZW5kZXJDdXN0b20odCwgYSArIDEsIG0pLCAwID09PSByICYmIGkoXCJwYWdpbmF0aW9uUmVuZGVyXCIsIGUpKSA6ICgwID09PSByICYmIGkoXCJwYWdpbmF0aW9uUmVuZGVyXCIsIGUpLCBpKFwicGFnaW5hdGlvblVwZGF0ZVwiLCBlKSksIHQucGFyYW1zLndhdGNoT3ZlcmZsb3cgJiYgdC5lbmFibGVkICYmIGUuY2xhc3NMaXN0W3QuaXNMb2NrZWQgPyBcImFkZFwiIDogXCJyZW1vdmVcIl0ocy5sb2NrQ2xhc3MpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG0oKSB7XG4gICAgICB2YXIgZSA9IHQucGFyYW1zLnBhZ2luYXRpb247XG4gICAgICBpZiAoZCgpKSByZXR1cm47XG4gICAgICB2YXIgcyA9IHQudmlydHVhbCAmJiB0LnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyB0LnZpcnR1YWwuc2xpZGVzLmxlbmd0aCA6IHQuc2xpZGVzLmxlbmd0aDtcbiAgICAgIHZhciBhID0gdC5wYWdpbmF0aW9uLmVsO1xuICAgICAgYSA9IG8oYSk7XG4gICAgICB2YXIgciA9IFwiXCI7XG4gICAgICBpZiAoXCJidWxsZXRzXCIgPT09IGUudHlwZSkge1xuICAgICAgICB2YXIgX2ExOCA9IHQucGFyYW1zLmxvb3AgPyBNYXRoLmNlaWwocyAvIHQucGFyYW1zLnNsaWRlc1Blckdyb3VwKSA6IHQuc25hcEdyaWQubGVuZ3RoO1xuICAgICAgICB0LnBhcmFtcy5mcmVlTW9kZSAmJiB0LnBhcmFtcy5mcmVlTW9kZS5lbmFibGVkICYmIF9hMTggPiBzICYmIChfYTE4ID0gcyk7XG4gICAgICAgIGZvciAodmFyIF9zMjkgPSAwOyBfczI5IDwgX2ExODsgX3MyOSArPSAxKSBlLnJlbmRlckJ1bGxldCA/IHIgKz0gZS5yZW5kZXJCdWxsZXQuY2FsbCh0LCBfczI5LCBlLmJ1bGxldENsYXNzKSA6IHIgKz0gXCI8XCIuY29uY2F0KGUuYnVsbGV0RWxlbWVudCwgXCIgXCIpLmNvbmNhdCh0LmlzRWxlbWVudCA/ICdwYXJ0PVwiYnVsbGV0XCInIDogXCJcIiwgXCIgY2xhc3M9XFxcIlwiKS5jb25jYXQoZS5idWxsZXRDbGFzcywgXCJcXFwiPjwvXCIpLmNvbmNhdChlLmJ1bGxldEVsZW1lbnQsIFwiPlwiKTtcbiAgICAgIH1cbiAgICAgIFwiZnJhY3Rpb25cIiA9PT0gZS50eXBlICYmIChyID0gZS5yZW5kZXJGcmFjdGlvbiA/IGUucmVuZGVyRnJhY3Rpb24uY2FsbCh0LCBlLmN1cnJlbnRDbGFzcywgZS50b3RhbENsYXNzKSA6IFwiPHNwYW4gY2xhc3M9XFxcIlwiLmNvbmNhdChlLmN1cnJlbnRDbGFzcywgXCJcXFwiPjwvc3Bhbj4gLyA8c3BhbiBjbGFzcz1cXFwiXCIpLmNvbmNhdChlLnRvdGFsQ2xhc3MsIFwiXFxcIj48L3NwYW4+XCIpKSwgXCJwcm9ncmVzc2JhclwiID09PSBlLnR5cGUgJiYgKHIgPSBlLnJlbmRlclByb2dyZXNzYmFyID8gZS5yZW5kZXJQcm9ncmVzc2Jhci5jYWxsKHQsIGUucHJvZ3Jlc3NiYXJGaWxsQ2xhc3MpIDogXCI8c3BhbiBjbGFzcz1cXFwiXCIuY29uY2F0KGUucHJvZ3Jlc3NiYXJGaWxsQ2xhc3MsIFwiXFxcIj48L3NwYW4+XCIpKSwgdC5wYWdpbmF0aW9uLmJ1bGxldHMgPSBbXSwgYS5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHZhciBfdCRwYWdpbmF0aW9uJGJ1bGxldHM7XG4gICAgICAgIFwiY3VzdG9tXCIgIT09IGUudHlwZSAmJiAocy5pbm5lckhUTUwgPSByIHx8IFwiXCIpLCBcImJ1bGxldHNcIiA9PT0gZS50eXBlICYmIChfdCRwYWdpbmF0aW9uJGJ1bGxldHMgPSB0LnBhZ2luYXRpb24uYnVsbGV0cykucHVzaC5hcHBseShfdCRwYWdpbmF0aW9uJGJ1bGxldHMsIF90b0NvbnN1bWFibGVBcnJheShzLnF1ZXJ5U2VsZWN0b3JBbGwodGUoZS5idWxsZXRDbGFzcykpKSk7XG4gICAgICB9KSwgXCJjdXN0b21cIiAhPT0gZS50eXBlICYmIGkoXCJwYWdpbmF0aW9uUmVuZGVyXCIsIGFbMF0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoKCkge1xuICAgICAgdC5wYXJhbXMucGFnaW5hdGlvbiA9IGVlKHQsIHQub3JpZ2luYWxQYXJhbXMucGFnaW5hdGlvbiwgdC5wYXJhbXMucGFnaW5hdGlvbiwge1xuICAgICAgICBlbDogXCJzd2lwZXItcGFnaW5hdGlvblwiXG4gICAgICB9KTtcbiAgICAgIHZhciBlID0gdC5wYXJhbXMucGFnaW5hdGlvbjtcbiAgICAgIGlmICghZS5lbCkgcmV0dXJuO1xuICAgICAgdmFyIHM7XG4gICAgICBcInN0cmluZ1wiID09IHR5cGVvZiBlLmVsICYmIHQuaXNFbGVtZW50ICYmIChzID0gdC5lbC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoZS5lbCkpLCBzIHx8IFwic3RyaW5nXCIgIT0gdHlwZW9mIGUuZWwgfHwgKHMgPSBfdG9Db25zdW1hYmxlQXJyYXkoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlLmVsKSkpLCBzIHx8IChzID0gZS5lbCksIHMgJiYgMCAhPT0gcy5sZW5ndGggJiYgKHQucGFyYW1zLnVuaXF1ZU5hdkVsZW1lbnRzICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUuZWwgJiYgQXJyYXkuaXNBcnJheShzKSAmJiBzLmxlbmd0aCA+IDEgJiYgKHMgPSBfdG9Db25zdW1hYmxlQXJyYXkodC5lbC5xdWVyeVNlbGVjdG9yQWxsKGUuZWwpKSwgcy5sZW5ndGggPiAxICYmIChzID0gcy5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIHkoZSwgXCIuc3dpcGVyXCIpWzBdID09PSB0LmVsO1xuICAgICAgfSlbMF0pKSwgQXJyYXkuaXNBcnJheShzKSAmJiAxID09PSBzLmxlbmd0aCAmJiAocyA9IHNbMF0pLCBPYmplY3QuYXNzaWduKHQucGFnaW5hdGlvbiwge1xuICAgICAgICBlbDogc1xuICAgICAgfSksIHMgPSBvKHMpLCBzLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgXCJidWxsZXRzXCIgPT09IGUudHlwZSAmJiBlLmNsaWNrYWJsZSAmJiBzLmNsYXNzTGlzdC5hZGQoZS5jbGlja2FibGVDbGFzcyksIHMuY2xhc3NMaXN0LmFkZChlLm1vZGlmaWVyQ2xhc3MgKyBlLnR5cGUpLCBzLmNsYXNzTGlzdC5hZGQodC5pc0hvcml6b250YWwoKSA/IGUuaG9yaXpvbnRhbENsYXNzIDogZS52ZXJ0aWNhbENsYXNzKSwgXCJidWxsZXRzXCIgPT09IGUudHlwZSAmJiBlLmR5bmFtaWNCdWxsZXRzICYmIChzLmNsYXNzTGlzdC5hZGQoXCJcIi5jb25jYXQoZS5tb2RpZmllckNsYXNzKS5jb25jYXQoZS50eXBlLCBcIi1keW5hbWljXCIpKSwgbCA9IDAsIGUuZHluYW1pY01haW5CdWxsZXRzIDwgMSAmJiAoZS5keW5hbWljTWFpbkJ1bGxldHMgPSAxKSksIFwicHJvZ3Jlc3NiYXJcIiA9PT0gZS50eXBlICYmIGUucHJvZ3Jlc3NiYXJPcHBvc2l0ZSAmJiBzLmNsYXNzTGlzdC5hZGQoZS5wcm9ncmVzc2Jhck9wcG9zaXRlQ2xhc3MpLCBlLmNsaWNrYWJsZSAmJiBzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwKSwgdC5lbmFibGVkIHx8IHMuY2xhc3NMaXN0LmFkZChlLmxvY2tDbGFzcyk7XG4gICAgICB9KSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGYoKSB7XG4gICAgICB2YXIgZSA9IHQucGFyYW1zLnBhZ2luYXRpb247XG4gICAgICBpZiAoZCgpKSByZXR1cm47XG4gICAgICB2YXIgcyA9IHQucGFnaW5hdGlvbi5lbDtcbiAgICAgIHMgJiYgKHMgPSBvKHMpLCBzLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcy5jbGFzc0xpc3QucmVtb3ZlKGUuaGlkZGVuQ2xhc3MpLCBzLmNsYXNzTGlzdC5yZW1vdmUoZS5tb2RpZmllckNsYXNzICsgZS50eXBlKSwgcy5jbGFzc0xpc3QucmVtb3ZlKHQuaXNIb3Jpem9udGFsKCkgPyBlLmhvcml6b250YWxDbGFzcyA6IGUudmVydGljYWxDbGFzcyksIGUuY2xpY2thYmxlICYmIHMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHApO1xuICAgICAgfSkpLCB0LnBhZ2luYXRpb24uYnVsbGV0cyAmJiB0LnBhZ2luYXRpb24uYnVsbGV0cy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHZhciBfdCRjbGFzc0xpc3Q7XG4gICAgICAgIHJldHVybiAoX3QkY2xhc3NMaXN0ID0gdC5jbGFzc0xpc3QpLnJlbW92ZS5hcHBseShfdCRjbGFzc0xpc3QsIF90b0NvbnN1bWFibGVBcnJheShlLmJ1bGxldEFjdGl2ZUNsYXNzLnNwbGl0KFwiIFwiKSkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGEoXCJjaGFuZ2VEaXJlY3Rpb25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0LnBhZ2luYXRpb24gfHwgIXQucGFnaW5hdGlvbi5lbCkgcmV0dXJuO1xuICAgICAgdmFyIGUgPSB0LnBhcmFtcy5wYWdpbmF0aW9uO1xuICAgICAgdmFyIHMgPSB0LnBhZ2luYXRpb24uZWw7XG4gICAgICBzID0gbyhzKSwgcy5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHMuY2xhc3NMaXN0LnJlbW92ZShlLmhvcml6b250YWxDbGFzcywgZS52ZXJ0aWNhbENsYXNzKSwgcy5jbGFzc0xpc3QuYWRkKHQuaXNIb3Jpem9udGFsKCkgPyBlLmhvcml6b250YWxDbGFzcyA6IGUudmVydGljYWxDbGFzcyk7XG4gICAgICB9KTtcbiAgICB9KSwgYShcImluaXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgITEgPT09IHQucGFyYW1zLnBhZ2luYXRpb24uZW5hYmxlZCA/IGcoKSA6IChoKCksIG0oKSwgdSgpKTtcbiAgICB9KSwgYShcImFjdGl2ZUluZGV4Q2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZvaWQgMCA9PT0gdC5zbmFwSW5kZXggJiYgdSgpO1xuICAgIH0pLCBhKFwic25hcEluZGV4Q2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHUoKTtcbiAgICB9KSwgYShcInNuYXBHcmlkTGVuZ3RoQ2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG0oKSwgdSgpO1xuICAgIH0pLCBhKFwiZGVzdHJveVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBmKCk7XG4gICAgfSksIGEoXCJlbmFibGUgZGlzYWJsZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZSA9IHQucGFnaW5hdGlvbi5lbDtcbiAgICAgIGUgJiYgKGUgPSBvKGUpLCBlLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIGUuY2xhc3NMaXN0W3QuZW5hYmxlZCA/IFwicmVtb3ZlXCIgOiBcImFkZFwiXSh0LnBhcmFtcy5wYWdpbmF0aW9uLmxvY2tDbGFzcyk7XG4gICAgICB9KSk7XG4gICAgfSksIGEoXCJsb2NrIHVubG9ja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB1KCk7XG4gICAgfSksIGEoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSwgcykge1xuICAgICAgdmFyIGEgPSBzLnRhcmdldDtcbiAgICAgIHZhciByID0gdC5wYWdpbmF0aW9uLmVsO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocikgfHwgKHIgPSBbcl0uZmlsdGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiAhIWU7XG4gICAgICB9KSksIHQucGFyYW1zLnBhZ2luYXRpb24uZWwgJiYgdC5wYXJhbXMucGFnaW5hdGlvbi5oaWRlT25DbGljayAmJiByICYmIHIubGVuZ3RoID4gMCAmJiAhYS5jbGFzc0xpc3QuY29udGFpbnModC5wYXJhbXMucGFnaW5hdGlvbi5idWxsZXRDbGFzcykpIHtcbiAgICAgICAgaWYgKHQubmF2aWdhdGlvbiAmJiAodC5uYXZpZ2F0aW9uLm5leHRFbCAmJiBhID09PSB0Lm5hdmlnYXRpb24ubmV4dEVsIHx8IHQubmF2aWdhdGlvbi5wcmV2RWwgJiYgYSA9PT0gdC5uYXZpZ2F0aW9uLnByZXZFbCkpIHJldHVybjtcbiAgICAgICAgdmFyIF9lNDggPSByWzBdLmNsYXNzTGlzdC5jb250YWlucyh0LnBhcmFtcy5wYWdpbmF0aW9uLmhpZGRlbkNsYXNzKTtcbiAgICAgICAgaSghMCA9PT0gX2U0OCA/IFwicGFnaW5hdGlvblNob3dcIiA6IFwicGFnaW5hdGlvbkhpZGVcIiksIHIuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBlLmNsYXNzTGlzdC50b2dnbGUodC5wYXJhbXMucGFnaW5hdGlvbi5oaWRkZW5DbGFzcyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBnID0gZnVuY3Rpb24gZygpIHtcbiAgICAgIHQuZWwuY2xhc3NMaXN0LmFkZCh0LnBhcmFtcy5wYWdpbmF0aW9uLnBhZ2luYXRpb25EaXNhYmxlZENsYXNzKTtcbiAgICAgIHZhciBlID0gdC5wYWdpbmF0aW9uLmVsO1xuICAgICAgZSAmJiAoZSA9IG8oZSksIGUuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gZS5jbGFzc0xpc3QuYWRkKHQucGFyYW1zLnBhZ2luYXRpb24ucGFnaW5hdGlvbkRpc2FibGVkQ2xhc3MpO1xuICAgICAgfSkpLCBmKCk7XG4gICAgfTtcbiAgICBPYmplY3QuYXNzaWduKHQucGFnaW5hdGlvbiwge1xuICAgICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICAgIHQuZWwuY2xhc3NMaXN0LnJlbW92ZSh0LnBhcmFtcy5wYWdpbmF0aW9uLnBhZ2luYXRpb25EaXNhYmxlZENsYXNzKTtcbiAgICAgICAgdmFyIGUgPSB0LnBhZ2luYXRpb24uZWw7XG4gICAgICAgIGUgJiYgKGUgPSBvKGUpLCBlLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gZS5jbGFzc0xpc3QucmVtb3ZlKHQucGFyYW1zLnBhZ2luYXRpb24ucGFnaW5hdGlvbkRpc2FibGVkQ2xhc3MpO1xuICAgICAgICB9KSksIGgoKSwgbSgpLCB1KCk7XG4gICAgICB9LFxuICAgICAgZGlzYWJsZTogZyxcbiAgICAgIHJlbmRlcjogbSxcbiAgICAgIHVwZGF0ZTogdSxcbiAgICAgIGluaXQ6IGgsXG4gICAgICBkZXN0cm95OiBmXG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQgPSBlLnN3aXBlcixcbiAgICAgIHMgPSBlLmV4dGVuZFBhcmFtcyxcbiAgICAgIGkgPSBlLm9uLFxuICAgICAgciA9IGUuZW1pdDtcbiAgICB2YXIgbCA9IGEoKTtcbiAgICB2YXIgbyxcbiAgICAgIGQsXG4gICAgICBjLFxuICAgICAgcCxcbiAgICAgIHUgPSAhMSxcbiAgICAgIG0gPSBudWxsLFxuICAgICAgaCA9IG51bGw7XG4gICAgZnVuY3Rpb24gZigpIHtcbiAgICAgIGlmICghdC5wYXJhbXMuc2Nyb2xsYmFyLmVsIHx8ICF0LnNjcm9sbGJhci5lbCkgcmV0dXJuO1xuICAgICAgdmFyIGUgPSB0LnNjcm9sbGJhcixcbiAgICAgICAgcyA9IHQucnRsVHJhbnNsYXRlLFxuICAgICAgICBhID0gZS5kcmFnRWwsXG4gICAgICAgIGkgPSBlLmVsLFxuICAgICAgICByID0gdC5wYXJhbXMuc2Nyb2xsYmFyLFxuICAgICAgICBuID0gdC5wYXJhbXMubG9vcCA/IHQucHJvZ3Jlc3NMb29wIDogdC5wcm9ncmVzcztcbiAgICAgIHZhciBsID0gZCxcbiAgICAgICAgbyA9IChjIC0gZCkgKiBuO1xuICAgICAgcyA/IChvID0gLW8sIG8gPiAwID8gKGwgPSBkIC0gbywgbyA9IDApIDogLW8gKyBkID4gYyAmJiAobCA9IGMgKyBvKSkgOiBvIDwgMCA/IChsID0gZCArIG8sIG8gPSAwKSA6IG8gKyBkID4gYyAmJiAobCA9IGMgLSBvKSwgdC5pc0hvcml6b250YWwoKSA/IChhLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoXCIuY29uY2F0KG8sIFwicHgsIDAsIDApXCIpLCBhLnN0eWxlLndpZHRoID0gXCJcIi5jb25jYXQobCwgXCJweFwiKSkgOiAoYS5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZTNkKDBweCwgXCIuY29uY2F0KG8sIFwicHgsIDApXCIpLCBhLnN0eWxlLmhlaWdodCA9IFwiXCIuY29uY2F0KGwsIFwicHhcIikpLCByLmhpZGUgJiYgKGNsZWFyVGltZW91dChtKSwgaS5zdHlsZS5vcGFjaXR5ID0gMSwgbSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpLnN0eWxlLm9wYWNpdHkgPSAwLCBpLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiNDAwbXNcIjtcbiAgICAgIH0sIDFlMykpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB3KCkge1xuICAgICAgaWYgKCF0LnBhcmFtcy5zY3JvbGxiYXIuZWwgfHwgIXQuc2Nyb2xsYmFyLmVsKSByZXR1cm47XG4gICAgICB2YXIgZSA9IHQuc2Nyb2xsYmFyLFxuICAgICAgICBzID0gZS5kcmFnRWwsXG4gICAgICAgIGEgPSBlLmVsO1xuICAgICAgcy5zdHlsZS53aWR0aCA9IFwiXCIsIHMuc3R5bGUuaGVpZ2h0ID0gXCJcIiwgYyA9IHQuaXNIb3Jpem9udGFsKCkgPyBhLm9mZnNldFdpZHRoIDogYS5vZmZzZXRIZWlnaHQsIHAgPSB0LnNpemUgLyAodC52aXJ0dWFsU2l6ZSArIHQucGFyYW1zLnNsaWRlc09mZnNldEJlZm9yZSAtICh0LnBhcmFtcy5jZW50ZXJlZFNsaWRlcyA/IHQuc25hcEdyaWRbMF0gOiAwKSksIGQgPSBcImF1dG9cIiA9PT0gdC5wYXJhbXMuc2Nyb2xsYmFyLmRyYWdTaXplID8gYyAqIHAgOiBwYXJzZUludCh0LnBhcmFtcy5zY3JvbGxiYXIuZHJhZ1NpemUsIDEwKSwgdC5pc0hvcml6b250YWwoKSA/IHMuc3R5bGUud2lkdGggPSBcIlwiLmNvbmNhdChkLCBcInB4XCIpIDogcy5zdHlsZS5oZWlnaHQgPSBcIlwiLmNvbmNhdChkLCBcInB4XCIpLCBhLnN0eWxlLmRpc3BsYXkgPSBwID49IDEgPyBcIm5vbmVcIiA6IFwiXCIsIHQucGFyYW1zLnNjcm9sbGJhci5oaWRlICYmIChhLnN0eWxlLm9wYWNpdHkgPSAwKSwgdC5wYXJhbXMud2F0Y2hPdmVyZmxvdyAmJiB0LmVuYWJsZWQgJiYgZS5lbC5jbGFzc0xpc3RbdC5pc0xvY2tlZCA/IFwiYWRkXCIgOiBcInJlbW92ZVwiXSh0LnBhcmFtcy5zY3JvbGxiYXIubG9ja0NsYXNzKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYihlKSB7XG4gICAgICByZXR1cm4gdC5pc0hvcml6b250YWwoKSA/IGUuY2xpZW50WCA6IGUuY2xpZW50WTtcbiAgICB9XG4gICAgZnVuY3Rpb24geShlKSB7XG4gICAgICB2YXIgcyA9IHQuc2Nyb2xsYmFyLFxuICAgICAgICBhID0gdC5ydGxUcmFuc2xhdGUsXG4gICAgICAgIGkgPSBzLmVsO1xuICAgICAgdmFyIHI7XG4gICAgICByID0gKGIoZSkgLSB2KGkpW3QuaXNIb3Jpem9udGFsKCkgPyBcImxlZnRcIiA6IFwidG9wXCJdIC0gKG51bGwgIT09IG8gPyBvIDogZCAvIDIpKSAvIChjIC0gZCksIHIgPSBNYXRoLm1heChNYXRoLm1pbihyLCAxKSwgMCksIGEgJiYgKHIgPSAxIC0gcik7XG4gICAgICB2YXIgbiA9IHQubWluVHJhbnNsYXRlKCkgKyAodC5tYXhUcmFuc2xhdGUoKSAtIHQubWluVHJhbnNsYXRlKCkpICogcjtcbiAgICAgIHQudXBkYXRlUHJvZ3Jlc3MobiksIHQuc2V0VHJhbnNsYXRlKG4pLCB0LnVwZGF0ZUFjdGl2ZUluZGV4KCksIHQudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBFKGUpIHtcbiAgICAgIHZhciBzID0gdC5wYXJhbXMuc2Nyb2xsYmFyLFxuICAgICAgICBhID0gdC5zY3JvbGxiYXIsXG4gICAgICAgIGkgPSB0LndyYXBwZXJFbCxcbiAgICAgICAgbiA9IGEuZWwsXG4gICAgICAgIGwgPSBhLmRyYWdFbDtcbiAgICAgIHUgPSAhMCwgbyA9IGUudGFyZ2V0ID09PSBsID8gYihlKSAtIGUudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3QuaXNIb3Jpem9udGFsKCkgPyBcImxlZnRcIiA6IFwidG9wXCJdIDogbnVsbCwgZS5wcmV2ZW50RGVmYXVsdCgpLCBlLnN0b3BQcm9wYWdhdGlvbigpLCBpLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiMTAwbXNcIiwgbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIjEwMG1zXCIsIHkoZSksIGNsZWFyVGltZW91dChoKSwgbi5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIjBtc1wiLCBzLmhpZGUgJiYgKG4uc3R5bGUub3BhY2l0eSA9IDEpLCB0LnBhcmFtcy5jc3NNb2RlICYmICh0LndyYXBwZXJFbC5zdHlsZVtcInNjcm9sbC1zbmFwLXR5cGVcIl0gPSBcIm5vbmVcIiksIHIoXCJzY3JvbGxiYXJEcmFnU3RhcnRcIiwgZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHgoZSkge1xuICAgICAgdmFyIHMgPSB0LnNjcm9sbGJhcixcbiAgICAgICAgYSA9IHQud3JhcHBlckVsLFxuICAgICAgICBpID0gcy5lbCxcbiAgICAgICAgbiA9IHMuZHJhZ0VsO1xuICAgICAgdSAmJiAoZS5wcmV2ZW50RGVmYXVsdCA/IGUucHJldmVudERlZmF1bHQoKSA6IGUucmV0dXJuVmFsdWUgPSAhMSwgeShlKSwgYS5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIjBtc1wiLCBpLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiMG1zXCIsIG4uc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCIwbXNcIiwgcihcInNjcm9sbGJhckRyYWdNb3ZlXCIsIGUpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gUyhlKSB7XG4gICAgICB2YXIgcyA9IHQucGFyYW1zLnNjcm9sbGJhcixcbiAgICAgICAgYSA9IHQuc2Nyb2xsYmFyLFxuICAgICAgICBpID0gdC53cmFwcGVyRWwsXG4gICAgICAgIGwgPSBhLmVsO1xuICAgICAgdSAmJiAodSA9ICExLCB0LnBhcmFtcy5jc3NNb2RlICYmICh0LndyYXBwZXJFbC5zdHlsZVtcInNjcm9sbC1zbmFwLXR5cGVcIl0gPSBcIlwiLCBpLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiXCIpLCBzLmhpZGUgJiYgKGNsZWFyVGltZW91dChoKSwgaCA9IG4oZnVuY3Rpb24gKCkge1xuICAgICAgICBsLnN0eWxlLm9wYWNpdHkgPSAwLCBsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiNDAwbXNcIjtcbiAgICAgIH0sIDFlMykpLCByKFwic2Nyb2xsYmFyRHJhZ0VuZFwiLCBlKSwgcy5zbmFwT25SZWxlYXNlICYmIHQuc2xpZGVUb0Nsb3Nlc3QoKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFQoZSkge1xuICAgICAgdmFyIHMgPSB0LnNjcm9sbGJhcixcbiAgICAgICAgYSA9IHQucGFyYW1zLFxuICAgICAgICBpID0gcy5lbDtcbiAgICAgIGlmICghaSkgcmV0dXJuO1xuICAgICAgdmFyIHIgPSBpLFxuICAgICAgICBuID0gISFhLnBhc3NpdmVMaXN0ZW5lcnMgJiYge1xuICAgICAgICAgIHBhc3NpdmU6ICExLFxuICAgICAgICAgIGNhcHR1cmU6ICExXG4gICAgICAgIH0sXG4gICAgICAgIG8gPSAhIWEucGFzc2l2ZUxpc3RlbmVycyAmJiB7XG4gICAgICAgICAgcGFzc2l2ZTogITAsXG4gICAgICAgICAgY2FwdHVyZTogITFcbiAgICAgICAgfTtcbiAgICAgIGlmICghcikgcmV0dXJuO1xuICAgICAgdmFyIGQgPSBcIm9uXCIgPT09IGUgPyBcImFkZEV2ZW50TGlzdGVuZXJcIiA6IFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiO1xuICAgICAgcltkXShcInBvaW50ZXJkb3duXCIsIEUsIG4pLCBsW2RdKFwicG9pbnRlcm1vdmVcIiwgeCwgbiksIGxbZF0oXCJwb2ludGVydXBcIiwgUywgbyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIE0oKSB7XG4gICAgICB2YXIgZSA9IHQuc2Nyb2xsYmFyLFxuICAgICAgICBzID0gdC5lbDtcbiAgICAgIHQucGFyYW1zLnNjcm9sbGJhciA9IGVlKHQsIHQub3JpZ2luYWxQYXJhbXMuc2Nyb2xsYmFyLCB0LnBhcmFtcy5zY3JvbGxiYXIsIHtcbiAgICAgICAgZWw6IFwic3dpcGVyLXNjcm9sbGJhclwiXG4gICAgICB9KTtcbiAgICAgIHZhciBhID0gdC5wYXJhbXMuc2Nyb2xsYmFyO1xuICAgICAgaWYgKCFhLmVsKSByZXR1cm47XG4gICAgICB2YXIgaSwgcjtcbiAgICAgIFwic3RyaW5nXCIgPT0gdHlwZW9mIGEuZWwgJiYgdC5pc0VsZW1lbnQgJiYgKGkgPSB0LmVsLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihhLmVsKSksIGkgfHwgXCJzdHJpbmdcIiAhPSB0eXBlb2YgYS5lbCA/IGkgfHwgKGkgPSBhLmVsKSA6IGkgPSBsLnF1ZXJ5U2VsZWN0b3JBbGwoYS5lbCksIHQucGFyYW1zLnVuaXF1ZU5hdkVsZW1lbnRzICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGEuZWwgJiYgaS5sZW5ndGggPiAxICYmIDEgPT09IHMucXVlcnlTZWxlY3RvckFsbChhLmVsKS5sZW5ndGggJiYgKGkgPSBzLnF1ZXJ5U2VsZWN0b3IoYS5lbCkpLCBpLmxlbmd0aCA+IDAgJiYgKGkgPSBpWzBdKSwgaS5jbGFzc0xpc3QuYWRkKHQuaXNIb3Jpem9udGFsKCkgPyBhLmhvcml6b250YWxDbGFzcyA6IGEudmVydGljYWxDbGFzcyksIGkgJiYgKHIgPSBpLnF1ZXJ5U2VsZWN0b3IoXCIuXCIuY29uY2F0KHQucGFyYW1zLnNjcm9sbGJhci5kcmFnQ2xhc3MpKSwgciB8fCAociA9IGcoXCJkaXZcIiwgdC5wYXJhbXMuc2Nyb2xsYmFyLmRyYWdDbGFzcyksIGkuYXBwZW5kKHIpKSksIE9iamVjdC5hc3NpZ24oZSwge1xuICAgICAgICBlbDogaSxcbiAgICAgICAgZHJhZ0VsOiByXG4gICAgICB9KSwgYS5kcmFnZ2FibGUgJiYgdC5wYXJhbXMuc2Nyb2xsYmFyLmVsICYmIHQuc2Nyb2xsYmFyLmVsICYmIFQoXCJvblwiKSwgaSAmJiBpLmNsYXNzTGlzdFt0LmVuYWJsZWQgPyBcInJlbW92ZVwiIDogXCJhZGRcIl0odC5wYXJhbXMuc2Nyb2xsYmFyLmxvY2tDbGFzcyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEMoKSB7XG4gICAgICB2YXIgZSA9IHQucGFyYW1zLnNjcm9sbGJhcixcbiAgICAgICAgcyA9IHQuc2Nyb2xsYmFyLmVsO1xuICAgICAgcyAmJiBzLmNsYXNzTGlzdC5yZW1vdmUodC5pc0hvcml6b250YWwoKSA/IGUuaG9yaXpvbnRhbENsYXNzIDogZS52ZXJ0aWNhbENsYXNzKSwgdC5wYXJhbXMuc2Nyb2xsYmFyLmVsICYmIHQuc2Nyb2xsYmFyLmVsICYmIFQoXCJvZmZcIik7XG4gICAgfVxuICAgIHMoe1xuICAgICAgc2Nyb2xsYmFyOiB7XG4gICAgICAgIGVsOiBudWxsLFxuICAgICAgICBkcmFnU2l6ZTogXCJhdXRvXCIsXG4gICAgICAgIGhpZGU6ICExLFxuICAgICAgICBkcmFnZ2FibGU6ICExLFxuICAgICAgICBzbmFwT25SZWxlYXNlOiAhMCxcbiAgICAgICAgbG9ja0NsYXNzOiBcInN3aXBlci1zY3JvbGxiYXItbG9ja1wiLFxuICAgICAgICBkcmFnQ2xhc3M6IFwic3dpcGVyLXNjcm9sbGJhci1kcmFnXCIsXG4gICAgICAgIHNjcm9sbGJhckRpc2FibGVkQ2xhc3M6IFwic3dpcGVyLXNjcm9sbGJhci1kaXNhYmxlZFwiLFxuICAgICAgICBob3Jpem9udGFsQ2xhc3M6IFwic3dpcGVyLXNjcm9sbGJhci1ob3Jpem9udGFsXCIsXG4gICAgICAgIHZlcnRpY2FsQ2xhc3M6IFwic3dpcGVyLXNjcm9sbGJhci12ZXJ0aWNhbFwiXG4gICAgICB9XG4gICAgfSksIHQuc2Nyb2xsYmFyID0ge1xuICAgICAgZWw6IG51bGwsXG4gICAgICBkcmFnRWw6IG51bGxcbiAgICB9LCBpKFwiaW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAhMSA9PT0gdC5wYXJhbXMuc2Nyb2xsYmFyLmVuYWJsZWQgPyBQKCkgOiAoTSgpLCB3KCksIGYoKSk7XG4gICAgfSksIGkoXCJ1cGRhdGUgcmVzaXplIG9ic2VydmVyVXBkYXRlIGxvY2sgdW5sb2NrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHcoKTtcbiAgICB9KSwgaShcInNldFRyYW5zbGF0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBmKCk7XG4gICAgfSksIGkoXCJzZXRUcmFuc2l0aW9uXCIsIGZ1bmN0aW9uIChlLCBzKSB7XG4gICAgICAhZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdC5wYXJhbXMuc2Nyb2xsYmFyLmVsICYmIHQuc2Nyb2xsYmFyLmVsICYmICh0LnNjcm9sbGJhci5kcmFnRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCJcIi5jb25jYXQoZSwgXCJtc1wiKSk7XG4gICAgICB9KHMpO1xuICAgIH0pLCBpKFwiZW5hYmxlIGRpc2FibGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGUgPSB0LnNjcm9sbGJhci5lbDtcbiAgICAgIGUgJiYgZS5jbGFzc0xpc3RbdC5lbmFibGVkID8gXCJyZW1vdmVcIiA6IFwiYWRkXCJdKHQucGFyYW1zLnNjcm9sbGJhci5sb2NrQ2xhc3MpO1xuICAgIH0pLCBpKFwiZGVzdHJveVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBDKCk7XG4gICAgfSk7XG4gICAgdmFyIFAgPSBmdW5jdGlvbiBQKCkge1xuICAgICAgdC5lbC5jbGFzc0xpc3QuYWRkKHQucGFyYW1zLnNjcm9sbGJhci5zY3JvbGxiYXJEaXNhYmxlZENsYXNzKSwgdC5zY3JvbGxiYXIuZWwgJiYgdC5zY3JvbGxiYXIuZWwuY2xhc3NMaXN0LmFkZCh0LnBhcmFtcy5zY3JvbGxiYXIuc2Nyb2xsYmFyRGlzYWJsZWRDbGFzcyksIEMoKTtcbiAgICB9O1xuICAgIE9iamVjdC5hc3NpZ24odC5zY3JvbGxiYXIsIHtcbiAgICAgIGVuYWJsZTogZnVuY3Rpb24gZW5hYmxlKCkge1xuICAgICAgICB0LmVsLmNsYXNzTGlzdC5yZW1vdmUodC5wYXJhbXMuc2Nyb2xsYmFyLnNjcm9sbGJhckRpc2FibGVkQ2xhc3MpLCB0LnNjcm9sbGJhci5lbCAmJiB0LnNjcm9sbGJhci5lbC5jbGFzc0xpc3QucmVtb3ZlKHQucGFyYW1zLnNjcm9sbGJhci5zY3JvbGxiYXJEaXNhYmxlZENsYXNzKSwgTSgpLCB3KCksIGYoKTtcbiAgICAgIH0sXG4gICAgICBkaXNhYmxlOiBQLFxuICAgICAgdXBkYXRlU2l6ZTogdyxcbiAgICAgIHNldFRyYW5zbGF0ZTogZixcbiAgICAgIGluaXQ6IE0sXG4gICAgICBkZXN0cm95OiBDXG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQgPSBlLnN3aXBlcixcbiAgICAgIHMgPSBlLmV4dGVuZFBhcmFtcyxcbiAgICAgIGEgPSBlLm9uO1xuICAgIHMoe1xuICAgICAgcGFyYWxsYXg6IHtcbiAgICAgICAgZW5hYmxlZDogITFcbiAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgaSA9IGZ1bmN0aW9uIGkoZSwgcykge1xuICAgICAgICB2YXIgYSA9IHQucnRsLFxuICAgICAgICAgIGkgPSBhID8gLTEgOiAxLFxuICAgICAgICAgIHIgPSBlLmdldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLXBhcmFsbGF4XCIpIHx8IFwiMFwiO1xuICAgICAgICB2YXIgbiA9IGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItcGFyYWxsYXgteFwiKSxcbiAgICAgICAgICBsID0gZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1wYXJhbGxheC15XCIpO1xuICAgICAgICB2YXIgbyA9IGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItcGFyYWxsYXgtc2NhbGVcIiksXG4gICAgICAgICAgZCA9IGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItcGFyYWxsYXgtb3BhY2l0eVwiKSxcbiAgICAgICAgICBjID0gZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1wYXJhbGxheC1yb3RhdGVcIik7XG4gICAgICAgIGlmIChuIHx8IGwgPyAobiA9IG4gfHwgXCIwXCIsIGwgPSBsIHx8IFwiMFwiKSA6IHQuaXNIb3Jpem9udGFsKCkgPyAobiA9IHIsIGwgPSBcIjBcIikgOiAobCA9IHIsIG4gPSBcIjBcIiksIG4gPSBuLmluZGV4T2YoXCIlXCIpID49IDAgPyBwYXJzZUludChuLCAxMCkgKiBzICogaSArIFwiJVwiIDogbiAqIHMgKiBpICsgXCJweFwiLCBsID0gbC5pbmRleE9mKFwiJVwiKSA+PSAwID8gcGFyc2VJbnQobCwgMTApICogcyArIFwiJVwiIDogbCAqIHMgKyBcInB4XCIsIG51bGwgIT0gZCkge1xuICAgICAgICAgIHZhciBfdDM5ID0gZCAtIChkIC0gMSkgKiAoMSAtIE1hdGguYWJzKHMpKTtcbiAgICAgICAgICBlLnN0eWxlLm9wYWNpdHkgPSBfdDM5O1xuICAgICAgICB9XG4gICAgICAgIHZhciBwID0gXCJ0cmFuc2xhdGUzZChcIi5jb25jYXQobiwgXCIsIFwiKS5jb25jYXQobCwgXCIsIDBweClcIik7XG4gICAgICAgIGlmIChudWxsICE9IG8pIHtcbiAgICAgICAgICBwICs9IFwiIHNjYWxlKFwiLmNvbmNhdChvIC0gKG8gLSAxKSAqICgxIC0gTWF0aC5hYnMocykpLCBcIilcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGMgJiYgbnVsbCAhPSBjKSB7XG4gICAgICAgICAgcCArPSBcIiByb3RhdGUoXCIuY29uY2F0KGMgKiBzICogLTEsIFwiZGVnKVwiKTtcbiAgICAgICAgfVxuICAgICAgICBlLnN0eWxlLnRyYW5zZm9ybSA9IHA7XG4gICAgICB9LFxuICAgICAgciA9IGZ1bmN0aW9uIHIoKSB7XG4gICAgICAgIHZhciBlID0gdC5lbCxcbiAgICAgICAgICBzID0gdC5zbGlkZXMsXG4gICAgICAgICAgYSA9IHQucHJvZ3Jlc3MsXG4gICAgICAgICAgciA9IHQuc25hcEdyaWQ7XG4gICAgICAgIGYoZSwgXCJbZGF0YS1zd2lwZXItcGFyYWxsYXhdLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgteF0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC15XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LW9wYWNpdHldLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgtc2NhbGVdXCIpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBpKGUsIGEpO1xuICAgICAgICB9KSwgcy5mb3JFYWNoKGZ1bmN0aW9uIChlLCBzKSB7XG4gICAgICAgICAgdmFyIG4gPSBlLnByb2dyZXNzO1xuICAgICAgICAgIHQucGFyYW1zLnNsaWRlc1Blckdyb3VwID4gMSAmJiBcImF1dG9cIiAhPT0gdC5wYXJhbXMuc2xpZGVzUGVyVmlldyAmJiAobiArPSBNYXRoLmNlaWwocyAvIDIpIC0gYSAqIChyLmxlbmd0aCAtIDEpKSwgbiA9IE1hdGgubWluKE1hdGgubWF4KG4sIC0xKSwgMSksIGUucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXN3aXBlci1wYXJhbGxheF0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC14XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXldLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgtb3BhY2l0eV0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC1zY2FsZV0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC1yb3RhdGVdXCIpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGkoZSwgbik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICBhKFwiYmVmb3JlSW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0LnBhcmFtcy5wYXJhbGxheC5lbmFibGVkICYmICh0LnBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzID0gITAsIHQub3JpZ2luYWxQYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcyA9ICEwKTtcbiAgICB9KSwgYShcImluaXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdC5wYXJhbXMucGFyYWxsYXguZW5hYmxlZCAmJiByKCk7XG4gICAgfSksIGEoXCJzZXRUcmFuc2xhdGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdC5wYXJhbXMucGFyYWxsYXguZW5hYmxlZCAmJiByKCk7XG4gICAgfSksIGEoXCJzZXRUcmFuc2l0aW9uXCIsIGZ1bmN0aW9uIChlLCBzKSB7XG4gICAgICB0LnBhcmFtcy5wYXJhbGxheC5lbmFibGVkICYmIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IHQucGFyYW1zLnNwZWVkKTtcbiAgICAgICAgdmFyIHMgPSB0LmVsO1xuICAgICAgICBzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1zd2lwZXItcGFyYWxsYXhdLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgteF0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC15XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LW9wYWNpdHldLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgtc2NhbGVdXCIpLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICB2YXIgcyA9IHBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItcGFyYWxsYXgtZHVyYXRpb25cIiksIDEwKSB8fCBlO1xuICAgICAgICAgIDAgPT09IGUgJiYgKHMgPSAwKSwgdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdChzLCBcIm1zXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0ocyk7XG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQgPSBlLnN3aXBlcixcbiAgICAgIHMgPSBlLmV4dGVuZFBhcmFtcyxcbiAgICAgIGEgPSBlLm9uLFxuICAgICAgaSA9IGUuZW1pdDtcbiAgICB2YXIgbiA9IHIoKTtcbiAgICBzKHtcbiAgICAgIHpvb206IHtcbiAgICAgICAgZW5hYmxlZDogITEsXG4gICAgICAgIG1heFJhdGlvOiAzLFxuICAgICAgICBtaW5SYXRpbzogMSxcbiAgICAgICAgdG9nZ2xlOiAhMCxcbiAgICAgICAgY29udGFpbmVyQ2xhc3M6IFwic3dpcGVyLXpvb20tY29udGFpbmVyXCIsXG4gICAgICAgIHpvb21lZFNsaWRlQ2xhc3M6IFwic3dpcGVyLXNsaWRlLXpvb21lZFwiXG4gICAgICB9XG4gICAgfSksIHQuem9vbSA9IHtcbiAgICAgIGVuYWJsZWQ6ICExXG4gICAgfTtcbiAgICB2YXIgbCxcbiAgICAgIGQsXG4gICAgICBjID0gMSxcbiAgICAgIHAgPSAhMTtcbiAgICB2YXIgdSA9IFtdLFxuICAgICAgbSA9IHtcbiAgICAgICAgb3JpZ2luWDogMCxcbiAgICAgICAgb3JpZ2luWTogMCxcbiAgICAgICAgc2xpZGVFbDogdm9pZCAwLFxuICAgICAgICBzbGlkZVdpZHRoOiB2b2lkIDAsXG4gICAgICAgIHNsaWRlSGVpZ2h0OiB2b2lkIDAsXG4gICAgICAgIGltYWdlRWw6IHZvaWQgMCxcbiAgICAgICAgaW1hZ2VXcmFwRWw6IHZvaWQgMCxcbiAgICAgICAgbWF4UmF0aW86IDNcbiAgICAgIH0sXG4gICAgICBoID0ge1xuICAgICAgICBpc1RvdWNoZWQ6IHZvaWQgMCxcbiAgICAgICAgaXNNb3ZlZDogdm9pZCAwLFxuICAgICAgICBjdXJyZW50WDogdm9pZCAwLFxuICAgICAgICBjdXJyZW50WTogdm9pZCAwLFxuICAgICAgICBtaW5YOiB2b2lkIDAsXG4gICAgICAgIG1pblk6IHZvaWQgMCxcbiAgICAgICAgbWF4WDogdm9pZCAwLFxuICAgICAgICBtYXhZOiB2b2lkIDAsXG4gICAgICAgIHdpZHRoOiB2b2lkIDAsXG4gICAgICAgIGhlaWdodDogdm9pZCAwLFxuICAgICAgICBzdGFydFg6IHZvaWQgMCxcbiAgICAgICAgc3RhcnRZOiB2b2lkIDAsXG4gICAgICAgIHRvdWNoZXNTdGFydDoge30sXG4gICAgICAgIHRvdWNoZXNDdXJyZW50OiB7fVxuICAgICAgfSxcbiAgICAgIGcgPSB7XG4gICAgICAgIHg6IHZvaWQgMCxcbiAgICAgICAgeTogdm9pZCAwLFxuICAgICAgICBwcmV2UG9zaXRpb25YOiB2b2lkIDAsXG4gICAgICAgIHByZXZQb3NpdGlvblk6IHZvaWQgMCxcbiAgICAgICAgcHJldlRpbWU6IHZvaWQgMFxuICAgICAgfTtcbiAgICB2YXIgdyA9IDE7XG4gICAgZnVuY3Rpb24gYigpIHtcbiAgICAgIGlmICh1Lmxlbmd0aCA8IDIpIHJldHVybiAxO1xuICAgICAgdmFyIGUgPSB1WzBdLnBhZ2VYLFxuICAgICAgICB0ID0gdVswXS5wYWdlWSxcbiAgICAgICAgcyA9IHVbMV0ucGFnZVgsXG4gICAgICAgIGEgPSB1WzFdLnBhZ2VZO1xuICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhzIC0gZSwgMikgKyBNYXRoLnBvdyhhIC0gdCwgMikpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBFKGUpIHtcbiAgICAgIHZhciBzID0gdC5pc0VsZW1lbnQgPyBcInN3aXBlci1zbGlkZVwiIDogXCIuXCIuY29uY2F0KHQucGFyYW1zLnNsaWRlQ2xhc3MpO1xuICAgICAgcmV0dXJuICEhZS50YXJnZXQubWF0Y2hlcyhzKSB8fCB0LnNsaWRlcy5maWx0ZXIoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgcmV0dXJuIHQuY29udGFpbnMoZS50YXJnZXQpO1xuICAgICAgfSkubGVuZ3RoID4gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24geChlKSB7XG4gICAgICBpZiAoXCJtb3VzZVwiID09PSBlLnBvaW50ZXJUeXBlICYmIHUuc3BsaWNlKDAsIHUubGVuZ3RoKSwgIUUoZSkpIHJldHVybjtcbiAgICAgIHZhciBzID0gdC5wYXJhbXMuem9vbTtcbiAgICAgIGlmIChsID0gITEsIGQgPSAhMSwgdS5wdXNoKGUpLCAhKHUubGVuZ3RoIDwgMikpIHtcbiAgICAgICAgaWYgKGwgPSAhMCwgbS5zY2FsZVN0YXJ0ID0gYigpLCAhbS5zbGlkZUVsKSB7XG4gICAgICAgICAgbS5zbGlkZUVsID0gZS50YXJnZXQuY2xvc2VzdChcIi5cIi5jb25jYXQodC5wYXJhbXMuc2xpZGVDbGFzcywgXCIsIHN3aXBlci1zbGlkZVwiKSksIG0uc2xpZGVFbCB8fCAobS5zbGlkZUVsID0gdC5zbGlkZXNbdC5hY3RpdmVJbmRleF0pO1xuICAgICAgICAgIHZhciBfYTE5ID0gbS5zbGlkZUVsLnF1ZXJ5U2VsZWN0b3IoXCIuXCIuY29uY2F0KHMuY29udGFpbmVyQ2xhc3MpKTtcbiAgICAgICAgICBpZiAoX2ExOSAmJiAoX2ExOSA9IF9hMTkucXVlcnlTZWxlY3RvckFsbChcInBpY3R1cmUsIGltZywgc3ZnLCBjYW52YXMsIC5zd2lwZXItem9vbS10YXJnZXRcIilbMF0pLCBtLmltYWdlRWwgPSBfYTE5LCBtLmltYWdlV3JhcEVsID0gX2ExOSA/IHkobS5pbWFnZUVsLCBcIi5cIi5jb25jYXQocy5jb250YWluZXJDbGFzcykpWzBdIDogdm9pZCAwLCAhbS5pbWFnZVdyYXBFbCkgcmV0dXJuIHZvaWQgKG0uaW1hZ2VFbCA9IHZvaWQgMCk7XG4gICAgICAgICAgbS5tYXhSYXRpbyA9IG0uaW1hZ2VXcmFwRWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItem9vbVwiKSB8fCBzLm1heFJhdGlvO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtLmltYWdlRWwpIHtcbiAgICAgICAgICB2YXIgX3JlZjMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGlmICh1Lmxlbmd0aCA8IDIpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgeDogbnVsbCxcbiAgICAgICAgICAgICAgICB5OiBudWxsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHZhciBlID0gbS5pbWFnZUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICByZXR1cm4gWyh1WzBdLnBhZ2VYICsgKHVbMV0ucGFnZVggLSB1WzBdLnBhZ2VYKSAvIDIgLSBlLngpIC8gYywgKHVbMF0ucGFnZVkgKyAodVsxXS5wYWdlWSAtIHVbMF0ucGFnZVkpIC8gMiAtIGUueSkgLyBjXTtcbiAgICAgICAgICAgIH0oKSxcbiAgICAgICAgICAgIF9yZWY0ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjMsIDIpLFxuICAgICAgICAgICAgX2U0OSA9IF9yZWY0WzBdLFxuICAgICAgICAgICAgX3Q0MCA9IF9yZWY0WzFdO1xuICAgICAgICAgIG0ub3JpZ2luWCA9IF9lNDksIG0ub3JpZ2luWSA9IF90NDAsIG0uaW1hZ2VFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIjBtc1wiO1xuICAgICAgICB9XG4gICAgICAgIHAgPSAhMDtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gUyhlKSB7XG4gICAgICBpZiAoIUUoZSkpIHJldHVybjtcbiAgICAgIHZhciBzID0gdC5wYXJhbXMuem9vbSxcbiAgICAgICAgYSA9IHQuem9vbSxcbiAgICAgICAgaSA9IHUuZmluZEluZGV4KGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgcmV0dXJuIHQucG9pbnRlcklkID09PSBlLnBvaW50ZXJJZDtcbiAgICAgICAgfSk7XG4gICAgICBpID49IDAgJiYgKHVbaV0gPSBlKSwgdS5sZW5ndGggPCAyIHx8IChkID0gITAsIG0uc2NhbGVNb3ZlID0gYigpLCBtLmltYWdlRWwgJiYgKGEuc2NhbGUgPSBtLnNjYWxlTW92ZSAvIG0uc2NhbGVTdGFydCAqIGMsIGEuc2NhbGUgPiBtLm1heFJhdGlvICYmIChhLnNjYWxlID0gbS5tYXhSYXRpbyAtIDEgKyBNYXRoLnBvdyhhLnNjYWxlIC0gbS5tYXhSYXRpbyArIDEsIC41KSksIGEuc2NhbGUgPCBzLm1pblJhdGlvICYmIChhLnNjYWxlID0gcy5taW5SYXRpbyArIDEgLSBNYXRoLnBvdyhzLm1pblJhdGlvIC0gYS5zY2FsZSArIDEsIC41KSksIG0uaW1hZ2VFbC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZShcIi5jb25jYXQoYS5zY2FsZSwgXCIpXCIpKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFQoZSkge1xuICAgICAgaWYgKCFFKGUpKSByZXR1cm47XG4gICAgICBpZiAoXCJtb3VzZVwiID09PSBlLnBvaW50ZXJUeXBlICYmIFwicG9pbnRlcm91dFwiID09PSBlLnR5cGUpIHJldHVybjtcbiAgICAgIHZhciBzID0gdC5wYXJhbXMuem9vbSxcbiAgICAgICAgYSA9IHQuem9vbSxcbiAgICAgICAgaSA9IHUuZmluZEluZGV4KGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgcmV0dXJuIHQucG9pbnRlcklkID09PSBlLnBvaW50ZXJJZDtcbiAgICAgICAgfSk7XG4gICAgICBpID49IDAgJiYgdS5zcGxpY2UoaSwgMSksIGwgJiYgZCAmJiAobCA9ICExLCBkID0gITEsIG0uaW1hZ2VFbCAmJiAoYS5zY2FsZSA9IE1hdGgubWF4KE1hdGgubWluKGEuc2NhbGUsIG0ubWF4UmF0aW8pLCBzLm1pblJhdGlvKSwgbS5pbWFnZUVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiXCIuY29uY2F0KHQucGFyYW1zLnNwZWVkLCBcIm1zXCIpLCBtLmltYWdlRWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZCgwLDAsMCkgc2NhbGUoXCIuY29uY2F0KGEuc2NhbGUsIFwiKVwiKSwgYyA9IGEuc2NhbGUsIHAgPSAhMSwgYS5zY2FsZSA+IDEgJiYgbS5zbGlkZUVsID8gbS5zbGlkZUVsLmNsYXNzTGlzdC5hZGQoXCJcIi5jb25jYXQocy56b29tZWRTbGlkZUNsYXNzKSkgOiBhLnNjYWxlIDw9IDEgJiYgbS5zbGlkZUVsICYmIG0uc2xpZGVFbC5jbGFzc0xpc3QucmVtb3ZlKFwiXCIuY29uY2F0KHMuem9vbWVkU2xpZGVDbGFzcykpLCAxID09PSBhLnNjYWxlICYmIChtLm9yaWdpblggPSAwLCBtLm9yaWdpblkgPSAwLCBtLnNsaWRlRWwgPSB2b2lkIDApKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIE0oZSkge1xuICAgICAgaWYgKCFFKGUpIHx8ICFmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgcyA9IFwiLlwiLmNvbmNhdCh0LnBhcmFtcy56b29tLmNvbnRhaW5lckNsYXNzKTtcbiAgICAgICAgcmV0dXJuICEhZS50YXJnZXQubWF0Y2hlcyhzKSB8fCBfdG9Db25zdW1hYmxlQXJyYXkodC5lbC5xdWVyeVNlbGVjdG9yQWxsKHMpKS5maWx0ZXIoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICByZXR1cm4gdC5jb250YWlucyhlLnRhcmdldCk7XG4gICAgICAgIH0pLmxlbmd0aCA+IDA7XG4gICAgICB9KGUpKSByZXR1cm47XG4gICAgICB2YXIgcyA9IHQuem9vbTtcbiAgICAgIGlmICghbS5pbWFnZUVsKSByZXR1cm47XG4gICAgICBpZiAoIWguaXNUb3VjaGVkIHx8ICFtLnNsaWRlRWwpIHJldHVybjtcbiAgICAgIGguaXNNb3ZlZCB8fCAoaC53aWR0aCA9IG0uaW1hZ2VFbC5vZmZzZXRXaWR0aCwgaC5oZWlnaHQgPSBtLmltYWdlRWwub2Zmc2V0SGVpZ2h0LCBoLnN0YXJ0WCA9IG8obS5pbWFnZVdyYXBFbCwgXCJ4XCIpIHx8IDAsIGguc3RhcnRZID0gbyhtLmltYWdlV3JhcEVsLCBcInlcIikgfHwgMCwgbS5zbGlkZVdpZHRoID0gbS5zbGlkZUVsLm9mZnNldFdpZHRoLCBtLnNsaWRlSGVpZ2h0ID0gbS5zbGlkZUVsLm9mZnNldEhlaWdodCwgbS5pbWFnZVdyYXBFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIjBtc1wiKTtcbiAgICAgIHZhciBhID0gaC53aWR0aCAqIHMuc2NhbGUsXG4gICAgICAgIGkgPSBoLmhlaWdodCAqIHMuc2NhbGU7XG4gICAgICBpZiAoYSA8IG0uc2xpZGVXaWR0aCAmJiBpIDwgbS5zbGlkZUhlaWdodCkgcmV0dXJuO1xuICAgICAgaC5taW5YID0gTWF0aC5taW4obS5zbGlkZVdpZHRoIC8gMiAtIGEgLyAyLCAwKSwgaC5tYXhYID0gLWgubWluWCwgaC5taW5ZID0gTWF0aC5taW4obS5zbGlkZUhlaWdodCAvIDIgLSBpIC8gMiwgMCksIGgubWF4WSA9IC1oLm1pblksIGgudG91Y2hlc0N1cnJlbnQueCA9IHUubGVuZ3RoID4gMCA/IHVbMF0ucGFnZVggOiBlLnBhZ2VYLCBoLnRvdWNoZXNDdXJyZW50LnkgPSB1Lmxlbmd0aCA+IDAgPyB1WzBdLnBhZ2VZIDogZS5wYWdlWTtcbiAgICAgIGlmIChNYXRoLm1heChNYXRoLmFicyhoLnRvdWNoZXNDdXJyZW50LnggLSBoLnRvdWNoZXNTdGFydC54KSwgTWF0aC5hYnMoaC50b3VjaGVzQ3VycmVudC55IC0gaC50b3VjaGVzU3RhcnQueSkpID4gNSAmJiAodC5hbGxvd0NsaWNrID0gITEpLCAhaC5pc01vdmVkICYmICFwKSB7XG4gICAgICAgIGlmICh0LmlzSG9yaXpvbnRhbCgpICYmIChNYXRoLmZsb29yKGgubWluWCkgPT09IE1hdGguZmxvb3IoaC5zdGFydFgpICYmIGgudG91Y2hlc0N1cnJlbnQueCA8IGgudG91Y2hlc1N0YXJ0LnggfHwgTWF0aC5mbG9vcihoLm1heFgpID09PSBNYXRoLmZsb29yKGguc3RhcnRYKSAmJiBoLnRvdWNoZXNDdXJyZW50LnggPiBoLnRvdWNoZXNTdGFydC54KSkgcmV0dXJuIHZvaWQgKGguaXNUb3VjaGVkID0gITEpO1xuICAgICAgICBpZiAoIXQuaXNIb3Jpem9udGFsKCkgJiYgKE1hdGguZmxvb3IoaC5taW5ZKSA9PT0gTWF0aC5mbG9vcihoLnN0YXJ0WSkgJiYgaC50b3VjaGVzQ3VycmVudC55IDwgaC50b3VjaGVzU3RhcnQueSB8fCBNYXRoLmZsb29yKGgubWF4WSkgPT09IE1hdGguZmxvb3IoaC5zdGFydFkpICYmIGgudG91Y2hlc0N1cnJlbnQueSA+IGgudG91Y2hlc1N0YXJ0LnkpKSByZXR1cm4gdm9pZCAoaC5pc1RvdWNoZWQgPSAhMSk7XG4gICAgICB9XG4gICAgICBlLmNhbmNlbGFibGUgJiYgZS5wcmV2ZW50RGVmYXVsdCgpLCBlLnN0b3BQcm9wYWdhdGlvbigpLCBoLmlzTW92ZWQgPSAhMDtcbiAgICAgIHZhciByID0gKHMuc2NhbGUgLSBjKSAvIChtLm1heFJhdGlvIC0gdC5wYXJhbXMuem9vbS5taW5SYXRpbyksXG4gICAgICAgIG4gPSBtLm9yaWdpblgsXG4gICAgICAgIGwgPSBtLm9yaWdpblk7XG4gICAgICBoLmN1cnJlbnRYID0gaC50b3VjaGVzQ3VycmVudC54IC0gaC50b3VjaGVzU3RhcnQueCArIGguc3RhcnRYICsgciAqIChoLndpZHRoIC0gMiAqIG4pLCBoLmN1cnJlbnRZID0gaC50b3VjaGVzQ3VycmVudC55IC0gaC50b3VjaGVzU3RhcnQueSArIGguc3RhcnRZICsgciAqIChoLmhlaWdodCAtIDIgKiBsKSwgaC5jdXJyZW50WCA8IGgubWluWCAmJiAoaC5jdXJyZW50WCA9IGgubWluWCArIDEgLSBNYXRoLnBvdyhoLm1pblggLSBoLmN1cnJlbnRYICsgMSwgLjgpKSwgaC5jdXJyZW50WCA+IGgubWF4WCAmJiAoaC5jdXJyZW50WCA9IGgubWF4WCAtIDEgKyBNYXRoLnBvdyhoLmN1cnJlbnRYIC0gaC5tYXhYICsgMSwgLjgpKSwgaC5jdXJyZW50WSA8IGgubWluWSAmJiAoaC5jdXJyZW50WSA9IGgubWluWSArIDEgLSBNYXRoLnBvdyhoLm1pblkgLSBoLmN1cnJlbnRZICsgMSwgLjgpKSwgaC5jdXJyZW50WSA+IGgubWF4WSAmJiAoaC5jdXJyZW50WSA9IGgubWF4WSAtIDEgKyBNYXRoLnBvdyhoLmN1cnJlbnRZIC0gaC5tYXhZICsgMSwgLjgpKSwgZy5wcmV2UG9zaXRpb25YIHx8IChnLnByZXZQb3NpdGlvblggPSBoLnRvdWNoZXNDdXJyZW50LngpLCBnLnByZXZQb3NpdGlvblkgfHwgKGcucHJldlBvc2l0aW9uWSA9IGgudG91Y2hlc0N1cnJlbnQueSksIGcucHJldlRpbWUgfHwgKGcucHJldlRpbWUgPSBEYXRlLm5vdygpKSwgZy54ID0gKGgudG91Y2hlc0N1cnJlbnQueCAtIGcucHJldlBvc2l0aW9uWCkgLyAoRGF0ZS5ub3coKSAtIGcucHJldlRpbWUpIC8gMiwgZy55ID0gKGgudG91Y2hlc0N1cnJlbnQueSAtIGcucHJldlBvc2l0aW9uWSkgLyAoRGF0ZS5ub3coKSAtIGcucHJldlRpbWUpIC8gMiwgTWF0aC5hYnMoaC50b3VjaGVzQ3VycmVudC54IC0gZy5wcmV2UG9zaXRpb25YKSA8IDIgJiYgKGcueCA9IDApLCBNYXRoLmFicyhoLnRvdWNoZXNDdXJyZW50LnkgLSBnLnByZXZQb3NpdGlvblkpIDwgMiAmJiAoZy55ID0gMCksIGcucHJldlBvc2l0aW9uWCA9IGgudG91Y2hlc0N1cnJlbnQueCwgZy5wcmV2UG9zaXRpb25ZID0gaC50b3VjaGVzQ3VycmVudC55LCBnLnByZXZUaW1lID0gRGF0ZS5ub3coKSwgbS5pbWFnZVdyYXBFbC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZTNkKFwiLmNvbmNhdChoLmN1cnJlbnRYLCBcInB4LCBcIikuY29uY2F0KGguY3VycmVudFksIFwicHgsMClcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEMoKSB7XG4gICAgICB2YXIgZSA9IHQuem9vbTtcbiAgICAgIG0uc2xpZGVFbCAmJiB0LmFjdGl2ZUluZGV4ICE9PSB0LnNsaWRlcy5pbmRleE9mKG0uc2xpZGVFbCkgJiYgKG0uaW1hZ2VFbCAmJiAobS5pbWFnZUVsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlKDEpXCIpLCBtLmltYWdlV3JhcEVsICYmIChtLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoMCwwLDApXCIpLCBtLnNsaWRlRWwuY2xhc3NMaXN0LnJlbW92ZShcIlwiLmNvbmNhdCh0LnBhcmFtcy56b29tLnpvb21lZFNsaWRlQ2xhc3MpKSwgZS5zY2FsZSA9IDEsIGMgPSAxLCBtLnNsaWRlRWwgPSB2b2lkIDAsIG0uaW1hZ2VFbCA9IHZvaWQgMCwgbS5pbWFnZVdyYXBFbCA9IHZvaWQgMCwgbS5vcmlnaW5YID0gMCwgbS5vcmlnaW5ZID0gMCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFAoZSkge1xuICAgICAgdmFyIHMgPSB0Lnpvb20sXG4gICAgICAgIGEgPSB0LnBhcmFtcy56b29tO1xuICAgICAgaWYgKCFtLnNsaWRlRWwpIHtcbiAgICAgICAgZSAmJiBlLnRhcmdldCAmJiAobS5zbGlkZUVsID0gZS50YXJnZXQuY2xvc2VzdChcIi5cIi5jb25jYXQodC5wYXJhbXMuc2xpZGVDbGFzcywgXCIsIHN3aXBlci1zbGlkZVwiKSkpLCBtLnNsaWRlRWwgfHwgKHQucGFyYW1zLnZpcnR1YWwgJiYgdC5wYXJhbXMudmlydHVhbC5lbmFibGVkICYmIHQudmlydHVhbCA/IG0uc2xpZGVFbCA9IGYodC5zbGlkZXNFbCwgXCIuXCIuY29uY2F0KHQucGFyYW1zLnNsaWRlQWN0aXZlQ2xhc3MpKVswXSA6IG0uc2xpZGVFbCA9IHQuc2xpZGVzW3QuYWN0aXZlSW5kZXhdKTtcbiAgICAgICAgdmFyIF9zMzAgPSBtLnNsaWRlRWwucXVlcnlTZWxlY3RvcihcIi5cIi5jb25jYXQoYS5jb250YWluZXJDbGFzcykpO1xuICAgICAgICBfczMwICYmIChfczMwID0gX3MzMC5xdWVyeVNlbGVjdG9yQWxsKFwicGljdHVyZSwgaW1nLCBzdmcsIGNhbnZhcywgLnN3aXBlci16b29tLXRhcmdldFwiKVswXSksIG0uaW1hZ2VFbCA9IF9zMzAsIG0uaW1hZ2VXcmFwRWwgPSBfczMwID8geShtLmltYWdlRWwsIFwiLlwiLmNvbmNhdChhLmNvbnRhaW5lckNsYXNzKSlbMF0gOiB2b2lkIDA7XG4gICAgICB9XG4gICAgICBpZiAoIW0uaW1hZ2VFbCB8fCAhbS5pbWFnZVdyYXBFbCkgcmV0dXJuO1xuICAgICAgdmFyIGksIHIsIGwsIG8sIGQsIHAsIHUsIGcsIHcsIGIsIEUsIHgsIFMsIFQsIE0sIEMsIFAsIEw7XG4gICAgICB0LnBhcmFtcy5jc3NNb2RlICYmICh0LndyYXBwZXJFbC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCIsIHQud3JhcHBlckVsLnN0eWxlLnRvdWNoQWN0aW9uID0gXCJub25lXCIpLCBtLnNsaWRlRWwuY2xhc3NMaXN0LmFkZChcIlwiLmNvbmNhdChhLnpvb21lZFNsaWRlQ2xhc3MpKSwgdm9pZCAwID09PSBoLnRvdWNoZXNTdGFydC54ICYmIGUgPyAoaSA9IGUucGFnZVgsIHIgPSBlLnBhZ2VZKSA6IChpID0gaC50b3VjaGVzU3RhcnQueCwgciA9IGgudG91Y2hlc1N0YXJ0LnkpO1xuICAgICAgdmFyIHogPSBcIm51bWJlclwiID09IHR5cGVvZiBlID8gZSA6IG51bGw7XG4gICAgICAxID09PSBjICYmIHogJiYgKGkgPSB2b2lkIDAsIHIgPSB2b2lkIDApLCBzLnNjYWxlID0geiB8fCBtLmltYWdlV3JhcEVsLmdldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLXpvb21cIikgfHwgYS5tYXhSYXRpbywgYyA9IHogfHwgbS5pbWFnZVdyYXBFbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci16b29tXCIpIHx8IGEubWF4UmF0aW8sICFlIHx8IDEgPT09IGMgJiYgeiA/ICh1ID0gMCwgZyA9IDApIDogKFAgPSBtLnNsaWRlRWwub2Zmc2V0V2lkdGgsIEwgPSBtLnNsaWRlRWwub2Zmc2V0SGVpZ2h0LCBsID0gdihtLnNsaWRlRWwpLmxlZnQgKyBuLnNjcm9sbFgsIG8gPSB2KG0uc2xpZGVFbCkudG9wICsgbi5zY3JvbGxZLCBkID0gbCArIFAgLyAyIC0gaSwgcCA9IG8gKyBMIC8gMiAtIHIsIHcgPSBtLmltYWdlRWwub2Zmc2V0V2lkdGgsIGIgPSBtLmltYWdlRWwub2Zmc2V0SGVpZ2h0LCBFID0gdyAqIHMuc2NhbGUsIHggPSBiICogcy5zY2FsZSwgUyA9IE1hdGgubWluKFAgLyAyIC0gRSAvIDIsIDApLCBUID0gTWF0aC5taW4oTCAvIDIgLSB4IC8gMiwgMCksIE0gPSAtUywgQyA9IC1ULCB1ID0gZCAqIHMuc2NhbGUsIGcgPSBwICogcy5zY2FsZSwgdSA8IFMgJiYgKHUgPSBTKSwgdSA+IE0gJiYgKHUgPSBNKSwgZyA8IFQgJiYgKGcgPSBUKSwgZyA+IEMgJiYgKGcgPSBDKSksIHogJiYgMSA9PT0gcy5zY2FsZSAmJiAobS5vcmlnaW5YID0gMCwgbS5vcmlnaW5ZID0gMCksIG0uaW1hZ2VXcmFwRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCIzMDBtc1wiLCBtLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoXCIuY29uY2F0KHUsIFwicHgsIFwiKS5jb25jYXQoZywgXCJweCwwKVwiKSwgbS5pbWFnZUVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiMzAwbXNcIiwgbS5pbWFnZUVsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlKFwiLmNvbmNhdChzLnNjYWxlLCBcIilcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEwoKSB7XG4gICAgICB2YXIgZSA9IHQuem9vbSxcbiAgICAgICAgcyA9IHQucGFyYW1zLnpvb207XG4gICAgICBpZiAoIW0uc2xpZGVFbCkge1xuICAgICAgICB0LnBhcmFtcy52aXJ0dWFsICYmIHQucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCAmJiB0LnZpcnR1YWwgPyBtLnNsaWRlRWwgPSBmKHQuc2xpZGVzRWwsIFwiLlwiLmNvbmNhdCh0LnBhcmFtcy5zbGlkZUFjdGl2ZUNsYXNzKSlbMF0gOiBtLnNsaWRlRWwgPSB0LnNsaWRlc1t0LmFjdGl2ZUluZGV4XTtcbiAgICAgICAgdmFyIF9lNTAgPSBtLnNsaWRlRWwucXVlcnlTZWxlY3RvcihcIi5cIi5jb25jYXQocy5jb250YWluZXJDbGFzcykpO1xuICAgICAgICBfZTUwICYmIChfZTUwID0gX2U1MC5xdWVyeVNlbGVjdG9yQWxsKFwicGljdHVyZSwgaW1nLCBzdmcsIGNhbnZhcywgLnN3aXBlci16b29tLXRhcmdldFwiKVswXSksIG0uaW1hZ2VFbCA9IF9lNTAsIG0uaW1hZ2VXcmFwRWwgPSBfZTUwID8geShtLmltYWdlRWwsIFwiLlwiLmNvbmNhdChzLmNvbnRhaW5lckNsYXNzKSlbMF0gOiB2b2lkIDA7XG4gICAgICB9XG4gICAgICBtLmltYWdlRWwgJiYgbS5pbWFnZVdyYXBFbCAmJiAodC5wYXJhbXMuY3NzTW9kZSAmJiAodC53cmFwcGVyRWwuc3R5bGUub3ZlcmZsb3cgPSBcIlwiLCB0LndyYXBwZXJFbC5zdHlsZS50b3VjaEFjdGlvbiA9IFwiXCIpLCBlLnNjYWxlID0gMSwgYyA9IDEsIG0uaW1hZ2VXcmFwRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCIzMDBtc1wiLCBtLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoMCwwLDApXCIsIG0uaW1hZ2VFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIjMwMG1zXCIsIG0uaW1hZ2VFbC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZSgxKVwiLCBtLnNsaWRlRWwuY2xhc3NMaXN0LnJlbW92ZShcIlwiLmNvbmNhdChzLnpvb21lZFNsaWRlQ2xhc3MpKSwgbS5zbGlkZUVsID0gdm9pZCAwLCBtLm9yaWdpblggPSAwLCBtLm9yaWdpblkgPSAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24geihlKSB7XG4gICAgICB2YXIgcyA9IHQuem9vbTtcbiAgICAgIHMuc2NhbGUgJiYgMSAhPT0gcy5zY2FsZSA/IEwoKSA6IFAoZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEEoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXNzaXZlTGlzdGVuZXI6ICEhdC5wYXJhbXMucGFzc2l2ZUxpc3RlbmVycyAmJiB7XG4gICAgICAgICAgcGFzc2l2ZTogITAsXG4gICAgICAgICAgY2FwdHVyZTogITFcbiAgICAgICAgfSxcbiAgICAgICAgYWN0aXZlTGlzdGVuZXJXaXRoQ2FwdHVyZTogIXQucGFyYW1zLnBhc3NpdmVMaXN0ZW5lcnMgfHwge1xuICAgICAgICAgIHBhc3NpdmU6ICExLFxuICAgICAgICAgIGNhcHR1cmU6ICEwXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uICQoKSB7XG4gICAgICB2YXIgZSA9IHQuem9vbTtcbiAgICAgIGlmIChlLmVuYWJsZWQpIHJldHVybjtcbiAgICAgIGUuZW5hYmxlZCA9ICEwO1xuICAgICAgdmFyIF9BID0gQSgpLFxuICAgICAgICBzID0gX0EucGFzc2l2ZUxpc3RlbmVyLFxuICAgICAgICBhID0gX0EuYWN0aXZlTGlzdGVuZXJXaXRoQ2FwdHVyZTtcbiAgICAgIHQud3JhcHBlckVsLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCB4LCBzKSwgdC53cmFwcGVyRWwuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIFMsIGEpLCBbXCJwb2ludGVydXBcIiwgXCJwb2ludGVyY2FuY2VsXCIsIFwicG9pbnRlcm91dFwiXS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHQud3JhcHBlckVsLmFkZEV2ZW50TGlzdGVuZXIoZSwgVCwgcyk7XG4gICAgICB9KSwgdC53cmFwcGVyRWwuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIE0sIGEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBJKCkge1xuICAgICAgdmFyIGUgPSB0Lnpvb207XG4gICAgICBpZiAoIWUuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgZS5lbmFibGVkID0gITE7XG4gICAgICB2YXIgX0EyID0gQSgpLFxuICAgICAgICBzID0gX0EyLnBhc3NpdmVMaXN0ZW5lcixcbiAgICAgICAgYSA9IF9BMi5hY3RpdmVMaXN0ZW5lcldpdGhDYXB0dXJlO1xuICAgICAgdC53cmFwcGVyRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHgsIHMpLCB0LndyYXBwZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgUywgYSksIFtcInBvaW50ZXJ1cFwiLCBcInBvaW50ZXJjYW5jZWxcIiwgXCJwb2ludGVyb3V0XCJdLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdC53cmFwcGVyRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLCBULCBzKTtcbiAgICAgIH0pLCB0LndyYXBwZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgTSwgYSk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lnpvb20sIFwic2NhbGVcIiwge1xuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiB3O1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KGUpIHtcbiAgICAgICAgaWYgKHcgIT09IGUpIHtcbiAgICAgICAgICB2YXIgX3Q0MSA9IG0uaW1hZ2VFbCxcbiAgICAgICAgICAgIF9zMzEgPSBtLnNsaWRlRWw7XG4gICAgICAgICAgaShcInpvb21DaGFuZ2VcIiwgZSwgX3Q0MSwgX3MzMSk7XG4gICAgICAgIH1cbiAgICAgICAgdyA9IGU7XG4gICAgICB9XG4gICAgfSksIGEoXCJpbml0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHQucGFyYW1zLnpvb20uZW5hYmxlZCAmJiAkKCk7XG4gICAgfSksIGEoXCJkZXN0cm95XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIEkoKTtcbiAgICB9KSwgYShcInRvdWNoU3RhcnRcIiwgZnVuY3Rpb24gKGUsIHMpIHtcbiAgICAgIHQuem9vbS5lbmFibGVkICYmIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBzID0gdC5kZXZpY2U7XG4gICAgICAgIGlmICghbS5pbWFnZUVsKSByZXR1cm47XG4gICAgICAgIGlmIChoLmlzVG91Y2hlZCkgcmV0dXJuO1xuICAgICAgICBzLmFuZHJvaWQgJiYgZS5jYW5jZWxhYmxlICYmIGUucHJldmVudERlZmF1bHQoKSwgaC5pc1RvdWNoZWQgPSAhMDtcbiAgICAgICAgdmFyIGEgPSB1Lmxlbmd0aCA+IDAgPyB1WzBdIDogZTtcbiAgICAgICAgaC50b3VjaGVzU3RhcnQueCA9IGEucGFnZVgsIGgudG91Y2hlc1N0YXJ0LnkgPSBhLnBhZ2VZO1xuICAgICAgfShzKTtcbiAgICB9KSwgYShcInRvdWNoRW5kXCIsIGZ1bmN0aW9uIChlLCBzKSB7XG4gICAgICB0Lnpvb20uZW5hYmxlZCAmJiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gdC56b29tO1xuICAgICAgICBpZiAoIW0uaW1hZ2VFbCkgcmV0dXJuO1xuICAgICAgICBpZiAoIWguaXNUb3VjaGVkIHx8ICFoLmlzTW92ZWQpIHJldHVybiBoLmlzVG91Y2hlZCA9ICExLCB2b2lkIChoLmlzTW92ZWQgPSAhMSk7XG4gICAgICAgIGguaXNUb3VjaGVkID0gITEsIGguaXNNb3ZlZCA9ICExO1xuICAgICAgICB2YXIgcyA9IDMwMCxcbiAgICAgICAgICBhID0gMzAwO1xuICAgICAgICB2YXIgaSA9IGcueCAqIHMsXG4gICAgICAgICAgciA9IGguY3VycmVudFggKyBpLFxuICAgICAgICAgIG4gPSBnLnkgKiBhLFxuICAgICAgICAgIGwgPSBoLmN1cnJlbnRZICsgbjtcbiAgICAgICAgMCAhPT0gZy54ICYmIChzID0gTWF0aC5hYnMoKHIgLSBoLmN1cnJlbnRYKSAvIGcueCkpLCAwICE9PSBnLnkgJiYgKGEgPSBNYXRoLmFicygobCAtIGguY3VycmVudFkpIC8gZy55KSk7XG4gICAgICAgIHZhciBvID0gTWF0aC5tYXgocywgYSk7XG4gICAgICAgIGguY3VycmVudFggPSByLCBoLmN1cnJlbnRZID0gbDtcbiAgICAgICAgdmFyIGQgPSBoLndpZHRoICogZS5zY2FsZSxcbiAgICAgICAgICBjID0gaC5oZWlnaHQgKiBlLnNjYWxlO1xuICAgICAgICBoLm1pblggPSBNYXRoLm1pbihtLnNsaWRlV2lkdGggLyAyIC0gZCAvIDIsIDApLCBoLm1heFggPSAtaC5taW5YLCBoLm1pblkgPSBNYXRoLm1pbihtLnNsaWRlSGVpZ2h0IC8gMiAtIGMgLyAyLCAwKSwgaC5tYXhZID0gLWgubWluWSwgaC5jdXJyZW50WCA9IE1hdGgubWF4KE1hdGgubWluKGguY3VycmVudFgsIGgubWF4WCksIGgubWluWCksIGguY3VycmVudFkgPSBNYXRoLm1heChNYXRoLm1pbihoLmN1cnJlbnRZLCBoLm1heFkpLCBoLm1pblkpLCBtLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiXCIuY29uY2F0KG8sIFwibXNcIiksIG0uaW1hZ2VXcmFwRWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZChcIi5jb25jYXQoaC5jdXJyZW50WCwgXCJweCwgXCIpLmNvbmNhdChoLmN1cnJlbnRZLCBcInB4LDApXCIpO1xuICAgICAgfSgpO1xuICAgIH0pLCBhKFwiZG91YmxlVGFwXCIsIGZ1bmN0aW9uIChlLCBzKSB7XG4gICAgICAhdC5hbmltYXRpbmcgJiYgdC5wYXJhbXMuem9vbS5lbmFibGVkICYmIHQuem9vbS5lbmFibGVkICYmIHQucGFyYW1zLnpvb20udG9nZ2xlICYmIHoocyk7XG4gICAgfSksIGEoXCJ0cmFuc2l0aW9uRW5kXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHQuem9vbS5lbmFibGVkICYmIHQucGFyYW1zLnpvb20uZW5hYmxlZCAmJiBDKCk7XG4gICAgfSksIGEoXCJzbGlkZUNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0Lnpvb20uZW5hYmxlZCAmJiB0LnBhcmFtcy56b29tLmVuYWJsZWQgJiYgdC5wYXJhbXMuY3NzTW9kZSAmJiBDKCk7XG4gICAgfSksIE9iamVjdC5hc3NpZ24odC56b29tLCB7XG4gICAgICBlbmFibGU6ICQsXG4gICAgICBkaXNhYmxlOiBJLFxuICAgICAgaW46IFAsXG4gICAgICBvdXQ6IEwsXG4gICAgICB0b2dnbGU6IHpcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgYSA9IGUub247XG4gICAgZnVuY3Rpb24gaShlLCB0KSB7XG4gICAgICB2YXIgcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUsIHQsIHM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSwgaSkge1xuICAgICAgICAgIGZvciAodCA9IC0xLCBlID0gYS5sZW5ndGg7IGUgLSB0ID4gMTspIHMgPSBlICsgdCA+PiAxLCBhW3NdIDw9IGkgPyB0ID0gcyA6IGUgPSBzO1xuICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9O1xuICAgICAgfSgpO1xuICAgICAgdmFyIGEsIGk7XG4gICAgICByZXR1cm4gdGhpcy54ID0gZSwgdGhpcy55ID0gdCwgdGhpcy5sYXN0SW5kZXggPSBlLmxlbmd0aCAtIDEsIHRoaXMuaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gZSA/IChpID0gcyh0aGlzLngsIGUpLCBhID0gaSAtIDEsIChlIC0gdGhpcy54W2FdKSAqICh0aGlzLnlbaV0gLSB0aGlzLnlbYV0pIC8gKHRoaXMueFtpXSAtIHRoaXMueFthXSkgKyB0aGlzLnlbYV0pIDogMDtcbiAgICAgIH0sIHRoaXM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHIoKSB7XG4gICAgICB0LmNvbnRyb2xsZXIuY29udHJvbCAmJiB0LmNvbnRyb2xsZXIuc3BsaW5lICYmICh0LmNvbnRyb2xsZXIuc3BsaW5lID0gdm9pZCAwLCBkZWxldGUgdC5jb250cm9sbGVyLnNwbGluZSk7XG4gICAgfVxuICAgIHMoe1xuICAgICAgY29udHJvbGxlcjoge1xuICAgICAgICBjb250cm9sOiB2b2lkIDAsXG4gICAgICAgIGludmVyc2U6ICExLFxuICAgICAgICBieTogXCJzbGlkZVwiXG4gICAgICB9XG4gICAgfSksIHQuY29udHJvbGxlciA9IHtcbiAgICAgIGNvbnRyb2w6IHZvaWQgMFxuICAgIH0sIGEoXCJiZWZvcmVJbml0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cgJiYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQucGFyYW1zLmNvbnRyb2xsZXIuY29udHJvbCB8fCB0LnBhcmFtcy5jb250cm9sbGVyLmNvbnRyb2wgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcbiAgICAgICAgdmFyIF9lNTEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHQucGFyYW1zLmNvbnRyb2xsZXIuY29udHJvbCk7XG4gICAgICAgIGlmIChfZTUxICYmIF9lNTEuc3dpcGVyKSB0LmNvbnRyb2xsZXIuY29udHJvbCA9IF9lNTEuc3dpcGVyO2Vsc2UgaWYgKF9lNTEpIHtcbiAgICAgICAgICB2YXIgX3MzMiA9IGZ1bmN0aW9uIF9zMzIoYSkge1xuICAgICAgICAgICAgdC5jb250cm9sbGVyLmNvbnRyb2wgPSBhLmRldGFpbFswXSwgdC51cGRhdGUoKSwgX2U1MS5yZW1vdmVFdmVudExpc3RlbmVyKFwiaW5pdFwiLCBfczMyKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIF9lNTEuYWRkRXZlbnRMaXN0ZW5lcihcImluaXRcIiwgX3MzMik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB0LmNvbnRyb2xsZXIuY29udHJvbCA9IHQucGFyYW1zLmNvbnRyb2xsZXIuY29udHJvbDtcbiAgICB9KSwgYShcInVwZGF0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICByKCk7XG4gICAgfSksIGEoXCJyZXNpemVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgcigpO1xuICAgIH0pLCBhKFwib2JzZXJ2ZXJVcGRhdGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgcigpO1xuICAgIH0pLCBhKFwic2V0VHJhbnNsYXRlXCIsIGZ1bmN0aW9uIChlLCBzLCBhKSB7XG4gICAgICB0LmNvbnRyb2xsZXIuY29udHJvbCAmJiAhdC5jb250cm9sbGVyLmNvbnRyb2wuZGVzdHJveWVkICYmIHQuY29udHJvbGxlci5zZXRUcmFuc2xhdGUocywgYSk7XG4gICAgfSksIGEoXCJzZXRUcmFuc2l0aW9uXCIsIGZ1bmN0aW9uIChlLCBzLCBhKSB7XG4gICAgICB0LmNvbnRyb2xsZXIuY29udHJvbCAmJiAhdC5jb250cm9sbGVyLmNvbnRyb2wuZGVzdHJveWVkICYmIHQuY29udHJvbGxlci5zZXRUcmFuc2l0aW9uKHMsIGEpO1xuICAgIH0pLCBPYmplY3QuYXNzaWduKHQuY29udHJvbGxlciwge1xuICAgICAgc2V0VHJhbnNsYXRlOiBmdW5jdGlvbiBzZXRUcmFuc2xhdGUoZSwgcykge1xuICAgICAgICB2YXIgYSA9IHQuY29udHJvbGxlci5jb250cm9sO1xuICAgICAgICB2YXIgciwgbjtcbiAgICAgICAgdmFyIGwgPSB0LmNvbnN0cnVjdG9yO1xuICAgICAgICBmdW5jdGlvbiBvKGUpIHtcbiAgICAgICAgICBpZiAoZS5kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgICAgICB2YXIgcyA9IHQucnRsVHJhbnNsYXRlID8gLXQudHJhbnNsYXRlIDogdC50cmFuc2xhdGU7XG4gICAgICAgICAgXCJzbGlkZVwiID09PSB0LnBhcmFtcy5jb250cm9sbGVyLmJ5ICYmICghZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHQuY29udHJvbGxlci5zcGxpbmUgPSB0LnBhcmFtcy5sb29wID8gbmV3IGkodC5zbGlkZXNHcmlkLCBlLnNsaWRlc0dyaWQpIDogbmV3IGkodC5zbmFwR3JpZCwgZS5zbmFwR3JpZCk7XG4gICAgICAgICAgfShlKSwgbiA9IC10LmNvbnRyb2xsZXIuc3BsaW5lLmludGVycG9sYXRlKC1zKSksIG4gJiYgXCJjb250YWluZXJcIiAhPT0gdC5wYXJhbXMuY29udHJvbGxlci5ieSB8fCAociA9IChlLm1heFRyYW5zbGF0ZSgpIC0gZS5taW5UcmFuc2xhdGUoKSkgLyAodC5tYXhUcmFuc2xhdGUoKSAtIHQubWluVHJhbnNsYXRlKCkpLCAhTnVtYmVyLmlzTmFOKHIpICYmIE51bWJlci5pc0Zpbml0ZShyKSB8fCAociA9IDEpLCBuID0gKHMgLSB0Lm1pblRyYW5zbGF0ZSgpKSAqIHIgKyBlLm1pblRyYW5zbGF0ZSgpKSwgdC5wYXJhbXMuY29udHJvbGxlci5pbnZlcnNlICYmIChuID0gZS5tYXhUcmFuc2xhdGUoKSAtIG4pLCBlLnVwZGF0ZVByb2dyZXNzKG4pLCBlLnNldFRyYW5zbGF0ZShuLCB0KSwgZS51cGRhdGVBY3RpdmVJbmRleCgpLCBlLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhKSkgZm9yICh2YXIgX2U1MiA9IDA7IF9lNTIgPCBhLmxlbmd0aDsgX2U1MiArPSAxKSBhW19lNTJdICE9PSBzICYmIGFbX2U1Ml0gaW5zdGFuY2VvZiBsICYmIG8oYVtfZTUyXSk7ZWxzZSBhIGluc3RhbmNlb2YgbCAmJiBzICE9PSBhICYmIG8oYSk7XG4gICAgICB9LFxuICAgICAgc2V0VHJhbnNpdGlvbjogZnVuY3Rpb24gc2V0VHJhbnNpdGlvbihlLCBzKSB7XG4gICAgICAgIHZhciBhID0gdC5jb25zdHJ1Y3RvcixcbiAgICAgICAgICBpID0gdC5jb250cm9sbGVyLmNvbnRyb2w7XG4gICAgICAgIHZhciByO1xuICAgICAgICBmdW5jdGlvbiBsKHMpIHtcbiAgICAgICAgICBzLmRlc3Ryb3llZCB8fCAocy5zZXRUcmFuc2l0aW9uKGUsIHQpLCAwICE9PSBlICYmIChzLnRyYW5zaXRpb25TdGFydCgpLCBzLnBhcmFtcy5hdXRvSGVpZ2h0ICYmIG4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcy51cGRhdGVBdXRvSGVpZ2h0KCk7XG4gICAgICAgICAgfSksIEUocy53cmFwcGVyRWwsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGkgJiYgcy50cmFuc2l0aW9uRW5kKCk7XG4gICAgICAgICAgfSkpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpKSkgZm9yIChyID0gMDsgciA8IGkubGVuZ3RoOyByICs9IDEpIGlbcl0gIT09IHMgJiYgaVtyXSBpbnN0YW5jZW9mIGEgJiYgbChpW3JdKTtlbHNlIGkgaW5zdGFuY2VvZiBhICYmIHMgIT09IGkgJiYgbChpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgYSA9IGUub247XG4gICAgcyh7XG4gICAgICBhMTF5OiB7XG4gICAgICAgIGVuYWJsZWQ6ICEwLFxuICAgICAgICBub3RpZmljYXRpb25DbGFzczogXCJzd2lwZXItbm90aWZpY2F0aW9uXCIsXG4gICAgICAgIHByZXZTbGlkZU1lc3NhZ2U6IFwiUHJldmlvdXMgc2xpZGVcIixcbiAgICAgICAgbmV4dFNsaWRlTWVzc2FnZTogXCJOZXh0IHNsaWRlXCIsXG4gICAgICAgIGZpcnN0U2xpZGVNZXNzYWdlOiBcIlRoaXMgaXMgdGhlIGZpcnN0IHNsaWRlXCIsXG4gICAgICAgIGxhc3RTbGlkZU1lc3NhZ2U6IFwiVGhpcyBpcyB0aGUgbGFzdCBzbGlkZVwiLFxuICAgICAgICBwYWdpbmF0aW9uQnVsbGV0TWVzc2FnZTogXCJHbyB0byBzbGlkZSB7e2luZGV4fX1cIixcbiAgICAgICAgc2xpZGVMYWJlbE1lc3NhZ2U6IFwie3tpbmRleH19IC8ge3tzbGlkZXNMZW5ndGh9fVwiLFxuICAgICAgICBjb250YWluZXJNZXNzYWdlOiBudWxsLFxuICAgICAgICBjb250YWluZXJSb2xlRGVzY3JpcHRpb25NZXNzYWdlOiBudWxsLFxuICAgICAgICBpdGVtUm9sZURlc2NyaXB0aW9uTWVzc2FnZTogbnVsbCxcbiAgICAgICAgc2xpZGVSb2xlOiBcImdyb3VwXCIsXG4gICAgICAgIGlkOiBudWxsXG4gICAgICB9XG4gICAgfSksIHQuYTExeSA9IHtcbiAgICAgIGNsaWNrZWQ6ICExXG4gICAgfTtcbiAgICB2YXIgaSA9IG51bGw7XG4gICAgZnVuY3Rpb24gcihlKSB7XG4gICAgICB2YXIgdCA9IGk7XG4gICAgICAwICE9PSB0Lmxlbmd0aCAmJiAodC5pbm5lckhUTUwgPSBcIlwiLCB0LmlubmVySFRNTCA9IGUpO1xuICAgIH1cbiAgICB2YXIgbiA9IGZ1bmN0aW9uIG4oZSkge1xuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZSkgfHwgKGUgPSBbZV0uZmlsdGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiAhIWU7XG4gICAgICB9KSksIGU7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBsKGUpIHtcbiAgICAgIChlID0gbihlKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnNldEF0dHJpYnV0ZShcInRhYkluZGV4XCIsIFwiMFwiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvKGUpIHtcbiAgICAgIChlID0gbihlKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnNldEF0dHJpYnV0ZShcInRhYkluZGV4XCIsIFwiLTFcIik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZChlLCB0KSB7XG4gICAgICAoZSA9IG4oZSkpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIHQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGMoZSwgdCkge1xuICAgICAgKGUgPSBuKGUpKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUuc2V0QXR0cmlidXRlKFwiYXJpYS1yb2xlZGVzY3JpcHRpb25cIiwgdCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcChlLCB0KSB7XG4gICAgICAoZSA9IG4oZSkpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHUoZSkge1xuICAgICAgKGUgPSBuKGUpKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUuc2V0QXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiLCAhMCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbShlKSB7XG4gICAgICAoZSA9IG4oZSkpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIsICExKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoKGUpIHtcbiAgICAgIGlmICgxMyAhPT0gZS5rZXlDb2RlICYmIDMyICE9PSBlLmtleUNvZGUpIHJldHVybjtcbiAgICAgIHZhciBzID0gdC5wYXJhbXMuYTExeSxcbiAgICAgICAgYSA9IGUudGFyZ2V0O1xuICAgICAgdC5wYWdpbmF0aW9uICYmIHQucGFnaW5hdGlvbi5lbCAmJiAoYSA9PT0gdC5wYWdpbmF0aW9uLmVsIHx8IHQucGFnaW5hdGlvbi5lbC5jb250YWlucyhlLnRhcmdldCkpICYmICFlLnRhcmdldC5tYXRjaGVzKHRlKHQucGFyYW1zLnBhZ2luYXRpb24uYnVsbGV0Q2xhc3MpKSB8fCAodC5uYXZpZ2F0aW9uICYmIHQubmF2aWdhdGlvbi5uZXh0RWwgJiYgYSA9PT0gdC5uYXZpZ2F0aW9uLm5leHRFbCAmJiAodC5pc0VuZCAmJiAhdC5wYXJhbXMubG9vcCB8fCB0LnNsaWRlTmV4dCgpLCB0LmlzRW5kID8gcihzLmxhc3RTbGlkZU1lc3NhZ2UpIDogcihzLm5leHRTbGlkZU1lc3NhZ2UpKSwgdC5uYXZpZ2F0aW9uICYmIHQubmF2aWdhdGlvbi5wcmV2RWwgJiYgYSA9PT0gdC5uYXZpZ2F0aW9uLnByZXZFbCAmJiAodC5pc0JlZ2lubmluZyAmJiAhdC5wYXJhbXMubG9vcCB8fCB0LnNsaWRlUHJldigpLCB0LmlzQmVnaW5uaW5nID8gcihzLmZpcnN0U2xpZGVNZXNzYWdlKSA6IHIocy5wcmV2U2xpZGVNZXNzYWdlKSksIHQucGFnaW5hdGlvbiAmJiBhLm1hdGNoZXModGUodC5wYXJhbXMucGFnaW5hdGlvbi5idWxsZXRDbGFzcykpICYmIGEuY2xpY2soKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGYoKSB7XG4gICAgICByZXR1cm4gdC5wYWdpbmF0aW9uICYmIHQucGFnaW5hdGlvbi5idWxsZXRzICYmIHQucGFnaW5hdGlvbi5idWxsZXRzLmxlbmd0aDtcbiAgICB9XG4gICAgZnVuY3Rpb24gdigpIHtcbiAgICAgIHJldHVybiBmKCkgJiYgdC5wYXJhbXMucGFnaW5hdGlvbi5jbGlja2FibGU7XG4gICAgfVxuICAgIHZhciB3ID0gZnVuY3Rpb24gdyhlLCB0LCBzKSB7XG4gICAgICAgIGwoZSksIFwiQlVUVE9OXCIgIT09IGUudGFnTmFtZSAmJiAoZChlLCBcImJ1dHRvblwiKSwgZS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoKSksIHAoZSwgcyksIGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgKGUgPSBuKGUpKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnNldEF0dHJpYnV0ZShcImFyaWEtY29udHJvbHNcIiwgdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0oZSwgdCk7XG4gICAgICB9LFxuICAgICAgeSA9IGZ1bmN0aW9uIHkoKSB7XG4gICAgICAgIHQuYTExeS5jbGlja2VkID0gITA7XG4gICAgICB9LFxuICAgICAgRSA9IGZ1bmN0aW9uIEUoKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHQuZGVzdHJveWVkIHx8ICh0LmExMXkuY2xpY2tlZCA9ICExKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgeCA9IGZ1bmN0aW9uIHgoZSkge1xuICAgICAgICBpZiAodC5hMTF5LmNsaWNrZWQpIHJldHVybjtcbiAgICAgICAgdmFyIHMgPSBlLnRhcmdldC5jbG9zZXN0KFwiLlwiLmNvbmNhdCh0LnBhcmFtcy5zbGlkZUNsYXNzLCBcIiwgc3dpcGVyLXNsaWRlXCIpKTtcbiAgICAgICAgaWYgKCFzIHx8ICF0LnNsaWRlcy5pbmNsdWRlcyhzKSkgcmV0dXJuO1xuICAgICAgICB2YXIgYSA9IHQuc2xpZGVzLmluZGV4T2YocykgPT09IHQuYWN0aXZlSW5kZXgsXG4gICAgICAgICAgaSA9IHQucGFyYW1zLndhdGNoU2xpZGVzUHJvZ3Jlc3MgJiYgdC52aXNpYmxlU2xpZGVzICYmIHQudmlzaWJsZVNsaWRlcy5pbmNsdWRlcyhzKTtcbiAgICAgICAgYSB8fCBpIHx8IGUuc291cmNlQ2FwYWJpbGl0aWVzICYmIGUuc291cmNlQ2FwYWJpbGl0aWVzLmZpcmVzVG91Y2hFdmVudHMgfHwgKHQuaXNIb3Jpem9udGFsKCkgPyB0LmVsLnNjcm9sbExlZnQgPSAwIDogdC5lbC5zY3JvbGxUb3AgPSAwLCB0LnNsaWRlVG8odC5zbGlkZXMuaW5kZXhPZihzKSwgMCkpO1xuICAgICAgfSxcbiAgICAgIFMgPSBmdW5jdGlvbiBTKCkge1xuICAgICAgICB2YXIgZSA9IHQucGFyYW1zLmExMXk7XG4gICAgICAgIGUuaXRlbVJvbGVEZXNjcmlwdGlvbk1lc3NhZ2UgJiYgYyh0LnNsaWRlcywgZS5pdGVtUm9sZURlc2NyaXB0aW9uTWVzc2FnZSksIGUuc2xpZGVSb2xlICYmIGQodC5zbGlkZXMsIGUuc2xpZGVSb2xlKTtcbiAgICAgICAgdmFyIHMgPSB0LnNsaWRlcy5sZW5ndGg7XG4gICAgICAgIGUuc2xpZGVMYWJlbE1lc3NhZ2UgJiYgdC5zbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoYSwgaSkge1xuICAgICAgICAgIHZhciByID0gdC5wYXJhbXMubG9vcCA/IHBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIiksIDEwKSA6IGk7XG4gICAgICAgICAgcChhLCBlLnNsaWRlTGFiZWxNZXNzYWdlLnJlcGxhY2UoL1xce1xce2luZGV4XFx9XFx9LywgciArIDEpLnJlcGxhY2UoL1xce1xce3NsaWRlc0xlbmd0aFxcfVxcfS8sIHMpKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgVCA9IGZ1bmN0aW9uIFQoKSB7XG4gICAgICAgIHZhciBlID0gdC5wYXJhbXMuYTExeTtcbiAgICAgICAgdC5pc0VsZW1lbnQgPyB0LmVsLnNoYWRvd0VsLmFwcGVuZChpKSA6IHQuZWwuYXBwZW5kKGkpO1xuICAgICAgICB2YXIgcyA9IHQuZWw7XG4gICAgICAgIGUuY29udGFpbmVyUm9sZURlc2NyaXB0aW9uTWVzc2FnZSAmJiBjKHMsIGUuY29udGFpbmVyUm9sZURlc2NyaXB0aW9uTWVzc2FnZSksIGUuY29udGFpbmVyTWVzc2FnZSAmJiBwKHMsIGUuY29udGFpbmVyTWVzc2FnZSk7XG4gICAgICAgIHZhciBhID0gdC53cmFwcGVyRWwsXG4gICAgICAgICAgciA9IGUuaWQgfHwgYS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSB8fCBcInN3aXBlci13cmFwcGVyLVwiLmNvbmNhdCgobCA9IDE2LCB2b2lkIDAgPT09IGwgJiYgKGwgPSAxNiksIFwieFwiLnJlcGVhdChsKS5yZXBsYWNlKC94L2csIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKDE2ICogTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMTYpO1xuICAgICAgICAgIH0pKSk7XG4gICAgICAgIHZhciBsO1xuICAgICAgICB2YXIgbyA9IHQucGFyYW1zLmF1dG9wbGF5ICYmIHQucGFyYW1zLmF1dG9wbGF5LmVuYWJsZWQgPyBcIm9mZlwiIDogXCJwb2xpdGVcIjtcbiAgICAgICAgdmFyIGQ7XG4gICAgICAgIGQgPSByLCBuKGEpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBlLnNldEF0dHJpYnV0ZShcImlkXCIsIGQpO1xuICAgICAgICB9KSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAoZSA9IG4oZSkpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUuc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsIHQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KGEsIG8pLCBTKCk7XG4gICAgICAgIHZhciBfcmVmNSA9IHQubmF2aWdhdGlvbiA/IHQubmF2aWdhdGlvbiA6IHt9LFxuICAgICAgICAgIHUgPSBfcmVmNS5uZXh0RWwsXG4gICAgICAgICAgbSA9IF9yZWY1LnByZXZFbDtcbiAgICAgICAgaWYgKHUgPSBuKHUpLCBtID0gbihtKSwgdSAmJiB1LmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICByZXR1cm4gdyh0LCByLCBlLm5leHRTbGlkZU1lc3NhZ2UpO1xuICAgICAgICB9KSwgbSAmJiBtLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICByZXR1cm4gdyh0LCByLCBlLnByZXZTbGlkZU1lc3NhZ2UpO1xuICAgICAgICB9KSwgdigpKSB7XG4gICAgICAgICAgKEFycmF5LmlzQXJyYXkodC5wYWdpbmF0aW9uLmVsKSA/IHQucGFnaW5hdGlvbi5lbCA6IFt0LnBhZ2luYXRpb24uZWxdKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHQuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHgsICEwKSwgdC5lbC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgeSwgITApLCB0LmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgRSwgITApO1xuICAgICAgfTtcbiAgICBhKFwiYmVmb3JlSW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpID0gZyhcInNwYW5cIiwgdC5wYXJhbXMuYTExeS5ub3RpZmljYXRpb25DbGFzcyksIGkuc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsIFwiYXNzZXJ0aXZlXCIpLCBpLnNldEF0dHJpYnV0ZShcImFyaWEtYXRvbWljXCIsIFwidHJ1ZVwiKTtcbiAgICB9KSwgYShcImFmdGVySW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0LnBhcmFtcy5hMTF5LmVuYWJsZWQgJiYgVCgpO1xuICAgIH0pLCBhKFwic2xpZGVzTGVuZ3RoQ2hhbmdlIHNuYXBHcmlkTGVuZ3RoQ2hhbmdlIHNsaWRlc0dyaWRMZW5ndGhDaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdC5wYXJhbXMuYTExeS5lbmFibGVkICYmIFMoKTtcbiAgICB9KSwgYShcImZyb21FZGdlIHRvRWRnZSBhZnRlckluaXQgbG9jayB1bmxvY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdC5wYXJhbXMuYTExeS5lbmFibGVkICYmIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHQucGFyYW1zLmxvb3AgfHwgdC5wYXJhbXMucmV3aW5kIHx8ICF0Lm5hdmlnYXRpb24pIHJldHVybjtcbiAgICAgICAgdmFyIF90JG5hdmlnYXRpb241ID0gdC5uYXZpZ2F0aW9uLFxuICAgICAgICAgIGUgPSBfdCRuYXZpZ2F0aW9uNS5uZXh0RWwsXG4gICAgICAgICAgcyA9IF90JG5hdmlnYXRpb241LnByZXZFbDtcbiAgICAgICAgcyAmJiAodC5pc0JlZ2lubmluZyA/ICh1KHMpLCBvKHMpKSA6IChtKHMpLCBsKHMpKSksIGUgJiYgKHQuaXNFbmQgPyAodShlKSwgbyhlKSkgOiAobShlKSwgbChlKSkpO1xuICAgICAgfSgpO1xuICAgIH0pLCBhKFwicGFnaW5hdGlvblVwZGF0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0LnBhcmFtcy5hMTF5LmVuYWJsZWQgJiYgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZSA9IHQucGFyYW1zLmExMXk7XG4gICAgICAgIGYoKSAmJiB0LnBhZ2luYXRpb24uYnVsbGV0cy5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgdC5wYXJhbXMucGFnaW5hdGlvbi5jbGlja2FibGUgJiYgKGwocyksIHQucGFyYW1zLnBhZ2luYXRpb24ucmVuZGVyQnVsbGV0IHx8IChkKHMsIFwiYnV0dG9uXCIpLCBwKHMsIGUucGFnaW5hdGlvbkJ1bGxldE1lc3NhZ2UucmVwbGFjZSgvXFx7XFx7aW5kZXhcXH1cXH0vLCBiKHMpICsgMSkpKSksIHMubWF0Y2hlcyh0ZSh0LnBhcmFtcy5wYWdpbmF0aW9uLmJ1bGxldEFjdGl2ZUNsYXNzKSkgPyBzLnNldEF0dHJpYnV0ZShcImFyaWEtY3VycmVudFwiLCBcInRydWVcIikgOiBzLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtY3VycmVudFwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KCk7XG4gICAgfSksIGEoXCJkZXN0cm95XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHQucGFyYW1zLmExMXkuZW5hYmxlZCAmJiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGkgJiYgaS5yZW1vdmUoKTtcbiAgICAgICAgdmFyIF9yZWY2ID0gdC5uYXZpZ2F0aW9uID8gdC5uYXZpZ2F0aW9uIDoge30sXG4gICAgICAgICAgZSA9IF9yZWY2Lm5leHRFbCxcbiAgICAgICAgICBzID0gX3JlZjYucHJldkVsO1xuICAgICAgICBlID0gbihlKSwgcyA9IG4ocyksIGUgJiYgZS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaCk7XG4gICAgICAgIH0pLCBzICYmIHMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGgpO1xuICAgICAgICB9KSwgdigpICYmIChBcnJheS5pc0FycmF5KHQucGFnaW5hdGlvbi5lbCkgPyB0LnBhZ2luYXRpb24uZWwgOiBbdC5wYWdpbmF0aW9uLmVsXSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0LmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB4LCAhMCksIHQuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHksICEwKSwgdC5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIEUsICEwKTtcbiAgICAgIH0oKTtcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgYSA9IGUub247XG4gICAgcyh7XG4gICAgICBoaXN0b3J5OiB7XG4gICAgICAgIGVuYWJsZWQ6ICExLFxuICAgICAgICByb290OiBcIlwiLFxuICAgICAgICByZXBsYWNlU3RhdGU6ICExLFxuICAgICAgICBrZXk6IFwic2xpZGVzXCIsXG4gICAgICAgIGtlZXBRdWVyeTogITFcbiAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgaSA9ICExLFxuICAgICAgbiA9IHt9O1xuICAgIHZhciBsID0gZnVuY3Rpb24gbChlKSB7XG4gICAgICAgIHJldHVybiBlLnRvU3RyaW5nKCkucmVwbGFjZSgvXFxzKy9nLCBcIi1cIikucmVwbGFjZSgvW15cXHctXSsvZywgXCJcIikucmVwbGFjZSgvLS0rL2csIFwiLVwiKS5yZXBsYWNlKC9eLSsvLCBcIlwiKS5yZXBsYWNlKC8tKyQvLCBcIlwiKTtcbiAgICAgIH0sXG4gICAgICBvID0gZnVuY3Rpb24gbyhlKSB7XG4gICAgICAgIHZhciB0ID0gcigpO1xuICAgICAgICB2YXIgcztcbiAgICAgICAgcyA9IGUgPyBuZXcgVVJMKGUpIDogdC5sb2NhdGlvbjtcbiAgICAgICAgdmFyIGEgPSBzLnBhdGhuYW1lLnNsaWNlKDEpLnNwbGl0KFwiL1wiKS5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiICE9PSBlO1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIGkgPSBhLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBrZXk6IGFbaSAtIDJdLFxuICAgICAgICAgIHZhbHVlOiBhW2kgLSAxXVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGQgPSBmdW5jdGlvbiBkKGUsIHMpIHtcbiAgICAgICAgdmFyIGEgPSByKCk7XG4gICAgICAgIGlmICghaSB8fCAhdC5wYXJhbXMuaGlzdG9yeS5lbmFibGVkKSByZXR1cm47XG4gICAgICAgIHZhciBuO1xuICAgICAgICBuID0gdC5wYXJhbXMudXJsID8gbmV3IFVSTCh0LnBhcmFtcy51cmwpIDogYS5sb2NhdGlvbjtcbiAgICAgICAgdmFyIG8gPSB0LnNsaWRlc1tzXTtcbiAgICAgICAgdmFyIGQgPSBsKG8uZ2V0QXR0cmlidXRlKFwiZGF0YS1oaXN0b3J5XCIpKTtcbiAgICAgICAgaWYgKHQucGFyYW1zLmhpc3Rvcnkucm9vdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdmFyIF9zMzMgPSB0LnBhcmFtcy5oaXN0b3J5LnJvb3Q7XG4gICAgICAgICAgXCIvXCIgPT09IF9zMzNbX3MzMy5sZW5ndGggLSAxXSAmJiAoX3MzMyA9IF9zMzMuc2xpY2UoMCwgX3MzMy5sZW5ndGggLSAxKSksIGQgPSBcIlwiLmNvbmNhdChfczMzLCBcIi9cIikuY29uY2F0KGUgPyBcIlwiLmNvbmNhdChlLCBcIi9cIikgOiBcIlwiKS5jb25jYXQoZCk7XG4gICAgICAgIH0gZWxzZSBuLnBhdGhuYW1lLmluY2x1ZGVzKGUpIHx8IChkID0gXCJcIi5jb25jYXQoZSA/IFwiXCIuY29uY2F0KGUsIFwiL1wiKSA6IFwiXCIpLmNvbmNhdChkKSk7XG4gICAgICAgIHQucGFyYW1zLmhpc3Rvcnkua2VlcFF1ZXJ5ICYmIChkICs9IG4uc2VhcmNoKTtcbiAgICAgICAgdmFyIGMgPSBhLmhpc3Rvcnkuc3RhdGU7XG4gICAgICAgIGMgJiYgYy52YWx1ZSA9PT0gZCB8fCAodC5wYXJhbXMuaGlzdG9yeS5yZXBsYWNlU3RhdGUgPyBhLmhpc3RvcnkucmVwbGFjZVN0YXRlKHtcbiAgICAgICAgICB2YWx1ZTogZFxuICAgICAgICB9LCBudWxsLCBkKSA6IGEuaGlzdG9yeS5wdXNoU3RhdGUoe1xuICAgICAgICAgIHZhbHVlOiBkXG4gICAgICAgIH0sIG51bGwsIGQpKTtcbiAgICAgIH0sXG4gICAgICBjID0gZnVuY3Rpb24gYyhlLCBzLCBhKSB7XG4gICAgICAgIGlmIChzKSBmb3IgKHZhciBfaTE0ID0gMCwgX3IxMSA9IHQuc2xpZGVzLmxlbmd0aDsgX2kxNCA8IF9yMTE7IF9pMTQgKz0gMSkge1xuICAgICAgICAgIHZhciBfcjEyID0gdC5zbGlkZXNbX2kxNF07XG4gICAgICAgICAgaWYgKGwoX3IxMi5nZXRBdHRyaWJ1dGUoXCJkYXRhLWhpc3RvcnlcIikpID09PSBzKSB7XG4gICAgICAgICAgICB2YXIgX3MzNCA9IHQuZ2V0U2xpZGVJbmRleChfcjEyKTtcbiAgICAgICAgICAgIHQuc2xpZGVUbyhfczM0LCBlLCBhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB0LnNsaWRlVG8oMCwgZSwgYSk7XG4gICAgICB9LFxuICAgICAgcCA9IGZ1bmN0aW9uIHAoKSB7XG4gICAgICAgIG4gPSBvKHQucGFyYW1zLnVybCksIGModC5wYXJhbXMuc3BlZWQsIG4udmFsdWUsICExKTtcbiAgICAgIH07XG4gICAgYShcImluaXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdC5wYXJhbXMuaGlzdG9yeS5lbmFibGVkICYmIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSByKCk7XG4gICAgICAgIGlmICh0LnBhcmFtcy5oaXN0b3J5KSB7XG4gICAgICAgICAgaWYgKCFlLmhpc3RvcnkgfHwgIWUuaGlzdG9yeS5wdXNoU3RhdGUpIHJldHVybiB0LnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQgPSAhMSwgdm9pZCAodC5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZW5hYmxlZCA9ICEwKTtcbiAgICAgICAgICBpID0gITAsIG4gPSBvKHQucGFyYW1zLnVybCksIG4ua2V5IHx8IG4udmFsdWUgPyAoYygwLCBuLnZhbHVlLCB0LnBhcmFtcy5ydW5DYWxsYmFja3NPbkluaXQpLCB0LnBhcmFtcy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSB8fCBlLmFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCBwKSkgOiB0LnBhcmFtcy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSB8fCBlLmFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCBwKTtcbiAgICAgICAgfVxuICAgICAgfSgpO1xuICAgIH0pLCBhKFwiZGVzdHJveVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0LnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQgJiYgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZSA9IHIoKTtcbiAgICAgICAgdC5wYXJhbXMuaGlzdG9yeS5yZXBsYWNlU3RhdGUgfHwgZS5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgcCk7XG4gICAgICB9KCk7XG4gICAgfSksIGEoXCJ0cmFuc2l0aW9uRW5kIF9mcmVlTW9kZU5vTW9tZW50dW1SZWxlYXNlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGkgJiYgZCh0LnBhcmFtcy5oaXN0b3J5LmtleSwgdC5hY3RpdmVJbmRleCk7XG4gICAgfSksIGEoXCJzbGlkZUNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpICYmIHQucGFyYW1zLmNzc01vZGUgJiYgZCh0LnBhcmFtcy5oaXN0b3J5LmtleSwgdC5hY3RpdmVJbmRleCk7XG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQgPSBlLnN3aXBlcixcbiAgICAgIHMgPSBlLmV4dGVuZFBhcmFtcyxcbiAgICAgIGkgPSBlLmVtaXQsXG4gICAgICBuID0gZS5vbixcbiAgICAgIGwgPSAhMTtcbiAgICB2YXIgbyA9IGEoKSxcbiAgICAgIGQgPSByKCk7XG4gICAgcyh7XG4gICAgICBoYXNoTmF2aWdhdGlvbjoge1xuICAgICAgICBlbmFibGVkOiAhMSxcbiAgICAgICAgcmVwbGFjZVN0YXRlOiAhMSxcbiAgICAgICAgd2F0Y2hTdGF0ZTogITEsXG4gICAgICAgIGdldFNsaWRlSW5kZXg6IGZ1bmN0aW9uIGdldFNsaWRlSW5kZXgoZSwgcykge1xuICAgICAgICAgIGlmICh0LnZpcnR1YWwgJiYgdC5wYXJhbXMudmlydHVhbC5lbmFibGVkKSB7XG4gICAgICAgICAgICB2YXIgX2U1MyA9IHQuc2xpZGVzLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICByZXR1cm4gZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWhhc2hcIikgPT09IHM7XG4gICAgICAgICAgICB9KVswXTtcbiAgICAgICAgICAgIGlmICghX2U1MykgcmV0dXJuIDA7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoX2U1My5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKSwgMTApO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdC5nZXRTbGlkZUluZGV4KGYodC5zbGlkZXNFbCwgXCIuXCIuY29uY2F0KHQucGFyYW1zLnNsaWRlQ2xhc3MsIFwiW2RhdGEtaGFzaD1cXFwiXCIpLmNvbmNhdChzLCBcIlxcXCJdLCBzd2lwZXItc2xpZGVbZGF0YS1oYXNoPVxcXCJcIikuY29uY2F0KHMsIFwiXFxcIl1cIikpWzBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBjID0gZnVuY3Rpb24gYygpIHtcbiAgICAgICAgaShcImhhc2hDaGFuZ2VcIik7XG4gICAgICAgIHZhciBlID0gby5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoXCIjXCIsIFwiXCIpLFxuICAgICAgICAgIHMgPSB0LnZpcnR1YWwgJiYgdC5wYXJhbXMudmlydHVhbC5lbmFibGVkID8gdC5zbGlkZXNFbC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVxcXCJcIi5jb25jYXQodC5hY3RpdmVJbmRleCwgXCJcXFwiXVwiKSkgOiB0LnNsaWRlc1t0LmFjdGl2ZUluZGV4XTtcbiAgICAgICAgaWYgKGUgIT09IChzID8gcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWhhc2hcIikgOiBcIlwiKSkge1xuICAgICAgICAgIHZhciBfczM1ID0gdC5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZ2V0U2xpZGVJbmRleCh0LCBlKTtcbiAgICAgICAgICBpZiAodm9pZCAwID09PSBfczM1IHx8IE51bWJlci5pc05hTihfczM1KSkgcmV0dXJuO1xuICAgICAgICAgIHQuc2xpZGVUbyhfczM1KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHAgPSBmdW5jdGlvbiBwKCkge1xuICAgICAgICBpZiAoIWwgfHwgIXQucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLmVuYWJsZWQpIHJldHVybjtcbiAgICAgICAgdmFyIGUgPSB0LnZpcnR1YWwgJiYgdC5wYXJhbXMudmlydHVhbC5lbmFibGVkID8gdC5zbGlkZXNFbC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVxcXCJcIi5jb25jYXQodC5hY3RpdmVJbmRleCwgXCJcXFwiXVwiKSkgOiB0LnNsaWRlc1t0LmFjdGl2ZUluZGV4XSxcbiAgICAgICAgICBzID0gZSA/IGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1oYXNoXCIpIHx8IGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1oaXN0b3J5XCIpIDogXCJcIjtcbiAgICAgICAgdC5wYXJhbXMuaGFzaE5hdmlnYXRpb24ucmVwbGFjZVN0YXRlICYmIGQuaGlzdG9yeSAmJiBkLmhpc3RvcnkucmVwbGFjZVN0YXRlID8gKGQuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgbnVsbCwgXCIjXCIuY29uY2F0KHMpIHx8IFwiXCIpLCBpKFwiaGFzaFNldFwiKSkgOiAoby5sb2NhdGlvbi5oYXNoID0gcyB8fCBcIlwiLCBpKFwiaGFzaFNldFwiKSk7XG4gICAgICB9O1xuICAgIG4oXCJpbml0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHQucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLmVuYWJsZWQgJiYgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXQucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLmVuYWJsZWQgfHwgdC5wYXJhbXMuaGlzdG9yeSAmJiB0LnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQpIHJldHVybjtcbiAgICAgICAgbCA9ICEwO1xuICAgICAgICB2YXIgZSA9IG8ubG9jYXRpb24uaGFzaC5yZXBsYWNlKFwiI1wiLCBcIlwiKTtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICB2YXIgX3MzNiA9IDAsXG4gICAgICAgICAgICBfYTIwID0gdC5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZ2V0U2xpZGVJbmRleCh0LCBlKTtcbiAgICAgICAgICB0LnNsaWRlVG8oX2EyMCB8fCAwLCBfczM2LCB0LnBhcmFtcy5ydW5DYWxsYmFja3NPbkluaXQsICEwKTtcbiAgICAgICAgfVxuICAgICAgICB0LnBhcmFtcy5oYXNoTmF2aWdhdGlvbi53YXRjaFN0YXRlICYmIGQuYWRkRXZlbnRMaXN0ZW5lcihcImhhc2hjaGFuZ2VcIiwgYyk7XG4gICAgICB9KCk7XG4gICAgfSksIG4oXCJkZXN0cm95XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHQucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLmVuYWJsZWQgJiYgdC5wYXJhbXMuaGFzaE5hdmlnYXRpb24ud2F0Y2hTdGF0ZSAmJiBkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJoYXNoY2hhbmdlXCIsIGMpO1xuICAgIH0pLCBuKFwidHJhbnNpdGlvbkVuZCBfZnJlZU1vZGVOb01vbWVudHVtUmVsZWFzZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBsICYmIHAoKTtcbiAgICB9KSwgbihcInNsaWRlQ2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGwgJiYgdC5wYXJhbXMuY3NzTW9kZSAmJiBwKCk7XG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQsXG4gICAgICBzLFxuICAgICAgaSA9IGUuc3dpcGVyLFxuICAgICAgciA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgbiA9IGUub24sXG4gICAgICBsID0gZS5lbWl0LFxuICAgICAgbyA9IGUucGFyYW1zO1xuICAgIGkuYXV0b3BsYXkgPSB7XG4gICAgICBydW5uaW5nOiAhMSxcbiAgICAgIHBhdXNlZDogITEsXG4gICAgICB0aW1lTGVmdDogMFxuICAgIH0sIHIoe1xuICAgICAgYXV0b3BsYXk6IHtcbiAgICAgICAgZW5hYmxlZDogITEsXG4gICAgICAgIGRlbGF5OiAzZTMsXG4gICAgICAgIHdhaXRGb3JUcmFuc2l0aW9uOiAhMCxcbiAgICAgICAgZGlzYWJsZU9uSW50ZXJhY3Rpb246ICEwLFxuICAgICAgICBzdG9wT25MYXN0U2xpZGU6ICExLFxuICAgICAgICByZXZlcnNlRGlyZWN0aW9uOiAhMSxcbiAgICAgICAgcGF1c2VPbk1vdXNlRW50ZXI6ICExXG4gICAgICB9XG4gICAgfSk7XG4gICAgdmFyIGQsXG4gICAgICBjLFxuICAgICAgcCxcbiAgICAgIHUsXG4gICAgICBtLFxuICAgICAgaCxcbiAgICAgIGYsXG4gICAgICBnID0gbyAmJiBvLmF1dG9wbGF5ID8gby5hdXRvcGxheS5kZWxheSA6IDNlMyxcbiAgICAgIHYgPSBvICYmIG8uYXV0b3BsYXkgPyBvLmF1dG9wbGF5LmRlbGF5IDogM2UzLFxuICAgICAgdyA9IG5ldyBEYXRlKCkuZ2V0VGltZTtcbiAgICBmdW5jdGlvbiBiKGUpIHtcbiAgICAgIGkgJiYgIWkuZGVzdHJveWVkICYmIGkud3JhcHBlckVsICYmIGUudGFyZ2V0ID09PSBpLndyYXBwZXJFbCAmJiAoaS53cmFwcGVyRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgYiksIE0oKSk7XG4gICAgfVxuICAgIHZhciB5ID0gZnVuY3Rpb24geSgpIHtcbiAgICAgICAgaWYgKGkuZGVzdHJveWVkIHx8ICFpLmF1dG9wbGF5LnJ1bm5pbmcpIHJldHVybjtcbiAgICAgICAgaS5hdXRvcGxheS5wYXVzZWQgPyBjID0gITAgOiBjICYmICh2ID0gZCwgYyA9ICExKTtcbiAgICAgICAgdmFyIGUgPSBpLmF1dG9wbGF5LnBhdXNlZCA/IGQgOiB3ICsgdiAtIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICBpLmF1dG9wbGF5LnRpbWVMZWZ0ID0gZSwgbChcImF1dG9wbGF5VGltZUxlZnRcIiwgZSwgZSAvIGcpLCBzID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB5KCk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIEUgPSBmdW5jdGlvbiBFKGUpIHtcbiAgICAgICAgaWYgKGkuZGVzdHJveWVkIHx8ICFpLmF1dG9wbGF5LnJ1bm5pbmcpIHJldHVybjtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUocyksIHkoKTtcbiAgICAgICAgdmFyIGEgPSB2b2lkIDAgPT09IGUgPyBpLnBhcmFtcy5hdXRvcGxheS5kZWxheSA6IGU7XG4gICAgICAgIGcgPSBpLnBhcmFtcy5hdXRvcGxheS5kZWxheSwgdiA9IGkucGFyYW1zLmF1dG9wbGF5LmRlbGF5O1xuICAgICAgICB2YXIgciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICBpZiAoZSA9IGkudmlydHVhbCAmJiBpLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyBpLnNsaWRlcy5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLmNsYXNzTGlzdC5jb250YWlucyhcInN3aXBlci1zbGlkZS1hY3RpdmVcIik7XG4gICAgICAgICAgfSlbMF0gOiBpLnNsaWRlc1tpLmFjdGl2ZUluZGV4XSwgIWUpIHJldHVybjtcbiAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1hdXRvcGxheVwiKSwgMTApO1xuICAgICAgICB9KCk7XG4gICAgICAgICFOdW1iZXIuaXNOYU4ocikgJiYgciA+IDAgJiYgdm9pZCAwID09PSBlICYmIChhID0gciwgZyA9IHIsIHYgPSByKSwgZCA9IGE7XG4gICAgICAgIHZhciBuID0gaS5wYXJhbXMuc3BlZWQsXG4gICAgICAgICAgbyA9IGZ1bmN0aW9uIG8oKSB7XG4gICAgICAgICAgICBpICYmICFpLmRlc3Ryb3llZCAmJiAoaS5wYXJhbXMuYXV0b3BsYXkucmV2ZXJzZURpcmVjdGlvbiA/ICFpLmlzQmVnaW5uaW5nIHx8IGkucGFyYW1zLmxvb3AgfHwgaS5wYXJhbXMucmV3aW5kID8gKGkuc2xpZGVQcmV2KG4sICEwLCAhMCksIGwoXCJhdXRvcGxheVwiKSkgOiBpLnBhcmFtcy5hdXRvcGxheS5zdG9wT25MYXN0U2xpZGUgfHwgKGkuc2xpZGVUbyhpLnNsaWRlcy5sZW5ndGggLSAxLCBuLCAhMCwgITApLCBsKFwiYXV0b3BsYXlcIikpIDogIWkuaXNFbmQgfHwgaS5wYXJhbXMubG9vcCB8fCBpLnBhcmFtcy5yZXdpbmQgPyAoaS5zbGlkZU5leHQobiwgITAsICEwKSwgbChcImF1dG9wbGF5XCIpKSA6IGkucGFyYW1zLmF1dG9wbGF5LnN0b3BPbkxhc3RTbGlkZSB8fCAoaS5zbGlkZVRvKDAsIG4sICEwLCAhMCksIGwoXCJhdXRvcGxheVwiKSksIGkucGFyYW1zLmNzc01vZGUgJiYgKHcgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgRSgpO1xuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYSA+IDAgPyAoY2xlYXJUaW1lb3V0KHQpLCB0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgbygpO1xuICAgICAgICB9LCBhKSkgOiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG8oKTtcbiAgICAgICAgfSksIGE7XG4gICAgICB9LFxuICAgICAgeCA9IGZ1bmN0aW9uIHgoKSB7XG4gICAgICAgIGkuYXV0b3BsYXkucnVubmluZyA9ICEwLCBFKCksIGwoXCJhdXRvcGxheVN0YXJ0XCIpO1xuICAgICAgfSxcbiAgICAgIFMgPSBmdW5jdGlvbiBTKCkge1xuICAgICAgICBpLmF1dG9wbGF5LnJ1bm5pbmcgPSAhMSwgY2xlYXJUaW1lb3V0KHQpLCBjYW5jZWxBbmltYXRpb25GcmFtZShzKSwgbChcImF1dG9wbGF5U3RvcFwiKTtcbiAgICAgIH0sXG4gICAgICBUID0gZnVuY3Rpb24gVChlLCBzKSB7XG4gICAgICAgIGlmIChpLmRlc3Ryb3llZCB8fCAhaS5hdXRvcGxheS5ydW5uaW5nKSByZXR1cm47XG4gICAgICAgIGNsZWFyVGltZW91dCh0KSwgZSB8fCAoZiA9ICEwKTtcbiAgICAgICAgdmFyIGEgPSBmdW5jdGlvbiBhKCkge1xuICAgICAgICAgIGwoXCJhdXRvcGxheVBhdXNlXCIpLCBpLnBhcmFtcy5hdXRvcGxheS53YWl0Rm9yVHJhbnNpdGlvbiA/IGkud3JhcHBlckVsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGIpIDogTSgpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoaS5hdXRvcGxheS5wYXVzZWQgPSAhMCwgcykgcmV0dXJuIGggJiYgKGQgPSBpLnBhcmFtcy5hdXRvcGxheS5kZWxheSksIGggPSAhMSwgdm9pZCBhKCk7XG4gICAgICAgIHZhciByID0gZCB8fCBpLnBhcmFtcy5hdXRvcGxheS5kZWxheTtcbiAgICAgICAgZCA9IHIgLSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSB3KSwgaS5pc0VuZCAmJiBkIDwgMCAmJiAhaS5wYXJhbXMubG9vcCB8fCAoZCA8IDAgJiYgKGQgPSAwKSwgYSgpKTtcbiAgICAgIH0sXG4gICAgICBNID0gZnVuY3Rpb24gTSgpIHtcbiAgICAgICAgaS5pc0VuZCAmJiBkIDwgMCAmJiAhaS5wYXJhbXMubG9vcCB8fCBpLmRlc3Ryb3llZCB8fCAhaS5hdXRvcGxheS5ydW5uaW5nIHx8ICh3ID0gbmV3IERhdGUoKS5nZXRUaW1lKCksIGYgPyAoZiA9ICExLCBFKGQpKSA6IEUoKSwgaS5hdXRvcGxheS5wYXVzZWQgPSAhMSwgbChcImF1dG9wbGF5UmVzdW1lXCIpKTtcbiAgICAgIH0sXG4gICAgICBDID0gZnVuY3Rpb24gQygpIHtcbiAgICAgICAgaWYgKGkuZGVzdHJveWVkIHx8ICFpLmF1dG9wbGF5LnJ1bm5pbmcpIHJldHVybjtcbiAgICAgICAgdmFyIGUgPSBhKCk7XG4gICAgICAgIFwiaGlkZGVuXCIgPT09IGUudmlzaWJpbGl0eVN0YXRlICYmIChmID0gITAsIFQoITApKSwgXCJ2aXNpYmxlXCIgPT09IGUudmlzaWJpbGl0eVN0YXRlICYmIE0oKTtcbiAgICAgIH0sXG4gICAgICBQID0gZnVuY3Rpb24gUChlKSB7XG4gICAgICAgIFwibW91c2VcIiA9PT0gZS5wb2ludGVyVHlwZSAmJiAoZiA9ICEwLCBUKCEwKSk7XG4gICAgICB9LFxuICAgICAgTCA9IGZ1bmN0aW9uIEwoZSkge1xuICAgICAgICBcIm1vdXNlXCIgPT09IGUucG9pbnRlclR5cGUgJiYgaS5hdXRvcGxheS5wYXVzZWQgJiYgTSgpO1xuICAgICAgfTtcbiAgICBuKFwiaW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpLnBhcmFtcy5hdXRvcGxheS5lbmFibGVkICYmIChpLnBhcmFtcy5hdXRvcGxheS5wYXVzZU9uTW91c2VFbnRlciAmJiAoaS5lbC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmVudGVyXCIsIFApLCBpLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybGVhdmVcIiwgTCkpLCBhKCkuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgQyksIHcgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgeCgpKTtcbiAgICB9KSwgbihcImRlc3Ryb3lcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaS5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmVudGVyXCIsIFApLCBpLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybGVhdmVcIiwgTCksIGEoKS5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCBDKSwgaS5hdXRvcGxheS5ydW5uaW5nICYmIFMoKTtcbiAgICB9KSwgbihcImJlZm9yZVRyYW5zaXRpb25TdGFydFwiLCBmdW5jdGlvbiAoZSwgdCwgcykge1xuICAgICAgIWkuZGVzdHJveWVkICYmIGkuYXV0b3BsYXkucnVubmluZyAmJiAocyB8fCAhaS5wYXJhbXMuYXV0b3BsYXkuZGlzYWJsZU9uSW50ZXJhY3Rpb24gPyBUKCEwLCAhMCkgOiBTKCkpO1xuICAgIH0pLCBuKFwic2xpZGVyRmlyc3RNb3ZlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICFpLmRlc3Ryb3llZCAmJiBpLmF1dG9wbGF5LnJ1bm5pbmcgJiYgKGkucGFyYW1zLmF1dG9wbGF5LmRpc2FibGVPbkludGVyYWN0aW9uID8gUygpIDogKHAgPSAhMCwgdSA9ICExLCBmID0gITEsIG0gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZiA9ICEwLCB1ID0gITAsIFQoITApO1xuICAgICAgfSwgMjAwKSkpO1xuICAgIH0pLCBuKFwidG91Y2hFbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFpLmRlc3Ryb3llZCAmJiBpLmF1dG9wbGF5LnJ1bm5pbmcgJiYgcCkge1xuICAgICAgICBpZiAoY2xlYXJUaW1lb3V0KG0pLCBjbGVhclRpbWVvdXQodCksIGkucGFyYW1zLmF1dG9wbGF5LmRpc2FibGVPbkludGVyYWN0aW9uKSByZXR1cm4gdSA9ICExLCB2b2lkIChwID0gITEpO1xuICAgICAgICB1ICYmIGkucGFyYW1zLmNzc01vZGUgJiYgTSgpLCB1ID0gITEsIHAgPSAhMTtcbiAgICAgIH1cbiAgICB9KSwgbihcInNsaWRlQ2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICFpLmRlc3Ryb3llZCAmJiBpLmF1dG9wbGF5LnJ1bm5pbmcgJiYgKGggPSAhMCk7XG4gICAgfSksIE9iamVjdC5hc3NpZ24oaS5hdXRvcGxheSwge1xuICAgICAgc3RhcnQ6IHgsXG4gICAgICBzdG9wOiBTLFxuICAgICAgcGF1c2U6IFQsXG4gICAgICByZXN1bWU6IE1cbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgaSA9IGUub247XG4gICAgcyh7XG4gICAgICB0aHVtYnM6IHtcbiAgICAgICAgc3dpcGVyOiBudWxsLFxuICAgICAgICBtdWx0aXBsZUFjdGl2ZVRodW1iczogITAsXG4gICAgICAgIGF1dG9TY3JvbGxPZmZzZXQ6IDAsXG4gICAgICAgIHNsaWRlVGh1bWJBY3RpdmVDbGFzczogXCJzd2lwZXItc2xpZGUtdGh1bWItYWN0aXZlXCIsXG4gICAgICAgIHRodW1ic0NvbnRhaW5lckNsYXNzOiBcInN3aXBlci10aHVtYnNcIlxuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciByID0gITEsXG4gICAgICBuID0gITE7XG4gICAgZnVuY3Rpb24gbCgpIHtcbiAgICAgIHZhciBlID0gdC50aHVtYnMuc3dpcGVyO1xuICAgICAgaWYgKCFlIHx8IGUuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICB2YXIgcyA9IGUuY2xpY2tlZEluZGV4LFxuICAgICAgICBhID0gZS5jbGlja2VkU2xpZGU7XG4gICAgICBpZiAoYSAmJiBhLmNsYXNzTGlzdC5jb250YWlucyh0LnBhcmFtcy50aHVtYnMuc2xpZGVUaHVtYkFjdGl2ZUNsYXNzKSkgcmV0dXJuO1xuICAgICAgaWYgKG51bGwgPT0gcykgcmV0dXJuO1xuICAgICAgdmFyIGk7XG4gICAgICBpID0gZS5wYXJhbXMubG9vcCA/IHBhcnNlSW50KGUuY2xpY2tlZFNsaWRlLmdldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIpLCAxMCkgOiBzLCB0LnBhcmFtcy5sb29wID8gdC5zbGlkZVRvTG9vcChpKSA6IHQuc2xpZGVUbyhpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbygpIHtcbiAgICAgIHZhciBlID0gdC5wYXJhbXMudGh1bWJzO1xuICAgICAgaWYgKHIpIHJldHVybiAhMTtcbiAgICAgIHIgPSAhMDtcbiAgICAgIHZhciBzID0gdC5jb25zdHJ1Y3RvcjtcbiAgICAgIGlmIChlLnN3aXBlciBpbnN0YW5jZW9mIHMpIHQudGh1bWJzLnN3aXBlciA9IGUuc3dpcGVyLCBPYmplY3QuYXNzaWduKHQudGh1bWJzLnN3aXBlci5vcmlnaW5hbFBhcmFtcywge1xuICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiAhMCxcbiAgICAgICAgc2xpZGVUb0NsaWNrZWRTbGlkZTogITFcbiAgICAgIH0pLCBPYmplY3QuYXNzaWduKHQudGh1bWJzLnN3aXBlci5wYXJhbXMsIHtcbiAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogITAsXG4gICAgICAgIHNsaWRlVG9DbGlja2VkU2xpZGU6ICExXG4gICAgICB9KSwgdC50aHVtYnMuc3dpcGVyLnVwZGF0ZSgpO2Vsc2UgaWYgKGQoZS5zd2lwZXIpKSB7XG4gICAgICAgIHZhciBfYTIxID0gT2JqZWN0LmFzc2lnbih7fSwgZS5zd2lwZXIpO1xuICAgICAgICBPYmplY3QuYXNzaWduKF9hMjEsIHtcbiAgICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiAhMCxcbiAgICAgICAgICBzbGlkZVRvQ2xpY2tlZFNsaWRlOiAhMVxuICAgICAgICB9KSwgdC50aHVtYnMuc3dpcGVyID0gbmV3IHMoX2EyMSksIG4gPSAhMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0LnRodW1icy5zd2lwZXIuZWwuY2xhc3NMaXN0LmFkZCh0LnBhcmFtcy50aHVtYnMudGh1bWJzQ29udGFpbmVyQ2xhc3MpLCB0LnRodW1icy5zd2lwZXIub24oXCJ0YXBcIiwgbCksICEwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjKGUpIHtcbiAgICAgIHZhciBzID0gdC50aHVtYnMuc3dpcGVyO1xuICAgICAgaWYgKCFzIHx8IHMuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICB2YXIgYSA9IFwiYXV0b1wiID09PSBzLnBhcmFtcy5zbGlkZXNQZXJWaWV3ID8gcy5zbGlkZXNQZXJWaWV3RHluYW1pYygpIDogcy5wYXJhbXMuc2xpZGVzUGVyVmlldztcbiAgICAgIHZhciBpID0gMTtcbiAgICAgIHZhciByID0gdC5wYXJhbXMudGh1bWJzLnNsaWRlVGh1bWJBY3RpdmVDbGFzcztcbiAgICAgIGlmICh0LnBhcmFtcy5zbGlkZXNQZXJWaWV3ID4gMSAmJiAhdC5wYXJhbXMuY2VudGVyZWRTbGlkZXMgJiYgKGkgPSB0LnBhcmFtcy5zbGlkZXNQZXJWaWV3KSwgdC5wYXJhbXMudGh1bWJzLm11bHRpcGxlQWN0aXZlVGh1bWJzIHx8IChpID0gMSksIGkgPSBNYXRoLmZsb29yKGkpLCBzLnNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBlLmNsYXNzTGlzdC5yZW1vdmUocik7XG4gICAgICB9KSwgcy5wYXJhbXMubG9vcCB8fCBzLnBhcmFtcy52aXJ0dWFsICYmIHMucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkgZm9yICh2YXIgX2U1NCA9IDA7IF9lNTQgPCBpOyBfZTU0ICs9IDEpIGYocy5zbGlkZXNFbCwgXCJbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XFxcIlwiLmNvbmNhdCh0LnJlYWxJbmRleCArIF9lNTQsIFwiXFxcIl1cIikpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5jbGFzc0xpc3QuYWRkKHIpO1xuICAgICAgfSk7ZWxzZSBmb3IgKHZhciBfZTU1ID0gMDsgX2U1NSA8IGk7IF9lNTUgKz0gMSkgcy5zbGlkZXNbdC5yZWFsSW5kZXggKyBfZTU1XSAmJiBzLnNsaWRlc1t0LnJlYWxJbmRleCArIF9lNTVdLmNsYXNzTGlzdC5hZGQocik7XG4gICAgICB2YXIgbiA9IHQucGFyYW1zLnRodW1icy5hdXRvU2Nyb2xsT2Zmc2V0LFxuICAgICAgICBsID0gbiAmJiAhcy5wYXJhbXMubG9vcDtcbiAgICAgIGlmICh0LnJlYWxJbmRleCAhPT0gcy5yZWFsSW5kZXggfHwgbCkge1xuICAgICAgICB2YXIgX2kxNSA9IHMuYWN0aXZlSW5kZXg7XG4gICAgICAgIHZhciBfcjEzLCBfbzc7XG4gICAgICAgIGlmIChzLnBhcmFtcy5sb29wKSB7XG4gICAgICAgICAgdmFyIF9lNTYgPSBzLnNsaWRlcy5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLmdldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIpID09PSBcIlwiLmNvbmNhdCh0LnJlYWxJbmRleCk7XG4gICAgICAgICAgfSlbMF07XG4gICAgICAgICAgX3IxMyA9IHMuc2xpZGVzLmluZGV4T2YoX2U1NiksIF9vNyA9IHQuYWN0aXZlSW5kZXggPiB0LnByZXZpb3VzSW5kZXggPyBcIm5leHRcIiA6IFwicHJldlwiO1xuICAgICAgICB9IGVsc2UgX3IxMyA9IHQucmVhbEluZGV4LCBfbzcgPSBfcjEzID4gdC5wcmV2aW91c0luZGV4ID8gXCJuZXh0XCIgOiBcInByZXZcIjtcbiAgICAgICAgbCAmJiAoX3IxMyArPSBcIm5leHRcIiA9PT0gX283ID8gbiA6IC0xICogbiksIHMudmlzaWJsZVNsaWRlc0luZGV4ZXMgJiYgcy52aXNpYmxlU2xpZGVzSW5kZXhlcy5pbmRleE9mKF9yMTMpIDwgMCAmJiAocy5wYXJhbXMuY2VudGVyZWRTbGlkZXMgPyBfcjEzID0gX3IxMyA+IF9pMTUgPyBfcjEzIC0gTWF0aC5mbG9vcihhIC8gMikgKyAxIDogX3IxMyArIE1hdGguZmxvb3IoYSAvIDIpIC0gMSA6IF9yMTMgPiBfaTE1ICYmIHMucGFyYW1zLnNsaWRlc1Blckdyb3VwLCBzLnNsaWRlVG8oX3IxMywgZSA/IDAgOiB2b2lkIDApKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdC50aHVtYnMgPSB7XG4gICAgICBzd2lwZXI6IG51bGxcbiAgICB9LCBpKFwiYmVmb3JlSW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZSA9IHQucGFyYW1zLnRodW1icztcbiAgICAgIGlmIChlICYmIGUuc3dpcGVyKSBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS5zd2lwZXIgfHwgZS5zd2lwZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICB2YXIgX3MzNyA9IGEoKSxcbiAgICAgICAgICBfaTE2ID0gZnVuY3Rpb24gX2kxNigpIHtcbiAgICAgICAgICAgIHZhciBhID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS5zd2lwZXIgPyBfczM3LnF1ZXJ5U2VsZWN0b3IoZS5zd2lwZXIpIDogZS5zd2lwZXI7XG4gICAgICAgICAgICBpZiAoYSAmJiBhLnN3aXBlcikgZS5zd2lwZXIgPSBhLnN3aXBlciwgbygpLCBjKCEwKTtlbHNlIGlmIChhKSB7XG4gICAgICAgICAgICAgIHZhciBfczM4ID0gZnVuY3Rpb24gX3MzOChpKSB7XG4gICAgICAgICAgICAgICAgZS5zd2lwZXIgPSBpLmRldGFpbFswXSwgYS5yZW1vdmVFdmVudExpc3RlbmVyKFwiaW5pdFwiLCBfczM4KSwgbygpLCBjKCEwKSwgZS5zd2lwZXIudXBkYXRlKCksIHQudXBkYXRlKCk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIGEuYWRkRXZlbnRMaXN0ZW5lcihcImluaXRcIiwgX3MzOCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIF9yMTQgPSBmdW5jdGlvbiBfcjE0KCkge1xuICAgICAgICAgICAgaWYgKHQuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICAgICAgICBfaTE2KCkgfHwgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKF9yMTQpO1xuICAgICAgICAgIH07XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShfcjE0KTtcbiAgICAgIH0gZWxzZSBvKCksIGMoITApO1xuICAgIH0pLCBpKFwic2xpZGVDaGFuZ2UgdXBkYXRlIHJlc2l6ZSBvYnNlcnZlclVwZGF0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjKCk7XG4gICAgfSksIGkoXCJzZXRUcmFuc2l0aW9uXCIsIGZ1bmN0aW9uIChlLCBzKSB7XG4gICAgICB2YXIgYSA9IHQudGh1bWJzLnN3aXBlcjtcbiAgICAgIGEgJiYgIWEuZGVzdHJveWVkICYmIGEuc2V0VHJhbnNpdGlvbihzKTtcbiAgICB9KSwgaShcImJlZm9yZURlc3Ryb3lcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGUgPSB0LnRodW1icy5zd2lwZXI7XG4gICAgICBlICYmICFlLmRlc3Ryb3llZCAmJiBuICYmIGUuZGVzdHJveSgpO1xuICAgIH0pLCBPYmplY3QuYXNzaWduKHQudGh1bWJzLCB7XG4gICAgICBpbml0OiBvLFxuICAgICAgdXBkYXRlOiBjXG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQgPSBlLnN3aXBlcixcbiAgICAgIHMgPSBlLmV4dGVuZFBhcmFtcyxcbiAgICAgIGEgPSBlLmVtaXQsXG4gICAgICBpID0gZS5vbmNlO1xuICAgIHMoe1xuICAgICAgZnJlZU1vZGU6IHtcbiAgICAgICAgZW5hYmxlZDogITEsXG4gICAgICAgIG1vbWVudHVtOiAhMCxcbiAgICAgICAgbW9tZW50dW1SYXRpbzogMSxcbiAgICAgICAgbW9tZW50dW1Cb3VuY2U6ICEwLFxuICAgICAgICBtb21lbnR1bUJvdW5jZVJhdGlvOiAxLFxuICAgICAgICBtb21lbnR1bVZlbG9jaXR5UmF0aW86IDEsXG4gICAgICAgIHN0aWNreTogITEsXG4gICAgICAgIG1pbmltdW1WZWxvY2l0eTogLjAyXG4gICAgICB9XG4gICAgfSksIE9iamVjdC5hc3NpZ24odCwge1xuICAgICAgZnJlZU1vZGU6IHtcbiAgICAgICAgb25Ub3VjaFN0YXJ0OiBmdW5jdGlvbiBvblRvdWNoU3RhcnQoKSB7XG4gICAgICAgICAgaWYgKHQucGFyYW1zLmNzc01vZGUpIHJldHVybjtcbiAgICAgICAgICB2YXIgZSA9IHQuZ2V0VHJhbnNsYXRlKCk7XG4gICAgICAgICAgdC5zZXRUcmFuc2xhdGUoZSksIHQuc2V0VHJhbnNpdGlvbigwKSwgdC50b3VjaEV2ZW50c0RhdGEudmVsb2NpdGllcy5sZW5ndGggPSAwLCB0LmZyZWVNb2RlLm9uVG91Y2hFbmQoe1xuICAgICAgICAgICAgY3VycmVudFBvczogdC5ydGwgPyB0LnRyYW5zbGF0ZSA6IC10LnRyYW5zbGF0ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBvblRvdWNoTW92ZTogZnVuY3Rpb24gb25Ub3VjaE1vdmUoKSB7XG4gICAgICAgICAgaWYgKHQucGFyYW1zLmNzc01vZGUpIHJldHVybjtcbiAgICAgICAgICB2YXIgZSA9IHQudG91Y2hFdmVudHNEYXRhLFxuICAgICAgICAgICAgcyA9IHQudG91Y2hlcztcbiAgICAgICAgICAwID09PSBlLnZlbG9jaXRpZXMubGVuZ3RoICYmIGUudmVsb2NpdGllcy5wdXNoKHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBzW3QuaXNIb3Jpem9udGFsKCkgPyBcInN0YXJ0WFwiIDogXCJzdGFydFlcIl0sXG4gICAgICAgICAgICB0aW1lOiBlLnRvdWNoU3RhcnRUaW1lXG4gICAgICAgICAgfSksIGUudmVsb2NpdGllcy5wdXNoKHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBzW3QuaXNIb3Jpem9udGFsKCkgPyBcImN1cnJlbnRYXCIgOiBcImN1cnJlbnRZXCJdLFxuICAgICAgICAgICAgdGltZTogbCgpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uVG91Y2hFbmQ6IGZ1bmN0aW9uIG9uVG91Y2hFbmQoZSkge1xuICAgICAgICAgIHZhciBzID0gZS5jdXJyZW50UG9zO1xuICAgICAgICAgIGlmICh0LnBhcmFtcy5jc3NNb2RlKSByZXR1cm47XG4gICAgICAgICAgdmFyIHIgPSB0LnBhcmFtcyxcbiAgICAgICAgICAgIG4gPSB0LndyYXBwZXJFbCxcbiAgICAgICAgICAgIG8gPSB0LnJ0bFRyYW5zbGF0ZSxcbiAgICAgICAgICAgIGQgPSB0LnNuYXBHcmlkLFxuICAgICAgICAgICAgYyA9IHQudG91Y2hFdmVudHNEYXRhLFxuICAgICAgICAgICAgcCA9IGwoKSAtIGMudG91Y2hTdGFydFRpbWU7XG4gICAgICAgICAgaWYgKHMgPCAtdC5taW5UcmFuc2xhdGUoKSkgdC5zbGlkZVRvKHQuYWN0aXZlSW5kZXgpO2Vsc2UgaWYgKHMgPiAtdC5tYXhUcmFuc2xhdGUoKSkgdC5zbGlkZXMubGVuZ3RoIDwgZC5sZW5ndGggPyB0LnNsaWRlVG8oZC5sZW5ndGggLSAxKSA6IHQuc2xpZGVUbyh0LnNsaWRlcy5sZW5ndGggLSAxKTtlbHNlIHtcbiAgICAgICAgICAgIGlmIChyLmZyZWVNb2RlLm1vbWVudHVtKSB7XG4gICAgICAgICAgICAgIGlmIChjLnZlbG9jaXRpZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHZhciBfZTU3ID0gYy52ZWxvY2l0aWVzLnBvcCgpLFxuICAgICAgICAgICAgICAgICAgX3MzOSA9IGMudmVsb2NpdGllcy5wb3AoKSxcbiAgICAgICAgICAgICAgICAgIF9hMjIgPSBfZTU3LnBvc2l0aW9uIC0gX3MzOS5wb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgIF9pMTcgPSBfZTU3LnRpbWUgLSBfczM5LnRpbWU7XG4gICAgICAgICAgICAgICAgdC52ZWxvY2l0eSA9IF9hMjIgLyBfaTE3LCB0LnZlbG9jaXR5IC89IDIsIE1hdGguYWJzKHQudmVsb2NpdHkpIDwgci5mcmVlTW9kZS5taW5pbXVtVmVsb2NpdHkgJiYgKHQudmVsb2NpdHkgPSAwKSwgKF9pMTcgPiAxNTAgfHwgbCgpIC0gX2U1Ny50aW1lID4gMzAwKSAmJiAodC52ZWxvY2l0eSA9IDApO1xuICAgICAgICAgICAgICB9IGVsc2UgdC52ZWxvY2l0eSA9IDA7XG4gICAgICAgICAgICAgIHQudmVsb2NpdHkgKj0gci5mcmVlTW9kZS5tb21lbnR1bVZlbG9jaXR5UmF0aW8sIGMudmVsb2NpdGllcy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICB2YXIgX2U1OCA9IDFlMyAqIHIuZnJlZU1vZGUubW9tZW50dW1SYXRpbztcbiAgICAgICAgICAgICAgdmFyIF9zNDAgPSB0LnZlbG9jaXR5ICogX2U1ODtcbiAgICAgICAgICAgICAgdmFyIF9wMyA9IHQudHJhbnNsYXRlICsgX3M0MDtcbiAgICAgICAgICAgICAgbyAmJiAoX3AzID0gLV9wMyk7XG4gICAgICAgICAgICAgIHZhciBfdTMsXG4gICAgICAgICAgICAgICAgX20yID0gITE7XG4gICAgICAgICAgICAgIHZhciBfaCA9IDIwICogTWF0aC5hYnModC52ZWxvY2l0eSkgKiByLmZyZWVNb2RlLm1vbWVudHVtQm91bmNlUmF0aW87XG4gICAgICAgICAgICAgIHZhciBfZjtcbiAgICAgICAgICAgICAgaWYgKF9wMyA8IHQubWF4VHJhbnNsYXRlKCkpIHIuZnJlZU1vZGUubW9tZW50dW1Cb3VuY2UgPyAoX3AzICsgdC5tYXhUcmFuc2xhdGUoKSA8IC1faCAmJiAoX3AzID0gdC5tYXhUcmFuc2xhdGUoKSAtIF9oKSwgX3UzID0gdC5tYXhUcmFuc2xhdGUoKSwgX20yID0gITAsIGMuYWxsb3dNb21lbnR1bUJvdW5jZSA9ICEwKSA6IF9wMyA9IHQubWF4VHJhbnNsYXRlKCksIHIubG9vcCAmJiByLmNlbnRlcmVkU2xpZGVzICYmIChfZiA9ICEwKTtlbHNlIGlmIChfcDMgPiB0Lm1pblRyYW5zbGF0ZSgpKSByLmZyZWVNb2RlLm1vbWVudHVtQm91bmNlID8gKF9wMyAtIHQubWluVHJhbnNsYXRlKCkgPiBfaCAmJiAoX3AzID0gdC5taW5UcmFuc2xhdGUoKSArIF9oKSwgX3UzID0gdC5taW5UcmFuc2xhdGUoKSwgX20yID0gITAsIGMuYWxsb3dNb21lbnR1bUJvdW5jZSA9ICEwKSA6IF9wMyA9IHQubWluVHJhbnNsYXRlKCksIHIubG9vcCAmJiByLmNlbnRlcmVkU2xpZGVzICYmIChfZiA9ICEwKTtlbHNlIGlmIChyLmZyZWVNb2RlLnN0aWNreSkge1xuICAgICAgICAgICAgICAgIHZhciBfZTU5O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF90NDIgPSAwOyBfdDQyIDwgZC5sZW5ndGg7IF90NDIgKz0gMSkgaWYgKGRbX3Q0Ml0gPiAtX3AzKSB7XG4gICAgICAgICAgICAgICAgICBfZTU5ID0gX3Q0MjtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfcDMgPSBNYXRoLmFicyhkW19lNTldIC0gX3AzKSA8IE1hdGguYWJzKGRbX2U1OSAtIDFdIC0gX3AzKSB8fCBcIm5leHRcIiA9PT0gdC5zd2lwZURpcmVjdGlvbiA/IGRbX2U1OV0gOiBkW19lNTkgLSAxXSwgX3AzID0gLV9wMztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoX2YgJiYgaShcInRyYW5zaXRpb25FbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHQubG9vcEZpeCgpO1xuICAgICAgICAgICAgICB9KSwgMCAhPT0gdC52ZWxvY2l0eSkge1xuICAgICAgICAgICAgICAgIGlmIChfZTU4ID0gbyA/IE1hdGguYWJzKCgtX3AzIC0gdC50cmFuc2xhdGUpIC8gdC52ZWxvY2l0eSkgOiBNYXRoLmFicygoX3AzIC0gdC50cmFuc2xhdGUpIC8gdC52ZWxvY2l0eSksIHIuZnJlZU1vZGUuc3RpY2t5KSB7XG4gICAgICAgICAgICAgICAgICB2YXIgX3M0MSA9IE1hdGguYWJzKChvID8gLV9wMyA6IF9wMykgLSB0LnRyYW5zbGF0ZSksXG4gICAgICAgICAgICAgICAgICAgIF9hMjMgPSB0LnNsaWRlc1NpemVzR3JpZFt0LmFjdGl2ZUluZGV4XTtcbiAgICAgICAgICAgICAgICAgIF9lNTggPSBfczQxIDwgX2EyMyA/IHIuc3BlZWQgOiBfczQxIDwgMiAqIF9hMjMgPyAxLjUgKiByLnNwZWVkIDogMi41ICogci5zcGVlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoci5mcmVlTW9kZS5zdGlja3kpIHJldHVybiB2b2lkIHQuc2xpZGVUb0Nsb3Nlc3QoKTtcbiAgICAgICAgICAgICAgci5mcmVlTW9kZS5tb21lbnR1bUJvdW5jZSAmJiBfbTIgPyAodC51cGRhdGVQcm9ncmVzcyhfdTMpLCB0LnNldFRyYW5zaXRpb24oX2U1OCksIHQuc2V0VHJhbnNsYXRlKF9wMyksIHQudHJhbnNpdGlvblN0YXJ0KCEwLCB0LnN3aXBlRGlyZWN0aW9uKSwgdC5hbmltYXRpbmcgPSAhMCwgRShuLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdCAmJiAhdC5kZXN0cm95ZWQgJiYgYy5hbGxvd01vbWVudHVtQm91bmNlICYmIChhKFwibW9tZW50dW1Cb3VuY2VcIiksIHQuc2V0VHJhbnNpdGlvbihyLnNwZWVkKSwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICB0LnNldFRyYW5zbGF0ZShfdTMpLCBFKG4sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdCAmJiAhdC5kZXN0cm95ZWQgJiYgdC50cmFuc2l0aW9uRW5kKCk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCAwKSk7XG4gICAgICAgICAgICAgIH0pKSA6IHQudmVsb2NpdHkgPyAoYShcIl9mcmVlTW9kZU5vTW9tZW50dW1SZWxlYXNlXCIpLCB0LnVwZGF0ZVByb2dyZXNzKF9wMyksIHQuc2V0VHJhbnNpdGlvbihfZTU4KSwgdC5zZXRUcmFuc2xhdGUoX3AzKSwgdC50cmFuc2l0aW9uU3RhcnQoITAsIHQuc3dpcGVEaXJlY3Rpb24pLCB0LmFuaW1hdGluZyB8fCAodC5hbmltYXRpbmcgPSAhMCwgRShuLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdCAmJiAhdC5kZXN0cm95ZWQgJiYgdC50cmFuc2l0aW9uRW5kKCk7XG4gICAgICAgICAgICAgIH0pKSkgOiB0LnVwZGF0ZVByb2dyZXNzKF9wMyksIHQudXBkYXRlQWN0aXZlSW5kZXgoKSwgdC51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoci5mcmVlTW9kZS5zdGlja3kpIHJldHVybiB2b2lkIHQuc2xpZGVUb0Nsb3Nlc3QoKTtcbiAgICAgICAgICAgICAgci5mcmVlTW9kZSAmJiBhKFwiX2ZyZWVNb2RlTm9Nb21lbnR1bVJlbGVhc2VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoIXIuZnJlZU1vZGUubW9tZW50dW0gfHwgcCA+PSByLmxvbmdTd2lwZXNNcykgJiYgKHQudXBkYXRlUHJvZ3Jlc3MoKSwgdC51cGRhdGVBY3RpdmVJbmRleCgpLCB0LnVwZGF0ZVNsaWRlc0NsYXNzZXMoKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQsXG4gICAgICBzLFxuICAgICAgYSxcbiAgICAgIGkgPSBlLnN3aXBlcixcbiAgICAgIHIgPSBlLmV4dGVuZFBhcmFtcztcbiAgICByKHtcbiAgICAgIGdyaWQ6IHtcbiAgICAgICAgcm93czogMSxcbiAgICAgICAgZmlsbDogXCJjb2x1bW5cIlxuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBuID0gZnVuY3Rpb24gbigpIHtcbiAgICAgIHZhciBlID0gaS5wYXJhbXMuc3BhY2VCZXR3ZWVuO1xuICAgICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgZS5pbmRleE9mKFwiJVwiKSA+PSAwID8gZSA9IHBhcnNlRmxvYXQoZS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDAgKiBpLnNpemUgOiBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIChlID0gcGFyc2VGbG9hdChlKSksIGU7XG4gICAgfTtcbiAgICBpLmdyaWQgPSB7XG4gICAgICBpbml0U2xpZGVzOiBmdW5jdGlvbiBpbml0U2xpZGVzKGUpIHtcbiAgICAgICAgdmFyIHIgPSBpLnBhcmFtcy5zbGlkZXNQZXJWaWV3LFxuICAgICAgICAgIF9pJHBhcmFtcyRncmlkID0gaS5wYXJhbXMuZ3JpZCxcbiAgICAgICAgICBuID0gX2kkcGFyYW1zJGdyaWQucm93cyxcbiAgICAgICAgICBsID0gX2kkcGFyYW1zJGdyaWQuZmlsbDtcbiAgICAgICAgYSA9IE1hdGguZmxvb3IoZSAvIG4pLCB0ID0gTWF0aC5mbG9vcihlIC8gbikgPT09IGUgLyBuID8gZSA6IE1hdGguY2VpbChlIC8gbikgKiBuLCBcImF1dG9cIiAhPT0gciAmJiBcInJvd1wiID09PSBsICYmICh0ID0gTWF0aC5tYXgodCwgciAqIG4pKSwgcyA9IHQgLyBuO1xuICAgICAgfSxcbiAgICAgIHVwZGF0ZVNsaWRlOiBmdW5jdGlvbiB1cGRhdGVTbGlkZShlLCByLCBsLCBvKSB7XG4gICAgICAgIHZhciBkID0gaS5wYXJhbXMuc2xpZGVzUGVyR3JvdXAsXG4gICAgICAgICAgYyA9IG4oKSxcbiAgICAgICAgICBfaSRwYXJhbXMkZ3JpZDIgPSBpLnBhcmFtcy5ncmlkLFxuICAgICAgICAgIHAgPSBfaSRwYXJhbXMkZ3JpZDIucm93cyxcbiAgICAgICAgICB1ID0gX2kkcGFyYW1zJGdyaWQyLmZpbGw7XG4gICAgICAgIHZhciBtLCBoLCBmO1xuICAgICAgICBpZiAoXCJyb3dcIiA9PT0gdSAmJiBkID4gMSkge1xuICAgICAgICAgIHZhciBfczQyID0gTWF0aC5mbG9vcihlIC8gKGQgKiBwKSksXG4gICAgICAgICAgICBfYTI0ID0gZSAtIHAgKiBkICogX3M0MixcbiAgICAgICAgICAgIF9pMTggPSAwID09PSBfczQyID8gZCA6IE1hdGgubWluKE1hdGguY2VpbCgobCAtIF9zNDIgKiBwICogZCkgLyBwKSwgZCk7XG4gICAgICAgICAgZiA9IE1hdGguZmxvb3IoX2EyNCAvIF9pMTgpLCBoID0gX2EyNCAtIGYgKiBfaTE4ICsgX3M0MiAqIGQsIG0gPSBoICsgZiAqIHQgLyBwLCByLnN0eWxlLm9yZGVyID0gbTtcbiAgICAgICAgfSBlbHNlIFwiY29sdW1uXCIgPT09IHUgPyAoaCA9IE1hdGguZmxvb3IoZSAvIHApLCBmID0gZSAtIGggKiBwLCAoaCA+IGEgfHwgaCA9PT0gYSAmJiBmID09PSBwIC0gMSkgJiYgKGYgKz0gMSwgZiA+PSBwICYmIChmID0gMCwgaCArPSAxKSkpIDogKGYgPSBNYXRoLmZsb29yKGUgLyBzKSwgaCA9IGUgLSBmICogcyk7XG4gICAgICAgIHIucm93ID0gZiwgci5jb2x1bW4gPSBoLCByLnN0eWxlW28oXCJtYXJnaW4tdG9wXCIpXSA9IDAgIT09IGYgPyBjICYmIFwiXCIuY29uY2F0KGMsIFwicHhcIikgOiBcIlwiO1xuICAgICAgfSxcbiAgICAgIHVwZGF0ZVdyYXBwZXJTaXplOiBmdW5jdGlvbiB1cGRhdGVXcmFwcGVyU2l6ZShlLCBzLCBhKSB7XG4gICAgICAgIHZhciBfaSRwYXJhbXMgPSBpLnBhcmFtcyxcbiAgICAgICAgICByID0gX2kkcGFyYW1zLmNlbnRlcmVkU2xpZGVzLFxuICAgICAgICAgIGwgPSBfaSRwYXJhbXMucm91bmRMZW5ndGhzLFxuICAgICAgICAgIG8gPSBuKCksXG4gICAgICAgICAgZCA9IGkucGFyYW1zLmdyaWQucm93cztcbiAgICAgICAgaWYgKGkudmlydHVhbFNpemUgPSAoZSArIG8pICogdCwgaS52aXJ0dWFsU2l6ZSA9IE1hdGguY2VpbChpLnZpcnR1YWxTaXplIC8gZCkgLSBvLCBpLndyYXBwZXJFbC5zdHlsZVthKFwid2lkdGhcIildID0gXCJcIi5jb25jYXQoaS52aXJ0dWFsU2l6ZSArIG8sIFwicHhcIiksIHIpIHtcbiAgICAgICAgICB2YXIgX2U2MCA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIF90NDMgPSAwOyBfdDQzIDwgcy5sZW5ndGg7IF90NDMgKz0gMSkge1xuICAgICAgICAgICAgdmFyIF9hMjUgPSBzW190NDNdO1xuICAgICAgICAgICAgbCAmJiAoX2EyNSA9IE1hdGguZmxvb3IoX2EyNSkpLCBzW190NDNdIDwgaS52aXJ0dWFsU2l6ZSArIHNbMF0gJiYgX2U2MC5wdXNoKF9hMjUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzLnNwbGljZSgwLCBzLmxlbmd0aCksIHMucHVzaC5hcHBseShzLCBfZTYwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQgPSBlLnN3aXBlcjtcbiAgICBPYmplY3QuYXNzaWduKHQsIHtcbiAgICAgIGFwcGVuZFNsaWRlOiBzZS5iaW5kKHQpLFxuICAgICAgcHJlcGVuZFNsaWRlOiBhZS5iaW5kKHQpLFxuICAgICAgYWRkU2xpZGU6IGllLmJpbmQodCksXG4gICAgICByZW1vdmVTbGlkZTogcmUuYmluZCh0KSxcbiAgICAgIHJlbW92ZUFsbFNsaWRlczogbmUuYmluZCh0KVxuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICBhID0gZS5vbjtcbiAgICBzKHtcbiAgICAgIGZhZGVFZmZlY3Q6IHtcbiAgICAgICAgY3Jvc3NGYWRlOiAhMVxuICAgICAgfVxuICAgIH0pLCBsZSh7XG4gICAgICBlZmZlY3Q6IFwiZmFkZVwiLFxuICAgICAgc3dpcGVyOiB0LFxuICAgICAgb246IGEsXG4gICAgICBzZXRUcmFuc2xhdGU6IGZ1bmN0aW9uIHNldFRyYW5zbGF0ZSgpIHtcbiAgICAgICAgdmFyIGUgPSB0LnNsaWRlcztcbiAgICAgICAgdC5wYXJhbXMuZmFkZUVmZmVjdDtcbiAgICAgICAgZm9yICh2YXIgX3M0MyA9IDA7IF9zNDMgPCBlLmxlbmd0aDsgX3M0MyArPSAxKSB7XG4gICAgICAgICAgdmFyIF9lNjEgPSB0LnNsaWRlc1tfczQzXTtcbiAgICAgICAgICB2YXIgX2EyNiA9IC1fZTYxLnN3aXBlclNsaWRlT2Zmc2V0O1xuICAgICAgICAgIHQucGFyYW1zLnZpcnR1YWxUcmFuc2xhdGUgfHwgKF9hMjYgLT0gdC50cmFuc2xhdGUpO1xuICAgICAgICAgIHZhciBfaTE5ID0gMDtcbiAgICAgICAgICB0LmlzSG9yaXpvbnRhbCgpIHx8IChfaTE5ID0gX2EyNiwgX2EyNiA9IDApO1xuICAgICAgICAgIHZhciBfcjE1ID0gdC5wYXJhbXMuZmFkZUVmZmVjdC5jcm9zc0ZhZGUgPyBNYXRoLm1heCgxIC0gTWF0aC5hYnMoX2U2MS5wcm9ncmVzcyksIDApIDogMSArIE1hdGgubWluKE1hdGgubWF4KF9lNjEucHJvZ3Jlc3MsIC0xKSwgMCksXG4gICAgICAgICAgICBfbjcgPSBvZSgwLCBfZTYxKTtcbiAgICAgICAgICBfbjcuc3R5bGUub3BhY2l0eSA9IF9yMTUsIF9uNy5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZTNkKFwiLmNvbmNhdChfYTI2LCBcInB4LCBcIikuY29uY2F0KF9pMTksIFwicHgsIDBweClcIik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzZXRUcmFuc2l0aW9uOiBmdW5jdGlvbiBzZXRUcmFuc2l0aW9uKGUpIHtcbiAgICAgICAgdmFyIHMgPSB0LnNsaWRlcy5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gaChlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHMuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCJcIi5jb25jYXQoZSwgXCJtc1wiKTtcbiAgICAgICAgfSksIGRlKHtcbiAgICAgICAgICBzd2lwZXI6IHQsXG4gICAgICAgICAgZHVyYXRpb246IGUsXG4gICAgICAgICAgdHJhbnNmb3JtRWxlbWVudHM6IHMsXG4gICAgICAgICAgYWxsU2xpZGVzOiAhMFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBvdmVyd3JpdGVQYXJhbXM6IGZ1bmN0aW9uIG92ZXJ3cml0ZVBhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgICAgICAgIHNsaWRlc1Blckdyb3VwOiAxLFxuICAgICAgICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6ICEwLFxuICAgICAgICAgIHNwYWNlQmV0d2VlbjogMCxcbiAgICAgICAgICB2aXJ0dWFsVHJhbnNsYXRlOiAhdC5wYXJhbXMuY3NzTW9kZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICBhID0gZS5vbjtcbiAgICBzKHtcbiAgICAgIGN1YmVFZmZlY3Q6IHtcbiAgICAgICAgc2xpZGVTaGFkb3dzOiAhMCxcbiAgICAgICAgc2hhZG93OiAhMCxcbiAgICAgICAgc2hhZG93T2Zmc2V0OiAyMCxcbiAgICAgICAgc2hhZG93U2NhbGU6IC45NFxuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBpID0gZnVuY3Rpb24gaShlLCB0LCBzKSB7XG4gICAgICB2YXIgYSA9IHMgPyBlLnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0XCIpIDogZS5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wXCIpLFxuICAgICAgICBpID0gcyA/IGUucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0XCIpIDogZS5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tXCIpO1xuICAgICAgYSB8fCAoYSA9IGcoXCJkaXZcIiwgXCJzd2lwZXItc2xpZGUtc2hhZG93LVwiICsgKHMgPyBcImxlZnRcIiA6IFwidG9wXCIpKSwgZS5hcHBlbmQoYSkpLCBpIHx8IChpID0gZyhcImRpdlwiLCBcInN3aXBlci1zbGlkZS1zaGFkb3ctXCIgKyAocyA/IFwicmlnaHRcIiA6IFwiYm90dG9tXCIpKSwgZS5hcHBlbmQoaSkpLCBhICYmIChhLnN0eWxlLm9wYWNpdHkgPSBNYXRoLm1heCgtdCwgMCkpLCBpICYmIChpLnN0eWxlLm9wYWNpdHkgPSBNYXRoLm1heCh0LCAwKSk7XG4gICAgfTtcbiAgICBsZSh7XG4gICAgICBlZmZlY3Q6IFwiY3ViZVwiLFxuICAgICAgc3dpcGVyOiB0LFxuICAgICAgb246IGEsXG4gICAgICBzZXRUcmFuc2xhdGU6IGZ1bmN0aW9uIHNldFRyYW5zbGF0ZSgpIHtcbiAgICAgICAgdmFyIGUgPSB0LmVsLFxuICAgICAgICAgIHMgPSB0LndyYXBwZXJFbCxcbiAgICAgICAgICBhID0gdC5zbGlkZXMsXG4gICAgICAgICAgciA9IHQud2lkdGgsXG4gICAgICAgICAgbiA9IHQuaGVpZ2h0LFxuICAgICAgICAgIGwgPSB0LnJ0bFRyYW5zbGF0ZSxcbiAgICAgICAgICBvID0gdC5zaXplLFxuICAgICAgICAgIGQgPSB0LmJyb3dzZXIsXG4gICAgICAgICAgYyA9IHQucGFyYW1zLmN1YmVFZmZlY3QsXG4gICAgICAgICAgcCA9IHQuaXNIb3Jpem9udGFsKCksXG4gICAgICAgICAgdSA9IHQudmlydHVhbCAmJiB0LnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQ7XG4gICAgICAgIHZhciBtLFxuICAgICAgICAgIGggPSAwO1xuICAgICAgICBjLnNoYWRvdyAmJiAocCA/IChtID0gdC5zbGlkZXNFbC5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1jdWJlLXNoYWRvd1wiKSwgbSB8fCAobSA9IGcoXCJkaXZcIiwgXCJzd2lwZXItY3ViZS1zaGFkb3dcIiksIHQuc2xpZGVzRWwuYXBwZW5kKG0pKSwgbS5zdHlsZS5oZWlnaHQgPSBcIlwiLmNvbmNhdChyLCBcInB4XCIpKSA6IChtID0gZS5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1jdWJlLXNoYWRvd1wiKSwgbSB8fCAobSA9IGcoXCJkaXZcIiwgXCJzd2lwZXItY3ViZS1zaGFkb3dcIiksIGUuYXBwZW5kKG0pKSkpO1xuICAgICAgICBmb3IgKHZhciBfZTYyID0gMDsgX2U2MiA8IGEubGVuZ3RoOyBfZTYyICs9IDEpIHtcbiAgICAgICAgICB2YXIgX3Q0NCA9IGFbX2U2Ml07XG4gICAgICAgICAgdmFyIF9zNDQgPSBfZTYyO1xuICAgICAgICAgIHUgJiYgKF9zNDQgPSBwYXJzZUludChfdDQ0LmdldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIpLCAxMCkpO1xuICAgICAgICAgIHZhciBfcjE2ID0gOTAgKiBfczQ0LFxuICAgICAgICAgICAgX244ID0gTWF0aC5mbG9vcihfcjE2IC8gMzYwKTtcbiAgICAgICAgICBsICYmIChfcjE2ID0gLV9yMTYsIF9uOCA9IE1hdGguZmxvb3IoLV9yMTYgLyAzNjApKTtcbiAgICAgICAgICB2YXIgX2Q0ID0gTWF0aC5tYXgoTWF0aC5taW4oX3Q0NC5wcm9ncmVzcywgMSksIC0xKTtcbiAgICAgICAgICB2YXIgX20zID0gMCxcbiAgICAgICAgICAgIF9mMiA9IDAsXG4gICAgICAgICAgICBfZyA9IDA7XG4gICAgICAgICAgX3M0NCAlIDQgPT0gMCA/IChfbTMgPSA0ICogLV9uOCAqIG8sIF9nID0gMCkgOiAoX3M0NCAtIDEpICUgNCA9PSAwID8gKF9tMyA9IDAsIF9nID0gNCAqIC1fbjggKiBvKSA6IChfczQ0IC0gMikgJSA0ID09IDAgPyAoX20zID0gbyArIDQgKiBfbjggKiBvLCBfZyA9IG8pIDogKF9zNDQgLSAzKSAlIDQgPT0gMCAmJiAoX20zID0gLW8sIF9nID0gMyAqIG8gKyA0ICogbyAqIF9uOCksIGwgJiYgKF9tMyA9IC1fbTMpLCBwIHx8IChfZjIgPSBfbTMsIF9tMyA9IDApO1xuICAgICAgICAgIHZhciBfdiA9IFwicm90YXRlWChcIi5jb25jYXQocCA/IDAgOiAtX3IxNiwgXCJkZWcpIHJvdGF0ZVkoXCIpLmNvbmNhdChwID8gX3IxNiA6IDAsIFwiZGVnKSB0cmFuc2xhdGUzZChcIikuY29uY2F0KF9tMywgXCJweCwgXCIpLmNvbmNhdChfZjIsIFwicHgsIFwiKS5jb25jYXQoX2csIFwicHgpXCIpO1xuICAgICAgICAgIF9kNCA8PSAxICYmIF9kNCA+IC0xICYmIChoID0gOTAgKiBfczQ0ICsgOTAgKiBfZDQsIGwgJiYgKGggPSA5MCAqIC1fczQ0IC0gOTAgKiBfZDQpKSwgX3Q0NC5zdHlsZS50cmFuc2Zvcm0gPSBfdiwgYy5zbGlkZVNoYWRvd3MgJiYgaShfdDQ0LCBfZDQsIHApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IFwiNTAlIDUwJSAtXCIuY29uY2F0KG8gLyAyLCBcInB4XCIpLCBzLnN0eWxlW1wiLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luXCJdID0gXCI1MCUgNTAlIC1cIi5jb25jYXQobyAvIDIsIFwicHhcIiksIGMuc2hhZG93KSBpZiAocCkgbS5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZTNkKDBweCwgXCIuY29uY2F0KHIgLyAyICsgYy5zaGFkb3dPZmZzZXQsIFwicHgsIFwiKS5jb25jYXQoLXIgLyAyLCBcInB4KSByb3RhdGVYKDkwZGVnKSByb3RhdGVaKDBkZWcpIHNjYWxlKFwiKS5jb25jYXQoYy5zaGFkb3dTY2FsZSwgXCIpXCIpO2Vsc2Uge1xuICAgICAgICAgIHZhciBfZTYzID0gTWF0aC5hYnMoaCkgLSA5MCAqIE1hdGguZmxvb3IoTWF0aC5hYnMoaCkgLyA5MCksXG4gICAgICAgICAgICBfdDQ1ID0gMS41IC0gKE1hdGguc2luKDIgKiBfZTYzICogTWF0aC5QSSAvIDM2MCkgLyAyICsgTWF0aC5jb3MoMiAqIF9lNjMgKiBNYXRoLlBJIC8gMzYwKSAvIDIpLFxuICAgICAgICAgICAgX3M0NSA9IGMuc2hhZG93U2NhbGUsXG4gICAgICAgICAgICBfYTI3ID0gYy5zaGFkb3dTY2FsZSAvIF90NDUsXG4gICAgICAgICAgICBfaTIwID0gYy5zaGFkb3dPZmZzZXQ7XG4gICAgICAgICAgbS5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlM2QoXCIuY29uY2F0KF9zNDUsIFwiLCAxLCBcIikuY29uY2F0KF9hMjcsIFwiKSB0cmFuc2xhdGUzZCgwcHgsIFwiKS5jb25jYXQobiAvIDIgKyBfaTIwLCBcInB4LCBcIikuY29uY2F0KC1uIC8gMiAvIF9hMjcsIFwicHgpIHJvdGF0ZVgoLTkwZGVnKVwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZiA9IChkLmlzU2FmYXJpIHx8IGQuaXNXZWJWaWV3KSAmJiBkLm5lZWRQZXJzcGVjdGl2ZUZpeCA/IC1vIC8gMiA6IDA7XG4gICAgICAgIHMuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZCgwcHgsMCxcIi5jb25jYXQoZiwgXCJweCkgcm90YXRlWChcIikuY29uY2F0KHQuaXNIb3Jpem9udGFsKCkgPyAwIDogaCwgXCJkZWcpIHJvdGF0ZVkoXCIpLmNvbmNhdCh0LmlzSG9yaXpvbnRhbCgpID8gLWggOiAwLCBcImRlZylcIiksIHMuc3R5bGUuc2V0UHJvcGVydHkoXCItLXN3aXBlci1jdWJlLXRyYW5zbGF0ZS16XCIsIFwiXCIuY29uY2F0KGYsIFwicHhcIikpO1xuICAgICAgfSxcbiAgICAgIHNldFRyYW5zaXRpb246IGZ1bmN0aW9uIHNldFRyYW5zaXRpb24oZSkge1xuICAgICAgICB2YXIgcyA9IHQuZWwsXG4gICAgICAgICAgYSA9IHQuc2xpZGVzO1xuICAgICAgICBpZiAoYS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdChlLCBcIm1zXCIpLCB0LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3AsIC5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0LCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20sIC5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnRcIikuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdChlLCBcIm1zXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KSwgdC5wYXJhbXMuY3ViZUVmZmVjdC5zaGFkb3cgJiYgIXQuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgICB2YXIgX3Q0NiA9IHMucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItY3ViZS1zaGFkb3dcIik7XG4gICAgICAgICAgX3Q0NiAmJiAoX3Q0Ni5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdChlLCBcIm1zXCIpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHJlY3JlYXRlU2hhZG93czogZnVuY3Rpb24gcmVjcmVhdGVTaGFkb3dzKCkge1xuICAgICAgICB2YXIgZSA9IHQuaXNIb3Jpem9udGFsKCk7XG4gICAgICAgIHQuc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICB2YXIgcyA9IE1hdGgubWF4KE1hdGgubWluKHQucHJvZ3Jlc3MsIDEpLCAtMSk7XG4gICAgICAgICAgaSh0LCBzLCBlKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZ2V0RWZmZWN0UGFyYW1zOiBmdW5jdGlvbiBnZXRFZmZlY3RQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB0LnBhcmFtcy5jdWJlRWZmZWN0O1xuICAgICAgfSxcbiAgICAgIHBlcnNwZWN0aXZlOiBmdW5jdGlvbiBwZXJzcGVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgICAgfSxcbiAgICAgIG92ZXJ3cml0ZVBhcmFtczogZnVuY3Rpb24gb3ZlcndyaXRlUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXG4gICAgICAgICAgc2xpZGVzUGVyR3JvdXA6IDEsXG4gICAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogITAsXG4gICAgICAgICAgcmVzaXN0YW5jZVJhdGlvOiAwLFxuICAgICAgICAgIHNwYWNlQmV0d2VlbjogMCxcbiAgICAgICAgICBjZW50ZXJlZFNsaWRlczogITEsXG4gICAgICAgICAgdmlydHVhbFRyYW5zbGF0ZTogITBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgYSA9IGUub247XG4gICAgcyh7XG4gICAgICBmbGlwRWZmZWN0OiB7XG4gICAgICAgIHNsaWRlU2hhZG93czogITAsXG4gICAgICAgIGxpbWl0Um90YXRpb246ICEwXG4gICAgICB9XG4gICAgfSk7XG4gICAgdmFyIGkgPSBmdW5jdGlvbiBpKGUsIHMsIGEpIHtcbiAgICAgIHZhciBpID0gdC5pc0hvcml6b250YWwoKSA/IGUucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnRcIikgOiBlLnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3BcIiksXG4gICAgICAgIHIgPSB0LmlzSG9yaXpvbnRhbCgpID8gZS5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHRcIikgOiBlLnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b21cIik7XG4gICAgICBpIHx8IChpID0gY2UoMCwgZSwgdC5pc0hvcml6b250YWwoKSA/IFwibGVmdFwiIDogXCJ0b3BcIikpLCByIHx8IChyID0gY2UoMCwgZSwgdC5pc0hvcml6b250YWwoKSA/IFwicmlnaHRcIiA6IFwiYm90dG9tXCIpKSwgaSAmJiAoaS5zdHlsZS5vcGFjaXR5ID0gTWF0aC5tYXgoLXMsIDApKSwgciAmJiAoci5zdHlsZS5vcGFjaXR5ID0gTWF0aC5tYXgocywgMCkpO1xuICAgIH07XG4gICAgbGUoe1xuICAgICAgZWZmZWN0OiBcImZsaXBcIixcbiAgICAgIHN3aXBlcjogdCxcbiAgICAgIG9uOiBhLFxuICAgICAgc2V0VHJhbnNsYXRlOiBmdW5jdGlvbiBzZXRUcmFuc2xhdGUoKSB7XG4gICAgICAgIHZhciBlID0gdC5zbGlkZXMsXG4gICAgICAgICAgcyA9IHQucnRsVHJhbnNsYXRlLFxuICAgICAgICAgIGEgPSB0LnBhcmFtcy5mbGlwRWZmZWN0O1xuICAgICAgICBmb3IgKHZhciBfcjE3ID0gMDsgX3IxNyA8IGUubGVuZ3RoOyBfcjE3ICs9IDEpIHtcbiAgICAgICAgICB2YXIgX245ID0gZVtfcjE3XTtcbiAgICAgICAgICB2YXIgX2w4ID0gX245LnByb2dyZXNzO1xuICAgICAgICAgIHQucGFyYW1zLmZsaXBFZmZlY3QubGltaXRSb3RhdGlvbiAmJiAoX2w4ID0gTWF0aC5tYXgoTWF0aC5taW4oX245LnByb2dyZXNzLCAxKSwgLTEpKTtcbiAgICAgICAgICB2YXIgX284ID0gX245LnN3aXBlclNsaWRlT2Zmc2V0O1xuICAgICAgICAgIHZhciBfZDUgPSAtMTgwICogX2w4LFxuICAgICAgICAgICAgX2MzID0gMCxcbiAgICAgICAgICAgIF9wNCA9IHQucGFyYW1zLmNzc01vZGUgPyAtX284IC0gdC50cmFuc2xhdGUgOiAtX284LFxuICAgICAgICAgICAgX3U0ID0gMDtcbiAgICAgICAgICB0LmlzSG9yaXpvbnRhbCgpID8gcyAmJiAoX2Q1ID0gLV9kNSkgOiAoX3U0ID0gX3A0LCBfcDQgPSAwLCBfYzMgPSAtX2Q1LCBfZDUgPSAwKSwgX245LnN0eWxlLnpJbmRleCA9IC1NYXRoLmFicyhNYXRoLnJvdW5kKF9sOCkpICsgZS5sZW5ndGgsIGEuc2xpZGVTaGFkb3dzICYmIGkoX245LCBfbDgpO1xuICAgICAgICAgIHZhciBfbTQgPSBcInRyYW5zbGF0ZTNkKFwiLmNvbmNhdChfcDQsIFwicHgsIFwiKS5jb25jYXQoX3U0LCBcInB4LCAwcHgpIHJvdGF0ZVgoXCIpLmNvbmNhdChfYzMsIFwiZGVnKSByb3RhdGVZKFwiKS5jb25jYXQoX2Q1LCBcImRlZylcIik7XG4gICAgICAgICAgb2UoMCwgX245KS5zdHlsZS50cmFuc2Zvcm0gPSBfbTQ7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzZXRUcmFuc2l0aW9uOiBmdW5jdGlvbiBzZXRUcmFuc2l0aW9uKGUpIHtcbiAgICAgICAgdmFyIHMgPSB0LnNsaWRlcy5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gaChlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHMuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCJcIi5jb25jYXQoZSwgXCJtc1wiKSwgdC5xdWVyeVNlbGVjdG9yQWxsKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wLCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tLCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0XCIpLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCJcIi5jb25jYXQoZSwgXCJtc1wiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSksIGRlKHtcbiAgICAgICAgICBzd2lwZXI6IHQsXG4gICAgICAgICAgZHVyYXRpb246IGUsXG4gICAgICAgICAgdHJhbnNmb3JtRWxlbWVudHM6IHNcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgcmVjcmVhdGVTaGFkb3dzOiBmdW5jdGlvbiByZWNyZWF0ZVNoYWRvd3MoKSB7XG4gICAgICAgIHQucGFyYW1zLmZsaXBFZmZlY3Q7XG4gICAgICAgIHQuc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB2YXIgcyA9IGUucHJvZ3Jlc3M7XG4gICAgICAgICAgdC5wYXJhbXMuZmxpcEVmZmVjdC5saW1pdFJvdGF0aW9uICYmIChzID0gTWF0aC5tYXgoTWF0aC5taW4oZS5wcm9ncmVzcywgMSksIC0xKSksIGkoZSwgcyk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGdldEVmZmVjdFBhcmFtczogZnVuY3Rpb24gZ2V0RWZmZWN0UGFyYW1zKCkge1xuICAgICAgICByZXR1cm4gdC5wYXJhbXMuZmxpcEVmZmVjdDtcbiAgICAgIH0sXG4gICAgICBwZXJzcGVjdGl2ZTogZnVuY3Rpb24gcGVyc3BlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICAgIH0sXG4gICAgICBvdmVyd3JpdGVQYXJhbXM6IGZ1bmN0aW9uIG92ZXJ3cml0ZVBhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgICAgICAgIHNsaWRlc1Blckdyb3VwOiAxLFxuICAgICAgICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6ICEwLFxuICAgICAgICAgIHNwYWNlQmV0d2VlbjogMCxcbiAgICAgICAgICB2aXJ0dWFsVHJhbnNsYXRlOiAhdC5wYXJhbXMuY3NzTW9kZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICBhID0gZS5vbjtcbiAgICBzKHtcbiAgICAgIGNvdmVyZmxvd0VmZmVjdDoge1xuICAgICAgICByb3RhdGU6IDUwLFxuICAgICAgICBzdHJldGNoOiAwLFxuICAgICAgICBkZXB0aDogMTAwLFxuICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgbW9kaWZpZXI6IDEsXG4gICAgICAgIHNsaWRlU2hhZG93czogITBcbiAgICAgIH1cbiAgICB9KSwgbGUoe1xuICAgICAgZWZmZWN0OiBcImNvdmVyZmxvd1wiLFxuICAgICAgc3dpcGVyOiB0LFxuICAgICAgb246IGEsXG4gICAgICBzZXRUcmFuc2xhdGU6IGZ1bmN0aW9uIHNldFRyYW5zbGF0ZSgpIHtcbiAgICAgICAgdmFyIGUgPSB0LndpZHRoLFxuICAgICAgICAgIHMgPSB0LmhlaWdodCxcbiAgICAgICAgICBhID0gdC5zbGlkZXMsXG4gICAgICAgICAgaSA9IHQuc2xpZGVzU2l6ZXNHcmlkLFxuICAgICAgICAgIHIgPSB0LnBhcmFtcy5jb3ZlcmZsb3dFZmZlY3QsXG4gICAgICAgICAgbiA9IHQuaXNIb3Jpem9udGFsKCksXG4gICAgICAgICAgbCA9IHQudHJhbnNsYXRlLFxuICAgICAgICAgIG8gPSBuID8gZSAvIDIgLSBsIDogcyAvIDIgLSBsLFxuICAgICAgICAgIGQgPSBuID8gci5yb3RhdGUgOiAtci5yb3RhdGUsXG4gICAgICAgICAgYyA9IHIuZGVwdGg7XG4gICAgICAgIGZvciAodmFyIF9lNjQgPSAwLCBfdDQ3ID0gYS5sZW5ndGg7IF9lNjQgPCBfdDQ3OyBfZTY0ICs9IDEpIHtcbiAgICAgICAgICB2YXIgX3Q0OCA9IGFbX2U2NF0sXG4gICAgICAgICAgICBfczQ2ID0gaVtfZTY0XSxcbiAgICAgICAgICAgIF9sOSA9IChvIC0gX3Q0OC5zd2lwZXJTbGlkZU9mZnNldCAtIF9zNDYgLyAyKSAvIF9zNDYsXG4gICAgICAgICAgICBfcDUgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHIubW9kaWZpZXIgPyByLm1vZGlmaWVyKF9sOSkgOiBfbDkgKiByLm1vZGlmaWVyO1xuICAgICAgICAgIHZhciBfdTUgPSBuID8gZCAqIF9wNSA6IDAsXG4gICAgICAgICAgICBfbTUgPSBuID8gMCA6IGQgKiBfcDUsXG4gICAgICAgICAgICBfaDIgPSAtYyAqIE1hdGguYWJzKF9wNSksXG4gICAgICAgICAgICBfZjMgPSByLnN0cmV0Y2g7XG4gICAgICAgICAgXCJzdHJpbmdcIiA9PSB0eXBlb2YgX2YzICYmIC0xICE9PSBfZjMuaW5kZXhPZihcIiVcIikgJiYgKF9mMyA9IHBhcnNlRmxvYXQoci5zdHJldGNoKSAvIDEwMCAqIF9zNDYpO1xuICAgICAgICAgIHZhciBfZzIgPSBuID8gMCA6IF9mMyAqIF9wNSxcbiAgICAgICAgICAgIF92MiA9IG4gPyBfZjMgKiBfcDUgOiAwLFxuICAgICAgICAgICAgX3cgPSAxIC0gKDEgLSByLnNjYWxlKSAqIE1hdGguYWJzKF9wNSk7XG4gICAgICAgICAgTWF0aC5hYnMoX3YyKSA8IC4wMDEgJiYgKF92MiA9IDApLCBNYXRoLmFicyhfZzIpIDwgLjAwMSAmJiAoX2cyID0gMCksIE1hdGguYWJzKF9oMikgPCAuMDAxICYmIChfaDIgPSAwKSwgTWF0aC5hYnMoX3U1KSA8IC4wMDEgJiYgKF91NSA9IDApLCBNYXRoLmFicyhfbTUpIDwgLjAwMSAmJiAoX201ID0gMCksIE1hdGguYWJzKF93KSA8IC4wMDEgJiYgKF93ID0gMCk7XG4gICAgICAgICAgdmFyIF9iID0gXCJ0cmFuc2xhdGUzZChcIi5jb25jYXQoX3YyLCBcInB4LFwiKS5jb25jYXQoX2cyLCBcInB4LFwiKS5jb25jYXQoX2gyLCBcInB4KSAgcm90YXRlWChcIikuY29uY2F0KF9tNSwgXCJkZWcpIHJvdGF0ZVkoXCIpLmNvbmNhdChfdTUsIFwiZGVnKSBzY2FsZShcIikuY29uY2F0KF93LCBcIilcIik7XG4gICAgICAgICAgaWYgKG9lKDAsIF90NDgpLnN0eWxlLnRyYW5zZm9ybSA9IF9iLCBfdDQ4LnN0eWxlLnpJbmRleCA9IDEgLSBNYXRoLmFicyhNYXRoLnJvdW5kKF9wNSkpLCByLnNsaWRlU2hhZG93cykge1xuICAgICAgICAgICAgdmFyIF9lNjUgPSBuID8gX3Q0OC5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdFwiKSA6IF90NDgucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItc2xpZGUtc2hhZG93LXRvcFwiKSxcbiAgICAgICAgICAgICAgX3M0NyA9IG4gPyBfdDQ4LnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodFwiKSA6IF90NDgucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbVwiKTtcbiAgICAgICAgICAgIF9lNjUgfHwgKF9lNjUgPSBjZSgwLCBfdDQ4LCBuID8gXCJsZWZ0XCIgOiBcInRvcFwiKSksIF9zNDcgfHwgKF9zNDcgPSBjZSgwLCBfdDQ4LCBuID8gXCJyaWdodFwiIDogXCJib3R0b21cIikpLCBfZTY1ICYmIChfZTY1LnN0eWxlLm9wYWNpdHkgPSBfcDUgPiAwID8gX3A1IDogMCksIF9zNDcgJiYgKF9zNDcuc3R5bGUub3BhY2l0eSA9IC1fcDUgPiAwID8gLV9wNSA6IDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNldFRyYW5zaXRpb246IGZ1bmN0aW9uIHNldFRyYW5zaXRpb24oZSkge1xuICAgICAgICB0LnNsaWRlcy5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gaChlKTtcbiAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCJcIi5jb25jYXQoZSwgXCJtc1wiKSwgdC5xdWVyeVNlbGVjdG9yQWxsKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wLCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tLCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0XCIpLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCJcIi5jb25jYXQoZSwgXCJtc1wiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgcGVyc3BlY3RpdmU6IGZ1bmN0aW9uIHBlcnNwZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgICB9LFxuICAgICAgb3ZlcndyaXRlUGFyYW1zOiBmdW5jdGlvbiBvdmVyd3JpdGVQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogITBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgYSA9IGUub247XG4gICAgcyh7XG4gICAgICBjcmVhdGl2ZUVmZmVjdDoge1xuICAgICAgICBsaW1pdFByb2dyZXNzOiAxLFxuICAgICAgICBzaGFkb3dQZXJQcm9ncmVzczogITEsXG4gICAgICAgIHByb2dyZXNzTXVsdGlwbGllcjogMSxcbiAgICAgICAgcGVyc3BlY3RpdmU6ICEwLFxuICAgICAgICBwcmV2OiB7XG4gICAgICAgICAgdHJhbnNsYXRlOiBbMCwgMCwgMF0sXG4gICAgICAgICAgcm90YXRlOiBbMCwgMCwgMF0sXG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICBzY2FsZTogMVxuICAgICAgICB9LFxuICAgICAgICBuZXh0OiB7XG4gICAgICAgICAgdHJhbnNsYXRlOiBbMCwgMCwgMF0sXG4gICAgICAgICAgcm90YXRlOiBbMCwgMCwgMF0sXG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICBzY2FsZTogMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgdmFyIGkgPSBmdW5jdGlvbiBpKGUpIHtcbiAgICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gZSA6IFwiXCIuY29uY2F0KGUsIFwicHhcIik7XG4gICAgfTtcbiAgICBsZSh7XG4gICAgICBlZmZlY3Q6IFwiY3JlYXRpdmVcIixcbiAgICAgIHN3aXBlcjogdCxcbiAgICAgIG9uOiBhLFxuICAgICAgc2V0VHJhbnNsYXRlOiBmdW5jdGlvbiBzZXRUcmFuc2xhdGUoKSB7XG4gICAgICAgIHZhciBlID0gdC5zbGlkZXMsXG4gICAgICAgICAgcyA9IHQud3JhcHBlckVsLFxuICAgICAgICAgIGEgPSB0LnNsaWRlc1NpemVzR3JpZCxcbiAgICAgICAgICByID0gdC5wYXJhbXMuY3JlYXRpdmVFZmZlY3QsXG4gICAgICAgICAgbiA9IHIucHJvZ3Jlc3NNdWx0aXBsaWVyLFxuICAgICAgICAgIGwgPSB0LnBhcmFtcy5jZW50ZXJlZFNsaWRlcztcbiAgICAgICAgaWYgKGwpIHtcbiAgICAgICAgICB2YXIgX2U2NiA9IGFbMF0gLyAyIC0gdC5wYXJhbXMuc2xpZGVzT2Zmc2V0QmVmb3JlIHx8IDA7XG4gICAgICAgICAgcy5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoY2FsYyg1MCUgLSBcIi5jb25jYXQoX2U2NiwgXCJweCkpXCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKCkge1xuICAgICAgICAgIHZhciBhID0gZVtfczQ4XSxcbiAgICAgICAgICAgIG8gPSBhLnByb2dyZXNzLFxuICAgICAgICAgICAgZCA9IE1hdGgubWluKE1hdGgubWF4KGEucHJvZ3Jlc3MsIC1yLmxpbWl0UHJvZ3Jlc3MpLCByLmxpbWl0UHJvZ3Jlc3MpO1xuICAgICAgICAgIHZhciBjID0gZDtcbiAgICAgICAgICBsIHx8IChjID0gTWF0aC5taW4oTWF0aC5tYXgoYS5vcmlnaW5hbFByb2dyZXNzLCAtci5saW1pdFByb2dyZXNzKSwgci5saW1pdFByb2dyZXNzKSk7XG4gICAgICAgICAgdmFyIHAgPSBhLnN3aXBlclNsaWRlT2Zmc2V0LFxuICAgICAgICAgICAgdSA9IFt0LnBhcmFtcy5jc3NNb2RlID8gLXAgLSB0LnRyYW5zbGF0ZSA6IC1wLCAwLCAwXSxcbiAgICAgICAgICAgIG0gPSBbMCwgMCwgMF07XG4gICAgICAgICAgdmFyIGggPSAhMTtcbiAgICAgICAgICB0LmlzSG9yaXpvbnRhbCgpIHx8ICh1WzFdID0gdVswXSwgdVswXSA9IDApO1xuICAgICAgICAgIHZhciBmID0ge1xuICAgICAgICAgICAgdHJhbnNsYXRlOiBbMCwgMCwgMF0sXG4gICAgICAgICAgICByb3RhdGU6IFswLCAwLCAwXSxcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgIH07XG4gICAgICAgICAgZCA8IDAgPyAoZiA9IHIubmV4dCwgaCA9ICEwKSA6IGQgPiAwICYmIChmID0gci5wcmV2LCBoID0gITApLCB1LmZvckVhY2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHVbdF0gPSBcImNhbGMoXCIuY29uY2F0KGUsIFwicHggKyAoXCIpLmNvbmNhdChpKGYudHJhbnNsYXRlW3RdKSwgXCIgKiBcIikuY29uY2F0KE1hdGguYWJzKGQgKiBuKSwgXCIpKVwiKTtcbiAgICAgICAgICB9KSwgbS5mb3JFYWNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgICBtW3RdID0gZi5yb3RhdGVbdF0gKiBNYXRoLmFicyhkICogbik7XG4gICAgICAgICAgfSksIGEuc3R5bGUuekluZGV4ID0gLU1hdGguYWJzKE1hdGgucm91bmQobykpICsgZS5sZW5ndGg7XG4gICAgICAgICAgdmFyIGcgPSB1LmpvaW4oXCIsIFwiKSxcbiAgICAgICAgICAgIHYgPSBcInJvdGF0ZVgoXCIuY29uY2F0KG1bMF0sIFwiZGVnKSByb3RhdGVZKFwiKS5jb25jYXQobVsxXSwgXCJkZWcpIHJvdGF0ZVooXCIpLmNvbmNhdChtWzJdLCBcImRlZylcIiksXG4gICAgICAgICAgICB3ID0gYyA8IDAgPyBcInNjYWxlKFwiLmNvbmNhdCgxICsgKDEgLSBmLnNjYWxlKSAqIGMgKiBuLCBcIilcIikgOiBcInNjYWxlKFwiLmNvbmNhdCgxIC0gKDEgLSBmLnNjYWxlKSAqIGMgKiBuLCBcIilcIiksXG4gICAgICAgICAgICBiID0gYyA8IDAgPyAxICsgKDEgLSBmLm9wYWNpdHkpICogYyAqIG4gOiAxIC0gKDEgLSBmLm9wYWNpdHkpICogYyAqIG4sXG4gICAgICAgICAgICB5ID0gXCJ0cmFuc2xhdGUzZChcIi5jb25jYXQoZywgXCIpIFwiKS5jb25jYXQodiwgXCIgXCIpLmNvbmNhdCh3KTtcbiAgICAgICAgICBpZiAoaCAmJiBmLnNoYWRvdyB8fCAhaCkge1xuICAgICAgICAgICAgdmFyIF9lNjcgPSBhLnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLXNsaWRlLXNoYWRvd1wiKTtcbiAgICAgICAgICAgIGlmICghX2U2NyAmJiBmLnNoYWRvdyAmJiAoX2U2NyA9IGNlKDAsIGEpKSwgX2U2Nykge1xuICAgICAgICAgICAgICB2YXIgX3Q0OSA9IHIuc2hhZG93UGVyUHJvZ3Jlc3MgPyBkICogKDEgLyByLmxpbWl0UHJvZ3Jlc3MpIDogZDtcbiAgICAgICAgICAgICAgX2U2Ny5zdHlsZS5vcGFjaXR5ID0gTWF0aC5taW4oTWF0aC5tYXgoTWF0aC5hYnMoX3Q0OSksIDApLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIEUgPSBvZSgwLCBhKTtcbiAgICAgICAgICBFLnN0eWxlLnRyYW5zZm9ybSA9IHksIEUuc3R5bGUub3BhY2l0eSA9IGIsIGYub3JpZ2luICYmIChFLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IGYub3JpZ2luKTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yICh2YXIgX3M0OCA9IDA7IF9zNDggPCBlLmxlbmd0aDsgX3M0OCArPSAxKSB7XG4gICAgICAgICAgX2xvb3AoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNldFRyYW5zaXRpb246IGZ1bmN0aW9uIHNldFRyYW5zaXRpb24oZSkge1xuICAgICAgICB2YXIgcyA9IHQuc2xpZGVzLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBoKGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdChlLCBcIm1zXCIpLCB0LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3dpcGVyLXNsaWRlLXNoYWRvd1wiKS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiXCIuY29uY2F0KGUsIFwibXNcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pLCBkZSh7XG4gICAgICAgICAgc3dpcGVyOiB0LFxuICAgICAgICAgIGR1cmF0aW9uOiBlLFxuICAgICAgICAgIHRyYW5zZm9ybUVsZW1lbnRzOiBzLFxuICAgICAgICAgIGFsbFNsaWRlczogITBcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgcGVyc3BlY3RpdmU6IGZ1bmN0aW9uIHBlcnNwZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gdC5wYXJhbXMuY3JlYXRpdmVFZmZlY3QucGVyc3BlY3RpdmU7XG4gICAgICB9LFxuICAgICAgb3ZlcndyaXRlUGFyYW1zOiBmdW5jdGlvbiBvdmVyd3JpdGVQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogITAsXG4gICAgICAgICAgdmlydHVhbFRyYW5zbGF0ZTogIXQucGFyYW1zLmNzc01vZGVcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgYSA9IGUub247XG4gICAgcyh7XG4gICAgICBjYXJkc0VmZmVjdDoge1xuICAgICAgICBzbGlkZVNoYWRvd3M6ICEwLFxuICAgICAgICByb3RhdGU6ICEwLFxuICAgICAgICBwZXJTbGlkZVJvdGF0ZTogMixcbiAgICAgICAgcGVyU2xpZGVPZmZzZXQ6IDhcbiAgICAgIH1cbiAgICB9KSwgbGUoe1xuICAgICAgZWZmZWN0OiBcImNhcmRzXCIsXG4gICAgICBzd2lwZXI6IHQsXG4gICAgICBvbjogYSxcbiAgICAgIHNldFRyYW5zbGF0ZTogZnVuY3Rpb24gc2V0VHJhbnNsYXRlKCkge1xuICAgICAgICB2YXIgZSA9IHQuc2xpZGVzLFxuICAgICAgICAgIHMgPSB0LmFjdGl2ZUluZGV4LFxuICAgICAgICAgIGEgPSB0LnJ0bFRyYW5zbGF0ZSxcbiAgICAgICAgICBpID0gdC5wYXJhbXMuY2FyZHNFZmZlY3QsXG4gICAgICAgICAgX3QkdG91Y2hFdmVudHNEYXRhID0gdC50b3VjaEV2ZW50c0RhdGEsXG4gICAgICAgICAgciA9IF90JHRvdWNoRXZlbnRzRGF0YS5zdGFydFRyYW5zbGF0ZSxcbiAgICAgICAgICBuID0gX3QkdG91Y2hFdmVudHNEYXRhLmlzVG91Y2hlZCxcbiAgICAgICAgICBsID0gYSA/IC10LnRyYW5zbGF0ZSA6IHQudHJhbnNsYXRlO1xuICAgICAgICBmb3IgKHZhciBfbzkgPSAwOyBfbzkgPCBlLmxlbmd0aDsgX285ICs9IDEpIHtcbiAgICAgICAgICB2YXIgX2Q2ID0gZVtfbzldLFxuICAgICAgICAgICAgX2M0ID0gX2Q2LnByb2dyZXNzLFxuICAgICAgICAgICAgX3A2ID0gTWF0aC5taW4oTWF0aC5tYXgoX2M0LCAtNCksIDQpO1xuICAgICAgICAgIHZhciBfdTYgPSBfZDYuc3dpcGVyU2xpZGVPZmZzZXQ7XG4gICAgICAgICAgdC5wYXJhbXMuY2VudGVyZWRTbGlkZXMgJiYgIXQucGFyYW1zLmNzc01vZGUgJiYgKHQud3JhcHBlckVsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWChcIi5jb25jYXQodC5taW5UcmFuc2xhdGUoKSwgXCJweClcIikpLCB0LnBhcmFtcy5jZW50ZXJlZFNsaWRlcyAmJiB0LnBhcmFtcy5jc3NNb2RlICYmIChfdTYgLT0gZVswXS5zd2lwZXJTbGlkZU9mZnNldCk7XG4gICAgICAgICAgdmFyIF9tNiA9IHQucGFyYW1zLmNzc01vZGUgPyAtX3U2IC0gdC50cmFuc2xhdGUgOiAtX3U2LFxuICAgICAgICAgICAgX2gzID0gMDtcbiAgICAgICAgICB2YXIgX2Y0ID0gLTEwMCAqIE1hdGguYWJzKF9wNik7XG4gICAgICAgICAgdmFyIF9nMyA9IDEsXG4gICAgICAgICAgICBfdjMgPSAtaS5wZXJTbGlkZVJvdGF0ZSAqIF9wNixcbiAgICAgICAgICAgIF93MiA9IGkucGVyU2xpZGVPZmZzZXQgLSAuNzUgKiBNYXRoLmFicyhfcDYpO1xuICAgICAgICAgIHZhciBfYjIgPSB0LnZpcnR1YWwgJiYgdC5wYXJhbXMudmlydHVhbC5lbmFibGVkID8gdC52aXJ0dWFsLmZyb20gKyBfbzkgOiBfbzksXG4gICAgICAgICAgICBfeSA9IChfYjIgPT09IHMgfHwgX2IyID09PSBzIC0gMSkgJiYgX3A2ID4gMCAmJiBfcDYgPCAxICYmIChuIHx8IHQucGFyYW1zLmNzc01vZGUpICYmIGwgPCByLFxuICAgICAgICAgICAgX0UgPSAoX2IyID09PSBzIHx8IF9iMiA9PT0gcyArIDEpICYmIF9wNiA8IDAgJiYgX3A2ID4gLTEgJiYgKG4gfHwgdC5wYXJhbXMuY3NzTW9kZSkgJiYgbCA+IHI7XG4gICAgICAgICAgaWYgKF95IHx8IF9FKSB7XG4gICAgICAgICAgICB2YXIgX2U2OCA9IE1hdGgucG93KDEgLSBNYXRoLmFicygoTWF0aC5hYnMoX3A2KSAtIC41KSAvIC41KSwgLjUpO1xuICAgICAgICAgICAgX3YzICs9IC0yOCAqIF9wNiAqIF9lNjgsIF9nMyArPSAtLjUgKiBfZTY4LCBfdzIgKz0gOTYgKiBfZTY4LCBfaDMgPSAtMjUgKiBfZTY4ICogTWF0aC5hYnMoX3A2KSArIFwiJVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoX202ID0gX3A2IDwgMCA/IFwiY2FsYyhcIi5jb25jYXQoX202LCBcInB4IFwiKS5jb25jYXQoYSA/IFwiLVwiIDogXCIrXCIsIFwiIChcIikuY29uY2F0KF93MiAqIE1hdGguYWJzKF9wNiksIFwiJSkpXCIpIDogX3A2ID4gMCA/IFwiY2FsYyhcIi5jb25jYXQoX202LCBcInB4IFwiKS5jb25jYXQoYSA/IFwiLVwiIDogXCIrXCIsIFwiICgtXCIpLmNvbmNhdChfdzIgKiBNYXRoLmFicyhfcDYpLCBcIiUpKVwiKSA6IFwiXCIuY29uY2F0KF9tNiwgXCJweFwiKSwgIXQuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgICAgIHZhciBfZTY5ID0gX2gzO1xuICAgICAgICAgICAgX2gzID0gX202LCBfbTYgPSBfZTY5O1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgX3ggPSBfcDYgPCAwID8gXCJcIiArICgxICsgKDEgLSBfZzMpICogX3A2KSA6IFwiXCIgKyAoMSAtICgxIC0gX2czKSAqIF9wNiksXG4gICAgICAgICAgICBfUyA9IFwiXFxuICAgICAgICB0cmFuc2xhdGUzZChcIi5jb25jYXQoX202LCBcIiwgXCIpLmNvbmNhdChfaDMsIFwiLCBcIikuY29uY2F0KF9mNCwgXCJweClcXG4gICAgICAgIHJvdGF0ZVooXCIpLmNvbmNhdChpLnJvdGF0ZSA/IGEgPyAtX3YzIDogX3YzIDogMCwgXCJkZWcpXFxuICAgICAgICBzY2FsZShcIikuY29uY2F0KF94LCBcIilcXG4gICAgICBcIik7XG4gICAgICAgICAgaWYgKGkuc2xpZGVTaGFkb3dzKSB7XG4gICAgICAgICAgICB2YXIgX2U3MCA9IF9kNi5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1zbGlkZS1zaGFkb3dcIik7XG4gICAgICAgICAgICBfZTcwIHx8IChfZTcwID0gY2UoMCwgX2Q2KSksIF9lNzAgJiYgKF9lNzAuc3R5bGUub3BhY2l0eSA9IE1hdGgubWluKE1hdGgubWF4KChNYXRoLmFicyhfcDYpIC0gLjUpIC8gLjUsIDApLCAxKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIF9kNi5zdHlsZS56SW5kZXggPSAtTWF0aC5hYnMoTWF0aC5yb3VuZChfYzQpKSArIGUubGVuZ3RoO1xuICAgICAgICAgIG9lKDAsIF9kNikuc3R5bGUudHJhbnNmb3JtID0gX1M7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzZXRUcmFuc2l0aW9uOiBmdW5jdGlvbiBzZXRUcmFuc2l0aW9uKGUpIHtcbiAgICAgICAgdmFyIHMgPSB0LnNsaWRlcy5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gaChlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHMuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCJcIi5jb25jYXQoZSwgXCJtc1wiKSwgdC5xdWVyeVNlbGVjdG9yQWxsKFwiLnN3aXBlci1zbGlkZS1zaGFkb3dcIikuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdChlLCBcIm1zXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KSwgZGUoe1xuICAgICAgICAgIHN3aXBlcjogdCxcbiAgICAgICAgICBkdXJhdGlvbjogZSxcbiAgICAgICAgICB0cmFuc2Zvcm1FbGVtZW50czogc1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBwZXJzcGVjdGl2ZTogZnVuY3Rpb24gcGVyc3BlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICAgIH0sXG4gICAgICBvdmVyd3JpdGVQYXJhbXM6IGZ1bmN0aW9uIG92ZXJ3cml0ZVBhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiAhMCxcbiAgICAgICAgICB2aXJ0dWFsVHJhbnNsYXRlOiAhdC5wYXJhbXMuY3NzTW9kZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuICB9XTtcbiAgcmV0dXJuIEoudXNlKHBlKSwgSjtcbn0pO1xuXG4vKiFcclxuICogaW1hZ2VzTG9hZGVkIFBBQ0tBR0VEIHY1LjAuMFxyXG4gKiBKYXZhU2NyaXB0IGlzIGFsbCBsaWtlIFwiWW91IGltYWdlcyBhcmUgZG9uZSB5ZXQgb3Igd2hhdD9cIlxyXG4gKiBNSVQgTGljZW5zZVxyXG4gKi9cbiFmdW5jdGlvbiAodCwgZSkge1xuICBcIm9iamVjdFwiID09ICh0eXBlb2YgbW9kdWxlID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YobW9kdWxlKSkgJiYgbW9kdWxlLmV4cG9ydHMgPyBtb2R1bGUuZXhwb3J0cyA9IGUoKSA6IHQuRXZFbWl0dGVyID0gZSgpO1xufShcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIHQoKSB7fVxuICB2YXIgZSA9IHQucHJvdG90eXBlO1xuICByZXR1cm4gZS5vbiA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgaWYgKCF0IHx8ICFlKSByZXR1cm4gdGhpcztcbiAgICB2YXIgaSA9IHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fSxcbiAgICAgIHMgPSBpW3RdID0gaVt0XSB8fCBbXTtcbiAgICByZXR1cm4gcy5pbmNsdWRlcyhlKSB8fCBzLnB1c2goZSksIHRoaXM7XG4gIH0sIGUub25jZSA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgaWYgKCF0IHx8ICFlKSByZXR1cm4gdGhpcztcbiAgICB0aGlzLm9uKHQsIGUpO1xuICAgIHZhciBpID0gdGhpcy5fb25jZUV2ZW50cyA9IHRoaXMuX29uY2VFdmVudHMgfHwge307XG4gICAgcmV0dXJuIChpW3RdID0gaVt0XSB8fCB7fSlbZV0gPSAhMCwgdGhpcztcbiAgfSwgZS5vZmYgPSBmdW5jdGlvbiAodCwgZSkge1xuICAgIHZhciBpID0gdGhpcy5fZXZlbnRzICYmIHRoaXMuX2V2ZW50c1t0XTtcbiAgICBpZiAoIWkgfHwgIWkubGVuZ3RoKSByZXR1cm4gdGhpcztcbiAgICB2YXIgcyA9IGkuaW5kZXhPZihlKTtcbiAgICByZXR1cm4gLTEgIT0gcyAmJiBpLnNwbGljZShzLCAxKSwgdGhpcztcbiAgfSwgZS5lbWl0RXZlbnQgPSBmdW5jdGlvbiAodCwgZSkge1xuICAgIHZhciBpID0gdGhpcy5fZXZlbnRzICYmIHRoaXMuX2V2ZW50c1t0XTtcbiAgICBpZiAoIWkgfHwgIWkubGVuZ3RoKSByZXR1cm4gdGhpcztcbiAgICBpID0gaS5zbGljZSgwKSwgZSA9IGUgfHwgW107XG4gICAgdmFyIHMgPSB0aGlzLl9vbmNlRXZlbnRzICYmIHRoaXMuX29uY2VFdmVudHNbdF07XG4gICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGkpLFxuICAgICAgX3N0ZXA7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciBuID0gX3N0ZXAudmFsdWU7XG4gICAgICAgIHMgJiYgc1tuXSAmJiAodGhpcy5vZmYodCwgbiksIGRlbGV0ZSBzW25dKSwgbi5hcHBseSh0aGlzLCBlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIF9pdGVyYXRvci5lKGVycik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIF9pdGVyYXRvci5mKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9LCBlLmFsbE9mZiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZGVsZXRlIHRoaXMuX2V2ZW50cywgZGVsZXRlIHRoaXMuX29uY2VFdmVudHMsIHRoaXM7XG4gIH0sIHQ7XG59KSxcbi8qIVxyXG4gKiBpbWFnZXNMb2FkZWQgdjUuMC4wXHJcbiAqIEphdmFTY3JpcHQgaXMgYWxsIGxpa2UgXCJZb3UgaW1hZ2VzIGFyZSBkb25lIHlldCBvciB3aGF0P1wiXHJcbiAqIE1JVCBMaWNlbnNlXHJcbiAqL1xuZnVuY3Rpb24gKHQsIGUpIHtcbiAgXCJvYmplY3RcIiA9PSAodHlwZW9mIG1vZHVsZSA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKG1vZHVsZSkpICYmIG1vZHVsZS5leHBvcnRzID8gbW9kdWxlLmV4cG9ydHMgPSBlKHQsIHJlcXVpcmUoXCJldi1lbWl0dGVyXCIpKSA6IHQuaW1hZ2VzTG9hZGVkID0gZSh0LCB0LkV2RW1pdHRlcik7XG59KFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uICh0LCBlKSB7XG4gIHZhciBpID0gdC5qUXVlcnksXG4gICAgcyA9IHQuY29uc29sZTtcbiAgZnVuY3Rpb24gbih0LCBlLCBvKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIG4pKSByZXR1cm4gbmV3IG4odCwgZSwgbyk7XG4gICAgdmFyIHIgPSB0O1xuICAgIHZhciBoO1xuICAgIChcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmIChyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0KSksIHIpID8gKHRoaXMuZWxlbWVudHMgPSAoaCA9IHIsIEFycmF5LmlzQXJyYXkoaCkgPyBoIDogXCJvYmplY3RcIiA9PSBfdHlwZW9mKGgpICYmIFwibnVtYmVyXCIgPT0gdHlwZW9mIGgubGVuZ3RoID8gX3RvQ29uc3VtYWJsZUFycmF5KGgpIDogW2hdKSwgdGhpcy5vcHRpb25zID0ge30sIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZSA/IG8gPSBlIDogT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIGUpLCBvICYmIHRoaXMub24oXCJhbHdheXNcIiwgbyksIHRoaXMuZ2V0SW1hZ2VzKCksIGkgJiYgKHRoaXMuanFEZWZlcnJlZCA9IG5ldyBpLkRlZmVycmVkKCkpLCBzZXRUaW1lb3V0KHRoaXMuY2hlY2suYmluZCh0aGlzKSkpIDogcy5lcnJvcihcIkJhZCBlbGVtZW50IGZvciBpbWFnZXNMb2FkZWQgXCIuY29uY2F0KHIgfHwgdCkpO1xuICB9XG4gIG4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksIG4ucHJvdG90eXBlLmdldEltYWdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmltYWdlcyA9IFtdLCB0aGlzLmVsZW1lbnRzLmZvckVhY2godGhpcy5hZGRFbGVtZW50SW1hZ2VzLCB0aGlzKTtcbiAgfTtcbiAgdmFyIG8gPSBbMSwgOSwgMTFdO1xuICBuLnByb3RvdHlwZS5hZGRFbGVtZW50SW1hZ2VzID0gZnVuY3Rpb24gKHQpIHtcbiAgICBcIklNR1wiID09PSB0Lm5vZGVOYW1lICYmIHRoaXMuYWRkSW1hZ2UodCksICEwID09PSB0aGlzLm9wdGlvbnMuYmFja2dyb3VuZCAmJiB0aGlzLmFkZEVsZW1lbnRCYWNrZ3JvdW5kSW1hZ2VzKHQpO1xuICAgIHZhciBlID0gdC5ub2RlVHlwZTtcbiAgICBpZiAoIWUgfHwgIW8uaW5jbHVkZXMoZSkpIHJldHVybjtcbiAgICB2YXIgaSA9IHQucXVlcnlTZWxlY3RvckFsbChcImltZ1wiKTtcbiAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGkpLFxuICAgICAgX3N0ZXAyO1xuICAgIHRyeSB7XG4gICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykge1xuICAgICAgICB2YXIgX3Q1MSA9IF9zdGVwMi52YWx1ZTtcbiAgICAgICAgdGhpcy5hZGRJbWFnZShfdDUxKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIF9pdGVyYXRvcjIuZShlcnIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBfaXRlcmF0b3IyLmYoKTtcbiAgICB9XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kKSB7XG4gICAgICB2YXIgX2U3MSA9IHQucXVlcnlTZWxlY3RvckFsbCh0aGlzLm9wdGlvbnMuYmFja2dyb3VuZCk7XG4gICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKF9lNzEpLFxuICAgICAgICBfc3RlcDM7XG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykge1xuICAgICAgICAgIHZhciBfdDUwID0gX3N0ZXAzLnZhbHVlO1xuICAgICAgICAgIHRoaXMuYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXMoX3Q1MCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIF9pdGVyYXRvcjMuZigpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgdmFyIHIgPSAvdXJsXFwoKFsnXCJdKT8oLio/KVxcMVxcKS9naTtcbiAgZnVuY3Rpb24gaCh0KSB7XG4gICAgdGhpcy5pbWcgPSB0O1xuICB9XG4gIGZ1bmN0aW9uIGQodCwgZSkge1xuICAgIHRoaXMudXJsID0gdCwgdGhpcy5lbGVtZW50ID0gZSwgdGhpcy5pbWcgPSBuZXcgSW1hZ2UoKTtcbiAgfVxuICByZXR1cm4gbi5wcm90b3R5cGUuYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXMgPSBmdW5jdGlvbiAodCkge1xuICAgIHZhciBlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0KTtcbiAgICBpZiAoIWUpIHJldHVybjtcbiAgICB2YXIgaSA9IHIuZXhlYyhlLmJhY2tncm91bmRJbWFnZSk7XG4gICAgZm9yICg7IG51bGwgIT09IGk7KSB7XG4gICAgICB2YXIgX3M0OSA9IGkgJiYgaVsyXTtcbiAgICAgIF9zNDkgJiYgdGhpcy5hZGRCYWNrZ3JvdW5kKF9zNDksIHQpLCBpID0gci5leGVjKGUuYmFja2dyb3VuZEltYWdlKTtcbiAgICB9XG4gIH0sIG4ucHJvdG90eXBlLmFkZEltYWdlID0gZnVuY3Rpb24gKHQpIHtcbiAgICB2YXIgZSA9IG5ldyBoKHQpO1xuICAgIHRoaXMuaW1hZ2VzLnB1c2goZSk7XG4gIH0sIG4ucHJvdG90eXBlLmFkZEJhY2tncm91bmQgPSBmdW5jdGlvbiAodCwgZSkge1xuICAgIHZhciBpID0gbmV3IGQodCwgZSk7XG4gICAgdGhpcy5pbWFnZXMucHVzaChpKTtcbiAgfSwgbi5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBpZiAodGhpcy5wcm9ncmVzc2VkQ291bnQgPSAwLCB0aGlzLmhhc0FueUJyb2tlbiA9ICExLCAhdGhpcy5pbWFnZXMubGVuZ3RoKSByZXR1cm4gdm9pZCB0aGlzLmNvbXBsZXRlKCk7XG4gICAgdmFyIHQgPSBmdW5jdGlvbiB0KF90NTIsIGUsIGkpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5wcm9ncmVzcyhfdDUyLCBlLCBpKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgdGhpcy5pbWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgZS5vbmNlKFwicHJvZ3Jlc3NcIiwgdCksIGUuY2hlY2soKTtcbiAgICB9KTtcbiAgfSwgbi5wcm90b3R5cGUucHJvZ3Jlc3MgPSBmdW5jdGlvbiAodCwgZSwgaSkge1xuICAgIHRoaXMucHJvZ3Jlc3NlZENvdW50KyssIHRoaXMuaGFzQW55QnJva2VuID0gdGhpcy5oYXNBbnlCcm9rZW4gfHwgIXQuaXNMb2FkZWQsIHRoaXMuZW1pdEV2ZW50KFwicHJvZ3Jlc3NcIiwgW3RoaXMsIHQsIGVdKSwgdGhpcy5qcURlZmVycmVkICYmIHRoaXMuanFEZWZlcnJlZC5ub3RpZnkgJiYgdGhpcy5qcURlZmVycmVkLm5vdGlmeSh0aGlzLCB0KSwgdGhpcy5wcm9ncmVzc2VkQ291bnQgPT09IHRoaXMuaW1hZ2VzLmxlbmd0aCAmJiB0aGlzLmNvbXBsZXRlKCksIHRoaXMub3B0aW9ucy5kZWJ1ZyAmJiBzICYmIHMubG9nKFwicHJvZ3Jlc3M6IFwiLmNvbmNhdChpKSwgdCwgZSk7XG4gIH0sIG4ucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0ID0gdGhpcy5oYXNBbnlCcm9rZW4gPyBcImZhaWxcIiA6IFwiZG9uZVwiO1xuICAgIGlmICh0aGlzLmlzQ29tcGxldGUgPSAhMCwgdGhpcy5lbWl0RXZlbnQodCwgW3RoaXNdKSwgdGhpcy5lbWl0RXZlbnQoXCJhbHdheXNcIiwgW3RoaXNdKSwgdGhpcy5qcURlZmVycmVkKSB7XG4gICAgICB2YXIgX3Q1MyA9IHRoaXMuaGFzQW55QnJva2VuID8gXCJyZWplY3RcIiA6IFwicmVzb2x2ZVwiO1xuICAgICAgdGhpcy5qcURlZmVycmVkW190NTNdKHRoaXMpO1xuICAgIH1cbiAgfSwgaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGUucHJvdG90eXBlKSwgaC5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5nZXRJc0ltYWdlQ29tcGxldGUoKSA/IHRoaXMuY29uZmlybSgwICE9PSB0aGlzLmltZy5uYXR1cmFsV2lkdGgsIFwibmF0dXJhbFdpZHRoXCIpIDogKHRoaXMucHJveHlJbWFnZSA9IG5ldyBJbWFnZSgpLCB0aGlzLmltZy5jcm9zc09yaWdpbiAmJiAodGhpcy5wcm94eUltYWdlLmNyb3NzT3JpZ2luID0gdGhpcy5pbWcuY3Jvc3NPcmlnaW4pLCB0aGlzLnByb3h5SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgdGhpcyksIHRoaXMucHJveHlJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgdGhpcyksIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHRoaXMpLCB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgdGhpcyksIHRoaXMucHJveHlJbWFnZS5zcmMgPSB0aGlzLmltZy5jdXJyZW50U3JjIHx8IHRoaXMuaW1nLnNyYyk7XG4gIH0sIGgucHJvdG90eXBlLmdldElzSW1hZ2VDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pbWcuY29tcGxldGUgJiYgdGhpcy5pbWcubmF0dXJhbFdpZHRoO1xuICB9LCBoLnByb3RvdHlwZS5jb25maXJtID0gZnVuY3Rpb24gKHQsIGUpIHtcbiAgICB0aGlzLmlzTG9hZGVkID0gdDtcbiAgICB2YXIgaSA9IHRoaXMuaW1nLnBhcmVudE5vZGUsXG4gICAgICBzID0gXCJQSUNUVVJFXCIgPT09IGkubm9kZU5hbWUgPyBpIDogdGhpcy5pbWc7XG4gICAgdGhpcy5lbWl0RXZlbnQoXCJwcm9ncmVzc1wiLCBbdGhpcywgcywgZV0pO1xuICB9LCBoLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uICh0KSB7XG4gICAgdmFyIGUgPSBcIm9uXCIgKyB0LnR5cGU7XG4gICAgdGhpc1tlXSAmJiB0aGlzW2VdKHQpO1xuICB9LCBoLnByb3RvdHlwZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jb25maXJtKCEwLCBcIm9ubG9hZFwiKSwgdGhpcy51bmJpbmRFdmVudHMoKTtcbiAgfSwgaC5wcm90b3R5cGUub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNvbmZpcm0oITEsIFwib25lcnJvclwiKSwgdGhpcy51bmJpbmRFdmVudHMoKTtcbiAgfSwgaC5wcm90b3R5cGUudW5iaW5kRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucHJveHlJbWFnZS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLCB0aGlzKSwgdGhpcy5wcm94eUltYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCB0aGlzKSwgdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgdGhpcyksIHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCB0aGlzKTtcbiAgfSwgZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGgucHJvdG90eXBlKSwgZC5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgdGhpcyksIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCB0aGlzKSwgdGhpcy5pbWcuc3JjID0gdGhpcy51cmwsIHRoaXMuZ2V0SXNJbWFnZUNvbXBsZXRlKCkgJiYgKHRoaXMuY29uZmlybSgwICE9PSB0aGlzLmltZy5uYXR1cmFsV2lkdGgsIFwibmF0dXJhbFdpZHRoXCIpLCB0aGlzLnVuYmluZEV2ZW50cygpKTtcbiAgfSwgZC5wcm90b3R5cGUudW5iaW5kRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHRoaXMpLCB0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgdGhpcyk7XG4gIH0sIGQucHJvdG90eXBlLmNvbmZpcm0gPSBmdW5jdGlvbiAodCwgZSkge1xuICAgIHRoaXMuaXNMb2FkZWQgPSB0LCB0aGlzLmVtaXRFdmVudChcInByb2dyZXNzXCIsIFt0aGlzLCB0aGlzLmVsZW1lbnQsIGVdKTtcbiAgfSwgbi5tYWtlSlF1ZXJ5UGx1Z2luID0gZnVuY3Rpb24gKGUpIHtcbiAgICAoZSA9IGUgfHwgdC5qUXVlcnkpICYmIChpID0gZSwgaS5mbi5pbWFnZXNMb2FkZWQgPSBmdW5jdGlvbiAodCwgZSkge1xuICAgICAgcmV0dXJuIG5ldyBuKHRoaXMsIHQsIGUpLmpxRGVmZXJyZWQucHJvbWlzZShpKHRoaXMpKTtcbiAgICB9KTtcbiAgfSwgbi5tYWtlSlF1ZXJ5UGx1Z2luKCksIG47XG59KTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAvLyBEZWZpbmUgdGhlIG1lZGlhIHF1ZXJ5XG4gIC8vIGltYWdlc0xvYWRlZCggZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhc2UtaXRlbS1pbWctd3JhcHBlcicpLCBmdW5jdGlvbiggaW5zdGFuY2UgKSB7XG4gIC8vICAgICBuZXcgU3BsaWRlKCcuc3BsaWRlLXdlYXBvbnMnLCB7XG4gIC8vICAgICAgICAgZHJhZzogZmFsc2UsICBcbiAgLy8gICAgICAgICB0eXBlICAgOiAnbG9vcCcsXG4gIC8vICAgICAgICAgcGVyTW92ZTogMSxcbiAgLy8gICAgICAgICBwZXJQYWdlOiAxLFxuICAvLyAgICAgICAgIC8vIHJld2luZCA6IHRydWUsXG4gIC8vICAgICAgICAgaXNOYXZpZ2F0aW9uOiBmYWxzZSxcbiAgLy8gICAgICAgICBkaXJlY3Rpb246ICd0dGInLFxuICAvLyAgICAgICAgIGhlaWdodDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXNlLWl0ZW0taW1nLXdyYXBwZXJcIikub2Zmc2V0SGVpZ2h0LFxuICAvLyAgICAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxuICAvLyAgICAgICAgIGFycm93czogZmFsc2UsXG4gIC8vICAgICAgICAgZ2FwOiAwLFxuICAvLyAgICAgICAgIHdoZWVsOiB0cnVlLFxuICAvLyAgICAgICAgIC8vIHdoZWVsTWluVGhyZXNob2xkOiAyLFxuICAvLyAgICAgICAgIHNwZWVkOiA2MDAsXG4gIC8vICAgICAgICAgd2hlZWxTbGVlcDogMTAwMCxcbiAgLy8gICAgICAgICBlYXNpbmc6ICdlYXNlLWluLW91dCdcbiAgLy8gICAgIH0pLm1vdW50KCk7XG4gIC8vIH0pO1xuICB2YXIgbW9iaWxlSGVscE1lbnUgPSBuZXcgU3dpcGVyKCcuc3BsaWRlLXdlYXBvbnMnLCB7XG4gICAgLy8gbW9kOiBbTW91c2V3aGVlbF0sXG4gICAgc3BlZWQ6IDEwMDAsXG4gICAgbG9vcDogdHJ1ZSxcbiAgICBkaXJlY3Rpb246IFwidmVydGljYWxcIixcbiAgICBtb3VzZXdoZWVsOiB0cnVlLFxuICAgIHNsaWRlc1BlclZpZXc6IDFcbiAgfSk7XG59KTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./main.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./main.js"](0, __webpack_exports__, __webpack_require__);
/******/ 	
/******/ })()
;
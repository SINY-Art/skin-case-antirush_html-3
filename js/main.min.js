/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (function() { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./main.js":
/*!*****************!*\
  !*** ./main.js ***!
  \*****************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e72) { throw _e72; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e73) { didErr = true; err = _e73; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n// import Splide from '@splidejs/splide'\n/**\r\n * Swiper 9.4.1\r\n * Most modern mobile touch slider and framework with hardware accelerated transitions\r\n * https://swiperjs.com\r\n *\r\n * Copyright 2014-2023 Vladimir Kharlampidi\r\n *\r\n * Released under the MIT License\r\n *\r\n * Released on: June 13, 2023\r\n */\n\n!function (e, t) {\n  \"object\" == (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) && \"undefined\" != typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(t) : (e = \"undefined\" != typeof globalThis ? globalThis : e || self).Swiper = t();\n}(undefined, function () {\n  \"use strict\";\n\n  function e(e) {\n    return null !== e && \"object\" == _typeof(e) && \"constructor\" in e && e.constructor === Object;\n  }\n  function t(s, a) {\n    void 0 === s && (s = {}), void 0 === a && (a = {}), Object.keys(a).forEach(function (i) {\n      void 0 === s[i] ? s[i] = a[i] : e(a[i]) && e(s[i]) && Object.keys(a[i]).length > 0 && t(s[i], a[i]);\n    });\n  }\n  var s = {\n    body: {},\n    addEventListener: function addEventListener() {},\n    removeEventListener: function removeEventListener() {},\n    activeElement: {\n      blur: function blur() {},\n      nodeName: \"\"\n    },\n    querySelector: function querySelector() {\n      return null;\n    },\n    querySelectorAll: function querySelectorAll() {\n      return [];\n    },\n    getElementById: function getElementById() {\n      return null;\n    },\n    createEvent: function createEvent() {\n      return {\n        initEvent: function initEvent() {}\n      };\n    },\n    createElement: function createElement() {\n      return {\n        children: [],\n        childNodes: [],\n        style: {},\n        setAttribute: function setAttribute() {},\n        getElementsByTagName: function getElementsByTagName() {\n          return [];\n        }\n      };\n    },\n    createElementNS: function createElementNS() {\n      return {};\n    },\n    importNode: function importNode() {\n      return null;\n    },\n    location: {\n      hash: \"\",\n      host: \"\",\n      hostname: \"\",\n      href: \"\",\n      origin: \"\",\n      pathname: \"\",\n      protocol: \"\",\n      search: \"\"\n    }\n  };\n  function a() {\n    var e = \"undefined\" != typeof document ? document : {};\n    return t(e, s), e;\n  }\n  var i = {\n    document: s,\n    navigator: {\n      userAgent: \"\"\n    },\n    location: {\n      hash: \"\",\n      host: \"\",\n      hostname: \"\",\n      href: \"\",\n      origin: \"\",\n      pathname: \"\",\n      protocol: \"\",\n      search: \"\"\n    },\n    history: {\n      replaceState: function replaceState() {},\n      pushState: function pushState() {},\n      go: function go() {},\n      back: function back() {}\n    },\n    CustomEvent: function CustomEvent() {\n      return this;\n    },\n    addEventListener: function addEventListener() {},\n    removeEventListener: function removeEventListener() {},\n    getComputedStyle: function getComputedStyle() {\n      return {\n        getPropertyValue: function getPropertyValue() {\n          return \"\";\n        }\n      };\n    },\n    Image: function Image() {},\n    Date: function Date() {},\n    screen: {},\n    setTimeout: function setTimeout() {},\n    clearTimeout: function clearTimeout() {},\n    matchMedia: function matchMedia() {\n      return {};\n    },\n    requestAnimationFrame: function requestAnimationFrame(e) {\n      return \"undefined\" == typeof setTimeout ? (e(), null) : setTimeout(e, 0);\n    },\n    cancelAnimationFrame: function cancelAnimationFrame(e) {\n      \"undefined\" != typeof setTimeout && clearTimeout(e);\n    }\n  };\n  function r() {\n    var e = \"undefined\" != typeof window ? window : {};\n    return t(e, i), e;\n  }\n  function n(e, t) {\n    return void 0 === t && (t = 0), setTimeout(e, t);\n  }\n  function l() {\n    return Date.now();\n  }\n  function o(e, t) {\n    void 0 === t && (t = \"x\");\n    var s = r();\n    var a, i, n;\n    var l = function (e) {\n      var t = r();\n      var s;\n      return t.getComputedStyle && (s = t.getComputedStyle(e, null)), !s && e.currentStyle && (s = e.currentStyle), s || (s = e.style), s;\n    }(e);\n    return s.WebKitCSSMatrix ? (i = l.transform || l.webkitTransform, i.split(\",\").length > 6 && (i = i.split(\", \").map(function (e) {\n      return e.replace(\",\", \".\");\n    }).join(\", \")), n = new s.WebKitCSSMatrix(\"none\" === i ? \"\" : i)) : (n = l.MozTransform || l.OTransform || l.MsTransform || l.msTransform || l.transform || l.getPropertyValue(\"transform\").replace(\"translate(\", \"matrix(1, 0, 0, 1,\"), a = n.toString().split(\",\")), \"x\" === t && (i = s.WebKitCSSMatrix ? n.m41 : 16 === a.length ? parseFloat(a[12]) : parseFloat(a[4])), \"y\" === t && (i = s.WebKitCSSMatrix ? n.m42 : 16 === a.length ? parseFloat(a[13]) : parseFloat(a[5])), i || 0;\n  }\n  function d(e) {\n    return \"object\" == _typeof(e) && null !== e && e.constructor && \"Object\" === Object.prototype.toString.call(e).slice(8, -1);\n  }\n  function c(e) {\n    return \"undefined\" != typeof window && void 0 !== window.HTMLElement ? e instanceof HTMLElement : e && (1 === e.nodeType || 11 === e.nodeType);\n  }\n  function p() {\n    var e = Object(arguments.length <= 0 ? void 0 : arguments[0]),\n      t = [\"__proto__\", \"constructor\", \"prototype\"];\n    for (var _s = 1; _s < arguments.length; _s += 1) {\n      var _a = _s < 0 || arguments.length <= _s ? void 0 : arguments[_s];\n      if (null != _a && !c(_a)) {\n        var _s2 = Object.keys(Object(_a)).filter(function (e) {\n          return t.indexOf(e) < 0;\n        });\n        for (var _t = 0, _i = _s2.length; _t < _i; _t += 1) {\n          var _i2 = _s2[_t],\n            _r = Object.getOwnPropertyDescriptor(_a, _i2);\n          void 0 !== _r && _r.enumerable && (d(e[_i2]) && d(_a[_i2]) ? _a[_i2].__swiper__ ? e[_i2] = _a[_i2] : p(e[_i2], _a[_i2]) : !d(e[_i2]) && d(_a[_i2]) ? (e[_i2] = {}, _a[_i2].__swiper__ ? e[_i2] = _a[_i2] : p(e[_i2], _a[_i2])) : e[_i2] = _a[_i2]);\n        }\n      }\n    }\n    return e;\n  }\n  function u(e, t, s) {\n    e.style.setProperty(t, s);\n  }\n  function m(e) {\n    var t = e.swiper,\n      s = e.targetPosition,\n      a = e.side;\n    var i = r(),\n      n = -t.translate;\n    var l,\n      o = null;\n    var d = t.params.speed;\n    t.wrapperEl.style.scrollSnapType = \"none\", i.cancelAnimationFrame(t.cssModeFrameID);\n    var c = s > n ? \"next\" : \"prev\",\n      p = function p(e, t) {\n        return \"next\" === c && e >= t || \"prev\" === c && e <= t;\n      },\n      u = function u() {\n        l = new Date().getTime(), null === o && (o = l);\n        var e = Math.max(Math.min((l - o) / d, 1), 0),\n          r = .5 - Math.cos(e * Math.PI) / 2;\n        var c = n + r * (s - n);\n        if (p(c, s) && (c = s), t.wrapperEl.scrollTo(_defineProperty({}, a, c)), p(c, s)) return t.wrapperEl.style.overflow = \"hidden\", t.wrapperEl.style.scrollSnapType = \"\", setTimeout(function () {\n          t.wrapperEl.style.overflow = \"\", t.wrapperEl.scrollTo(_defineProperty({}, a, c));\n        }), void i.cancelAnimationFrame(t.cssModeFrameID);\n        t.cssModeFrameID = i.requestAnimationFrame(u);\n      };\n    u();\n  }\n  function h(e) {\n    return e.querySelector(\".swiper-slide-transform\") || e.shadowEl && e.shadowEl.querySelector(\".swiper-slide-transform\") || e;\n  }\n  function f(e, t) {\n    return void 0 === t && (t = \"\"), _toConsumableArray(e.children).filter(function (e) {\n      return e.matches(t);\n    });\n  }\n  function g(e, t) {\n    var _s$classList;\n    void 0 === t && (t = []);\n    var s = document.createElement(e);\n    return (_s$classList = s.classList).add.apply(_s$classList, _toConsumableArray(Array.isArray(t) ? t : [t])), s;\n  }\n  function v(e) {\n    var t = r(),\n      s = a(),\n      i = e.getBoundingClientRect(),\n      n = s.body,\n      l = e.clientTop || n.clientTop || 0,\n      o = e.clientLeft || n.clientLeft || 0,\n      d = e === t ? t.scrollY : e.scrollTop,\n      c = e === t ? t.scrollX : e.scrollLeft;\n    return {\n      top: i.top + d - l,\n      left: i.left + c - o\n    };\n  }\n  function w(e, t) {\n    return r().getComputedStyle(e, null).getPropertyValue(t);\n  }\n  function b(e) {\n    var t,\n      s = e;\n    if (s) {\n      for (t = 0; null !== (s = s.previousSibling);) 1 === s.nodeType && (t += 1);\n      return t;\n    }\n  }\n  function y(e, t) {\n    var s = [];\n    var a = e.parentElement;\n    for (; a;) t ? a.matches(t) && s.push(a) : s.push(a), a = a.parentElement;\n    return s;\n  }\n  function E(e, t) {\n    t && e.addEventListener(\"transitionend\", function s(a) {\n      a.target === e && (t.call(e, a), e.removeEventListener(\"transitionend\", s));\n    });\n  }\n  function x(e, t, s) {\n    var a = r();\n    return s ? e[\"width\" === t ? \"offsetWidth\" : \"offsetHeight\"] + parseFloat(a.getComputedStyle(e, null).getPropertyValue(\"width\" === t ? \"margin-right\" : \"margin-top\")) + parseFloat(a.getComputedStyle(e, null).getPropertyValue(\"width\" === t ? \"margin-left\" : \"margin-bottom\")) : e.offsetWidth;\n  }\n  var S, T, M;\n  function C() {\n    return S || (S = function () {\n      var e = r(),\n        t = a();\n      return {\n        smoothScroll: t.documentElement && t.documentElement.style && \"scrollBehavior\" in t.documentElement.style,\n        touch: !!(\"ontouchstart\" in e || e.DocumentTouch && t instanceof e.DocumentTouch)\n      };\n    }()), S;\n  }\n  function P(e) {\n    return void 0 === e && (e = {}), T || (T = function (e) {\n      var _ref = void 0 === e ? {} : e,\n        t = _ref.userAgent;\n      var s = C(),\n        a = r(),\n        i = a.navigator.platform,\n        n = t || a.navigator.userAgent,\n        l = {\n          ios: !1,\n          android: !1\n        },\n        o = a.screen.width,\n        d = a.screen.height,\n        c = n.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n      var p = n.match(/(iPad).*OS\\s([\\d_]+)/);\n      var u = n.match(/(iPod)(.*OS\\s([\\d_]+))?/),\n        m = !p && n.match(/(iPhone\\sOS|iOS)\\s([\\d_]+)/),\n        h = \"Win32\" === i;\n      var f = \"MacIntel\" === i;\n      return !p && f && s.touch && [\"1024x1366\", \"1366x1024\", \"834x1194\", \"1194x834\", \"834x1112\", \"1112x834\", \"768x1024\", \"1024x768\", \"820x1180\", \"1180x820\", \"810x1080\", \"1080x810\"].indexOf(\"\".concat(o, \"x\").concat(d)) >= 0 && (p = n.match(/(Version)\\/([\\d.]+)/), p || (p = [0, 1, \"13_0_0\"]), f = !1), c && !h && (l.os = \"android\", l.android = !0), (p || m || u) && (l.os = \"ios\", l.ios = !0), l;\n    }(e)), T;\n  }\n  function L() {\n    return M || (M = function () {\n      var e = r();\n      var t = !1;\n      function s() {\n        var t = e.navigator.userAgent.toLowerCase();\n        return t.indexOf(\"safari\") >= 0 && t.indexOf(\"chrome\") < 0 && t.indexOf(\"android\") < 0;\n      }\n      if (s()) {\n        var _s3 = String(e.navigator.userAgent);\n        if (_s3.includes(\"Version/\")) {\n          var _s3$split$1$split$0$s = _s3.split(\"Version/\")[1].split(\" \")[0].split(\".\").map(function (e) {\n              return Number(e);\n            }),\n            _s3$split$1$split$0$s2 = _slicedToArray(_s3$split$1$split$0$s, 2),\n            _e = _s3$split$1$split$0$s2[0],\n            _a2 = _s3$split$1$split$0$s2[1];\n          t = _e < 16 || 16 === _e && _a2 < 2;\n        }\n      }\n      return {\n        isSafari: t || s(),\n        needPerspectiveFix: t,\n        isWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)\n      };\n    }()), M;\n  }\n  var z = {\n    on: function on(e, t, s) {\n      var a = this;\n      if (!a.eventsListeners || a.destroyed) return a;\n      if (\"function\" != typeof t) return a;\n      var i = s ? \"unshift\" : \"push\";\n      return e.split(\" \").forEach(function (e) {\n        a.eventsListeners[e] || (a.eventsListeners[e] = []), a.eventsListeners[e][i](t);\n      }), a;\n    },\n    once: function once(e, t, s) {\n      var a = this;\n      if (!a.eventsListeners || a.destroyed) return a;\n      if (\"function\" != typeof t) return a;\n      function i() {\n        a.off(e, i), i.__emitterProxy && delete i.__emitterProxy;\n        for (var s = arguments.length, r = new Array(s), n = 0; n < s; n++) r[n] = arguments[n];\n        t.apply(a, r);\n      }\n      return i.__emitterProxy = t, a.on(e, i, s);\n    },\n    onAny: function onAny(e, t) {\n      var s = this;\n      if (!s.eventsListeners || s.destroyed) return s;\n      if (\"function\" != typeof e) return s;\n      var a = t ? \"unshift\" : \"push\";\n      return s.eventsAnyListeners.indexOf(e) < 0 && s.eventsAnyListeners[a](e), s;\n    },\n    offAny: function offAny(e) {\n      var t = this;\n      if (!t.eventsListeners || t.destroyed) return t;\n      if (!t.eventsAnyListeners) return t;\n      var s = t.eventsAnyListeners.indexOf(e);\n      return s >= 0 && t.eventsAnyListeners.splice(s, 1), t;\n    },\n    off: function off(e, t) {\n      var s = this;\n      return !s.eventsListeners || s.destroyed ? s : s.eventsListeners ? (e.split(\" \").forEach(function (e) {\n        void 0 === t ? s.eventsListeners[e] = [] : s.eventsListeners[e] && s.eventsListeners[e].forEach(function (a, i) {\n          (a === t || a.__emitterProxy && a.__emitterProxy === t) && s.eventsListeners[e].splice(i, 1);\n        });\n      }), s) : s;\n    },\n    emit: function emit() {\n      var e = this;\n      if (!e.eventsListeners || e.destroyed) return e;\n      if (!e.eventsListeners) return e;\n      var t, s, a;\n      for (var i = arguments.length, r = new Array(i), n = 0; n < i; n++) r[n] = arguments[n];\n      \"string\" == typeof r[0] || Array.isArray(r[0]) ? (t = r[0], s = r.slice(1, r.length), a = e) : (t = r[0].events, s = r[0].data, a = r[0].context || e), s.unshift(a);\n      return (Array.isArray(t) ? t : t.split(\" \")).forEach(function (t) {\n        e.eventsAnyListeners && e.eventsAnyListeners.length && e.eventsAnyListeners.forEach(function (e) {\n          e.apply(a, [t].concat(_toConsumableArray(s)));\n        }), e.eventsListeners && e.eventsListeners[t] && e.eventsListeners[t].forEach(function (e) {\n          e.apply(a, s);\n        });\n      }), e;\n    }\n  };\n  var A = function A(e, t) {\n      if (!e || e.destroyed || !e.params) return;\n      var s = t.closest(e.isElement ? \"swiper-slide\" : \".\".concat(e.params.slideClass));\n      if (s) {\n        var _t2 = s.querySelector(\".\".concat(e.params.lazyPreloaderClass));\n        _t2 && _t2.remove();\n      }\n    },\n    $ = function $(e, t) {\n      if (!e.slides[t]) return;\n      var s = e.slides[t].querySelector('[loading=\"lazy\"]');\n      s && s.removeAttribute(\"loading\");\n    },\n    I = function I(e) {\n      if (!e || e.destroyed || !e.params) return;\n      var t = e.params.lazyPreloadPrevNext;\n      var s = e.slides.length;\n      if (!s || !t || t < 0) return;\n      t = Math.min(t, s);\n      var a = \"auto\" === e.params.slidesPerView ? e.slidesPerViewDynamic() : Math.ceil(e.params.slidesPerView),\n        i = e.activeIndex;\n      if (e.params.grid && e.params.grid.rows > 1) {\n        var _s4 = i,\n          _r2 = [_s4 - t];\n        return _r2.push.apply(_r2, _toConsumableArray(Array.from({\n          length: t\n        }).map(function (e, t) {\n          return _s4 + a + t;\n        }))), void e.slides.forEach(function (t, s) {\n          _r2.includes(t.column) && $(e, s);\n        });\n      }\n      var r = i + a - 1;\n      if (e.params.rewind || e.params.loop) for (var _a3 = i - t; _a3 <= r + t; _a3 += 1) {\n        var _t3 = (_a3 % s + s) % s;\n        (_t3 < i || _t3 > r) && $(e, _t3);\n      } else for (var _a4 = Math.max(i - t, 0); _a4 <= Math.min(r + t, s - 1); _a4 += 1) _a4 !== i && (_a4 > r || _a4 < i) && $(e, _a4);\n    };\n  var k = {\n    updateSize: function updateSize() {\n      var e = this;\n      var t, s;\n      var a = e.el;\n      t = void 0 !== e.params.width && null !== e.params.width ? e.params.width : a.clientWidth, s = void 0 !== e.params.height && null !== e.params.height ? e.params.height : a.clientHeight, 0 === t && e.isHorizontal() || 0 === s && e.isVertical() || (t = t - parseInt(w(a, \"padding-left\") || 0, 10) - parseInt(w(a, \"padding-right\") || 0, 10), s = s - parseInt(w(a, \"padding-top\") || 0, 10) - parseInt(w(a, \"padding-bottom\") || 0, 10), Number.isNaN(t) && (t = 0), Number.isNaN(s) && (s = 0), Object.assign(e, {\n        width: t,\n        height: s,\n        size: e.isHorizontal() ? t : s\n      }));\n    },\n    updateSlides: function updateSlides() {\n      var e = this;\n      function t(t) {\n        return e.isHorizontal() ? t : {\n          width: \"height\",\n          \"margin-top\": \"margin-left\",\n          \"margin-bottom \": \"margin-right\",\n          \"margin-left\": \"margin-top\",\n          \"margin-right\": \"margin-bottom\",\n          \"padding-left\": \"padding-top\",\n          \"padding-right\": \"padding-bottom\",\n          marginRight: \"marginBottom\"\n        }[t];\n      }\n      function s(e, s) {\n        return parseFloat(e.getPropertyValue(t(s)) || 0);\n      }\n      var a = e.params,\n        i = e.wrapperEl,\n        r = e.slidesEl,\n        n = e.size,\n        l = e.rtlTranslate,\n        o = e.wrongRTL,\n        d = e.virtual && a.virtual.enabled,\n        c = d ? e.virtual.slides.length : e.slides.length,\n        p = f(r, \".\".concat(e.params.slideClass, \", swiper-slide\")),\n        m = d ? e.virtual.slides.length : p.length;\n      var h = [];\n      var g = [],\n        v = [];\n      var b = a.slidesOffsetBefore;\n      \"function\" == typeof b && (b = a.slidesOffsetBefore.call(e));\n      var y = a.slidesOffsetAfter;\n      \"function\" == typeof y && (y = a.slidesOffsetAfter.call(e));\n      var E = e.snapGrid.length,\n        S = e.slidesGrid.length;\n      var T = a.spaceBetween,\n        M = -b,\n        C = 0,\n        P = 0;\n      if (void 0 === n) return;\n      \"string\" == typeof T && T.indexOf(\"%\") >= 0 ? T = parseFloat(T.replace(\"%\", \"\")) / 100 * n : \"string\" == typeof T && (T = parseFloat(T)), e.virtualSize = -T, p.forEach(function (e) {\n        l ? e.style.marginLeft = \"\" : e.style.marginRight = \"\", e.style.marginBottom = \"\", e.style.marginTop = \"\";\n      }), a.centeredSlides && a.cssMode && (u(i, \"--swiper-centered-offset-before\", \"\"), u(i, \"--swiper-centered-offset-after\", \"\"));\n      var L = a.grid && a.grid.rows > 1 && e.grid;\n      var z;\n      L && e.grid.initSlides(m);\n      var A = \"auto\" === a.slidesPerView && a.breakpoints && Object.keys(a.breakpoints).filter(function (e) {\n        return void 0 !== a.breakpoints[e].slidesPerView;\n      }).length > 0;\n      for (var _i3 = 0; _i3 < m; _i3 += 1) {\n        var _r3 = void 0;\n        if (z = 0, p[_i3] && (_r3 = p[_i3]), L && e.grid.updateSlide(_i3, _r3, m, t), !p[_i3] || \"none\" !== w(_r3, \"display\")) {\n          if (\"auto\" === a.slidesPerView) {\n            A && (p[_i3].style[t(\"width\")] = \"\");\n            var _n = getComputedStyle(_r3),\n              _l = _r3.style.transform,\n              _o = _r3.style.webkitTransform;\n            if (_l && (_r3.style.transform = \"none\"), _o && (_r3.style.webkitTransform = \"none\"), a.roundLengths) z = e.isHorizontal() ? x(_r3, \"width\", !0) : x(_r3, \"height\", !0);else {\n              var _e2 = s(_n, \"width\"),\n                _t4 = s(_n, \"padding-left\"),\n                _a5 = s(_n, \"padding-right\"),\n                _i4 = s(_n, \"margin-left\"),\n                _l2 = s(_n, \"margin-right\"),\n                _o2 = _n.getPropertyValue(\"box-sizing\");\n              if (_o2 && \"border-box\" === _o2) z = _e2 + _i4 + _l2;else {\n                var _r4 = _r3,\n                  _s5 = _r4.clientWidth,\n                  _n2 = _r4.offsetWidth;\n                z = _e2 + _t4 + _a5 + _i4 + _l2 + (_n2 - _s5);\n              }\n            }\n            _l && (_r3.style.transform = _l), _o && (_r3.style.webkitTransform = _o), a.roundLengths && (z = Math.floor(z));\n          } else z = (n - (a.slidesPerView - 1) * T) / a.slidesPerView, a.roundLengths && (z = Math.floor(z)), p[_i3] && (p[_i3].style[t(\"width\")] = \"\".concat(z, \"px\"));\n          p[_i3] && (p[_i3].swiperSlideSize = z), v.push(z), a.centeredSlides ? (M = M + z / 2 + C / 2 + T, 0 === C && 0 !== _i3 && (M = M - n / 2 - T), 0 === _i3 && (M = M - n / 2 - T), Math.abs(M) < .001 && (M = 0), a.roundLengths && (M = Math.floor(M)), P % a.slidesPerGroup == 0 && h.push(M), g.push(M)) : (a.roundLengths && (M = Math.floor(M)), (P - Math.min(e.params.slidesPerGroupSkip, P)) % e.params.slidesPerGroup == 0 && h.push(M), g.push(M), M = M + z + T), e.virtualSize += z + T, C = z, P += 1;\n        }\n      }\n      if (e.virtualSize = Math.max(e.virtualSize, n) + y, l && o && (\"slide\" === a.effect || \"coverflow\" === a.effect) && (i.style.width = \"\".concat(e.virtualSize + T, \"px\")), a.setWrapperSize && (i.style[t(\"width\")] = \"\".concat(e.virtualSize + T, \"px\")), L && e.grid.updateWrapperSize(z, h, t), !a.centeredSlides) {\n        var _t5 = [];\n        for (var _s6 = 0; _s6 < h.length; _s6 += 1) {\n          var _i5 = h[_s6];\n          a.roundLengths && (_i5 = Math.floor(_i5)), h[_s6] <= e.virtualSize - n && _t5.push(_i5);\n        }\n        h = _t5, Math.floor(e.virtualSize - n) - Math.floor(h[h.length - 1]) > 1 && h.push(e.virtualSize - n);\n      }\n      if (d && a.loop) {\n        var _t6 = v[0] + T;\n        if (a.slidesPerGroup > 1) {\n          var _s7 = Math.ceil((e.virtual.slidesBefore + e.virtual.slidesAfter) / a.slidesPerGroup),\n            _i6 = _t6 * a.slidesPerGroup;\n          for (var _e3 = 0; _e3 < _s7; _e3 += 1) h.push(h[h.length - 1] + _i6);\n        }\n        for (var _s8 = 0; _s8 < e.virtual.slidesBefore + e.virtual.slidesAfter; _s8 += 1) 1 === a.slidesPerGroup && h.push(h[h.length - 1] + _t6), g.push(g[g.length - 1] + _t6), e.virtualSize += _t6;\n      }\n      if (0 === h.length && (h = [0]), 0 !== T) {\n        var _s9 = e.isHorizontal() && l ? \"marginLeft\" : t(\"marginRight\");\n        p.filter(function (e, t) {\n          return !(a.cssMode && !a.loop) || t !== p.length - 1;\n        }).forEach(function (e) {\n          e.style[_s9] = \"\".concat(T, \"px\");\n        });\n      }\n      if (a.centeredSlides && a.centeredSlidesBounds) {\n        var _e4 = 0;\n        v.forEach(function (t) {\n          _e4 += t + (T || 0);\n        }), _e4 -= T;\n        var _t7 = _e4 - n;\n        h = h.map(function (e) {\n          return e <= 0 ? -b : e > _t7 ? _t7 + y : e;\n        });\n      }\n      if (a.centerInsufficientSlides) {\n        var _e5 = 0;\n        if (v.forEach(function (t) {\n          _e5 += t + (T || 0);\n        }), _e5 -= T, _e5 < n) {\n          var _t8 = (n - _e5) / 2;\n          h.forEach(function (e, s) {\n            h[s] = e - _t8;\n          }), g.forEach(function (e, s) {\n            g[s] = e + _t8;\n          });\n        }\n      }\n      if (Object.assign(e, {\n        slides: p,\n        snapGrid: h,\n        slidesGrid: g,\n        slidesSizesGrid: v\n      }), a.centeredSlides && a.cssMode && !a.centeredSlidesBounds) {\n        u(i, \"--swiper-centered-offset-before\", -h[0] + \"px\"), u(i, \"--swiper-centered-offset-after\", e.size / 2 - v[v.length - 1] / 2 + \"px\");\n        var _t9 = -e.snapGrid[0],\n          _s10 = -e.slidesGrid[0];\n        e.snapGrid = e.snapGrid.map(function (e) {\n          return e + _t9;\n        }), e.slidesGrid = e.slidesGrid.map(function (e) {\n          return e + _s10;\n        });\n      }\n      if (m !== c && e.emit(\"slidesLengthChange\"), h.length !== E && (e.params.watchOverflow && e.checkOverflow(), e.emit(\"snapGridLengthChange\")), g.length !== S && e.emit(\"slidesGridLengthChange\"), a.watchSlidesProgress && e.updateSlidesOffset(), !(d || a.cssMode || \"slide\" !== a.effect && \"fade\" !== a.effect)) {\n        var _t10 = \"\".concat(a.containerModifierClass, \"backface-hidden\"),\n          _s11 = e.el.classList.contains(_t10);\n        m <= a.maxBackfaceHiddenSlides ? _s11 || e.el.classList.add(_t10) : _s11 && e.el.classList.remove(_t10);\n      }\n    },\n    updateAutoHeight: function updateAutoHeight(e) {\n      var t = this,\n        s = [],\n        a = t.virtual && t.params.virtual.enabled;\n      var i,\n        r = 0;\n      \"number\" == typeof e ? t.setTransition(e) : !0 === e && t.setTransition(t.params.speed);\n      var n = function n(e) {\n        return a ? t.slides[t.getSlideIndexByData(e)] : t.slides[e];\n      };\n      if (\"auto\" !== t.params.slidesPerView && t.params.slidesPerView > 1) {\n        if (t.params.centeredSlides) (t.visibleSlides || []).forEach(function (e) {\n          s.push(e);\n        });else for (i = 0; i < Math.ceil(t.params.slidesPerView); i += 1) {\n          var _e6 = t.activeIndex + i;\n          if (_e6 > t.slides.length && !a) break;\n          s.push(n(_e6));\n        }\n      } else s.push(n(t.activeIndex));\n      for (i = 0; i < s.length; i += 1) if (void 0 !== s[i]) {\n        var _e7 = s[i].offsetHeight;\n        r = _e7 > r ? _e7 : r;\n      }\n      (r || 0 === r) && (t.wrapperEl.style.height = \"\".concat(r, \"px\"));\n    },\n    updateSlidesOffset: function updateSlidesOffset() {\n      var e = this,\n        t = e.slides,\n        s = e.isElement ? e.isHorizontal() ? e.wrapperEl.offsetLeft : e.wrapperEl.offsetTop : 0;\n      for (var _a6 = 0; _a6 < t.length; _a6 += 1) t[_a6].swiperSlideOffset = (e.isHorizontal() ? t[_a6].offsetLeft : t[_a6].offsetTop) - s - e.cssOverflowAdjustment();\n    },\n    updateSlidesProgress: function updateSlidesProgress(e) {\n      void 0 === e && (e = this && this.translate || 0);\n      var t = this,\n        s = t.params,\n        a = t.slides,\n        i = t.rtlTranslate,\n        r = t.snapGrid;\n      if (0 === a.length) return;\n      void 0 === a[0].swiperSlideOffset && t.updateSlidesOffset();\n      var n = -e;\n      i && (n = e), a.forEach(function (e) {\n        e.classList.remove(s.slideVisibleClass);\n      }), t.visibleSlidesIndexes = [], t.visibleSlides = [];\n      var l = s.spaceBetween;\n      \"string\" == typeof l && l.indexOf(\"%\") >= 0 ? l = parseFloat(l.replace(\"%\", \"\")) / 100 * t.size : \"string\" == typeof l && (l = parseFloat(l));\n      for (var _e8 = 0; _e8 < a.length; _e8 += 1) {\n        var _o3 = a[_e8];\n        var _d = _o3.swiperSlideOffset;\n        s.cssMode && s.centeredSlides && (_d -= a[0].swiperSlideOffset);\n        var _c = (n + (s.centeredSlides ? t.minTranslate() : 0) - _d) / (_o3.swiperSlideSize + l),\n          _p = (n - r[0] + (s.centeredSlides ? t.minTranslate() : 0) - _d) / (_o3.swiperSlideSize + l),\n          _u = -(n - _d),\n          _m = _u + t.slidesSizesGrid[_e8];\n        (_u >= 0 && _u < t.size - 1 || _m > 1 && _m <= t.size || _u <= 0 && _m >= t.size) && (t.visibleSlides.push(_o3), t.visibleSlidesIndexes.push(_e8), a[_e8].classList.add(s.slideVisibleClass)), _o3.progress = i ? -_c : _c, _o3.originalProgress = i ? -_p : _p;\n      }\n    },\n    updateProgress: function updateProgress(e) {\n      var t = this;\n      if (void 0 === e) {\n        var _s12 = t.rtlTranslate ? -1 : 1;\n        e = t && t.translate && t.translate * _s12 || 0;\n      }\n      var s = t.params,\n        a = t.maxTranslate() - t.minTranslate();\n      var i = t.progress,\n        r = t.isBeginning,\n        n = t.isEnd,\n        l = t.progressLoop;\n      var o = r,\n        d = n;\n      if (0 === a) i = 0, r = !0, n = !0;else {\n        i = (e - t.minTranslate()) / a;\n        var _s13 = Math.abs(e - t.minTranslate()) < 1,\n          _l3 = Math.abs(e - t.maxTranslate()) < 1;\n        r = _s13 || i <= 0, n = _l3 || i >= 1, _s13 && (i = 0), _l3 && (i = 1);\n      }\n      if (s.loop) {\n        var _s14 = t.getSlideIndexByData(0),\n          _a7 = t.getSlideIndexByData(t.slides.length - 1),\n          _i7 = t.slidesGrid[_s14],\n          _r5 = t.slidesGrid[_a7],\n          _n3 = t.slidesGrid[t.slidesGrid.length - 1],\n          _o4 = Math.abs(e);\n        l = _o4 >= _i7 ? (_o4 - _i7) / _n3 : (_o4 + _n3 - _r5) / _n3, l > 1 && (l -= 1);\n      }\n      Object.assign(t, {\n        progress: i,\n        progressLoop: l,\n        isBeginning: r,\n        isEnd: n\n      }), (s.watchSlidesProgress || s.centeredSlides && s.autoHeight) && t.updateSlidesProgress(e), r && !o && t.emit(\"reachBeginning toEdge\"), n && !d && t.emit(\"reachEnd toEdge\"), (o && !r || d && !n) && t.emit(\"fromEdge\"), t.emit(\"progress\", i);\n    },\n    updateSlidesClasses: function updateSlidesClasses() {\n      var e = this,\n        t = e.slides,\n        s = e.params,\n        a = e.slidesEl,\n        i = e.activeIndex,\n        r = e.virtual && s.virtual.enabled,\n        n = function n(e) {\n          return f(a, \".\".concat(s.slideClass).concat(e, \", swiper-slide\").concat(e))[0];\n        };\n      var l;\n      if (t.forEach(function (e) {\n        e.classList.remove(s.slideActiveClass, s.slideNextClass, s.slidePrevClass);\n      }), r) {\n        if (s.loop) {\n          var _t11 = i - e.virtual.slidesBefore;\n          _t11 < 0 && (_t11 = e.virtual.slides.length + _t11), _t11 >= e.virtual.slides.length && (_t11 -= e.virtual.slides.length), l = n(\"[data-swiper-slide-index=\\\"\".concat(_t11, \"\\\"]\"));\n        } else l = n(\"[data-swiper-slide-index=\\\"\".concat(i, \"\\\"]\"));\n      } else l = t[i];\n      if (l) {\n        l.classList.add(s.slideActiveClass);\n        var _e9 = function (e, t) {\n          var s = [];\n          for (; e.nextElementSibling;) {\n            var _a8 = e.nextElementSibling;\n            t ? _a8.matches(t) && s.push(_a8) : s.push(_a8), e = _a8;\n          }\n          return s;\n        }(l, \".\".concat(s.slideClass, \", swiper-slide\"))[0];\n        s.loop && !_e9 && (_e9 = t[0]), _e9 && _e9.classList.add(s.slideNextClass);\n        var _a9 = function (e, t) {\n          var s = [];\n          for (; e.previousElementSibling;) {\n            var _a10 = e.previousElementSibling;\n            t ? _a10.matches(t) && s.push(_a10) : s.push(_a10), e = _a10;\n          }\n          return s;\n        }(l, \".\".concat(s.slideClass, \", swiper-slide\"))[0];\n        s.loop && 0 === !_a9 && (_a9 = t[t.length - 1]), _a9 && _a9.classList.add(s.slidePrevClass);\n      }\n      e.emitSlidesClasses();\n    },\n    updateActiveIndex: function updateActiveIndex(e) {\n      var t = this,\n        s = t.rtlTranslate ? t.translate : -t.translate,\n        a = t.snapGrid,\n        i = t.params,\n        r = t.activeIndex,\n        n = t.realIndex,\n        l = t.snapIndex;\n      var o,\n        d = e;\n      var c = function c(e) {\n        var s = e - t.virtual.slidesBefore;\n        return s < 0 && (s = t.virtual.slides.length + s), s >= t.virtual.slides.length && (s -= t.virtual.slides.length), s;\n      };\n      if (void 0 === d && (d = function (e) {\n        var t = e.slidesGrid,\n          s = e.params,\n          a = e.rtlTranslate ? e.translate : -e.translate;\n        var i;\n        for (var _e10 = 0; _e10 < t.length; _e10 += 1) void 0 !== t[_e10 + 1] ? a >= t[_e10] && a < t[_e10 + 1] - (t[_e10 + 1] - t[_e10]) / 2 ? i = _e10 : a >= t[_e10] && a < t[_e10 + 1] && (i = _e10 + 1) : a >= t[_e10] && (i = _e10);\n        return s.normalizeSlideIndex && (i < 0 || void 0 === i) && (i = 0), i;\n      }(t)), a.indexOf(s) >= 0) o = a.indexOf(s);else {\n        var _e11 = Math.min(i.slidesPerGroupSkip, d);\n        o = _e11 + Math.floor((d - _e11) / i.slidesPerGroup);\n      }\n      if (o >= a.length && (o = a.length - 1), d === r) return o !== l && (t.snapIndex = o, t.emit(\"snapIndexChange\")), void (t.params.loop && t.virtual && t.params.virtual.enabled && (t.realIndex = c(d)));\n      var p;\n      p = t.virtual && i.virtual.enabled && i.loop ? c(d) : t.slides[d] ? parseInt(t.slides[d].getAttribute(\"data-swiper-slide-index\") || d, 10) : d, Object.assign(t, {\n        previousSnapIndex: l,\n        snapIndex: o,\n        previousRealIndex: n,\n        realIndex: p,\n        previousIndex: r,\n        activeIndex: d\n      }), t.initialized && I(t), t.emit(\"activeIndexChange\"), t.emit(\"snapIndexChange\"), n !== p && t.emit(\"realIndexChange\"), (t.initialized || t.params.runCallbacksOnInit) && t.emit(\"slideChange\");\n    },\n    updateClickedSlide: function updateClickedSlide(e) {\n      var t = this,\n        s = t.params,\n        a = e.closest(\".\".concat(s.slideClass, \", swiper-slide\"));\n      var i,\n        r = !1;\n      if (a) for (var _e12 = 0; _e12 < t.slides.length; _e12 += 1) if (t.slides[_e12] === a) {\n        r = !0, i = _e12;\n        break;\n      }\n      if (!a || !r) return t.clickedSlide = void 0, void (t.clickedIndex = void 0);\n      t.clickedSlide = a, t.virtual && t.params.virtual.enabled ? t.clickedIndex = parseInt(a.getAttribute(\"data-swiper-slide-index\"), 10) : t.clickedIndex = i, s.slideToClickedSlide && void 0 !== t.clickedIndex && t.clickedIndex !== t.activeIndex && t.slideToClickedSlide();\n    }\n  };\n  var O = {\n    getTranslate: function getTranslate(e) {\n      void 0 === e && (e = this.isHorizontal() ? \"x\" : \"y\");\n      var t = this.params,\n        s = this.rtlTranslate,\n        a = this.translate,\n        i = this.wrapperEl;\n      if (t.virtualTranslate) return s ? -a : a;\n      if (t.cssMode) return a;\n      var r = o(i, e);\n      return r += this.cssOverflowAdjustment(), s && (r = -r), r || 0;\n    },\n    setTranslate: function setTranslate(e, t) {\n      var s = this,\n        a = s.rtlTranslate,\n        i = s.params,\n        r = s.wrapperEl,\n        n = s.progress;\n      var l,\n        o = 0,\n        d = 0;\n      s.isHorizontal() ? o = a ? -e : e : d = e, i.roundLengths && (o = Math.floor(o), d = Math.floor(d)), s.previousTranslate = s.translate, s.translate = s.isHorizontal() ? o : d, i.cssMode ? r[s.isHorizontal() ? \"scrollLeft\" : \"scrollTop\"] = s.isHorizontal() ? -o : -d : i.virtualTranslate || (s.isHorizontal() ? o -= s.cssOverflowAdjustment() : d -= s.cssOverflowAdjustment(), r.style.transform = \"translate3d(\".concat(o, \"px, \").concat(d, \"px, 0px)\"));\n      var c = s.maxTranslate() - s.minTranslate();\n      l = 0 === c ? 0 : (e - s.minTranslate()) / c, l !== n && s.updateProgress(e), s.emit(\"setTranslate\", s.translate, t);\n    },\n    minTranslate: function minTranslate() {\n      return -this.snapGrid[0];\n    },\n    maxTranslate: function maxTranslate() {\n      return -this.snapGrid[this.snapGrid.length - 1];\n    },\n    translateTo: function translateTo(e, t, s, a, i) {\n      void 0 === e && (e = 0), void 0 === t && (t = this.params.speed), void 0 === s && (s = !0), void 0 === a && (a = !0);\n      var r = this,\n        n = r.params,\n        l = r.wrapperEl;\n      if (r.animating && n.preventInteractionOnTransition) return !1;\n      var o = r.minTranslate(),\n        d = r.maxTranslate();\n      var c;\n      if (c = a && e > o ? o : a && e < d ? d : e, r.updateProgress(c), n.cssMode) {\n        var _e13 = r.isHorizontal();\n        if (0 === t) l[_e13 ? \"scrollLeft\" : \"scrollTop\"] = -c;else {\n          if (!r.support.smoothScroll) return m({\n            swiper: r,\n            targetPosition: -c,\n            side: _e13 ? \"left\" : \"top\"\n          }), !0;\n          l.scrollTo(_defineProperty(_defineProperty({}, _e13 ? \"left\" : \"top\", -c), \"behavior\", \"smooth\"));\n        }\n        return !0;\n      }\n      return 0 === t ? (r.setTransition(0), r.setTranslate(c), s && (r.emit(\"beforeTransitionStart\", t, i), r.emit(\"transitionEnd\"))) : (r.setTransition(t), r.setTranslate(c), s && (r.emit(\"beforeTransitionStart\", t, i), r.emit(\"transitionStart\")), r.animating || (r.animating = !0, r.onTranslateToWrapperTransitionEnd || (r.onTranslateToWrapperTransitionEnd = function (e) {\n        r && !r.destroyed && e.target === this && (r.wrapperEl.removeEventListener(\"transitionend\", r.onTranslateToWrapperTransitionEnd), r.onTranslateToWrapperTransitionEnd = null, delete r.onTranslateToWrapperTransitionEnd, s && r.emit(\"transitionEnd\"));\n      }), r.wrapperEl.addEventListener(\"transitionend\", r.onTranslateToWrapperTransitionEnd))), !0;\n    }\n  };\n  function D(e) {\n    var t = e.swiper,\n      s = e.runCallbacks,\n      a = e.direction,\n      i = e.step;\n    var r = t.activeIndex,\n      n = t.previousIndex;\n    var l = a;\n    if (l || (l = r > n ? \"next\" : r < n ? \"prev\" : \"reset\"), t.emit(\"transition\".concat(i)), s && r !== n) {\n      if (\"reset\" === l) return void t.emit(\"slideResetTransition\".concat(i));\n      t.emit(\"slideChangeTransition\".concat(i)), \"next\" === l ? t.emit(\"slideNextTransition\".concat(i)) : t.emit(\"slidePrevTransition\".concat(i));\n    }\n  }\n  var G = {\n    slideTo: function slideTo(e, t, s, a, i) {\n      void 0 === e && (e = 0), void 0 === t && (t = this.params.speed), void 0 === s && (s = !0), \"string\" == typeof e && (e = parseInt(e, 10));\n      var r = this;\n      var n = e;\n      n < 0 && (n = 0);\n      var l = r.params,\n        o = r.snapGrid,\n        d = r.slidesGrid,\n        c = r.previousIndex,\n        p = r.activeIndex,\n        u = r.rtlTranslate,\n        h = r.wrapperEl,\n        f = r.enabled;\n      if (r.animating && l.preventInteractionOnTransition || !f && !a && !i) return !1;\n      var g = Math.min(r.params.slidesPerGroupSkip, n);\n      var v = g + Math.floor((n - g) / r.params.slidesPerGroup);\n      v >= o.length && (v = o.length - 1);\n      var w = -o[v];\n      if (l.normalizeSlideIndex) for (var _e14 = 0; _e14 < d.length; _e14 += 1) {\n        var _t12 = -Math.floor(100 * w),\n          _s15 = Math.floor(100 * d[_e14]),\n          _a11 = Math.floor(100 * d[_e14 + 1]);\n        void 0 !== d[_e14 + 1] ? _t12 >= _s15 && _t12 < _a11 - (_a11 - _s15) / 2 ? n = _e14 : _t12 >= _s15 && _t12 < _a11 && (n = _e14 + 1) : _t12 >= _s15 && (n = _e14);\n      }\n      if (r.initialized && n !== p) {\n        if (!r.allowSlideNext && (u ? w > r.translate && w > r.minTranslate() : w < r.translate && w < r.minTranslate())) return !1;\n        if (!r.allowSlidePrev && w > r.translate && w > r.maxTranslate() && (p || 0) !== n) return !1;\n      }\n      var b;\n      if (n !== (c || 0) && s && r.emit(\"beforeSlideChangeStart\"), r.updateProgress(w), b = n > p ? \"next\" : n < p ? \"prev\" : \"reset\", u && -w === r.translate || !u && w === r.translate) return r.updateActiveIndex(n), l.autoHeight && r.updateAutoHeight(), r.updateSlidesClasses(), \"slide\" !== l.effect && r.setTranslate(w), \"reset\" !== b && (r.transitionStart(s, b), r.transitionEnd(s, b)), !1;\n      if (l.cssMode) {\n        var _e15 = r.isHorizontal(),\n          _s16 = u ? w : -w;\n        if (0 === t) {\n          var _t13 = r.virtual && r.params.virtual.enabled;\n          _t13 && (r.wrapperEl.style.scrollSnapType = \"none\", r._immediateVirtual = !0), _t13 && !r._cssModeVirtualInitialSet && r.params.initialSlide > 0 ? (r._cssModeVirtualInitialSet = !0, requestAnimationFrame(function () {\n            h[_e15 ? \"scrollLeft\" : \"scrollTop\"] = _s16;\n          })) : h[_e15 ? \"scrollLeft\" : \"scrollTop\"] = _s16, _t13 && requestAnimationFrame(function () {\n            r.wrapperEl.style.scrollSnapType = \"\", r._immediateVirtual = !1;\n          });\n        } else {\n          if (!r.support.smoothScroll) return m({\n            swiper: r,\n            targetPosition: _s16,\n            side: _e15 ? \"left\" : \"top\"\n          }), !0;\n          h.scrollTo(_defineProperty(_defineProperty({}, _e15 ? \"left\" : \"top\", _s16), \"behavior\", \"smooth\"));\n        }\n        return !0;\n      }\n      return r.setTransition(t), r.setTranslate(w), r.updateActiveIndex(n), r.updateSlidesClasses(), r.emit(\"beforeTransitionStart\", t, a), r.transitionStart(s, b), 0 === t ? r.transitionEnd(s, b) : r.animating || (r.animating = !0, r.onSlideToWrapperTransitionEnd || (r.onSlideToWrapperTransitionEnd = function (e) {\n        r && !r.destroyed && e.target === this && (r.wrapperEl.removeEventListener(\"transitionend\", r.onSlideToWrapperTransitionEnd), r.onSlideToWrapperTransitionEnd = null, delete r.onSlideToWrapperTransitionEnd, r.transitionEnd(s, b));\n      }), r.wrapperEl.addEventListener(\"transitionend\", r.onSlideToWrapperTransitionEnd)), !0;\n    },\n    slideToLoop: function slideToLoop(e, t, s, a) {\n      if (void 0 === e && (e = 0), void 0 === t && (t = this.params.speed), void 0 === s && (s = !0), \"string\" == typeof e) {\n        e = parseInt(e, 10);\n      }\n      var i = this;\n      var r = e;\n      return i.params.loop && (i.virtual && i.params.virtual.enabled ? r += i.virtual.slidesBefore : r = i.getSlideIndexByData(r)), i.slideTo(r, t, s, a);\n    },\n    slideNext: function slideNext(e, t, s) {\n      void 0 === e && (e = this.params.speed), void 0 === t && (t = !0);\n      var a = this,\n        i = a.enabled,\n        r = a.params,\n        n = a.animating;\n      if (!i) return a;\n      var l = r.slidesPerGroup;\n      \"auto\" === r.slidesPerView && 1 === r.slidesPerGroup && r.slidesPerGroupAuto && (l = Math.max(a.slidesPerViewDynamic(\"current\", !0), 1));\n      var o = a.activeIndex < r.slidesPerGroupSkip ? 1 : l,\n        d = a.virtual && r.virtual.enabled;\n      if (r.loop) {\n        if (n && !d && r.loopPreventsSliding) return !1;\n        a.loopFix({\n          direction: \"next\"\n        }), a._clientLeft = a.wrapperEl.clientLeft;\n      }\n      return r.rewind && a.isEnd ? a.slideTo(0, e, t, s) : a.slideTo(a.activeIndex + o, e, t, s);\n    },\n    slidePrev: function slidePrev(e, t, s) {\n      void 0 === e && (e = this.params.speed), void 0 === t && (t = !0);\n      var a = this,\n        i = a.params,\n        r = a.snapGrid,\n        n = a.slidesGrid,\n        l = a.rtlTranslate,\n        o = a.enabled,\n        d = a.animating;\n      if (!o) return a;\n      var c = a.virtual && i.virtual.enabled;\n      if (i.loop) {\n        if (d && !c && i.loopPreventsSliding) return !1;\n        a.loopFix({\n          direction: \"prev\"\n        }), a._clientLeft = a.wrapperEl.clientLeft;\n      }\n      function p(e) {\n        return e < 0 ? -Math.floor(Math.abs(e)) : Math.floor(e);\n      }\n      var u = p(l ? a.translate : -a.translate),\n        m = r.map(function (e) {\n          return p(e);\n        });\n      var h = r[m.indexOf(u) - 1];\n      if (void 0 === h && i.cssMode) {\n        var _e16;\n        r.forEach(function (t, s) {\n          u >= t && (_e16 = s);\n        }), void 0 !== _e16 && (h = r[_e16 > 0 ? _e16 - 1 : _e16]);\n      }\n      var f = 0;\n      if (void 0 !== h && (f = n.indexOf(h), f < 0 && (f = a.activeIndex - 1), \"auto\" === i.slidesPerView && 1 === i.slidesPerGroup && i.slidesPerGroupAuto && (f = f - a.slidesPerViewDynamic(\"previous\", !0) + 1, f = Math.max(f, 0))), i.rewind && a.isBeginning) {\n        var _i8 = a.params.virtual && a.params.virtual.enabled && a.virtual ? a.virtual.slides.length - 1 : a.slides.length - 1;\n        return a.slideTo(_i8, e, t, s);\n      }\n      return a.slideTo(f, e, t, s);\n    },\n    slideReset: function slideReset(e, t, s) {\n      return void 0 === e && (e = this.params.speed), void 0 === t && (t = !0), this.slideTo(this.activeIndex, e, t, s);\n    },\n    slideToClosest: function slideToClosest(e, t, s, a) {\n      void 0 === e && (e = this.params.speed), void 0 === t && (t = !0), void 0 === a && (a = .5);\n      var i = this;\n      var r = i.activeIndex;\n      var n = Math.min(i.params.slidesPerGroupSkip, r),\n        l = n + Math.floor((r - n) / i.params.slidesPerGroup),\n        o = i.rtlTranslate ? i.translate : -i.translate;\n      if (o >= i.snapGrid[l]) {\n        var _e17 = i.snapGrid[l];\n        o - _e17 > (i.snapGrid[l + 1] - _e17) * a && (r += i.params.slidesPerGroup);\n      } else {\n        var _e18 = i.snapGrid[l - 1];\n        o - _e18 <= (i.snapGrid[l] - _e18) * a && (r -= i.params.slidesPerGroup);\n      }\n      return r = Math.max(r, 0), r = Math.min(r, i.slidesGrid.length - 1), i.slideTo(r, e, t, s);\n    },\n    slideToClickedSlide: function slideToClickedSlide() {\n      var e = this,\n        t = e.params,\n        s = e.slidesEl,\n        a = \"auto\" === t.slidesPerView ? e.slidesPerViewDynamic() : t.slidesPerView;\n      var i,\n        r = e.clickedIndex;\n      var l = e.isElement ? \"swiper-slide\" : \".\".concat(t.slideClass);\n      if (t.loop) {\n        if (e.animating) return;\n        i = parseInt(e.clickedSlide.getAttribute(\"data-swiper-slide-index\"), 10), t.centeredSlides ? r < e.loopedSlides - a / 2 || r > e.slides.length - e.loopedSlides + a / 2 ? (e.loopFix(), r = e.getSlideIndex(f(s, \"\".concat(l, \"[data-swiper-slide-index=\\\"\").concat(i, \"\\\"]\"))[0]), n(function () {\n          e.slideTo(r);\n        })) : e.slideTo(r) : r > e.slides.length - a ? (e.loopFix(), r = e.getSlideIndex(f(s, \"\".concat(l, \"[data-swiper-slide-index=\\\"\").concat(i, \"\\\"]\"))[0]), n(function () {\n          e.slideTo(r);\n        })) : e.slideTo(r);\n      } else e.slideTo(r);\n    }\n  };\n  var H = {\n    loopCreate: function loopCreate(e) {\n      var t = this,\n        s = t.params,\n        a = t.slidesEl;\n      if (!s.loop || t.virtual && t.params.virtual.enabled) return;\n      f(a, \".\".concat(s.slideClass, \", swiper-slide\")).forEach(function (e, t) {\n        e.setAttribute(\"data-swiper-slide-index\", t);\n      }), t.loopFix({\n        slideRealIndex: e,\n        direction: s.centeredSlides ? void 0 : \"next\"\n      });\n    },\n    loopFix: function loopFix(e) {\n      var _ref2 = void 0 === e ? {} : e,\n        t = _ref2.slideRealIndex,\n        _ref2$slideTo = _ref2.slideTo,\n        s = _ref2$slideTo === void 0 ? !0 : _ref2$slideTo,\n        a = _ref2.direction,\n        i = _ref2.setTranslate,\n        r = _ref2.activeSlideIndex,\n        n = _ref2.byController,\n        l = _ref2.byMousewheel;\n      var o = this;\n      if (!o.params.loop) return;\n      o.emit(\"beforeLoopFix\");\n      var d = o.slides,\n        c = o.allowSlidePrev,\n        p = o.allowSlideNext,\n        u = o.slidesEl,\n        m = o.params;\n      if (o.allowSlidePrev = !0, o.allowSlideNext = !0, o.virtual && m.virtual.enabled) return s && (m.centeredSlides || 0 !== o.snapIndex ? m.centeredSlides && o.snapIndex < m.slidesPerView ? o.slideTo(o.virtual.slides.length + o.snapIndex, 0, !1, !0) : o.snapIndex === o.snapGrid.length - 1 && o.slideTo(o.virtual.slidesBefore, 0, !1, !0) : o.slideTo(o.virtual.slides.length, 0, !1, !0)), o.allowSlidePrev = c, o.allowSlideNext = p, void o.emit(\"loopFix\");\n      var h = \"auto\" === m.slidesPerView ? o.slidesPerViewDynamic() : Math.ceil(parseFloat(m.slidesPerView, 10));\n      var f = m.loopedSlides || h;\n      f % m.slidesPerGroup != 0 && (f += m.slidesPerGroup - f % m.slidesPerGroup), o.loopedSlides = f;\n      var g = [],\n        v = [];\n      var w = o.activeIndex;\n      void 0 === r ? r = o.getSlideIndex(o.slides.filter(function (e) {\n        return e.classList.contains(m.slideActiveClass);\n      })[0]) : w = r;\n      var b = \"next\" === a || !a,\n        y = \"prev\" === a || !a;\n      var E = 0,\n        x = 0;\n      if (r < f) {\n        E = Math.max(f - r, m.slidesPerGroup);\n        for (var _e19 = 0; _e19 < f - r; _e19 += 1) {\n          var _t14 = _e19 - Math.floor(_e19 / d.length) * d.length;\n          g.push(d.length - _t14 - 1);\n        }\n      } else if (r > o.slides.length - 2 * f) {\n        x = Math.max(r - (o.slides.length - 2 * f), m.slidesPerGroup);\n        for (var _e20 = 0; _e20 < x; _e20 += 1) {\n          var _t15 = _e20 - Math.floor(_e20 / d.length) * d.length;\n          v.push(_t15);\n        }\n      }\n      if (y && g.forEach(function (e) {\n        o.slides[e].swiperLoopMoveDOM = !0, u.prepend(o.slides[e]), o.slides[e].swiperLoopMoveDOM = !1;\n      }), b && v.forEach(function (e) {\n        o.slides[e].swiperLoopMoveDOM = !0, u.append(o.slides[e]), o.slides[e].swiperLoopMoveDOM = !1;\n      }), o.recalcSlides(), \"auto\" === m.slidesPerView && o.updateSlides(), m.watchSlidesProgress && o.updateSlidesOffset(), s) if (g.length > 0 && y) {\n        if (void 0 === t) {\n          var _e21 = o.slidesGrid[w],\n            _t16 = o.slidesGrid[w + E] - _e21;\n          l ? o.setTranslate(o.translate - _t16) : (o.slideTo(w + E, 0, !1, !0), i && (o.touches[o.isHorizontal() ? \"startX\" : \"startY\"] += _t16));\n        } else i && o.slideToLoop(t, 0, !1, !0);\n      } else if (v.length > 0 && b) if (void 0 === t) {\n        var _e22 = o.slidesGrid[w],\n          _t17 = o.slidesGrid[w - x] - _e22;\n        l ? o.setTranslate(o.translate - _t17) : (o.slideTo(w - x, 0, !1, !0), i && (o.touches[o.isHorizontal() ? \"startX\" : \"startY\"] += _t17));\n      } else o.slideToLoop(t, 0, !1, !0);\n      if (o.allowSlidePrev = c, o.allowSlideNext = p, o.controller && o.controller.control && !n) {\n        var _e23 = {\n          slideRealIndex: t,\n          slideTo: !1,\n          direction: a,\n          setTranslate: i,\n          activeSlideIndex: r,\n          byController: !0\n        };\n        Array.isArray(o.controller.control) ? o.controller.control.forEach(function (t) {\n          !t.destroyed && t.params.loop && t.loopFix(_e23);\n        }) : o.controller.control instanceof o.constructor && o.controller.control.params.loop && o.controller.control.loopFix(_e23);\n      }\n      o.emit(\"loopFix\");\n    },\n    loopDestroy: function loopDestroy() {\n      var e = this,\n        t = e.params,\n        s = e.slidesEl;\n      if (!t.loop || e.virtual && e.params.virtual.enabled) return;\n      e.recalcSlides();\n      var a = [];\n      e.slides.forEach(function (e) {\n        var t = void 0 === e.swiperSlideIndex ? 1 * e.getAttribute(\"data-swiper-slide-index\") : e.swiperSlideIndex;\n        a[t] = e;\n      }), e.slides.forEach(function (e) {\n        e.removeAttribute(\"data-swiper-slide-index\");\n      }), a.forEach(function (e) {\n        s.append(e);\n      }), e.recalcSlides(), e.slideTo(e.realIndex, 0);\n    }\n  };\n  function X(e) {\n    var t = this,\n      s = a(),\n      i = r(),\n      n = t.touchEventsData;\n    n.evCache.push(e);\n    var o = t.params,\n      d = t.touches,\n      c = t.enabled;\n    if (!c) return;\n    if (!o.simulateTouch && \"mouse\" === e.pointerType) return;\n    if (t.animating && o.preventInteractionOnTransition) return;\n    !t.animating && o.cssMode && o.loop && t.loopFix();\n    var p = e;\n    p.originalEvent && (p = p.originalEvent);\n    var u = p.target;\n    if (\"wrapper\" === o.touchEventsTarget && !t.wrapperEl.contains(u)) return;\n    if (\"which\" in p && 3 === p.which) return;\n    if (\"button\" in p && p.button > 0) return;\n    if (n.isTouched && n.isMoved) return;\n    var m = !!o.noSwipingClass && \"\" !== o.noSwipingClass,\n      h = e.composedPath ? e.composedPath() : e.path;\n    m && p.target && p.target.shadowRoot && h && (u = h[0]);\n    var f = o.noSwipingSelector ? o.noSwipingSelector : \".\".concat(o.noSwipingClass),\n      g = !(!p.target || !p.target.shadowRoot);\n    if (o.noSwiping && (g ? function (e, t) {\n      return void 0 === t && (t = this), function t(s) {\n        if (!s || s === a() || s === r()) return null;\n        s.assignedSlot && (s = s.assignedSlot);\n        var i = s.closest(e);\n        return i || s.getRootNode ? i || t(s.getRootNode().host) : null;\n      }(t);\n    }(f, u) : u.closest(f))) return void (t.allowClick = !0);\n    if (o.swipeHandler && !u.closest(o.swipeHandler)) return;\n    d.currentX = p.pageX, d.currentY = p.pageY;\n    var v = d.currentX,\n      w = d.currentY,\n      b = o.edgeSwipeDetection || o.iOSEdgeSwipeDetection,\n      y = o.edgeSwipeThreshold || o.iOSEdgeSwipeThreshold;\n    if (b && (v <= y || v >= i.innerWidth - y)) {\n      if (\"prevent\" !== b) return;\n      e.preventDefault();\n    }\n    Object.assign(n, {\n      isTouched: !0,\n      isMoved: !1,\n      allowTouchCallbacks: !0,\n      isScrolling: void 0,\n      startMoving: void 0\n    }), d.startX = v, d.startY = w, n.touchStartTime = l(), t.allowClick = !0, t.updateSize(), t.swipeDirection = void 0, o.threshold > 0 && (n.allowThresholdMove = !1);\n    var E = !0;\n    u.matches(n.focusableElements) && (E = !1, \"SELECT\" === u.nodeName && (n.isTouched = !1)), s.activeElement && s.activeElement.matches(n.focusableElements) && s.activeElement !== u && s.activeElement.blur();\n    var x = E && t.allowTouchMove && o.touchStartPreventDefault;\n    !o.touchStartForcePreventDefault && !x || u.isContentEditable || p.preventDefault(), o.freeMode && o.freeMode.enabled && t.freeMode && t.animating && !o.cssMode && t.freeMode.onTouchStart(), t.emit(\"touchStart\", p);\n  }\n  function Y(e) {\n    var t = a(),\n      s = this,\n      i = s.touchEventsData,\n      r = s.params,\n      n = s.touches,\n      o = s.rtlTranslate,\n      d = s.enabled;\n    if (!d) return;\n    if (!r.simulateTouch && \"mouse\" === e.pointerType) return;\n    var c = e;\n    if (c.originalEvent && (c = c.originalEvent), !i.isTouched) return void (i.startMoving && i.isScrolling && s.emit(\"touchMoveOpposite\", c));\n    var p = i.evCache.findIndex(function (e) {\n      return e.pointerId === c.pointerId;\n    });\n    p >= 0 && (i.evCache[p] = c);\n    var u = i.evCache.length > 1 ? i.evCache[0] : c,\n      m = u.pageX,\n      h = u.pageY;\n    if (c.preventedByNestedSwiper) return n.startX = m, void (n.startY = h);\n    if (!s.allowTouchMove) return c.target.matches(i.focusableElements) || (s.allowClick = !1), void (i.isTouched && (Object.assign(n, {\n      startX: m,\n      startY: h,\n      prevX: s.touches.currentX,\n      prevY: s.touches.currentY,\n      currentX: m,\n      currentY: h\n    }), i.touchStartTime = l()));\n    if (r.touchReleaseOnEdges && !r.loop) if (s.isVertical()) {\n      if (h < n.startY && s.translate <= s.maxTranslate() || h > n.startY && s.translate >= s.minTranslate()) return i.isTouched = !1, void (i.isMoved = !1);\n    } else if (m < n.startX && s.translate <= s.maxTranslate() || m > n.startX && s.translate >= s.minTranslate()) return;\n    if (t.activeElement && c.target === t.activeElement && c.target.matches(i.focusableElements)) return i.isMoved = !0, void (s.allowClick = !1);\n    if (i.allowTouchCallbacks && s.emit(\"touchMove\", c), c.targetTouches && c.targetTouches.length > 1) return;\n    n.currentX = m, n.currentY = h;\n    var f = n.currentX - n.startX,\n      g = n.currentY - n.startY;\n    if (s.params.threshold && Math.sqrt(Math.pow(f, 2) + Math.pow(g, 2)) < s.params.threshold) return;\n    if (void 0 === i.isScrolling) {\n      var _e24;\n      s.isHorizontal() && n.currentY === n.startY || s.isVertical() && n.currentX === n.startX ? i.isScrolling = !1 : f * f + g * g >= 25 && (_e24 = 180 * Math.atan2(Math.abs(g), Math.abs(f)) / Math.PI, i.isScrolling = s.isHorizontal() ? _e24 > r.touchAngle : 90 - _e24 > r.touchAngle);\n    }\n    if (i.isScrolling && s.emit(\"touchMoveOpposite\", c), void 0 === i.startMoving && (n.currentX === n.startX && n.currentY === n.startY || (i.startMoving = !0)), i.isScrolling || s.zoom && s.params.zoom && s.params.zoom.enabled && i.evCache.length > 1) return void (i.isTouched = !1);\n    if (!i.startMoving) return;\n    s.allowClick = !1, !r.cssMode && c.cancelable && c.preventDefault(), r.touchMoveStopPropagation && !r.nested && c.stopPropagation();\n    var v = s.isHorizontal() ? f : g,\n      w = s.isHorizontal() ? n.currentX - n.previousX : n.currentY - n.previousY;\n    r.oneWayMovement && (v = Math.abs(v) * (o ? 1 : -1), w = Math.abs(w) * (o ? 1 : -1)), n.diff = v, v *= r.touchRatio, o && (v = -v, w = -w);\n    var b = s.touchesDirection;\n    s.swipeDirection = v > 0 ? \"prev\" : \"next\", s.touchesDirection = w > 0 ? \"prev\" : \"next\";\n    var y = s.params.loop && !r.cssMode;\n    if (!i.isMoved) {\n      if (y && s.loopFix({\n        direction: s.swipeDirection\n      }), i.startTranslate = s.getTranslate(), s.setTransition(0), s.animating) {\n        var _e25 = new window.CustomEvent(\"transitionend\", {\n          bubbles: !0,\n          cancelable: !0\n        });\n        s.wrapperEl.dispatchEvent(_e25);\n      }\n      i.allowMomentumBounce = !1, !r.grabCursor || !0 !== s.allowSlideNext && !0 !== s.allowSlidePrev || s.setGrabCursor(!0), s.emit(\"sliderFirstMove\", c);\n    }\n    var E;\n    i.isMoved && b !== s.touchesDirection && y && Math.abs(v) >= 1 && (s.loopFix({\n      direction: s.swipeDirection,\n      setTranslate: !0\n    }), E = !0), s.emit(\"sliderMove\", c), i.isMoved = !0, i.currentTranslate = v + i.startTranslate;\n    var x = !0,\n      S = r.resistanceRatio;\n    if (r.touchReleaseOnEdges && (S = 0), v > 0 ? (y && !E && i.currentTranslate > (r.centeredSlides ? s.minTranslate() - s.size / 2 : s.minTranslate()) && s.loopFix({\n      direction: \"prev\",\n      setTranslate: !0,\n      activeSlideIndex: 0\n    }), i.currentTranslate > s.minTranslate() && (x = !1, r.resistance && (i.currentTranslate = s.minTranslate() - 1 + Math.pow(-s.minTranslate() + i.startTranslate + v, S)))) : v < 0 && (y && !E && i.currentTranslate < (r.centeredSlides ? s.maxTranslate() + s.size / 2 : s.maxTranslate()) && s.loopFix({\n      direction: \"next\",\n      setTranslate: !0,\n      activeSlideIndex: s.slides.length - (\"auto\" === r.slidesPerView ? s.slidesPerViewDynamic() : Math.ceil(parseFloat(r.slidesPerView, 10)))\n    }), i.currentTranslate < s.maxTranslate() && (x = !1, r.resistance && (i.currentTranslate = s.maxTranslate() + 1 - Math.pow(s.maxTranslate() - i.startTranslate - v, S)))), x && (c.preventedByNestedSwiper = !0), !s.allowSlideNext && \"next\" === s.swipeDirection && i.currentTranslate < i.startTranslate && (i.currentTranslate = i.startTranslate), !s.allowSlidePrev && \"prev\" === s.swipeDirection && i.currentTranslate > i.startTranslate && (i.currentTranslate = i.startTranslate), s.allowSlidePrev || s.allowSlideNext || (i.currentTranslate = i.startTranslate), r.threshold > 0) {\n      if (!(Math.abs(v) > r.threshold || i.allowThresholdMove)) return void (i.currentTranslate = i.startTranslate);\n      if (!i.allowThresholdMove) return i.allowThresholdMove = !0, n.startX = n.currentX, n.startY = n.currentY, i.currentTranslate = i.startTranslate, void (n.diff = s.isHorizontal() ? n.currentX - n.startX : n.currentY - n.startY);\n    }\n    r.followFinger && !r.cssMode && ((r.freeMode && r.freeMode.enabled && s.freeMode || r.watchSlidesProgress) && (s.updateActiveIndex(), s.updateSlidesClasses()), r.freeMode && r.freeMode.enabled && s.freeMode && s.freeMode.onTouchMove(), s.updateProgress(i.currentTranslate), s.setTranslate(i.currentTranslate));\n  }\n  function B(e) {\n    var t = this,\n      s = t.touchEventsData,\n      a = s.evCache.findIndex(function (t) {\n        return t.pointerId === e.pointerId;\n      });\n    if (a >= 0 && s.evCache.splice(a, 1), [\"pointercancel\", \"pointerout\", \"pointerleave\"].includes(e.type)) {\n      if (!(\"pointercancel\" === e.type && (t.browser.isSafari || t.browser.isWebView))) return;\n    }\n    var i = t.params,\n      r = t.touches,\n      o = t.rtlTranslate,\n      d = t.slidesGrid,\n      c = t.enabled;\n    if (!c) return;\n    if (!i.simulateTouch && \"mouse\" === e.pointerType) return;\n    var p = e;\n    if (p.originalEvent && (p = p.originalEvent), s.allowTouchCallbacks && t.emit(\"touchEnd\", p), s.allowTouchCallbacks = !1, !s.isTouched) return s.isMoved && i.grabCursor && t.setGrabCursor(!1), s.isMoved = !1, void (s.startMoving = !1);\n    i.grabCursor && s.isMoved && s.isTouched && (!0 === t.allowSlideNext || !0 === t.allowSlidePrev) && t.setGrabCursor(!1);\n    var u = l(),\n      m = u - s.touchStartTime;\n    if (t.allowClick) {\n      var _e26 = p.path || p.composedPath && p.composedPath();\n      t.updateClickedSlide(_e26 && _e26[0] || p.target), t.emit(\"tap click\", p), m < 300 && u - s.lastClickTime < 300 && t.emit(\"doubleTap doubleClick\", p);\n    }\n    if (s.lastClickTime = l(), n(function () {\n      t.destroyed || (t.allowClick = !0);\n    }), !s.isTouched || !s.isMoved || !t.swipeDirection || 0 === r.diff || s.currentTranslate === s.startTranslate) return s.isTouched = !1, s.isMoved = !1, void (s.startMoving = !1);\n    var h;\n    if (s.isTouched = !1, s.isMoved = !1, s.startMoving = !1, h = i.followFinger ? o ? t.translate : -t.translate : -s.currentTranslate, i.cssMode) return;\n    if (i.freeMode && i.freeMode.enabled) return void t.freeMode.onTouchEnd({\n      currentPos: h\n    });\n    var f = 0,\n      g = t.slidesSizesGrid[0];\n    for (var _e27 = 0; _e27 < d.length; _e27 += _e27 < i.slidesPerGroupSkip ? 1 : i.slidesPerGroup) {\n      var _t18 = _e27 < i.slidesPerGroupSkip - 1 ? 1 : i.slidesPerGroup;\n      void 0 !== d[_e27 + _t18] ? h >= d[_e27] && h < d[_e27 + _t18] && (f = _e27, g = d[_e27 + _t18] - d[_e27]) : h >= d[_e27] && (f = _e27, g = d[d.length - 1] - d[d.length - 2]);\n    }\n    var v = null,\n      w = null;\n    i.rewind && (t.isBeginning ? w = i.virtual && i.virtual.enabled && t.virtual ? t.virtual.slides.length - 1 : t.slides.length - 1 : t.isEnd && (v = 0));\n    var b = (h - d[f]) / g,\n      y = f < i.slidesPerGroupSkip - 1 ? 1 : i.slidesPerGroup;\n    if (m > i.longSwipesMs) {\n      if (!i.longSwipes) return void t.slideTo(t.activeIndex);\n      \"next\" === t.swipeDirection && (b >= i.longSwipesRatio ? t.slideTo(i.rewind && t.isEnd ? v : f + y) : t.slideTo(f)), \"prev\" === t.swipeDirection && (b > 1 - i.longSwipesRatio ? t.slideTo(f + y) : null !== w && b < 0 && Math.abs(b) > i.longSwipesRatio ? t.slideTo(w) : t.slideTo(f));\n    } else {\n      if (!i.shortSwipes) return void t.slideTo(t.activeIndex);\n      t.navigation && (p.target === t.navigation.nextEl || p.target === t.navigation.prevEl) ? p.target === t.navigation.nextEl ? t.slideTo(f + y) : t.slideTo(f) : (\"next\" === t.swipeDirection && t.slideTo(null !== v ? v : f + y), \"prev\" === t.swipeDirection && t.slideTo(null !== w ? w : f));\n    }\n  }\n  function N() {\n    var e = this,\n      t = e.params,\n      s = e.el;\n    if (s && 0 === s.offsetWidth) return;\n    t.breakpoints && e.setBreakpoint();\n    var a = e.allowSlideNext,\n      i = e.allowSlidePrev,\n      r = e.snapGrid,\n      n = e.virtual && e.params.virtual.enabled;\n    e.allowSlideNext = !0, e.allowSlidePrev = !0, e.updateSize(), e.updateSlides(), e.updateSlidesClasses();\n    var l = n && t.loop;\n    !(\"auto\" === t.slidesPerView || t.slidesPerView > 1) || !e.isEnd || e.isBeginning || e.params.centeredSlides || l ? e.params.loop && !n ? e.slideToLoop(e.realIndex, 0, !1, !0) : e.slideTo(e.activeIndex, 0, !1, !0) : e.slideTo(e.slides.length - 1, 0, !1, !0), e.autoplay && e.autoplay.running && e.autoplay.paused && (clearTimeout(e.autoplay.resizeTimeout), e.autoplay.resizeTimeout = setTimeout(function () {\n      e.autoplay && e.autoplay.running && e.autoplay.paused && e.autoplay.resume();\n    }, 500)), e.allowSlidePrev = i, e.allowSlideNext = a, e.params.watchOverflow && r !== e.snapGrid && e.checkOverflow();\n  }\n  function q(e) {\n    var t = this;\n    t.enabled && (t.allowClick || (t.params.preventClicks && e.preventDefault(), t.params.preventClicksPropagation && t.animating && (e.stopPropagation(), e.stopImmediatePropagation())));\n  }\n  function R() {\n    var e = this,\n      t = e.wrapperEl,\n      s = e.rtlTranslate,\n      a = e.enabled;\n    if (!a) return;\n    var i;\n    e.previousTranslate = e.translate, e.isHorizontal() ? e.translate = -t.scrollLeft : e.translate = -t.scrollTop, 0 === e.translate && (e.translate = 0), e.updateActiveIndex(), e.updateSlidesClasses();\n    var r = e.maxTranslate() - e.minTranslate();\n    i = 0 === r ? 0 : (e.translate - e.minTranslate()) / r, i !== e.progress && e.updateProgress(s ? -e.translate : e.translate), e.emit(\"setTranslate\", e.translate, !1);\n  }\n  function F(e) {\n    var t = this;\n    A(t, e.target), t.params.cssMode || \"auto\" !== t.params.slidesPerView && !t.params.autoHeight || t.update();\n  }\n  var _ = !1;\n  function V() {}\n  var j = function j(e, t) {\n    var s = a(),\n      i = e.params,\n      r = e.el,\n      n = e.wrapperEl,\n      l = e.device,\n      o = !!i.nested,\n      d = \"on\" === t ? \"addEventListener\" : \"removeEventListener\",\n      c = t;\n    r[d](\"pointerdown\", e.onTouchStart, {\n      passive: !1\n    }), s[d](\"pointermove\", e.onTouchMove, {\n      passive: !1,\n      capture: o\n    }), s[d](\"pointerup\", e.onTouchEnd, {\n      passive: !0\n    }), s[d](\"pointercancel\", e.onTouchEnd, {\n      passive: !0\n    }), s[d](\"pointerout\", e.onTouchEnd, {\n      passive: !0\n    }), s[d](\"pointerleave\", e.onTouchEnd, {\n      passive: !0\n    }), (i.preventClicks || i.preventClicksPropagation) && r[d](\"click\", e.onClick, !0), i.cssMode && n[d](\"scroll\", e.onScroll), i.updateOnWindowResize ? e[c](l.ios || l.android ? \"resize orientationchange observerUpdate\" : \"resize observerUpdate\", N, !0) : e[c](\"observerUpdate\", N, !0), r[d](\"load\", e.onLoad, {\n      capture: !0\n    });\n  };\n  var W = function W(e, t) {\n    return e.grid && t.grid && t.grid.rows > 1;\n  };\n  var U = {\n    init: !0,\n    direction: \"horizontal\",\n    oneWayMovement: !1,\n    touchEventsTarget: \"wrapper\",\n    initialSlide: 0,\n    speed: 300,\n    cssMode: !1,\n    updateOnWindowResize: !0,\n    resizeObserver: !0,\n    nested: !1,\n    createElements: !1,\n    enabled: !0,\n    focusableElements: \"input, select, option, textarea, button, video, label\",\n    width: null,\n    height: null,\n    preventInteractionOnTransition: !1,\n    userAgent: null,\n    url: null,\n    edgeSwipeDetection: !1,\n    edgeSwipeThreshold: 20,\n    autoHeight: !1,\n    setWrapperSize: !1,\n    virtualTranslate: !1,\n    effect: \"slide\",\n    breakpoints: void 0,\n    breakpointsBase: \"window\",\n    spaceBetween: 0,\n    slidesPerView: 1,\n    slidesPerGroup: 1,\n    slidesPerGroupSkip: 0,\n    slidesPerGroupAuto: !1,\n    centeredSlides: !1,\n    centeredSlidesBounds: !1,\n    slidesOffsetBefore: 0,\n    slidesOffsetAfter: 0,\n    normalizeSlideIndex: !0,\n    centerInsufficientSlides: !1,\n    watchOverflow: !0,\n    roundLengths: !1,\n    touchRatio: 1,\n    touchAngle: 45,\n    simulateTouch: !0,\n    shortSwipes: !0,\n    longSwipes: !0,\n    longSwipesRatio: .5,\n    longSwipesMs: 300,\n    followFinger: !0,\n    allowTouchMove: !0,\n    threshold: 5,\n    touchMoveStopPropagation: !1,\n    touchStartPreventDefault: !0,\n    touchStartForcePreventDefault: !1,\n    touchReleaseOnEdges: !1,\n    uniqueNavElements: !0,\n    resistance: !0,\n    resistanceRatio: .85,\n    watchSlidesProgress: !1,\n    grabCursor: !1,\n    preventClicks: !0,\n    preventClicksPropagation: !0,\n    slideToClickedSlide: !1,\n    loop: !1,\n    loopedSlides: null,\n    loopPreventsSliding: !0,\n    rewind: !1,\n    allowSlidePrev: !0,\n    allowSlideNext: !0,\n    swipeHandler: null,\n    noSwiping: !0,\n    noSwipingClass: \"swiper-no-swiping\",\n    noSwipingSelector: null,\n    passiveListeners: !0,\n    maxBackfaceHiddenSlides: 10,\n    containerModifierClass: \"swiper-\",\n    slideClass: \"swiper-slide\",\n    slideActiveClass: \"swiper-slide-active\",\n    slideVisibleClass: \"swiper-slide-visible\",\n    slideNextClass: \"swiper-slide-next\",\n    slidePrevClass: \"swiper-slide-prev\",\n    wrapperClass: \"swiper-wrapper\",\n    lazyPreloaderClass: \"swiper-lazy-preloader\",\n    lazyPreloadPrevNext: 0,\n    runCallbacksOnInit: !0,\n    _emitClasses: !1\n  };\n  function K(e, t) {\n    return function (s) {\n      void 0 === s && (s = {});\n      var a = Object.keys(s)[0],\n        i = s[a];\n      \"object\" == _typeof(i) && null !== i ? ([\"navigation\", \"pagination\", \"scrollbar\"].indexOf(a) >= 0 && !0 === e[a] && (e[a] = {\n        auto: !0\n      }), a in e && \"enabled\" in i ? (!0 === e[a] && (e[a] = {\n        enabled: !0\n      }), \"object\" != _typeof(e[a]) || \"enabled\" in e[a] || (e[a].enabled = !0), e[a] || (e[a] = {\n        enabled: !1\n      }), p(t, s)) : p(t, s)) : p(t, s);\n    };\n  }\n  var Z = {\n      eventsEmitter: z,\n      update: k,\n      translate: O,\n      transition: {\n        setTransition: function setTransition(e, t) {\n          var s = this;\n          s.params.cssMode || (s.wrapperEl.style.transitionDuration = \"\".concat(e, \"ms\")), s.emit(\"setTransition\", e, t);\n        },\n        transitionStart: function transitionStart(e, t) {\n          void 0 === e && (e = !0);\n          var s = this,\n            a = s.params;\n          a.cssMode || (a.autoHeight && s.updateAutoHeight(), D({\n            swiper: s,\n            runCallbacks: e,\n            direction: t,\n            step: \"Start\"\n          }));\n        },\n        transitionEnd: function transitionEnd(e, t) {\n          void 0 === e && (e = !0);\n          var s = this,\n            a = s.params;\n          s.animating = !1, a.cssMode || (s.setTransition(0), D({\n            swiper: s,\n            runCallbacks: e,\n            direction: t,\n            step: \"End\"\n          }));\n        }\n      },\n      slide: G,\n      loop: H,\n      grabCursor: {\n        setGrabCursor: function setGrabCursor(e) {\n          var t = this;\n          if (!t.params.simulateTouch || t.params.watchOverflow && t.isLocked || t.params.cssMode) return;\n          var s = \"container\" === t.params.touchEventsTarget ? t.el : t.wrapperEl;\n          t.isElement && (t.__preventObserver__ = !0), s.style.cursor = \"move\", s.style.cursor = e ? \"grabbing\" : \"grab\", t.isElement && requestAnimationFrame(function () {\n            t.__preventObserver__ = !1;\n          });\n        },\n        unsetGrabCursor: function unsetGrabCursor() {\n          var e = this;\n          e.params.watchOverflow && e.isLocked || e.params.cssMode || (e.isElement && (e.__preventObserver__ = !0), e[\"container\" === e.params.touchEventsTarget ? \"el\" : \"wrapperEl\"].style.cursor = \"\", e.isElement && requestAnimationFrame(function () {\n            e.__preventObserver__ = !1;\n          }));\n        }\n      },\n      events: {\n        attachEvents: function attachEvents() {\n          var e = this,\n            t = a(),\n            s = e.params;\n          e.onTouchStart = X.bind(e), e.onTouchMove = Y.bind(e), e.onTouchEnd = B.bind(e), s.cssMode && (e.onScroll = R.bind(e)), e.onClick = q.bind(e), e.onLoad = F.bind(e), _ || (t.addEventListener(\"touchstart\", V), _ = !0), j(e, \"on\");\n        },\n        detachEvents: function detachEvents() {\n          j(this, \"off\");\n        }\n      },\n      breakpoints: {\n        setBreakpoint: function setBreakpoint() {\n          var e = this,\n            t = e.realIndex,\n            s = e.initialized,\n            a = e.params,\n            i = e.el,\n            r = a.breakpoints;\n          if (!r || r && 0 === Object.keys(r).length) return;\n          var n = e.getBreakpoint(r, e.params.breakpointsBase, e.el);\n          if (!n || e.currentBreakpoint === n) return;\n          var l = (n in r ? r[n] : void 0) || e.originalParams,\n            o = W(e, a),\n            d = W(e, l),\n            c = a.enabled;\n          o && !d ? (i.classList.remove(\"\".concat(a.containerModifierClass, \"grid\"), \"\".concat(a.containerModifierClass, \"grid-column\")), e.emitContainerClasses()) : !o && d && (i.classList.add(\"\".concat(a.containerModifierClass, \"grid\")), (l.grid.fill && \"column\" === l.grid.fill || !l.grid.fill && \"column\" === a.grid.fill) && i.classList.add(\"\".concat(a.containerModifierClass, \"grid-column\")), e.emitContainerClasses()), [\"navigation\", \"pagination\", \"scrollbar\"].forEach(function (t) {\n            if (void 0 === l[t]) return;\n            var s = a[t] && a[t].enabled,\n              i = l[t] && l[t].enabled;\n            s && !i && e[t].disable(), !s && i && e[t].enable();\n          });\n          var u = l.direction && l.direction !== a.direction,\n            m = a.loop && (l.slidesPerView !== a.slidesPerView || u);\n          u && s && e.changeDirection(), p(e.params, l);\n          var h = e.params.enabled;\n          Object.assign(e, {\n            allowTouchMove: e.params.allowTouchMove,\n            allowSlideNext: e.params.allowSlideNext,\n            allowSlidePrev: e.params.allowSlidePrev\n          }), c && !h ? e.disable() : !c && h && e.enable(), e.currentBreakpoint = n, e.emit(\"_beforeBreakpoint\", l), m && s && (e.loopDestroy(), e.loopCreate(t), e.updateSlides()), e.emit(\"breakpoint\", l);\n        },\n        getBreakpoint: function getBreakpoint(e, t, s) {\n          if (void 0 === t && (t = \"window\"), !e || \"container\" === t && !s) return;\n          var a = !1;\n          var i = r(),\n            n = \"window\" === t ? i.innerHeight : s.clientHeight,\n            l = Object.keys(e).map(function (e) {\n              if (\"string\" == typeof e && 0 === e.indexOf(\"@\")) {\n                var _t19 = parseFloat(e.substr(1));\n                return {\n                  value: n * _t19,\n                  point: e\n                };\n              }\n              return {\n                value: e,\n                point: e\n              };\n            });\n          l.sort(function (e, t) {\n            return parseInt(e.value, 10) - parseInt(t.value, 10);\n          });\n          for (var _e28 = 0; _e28 < l.length; _e28 += 1) {\n            var _l$_e = l[_e28],\n              _r6 = _l$_e.point,\n              _n4 = _l$_e.value;\n            \"window\" === t ? i.matchMedia(\"(min-width: \".concat(_n4, \"px)\")).matches && (a = _r6) : _n4 <= s.clientWidth && (a = _r6);\n          }\n          return a || \"max\";\n        }\n      },\n      checkOverflow: {\n        checkOverflow: function checkOverflow() {\n          var e = this,\n            t = e.isLocked,\n            s = e.params,\n            a = s.slidesOffsetBefore;\n          if (a) {\n            var _t20 = e.slides.length - 1,\n              _s17 = e.slidesGrid[_t20] + e.slidesSizesGrid[_t20] + 2 * a;\n            e.isLocked = e.size > _s17;\n          } else e.isLocked = 1 === e.snapGrid.length;\n          !0 === s.allowSlideNext && (e.allowSlideNext = !e.isLocked), !0 === s.allowSlidePrev && (e.allowSlidePrev = !e.isLocked), t && t !== e.isLocked && (e.isEnd = !1), t !== e.isLocked && e.emit(e.isLocked ? \"lock\" : \"unlock\");\n        }\n      },\n      classes: {\n        addClasses: function addClasses() {\n          var _i$classList;\n          var e = this,\n            t = e.classNames,\n            s = e.params,\n            a = e.rtl,\n            i = e.el,\n            r = e.device,\n            n = function (e, t) {\n              var s = [];\n              return e.forEach(function (e) {\n                \"object\" == _typeof(e) ? Object.keys(e).forEach(function (a) {\n                  e[a] && s.push(t + a);\n                }) : \"string\" == typeof e && s.push(t + e);\n              }), s;\n            }([\"initialized\", s.direction, {\n              \"free-mode\": e.params.freeMode && s.freeMode.enabled\n            }, {\n              autoheight: s.autoHeight\n            }, {\n              rtl: a\n            }, {\n              grid: s.grid && s.grid.rows > 1\n            }, {\n              \"grid-column\": s.grid && s.grid.rows > 1 && \"column\" === s.grid.fill\n            }, {\n              android: r.android\n            }, {\n              ios: r.ios\n            }, {\n              \"css-mode\": s.cssMode\n            }, {\n              centered: s.cssMode && s.centeredSlides\n            }, {\n              \"watch-progress\": s.watchSlidesProgress\n            }], s.containerModifierClass);\n          t.push.apply(t, _toConsumableArray(n)), (_i$classList = i.classList).add.apply(_i$classList, _toConsumableArray(t)), e.emitContainerClasses();\n        },\n        removeClasses: function removeClasses() {\n          var _e$classList;\n          var e = this.el,\n            t = this.classNames;\n          (_e$classList = e.classList).remove.apply(_e$classList, _toConsumableArray(t)), this.emitContainerClasses();\n        }\n      }\n    },\n    Q = {};\n  var J = /*#__PURE__*/function () {\n    function J() {\n      var _i9, _i10, _l$modules;\n      _classCallCheck(this, J);\n      var e, t;\n      for (var s = arguments.length, i = new Array(s), r = 0; r < s; r++) i[r] = arguments[r];\n      1 === i.length && i[0].constructor && \"Object\" === Object.prototype.toString.call(i[0]).slice(8, -1) ? t = i[0] : (_i9 = i, _i10 = _slicedToArray(_i9, 2), e = _i10[0], t = _i10[1], _i9), t || (t = {}), t = p({}, t), e && !t.el && (t.el = e);\n      var n = a();\n      if (t.el && \"string\" == typeof t.el && n.querySelectorAll(t.el).length > 1) {\n        var _e29 = [];\n        return n.querySelectorAll(t.el).forEach(function (s) {\n          var a = p({}, t, {\n            el: s\n          });\n          _e29.push(new J(a));\n        }), _e29;\n      }\n      var l = this;\n      l.__swiper__ = !0, l.support = C(), l.device = P({\n        userAgent: t.userAgent\n      }), l.browser = L(), l.eventsListeners = {}, l.eventsAnyListeners = [], l.modules = _toConsumableArray(l.__modules__), t.modules && Array.isArray(t.modules) && (_l$modules = l.modules).push.apply(_l$modules, _toConsumableArray(t.modules));\n      var o = {};\n      l.modules.forEach(function (e) {\n        e({\n          params: t,\n          swiper: l,\n          extendParams: K(t, o),\n          on: l.on.bind(l),\n          once: l.once.bind(l),\n          off: l.off.bind(l),\n          emit: l.emit.bind(l)\n        });\n      });\n      var d = p({}, U, o);\n      return l.params = p({}, d, Q, t), l.originalParams = p({}, l.params), l.passedParams = p({}, t), l.params && l.params.on && Object.keys(l.params.on).forEach(function (e) {\n        l.on(e, l.params.on[e]);\n      }), l.params && l.params.onAny && l.onAny(l.params.onAny), Object.assign(l, {\n        enabled: l.params.enabled,\n        el: e,\n        classNames: [],\n        slides: [],\n        slidesGrid: [],\n        snapGrid: [],\n        slidesSizesGrid: [],\n        isHorizontal: function isHorizontal() {\n          return \"horizontal\" === l.params.direction;\n        },\n        isVertical: function isVertical() {\n          return \"vertical\" === l.params.direction;\n        },\n        activeIndex: 0,\n        realIndex: 0,\n        isBeginning: !0,\n        isEnd: !1,\n        translate: 0,\n        previousTranslate: 0,\n        progress: 0,\n        velocity: 0,\n        animating: !1,\n        cssOverflowAdjustment: function cssOverflowAdjustment() {\n          return Math.trunc(this.translate / Math.pow(2, 23)) * Math.pow(2, 23);\n        },\n        allowSlideNext: l.params.allowSlideNext,\n        allowSlidePrev: l.params.allowSlidePrev,\n        touchEventsData: {\n          isTouched: void 0,\n          isMoved: void 0,\n          allowTouchCallbacks: void 0,\n          touchStartTime: void 0,\n          isScrolling: void 0,\n          currentTranslate: void 0,\n          startTranslate: void 0,\n          allowThresholdMove: void 0,\n          focusableElements: l.params.focusableElements,\n          lastClickTime: 0,\n          clickTimeout: void 0,\n          velocities: [],\n          allowMomentumBounce: void 0,\n          startMoving: void 0,\n          evCache: []\n        },\n        allowClick: !0,\n        allowTouchMove: l.params.allowTouchMove,\n        touches: {\n          startX: 0,\n          startY: 0,\n          currentX: 0,\n          currentY: 0,\n          diff: 0\n        },\n        imagesToLoad: [],\n        imagesLoaded: 0\n      }), l.emit(\"_swiper\"), l.params.init && l.init(), l;\n    }\n    _createClass(J, [{\n      key: \"getSlideIndex\",\n      value: function getSlideIndex(e) {\n        var t = this.slidesEl,\n          s = this.params,\n          a = b(f(t, \".\".concat(s.slideClass, \", swiper-slide\"))[0]);\n        return b(e) - a;\n      }\n    }, {\n      key: \"getSlideIndexByData\",\n      value: function getSlideIndexByData(e) {\n        return this.getSlideIndex(this.slides.filter(function (t) {\n          return 1 * t.getAttribute(\"data-swiper-slide-index\") === e;\n        })[0]);\n      }\n    }, {\n      key: \"recalcSlides\",\n      value: function recalcSlides() {\n        var e = this.slidesEl,\n          t = this.params;\n        this.slides = f(e, \".\".concat(t.slideClass, \", swiper-slide\"));\n      }\n    }, {\n      key: \"enable\",\n      value: function enable() {\n        var e = this;\n        e.enabled || (e.enabled = !0, e.params.grabCursor && e.setGrabCursor(), e.emit(\"enable\"));\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        var e = this;\n        e.enabled && (e.enabled = !1, e.params.grabCursor && e.unsetGrabCursor(), e.emit(\"disable\"));\n      }\n    }, {\n      key: \"setProgress\",\n      value: function setProgress(e, t) {\n        var s = this;\n        e = Math.min(Math.max(e, 0), 1);\n        var a = s.minTranslate(),\n          i = (s.maxTranslate() - a) * e + a;\n        s.translateTo(i, void 0 === t ? 0 : t), s.updateActiveIndex(), s.updateSlidesClasses();\n      }\n    }, {\n      key: \"emitContainerClasses\",\n      value: function emitContainerClasses() {\n        var e = this;\n        if (!e.params._emitClasses || !e.el) return;\n        var t = e.el.className.split(\" \").filter(function (t) {\n          return 0 === t.indexOf(\"swiper\") || 0 === t.indexOf(e.params.containerModifierClass);\n        });\n        e.emit(\"_containerClasses\", t.join(\" \"));\n      }\n    }, {\n      key: \"getSlideClasses\",\n      value: function getSlideClasses(e) {\n        var t = this;\n        return t.destroyed ? \"\" : e.className.split(\" \").filter(function (e) {\n          return 0 === e.indexOf(\"swiper-slide\") || 0 === e.indexOf(t.params.slideClass);\n        }).join(\" \");\n      }\n    }, {\n      key: \"emitSlidesClasses\",\n      value: function emitSlidesClasses() {\n        var e = this;\n        if (!e.params._emitClasses || !e.el) return;\n        var t = [];\n        e.slides.forEach(function (s) {\n          var a = e.getSlideClasses(s);\n          t.push({\n            slideEl: s,\n            classNames: a\n          }), e.emit(\"_slideClass\", s, a);\n        }), e.emit(\"_slideClasses\", t);\n      }\n    }, {\n      key: \"slidesPerViewDynamic\",\n      value: function slidesPerViewDynamic(e, t) {\n        void 0 === e && (e = \"current\"), void 0 === t && (t = !1);\n        var s = this.params,\n          a = this.slides,\n          i = this.slidesGrid,\n          r = this.slidesSizesGrid,\n          n = this.size,\n          l = this.activeIndex;\n        var o = 1;\n        if (s.centeredSlides) {\n          var _e30,\n            _t21 = a[l] ? a[l].swiperSlideSize : 0;\n          for (var _s18 = l + 1; _s18 < a.length; _s18 += 1) a[_s18] && !_e30 && (_t21 += a[_s18].swiperSlideSize, o += 1, _t21 > n && (_e30 = !0));\n          for (var _s19 = l - 1; _s19 >= 0; _s19 -= 1) a[_s19] && !_e30 && (_t21 += a[_s19].swiperSlideSize, o += 1, _t21 > n && (_e30 = !0));\n        } else if (\"current\" === e) for (var _e31 = l + 1; _e31 < a.length; _e31 += 1) {\n          (t ? i[_e31] + r[_e31] - i[l] < n : i[_e31] - i[l] < n) && (o += 1);\n        } else for (var _e32 = l - 1; _e32 >= 0; _e32 -= 1) {\n          i[l] - i[_e32] < n && (o += 1);\n        }\n        return o;\n      }\n    }, {\n      key: \"update\",\n      value: function update() {\n        var e = this;\n        if (!e || e.destroyed) return;\n        var t = e.snapGrid,\n          s = e.params;\n        function a() {\n          var t = e.rtlTranslate ? -1 * e.translate : e.translate,\n            s = Math.min(Math.max(t, e.maxTranslate()), e.minTranslate());\n          e.setTranslate(s), e.updateActiveIndex(), e.updateSlidesClasses();\n        }\n        var i;\n        if (s.breakpoints && e.setBreakpoint(), _toConsumableArray(e.el.querySelectorAll('[loading=\"lazy\"]')).forEach(function (t) {\n          t.complete && A(e, t);\n        }), e.updateSize(), e.updateSlides(), e.updateProgress(), e.updateSlidesClasses(), s.freeMode && s.freeMode.enabled && !s.cssMode) a(), s.autoHeight && e.updateAutoHeight();else {\n          if ((\"auto\" === s.slidesPerView || s.slidesPerView > 1) && e.isEnd && !s.centeredSlides) {\n            var _t22 = e.virtual && s.virtual.enabled ? e.virtual.slides : e.slides;\n            i = e.slideTo(_t22.length - 1, 0, !1, !0);\n          } else i = e.slideTo(e.activeIndex, 0, !1, !0);\n          i || a();\n        }\n        s.watchOverflow && t !== e.snapGrid && e.checkOverflow(), e.emit(\"update\");\n      }\n    }, {\n      key: \"changeDirection\",\n      value: function changeDirection(e, t) {\n        void 0 === t && (t = !0);\n        var s = this,\n          a = s.params.direction;\n        return e || (e = \"horizontal\" === a ? \"vertical\" : \"horizontal\"), e === a || \"horizontal\" !== e && \"vertical\" !== e || (s.el.classList.remove(\"\".concat(s.params.containerModifierClass).concat(a)), s.el.classList.add(\"\".concat(s.params.containerModifierClass).concat(e)), s.emitContainerClasses(), s.params.direction = e, s.slides.forEach(function (t) {\n          \"vertical\" === e ? t.style.width = \"\" : t.style.height = \"\";\n        }), s.emit(\"changeDirection\"), t && s.update()), s;\n      }\n    }, {\n      key: \"changeLanguageDirection\",\n      value: function changeLanguageDirection(e) {\n        var t = this;\n        t.rtl && \"rtl\" === e || !t.rtl && \"ltr\" === e || (t.rtl = \"rtl\" === e, t.rtlTranslate = \"horizontal\" === t.params.direction && t.rtl, t.rtl ? (t.el.classList.add(\"\".concat(t.params.containerModifierClass, \"rtl\")), t.el.dir = \"rtl\") : (t.el.classList.remove(\"\".concat(t.params.containerModifierClass, \"rtl\")), t.el.dir = \"ltr\"), t.update());\n      }\n    }, {\n      key: \"mount\",\n      value: function mount(e) {\n        var t = this;\n        if (t.mounted) return !0;\n        var s = e || t.params.el;\n        if (\"string\" == typeof s && (s = document.querySelector(s)), !s) return !1;\n        s.swiper = t, s.shadowEl && (t.isElement = !0);\n        var a = function a() {\n          return \".\".concat((t.params.wrapperClass || \"\").trim().split(\" \").join(\".\"));\n        };\n        var i = function () {\n          if (s && s.shadowRoot && s.shadowRoot.querySelector) {\n            return s.shadowRoot.querySelector(a());\n          }\n          return f(s, a())[0];\n        }();\n        return !i && t.params.createElements && (i = g(\"div\", t.params.wrapperClass), s.append(i), f(s, \".\".concat(t.params.slideClass)).forEach(function (e) {\n          i.append(e);\n        })), Object.assign(t, {\n          el: s,\n          wrapperEl: i,\n          slidesEl: t.isElement ? s : i,\n          mounted: !0,\n          rtl: \"rtl\" === s.dir.toLowerCase() || \"rtl\" === w(s, \"direction\"),\n          rtlTranslate: \"horizontal\" === t.params.direction && (\"rtl\" === s.dir.toLowerCase() || \"rtl\" === w(s, \"direction\")),\n          wrongRTL: \"-webkit-box\" === w(i, \"display\")\n        }), !0;\n      }\n    }, {\n      key: \"init\",\n      value: function init(e) {\n        var t = this;\n        if (t.initialized) return t;\n        return !1 === t.mount(e) || (t.emit(\"beforeInit\"), t.params.breakpoints && t.setBreakpoint(), t.addClasses(), t.updateSize(), t.updateSlides(), t.params.watchOverflow && t.checkOverflow(), t.params.grabCursor && t.enabled && t.setGrabCursor(), t.params.loop && t.virtual && t.params.virtual.enabled ? t.slideTo(t.params.initialSlide + t.virtual.slidesBefore, 0, t.params.runCallbacksOnInit, !1, !0) : t.slideTo(t.params.initialSlide, 0, t.params.runCallbacksOnInit, !1, !0), t.params.loop && t.loopCreate(), t.attachEvents(), _toConsumableArray(t.el.querySelectorAll('[loading=\"lazy\"]')).forEach(function (e) {\n          e.complete ? A(t, e) : e.addEventListener(\"load\", function (e) {\n            A(t, e.target);\n          });\n        }), I(t), t.initialized = !0, I(t), t.emit(\"init\"), t.emit(\"afterInit\")), t;\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy(e, t) {\n        void 0 === e && (e = !0), void 0 === t && (t = !0);\n        var s = this,\n          a = s.params,\n          i = s.el,\n          r = s.wrapperEl,\n          n = s.slides;\n        return void 0 === s.params || s.destroyed || (s.emit(\"beforeDestroy\"), s.initialized = !1, s.detachEvents(), a.loop && s.loopDestroy(), t && (s.removeClasses(), i.removeAttribute(\"style\"), r.removeAttribute(\"style\"), n && n.length && n.forEach(function (e) {\n          e.classList.remove(a.slideVisibleClass, a.slideActiveClass, a.slideNextClass, a.slidePrevClass), e.removeAttribute(\"style\"), e.removeAttribute(\"data-swiper-slide-index\");\n        })), s.emit(\"destroy\"), Object.keys(s.eventsListeners).forEach(function (e) {\n          s.off(e);\n        }), !1 !== e && (s.el.swiper = null, function (e) {\n          var t = e;\n          Object.keys(t).forEach(function (e) {\n            try {\n              t[e] = null;\n            } catch (e) {}\n            try {\n              delete t[e];\n            } catch (e) {}\n          });\n        }(s)), s.destroyed = !0), null;\n      }\n    }], [{\n      key: \"extendDefaults\",\n      value: function extendDefaults(e) {\n        p(Q, e);\n      }\n    }, {\n      key: \"extendedDefaults\",\n      get: function get() {\n        return Q;\n      }\n    }, {\n      key: \"defaults\",\n      get: function get() {\n        return U;\n      }\n    }, {\n      key: \"installModule\",\n      value: function installModule(e) {\n        J.prototype.__modules__ || (J.prototype.__modules__ = []);\n        var t = J.prototype.__modules__;\n        \"function\" == typeof e && t.indexOf(e) < 0 && t.push(e);\n      }\n    }, {\n      key: \"use\",\n      value: function use(e) {\n        return Array.isArray(e) ? (e.forEach(function (e) {\n          return J.installModule(e);\n        }), J) : (J.installModule(e), J);\n      }\n    }]);\n    return J;\n  }();\n  function ee(e, t, s, a) {\n    return e.params.createElements && Object.keys(a).forEach(function (i) {\n      if (!s[i] && !0 === s.auto) {\n        var _r7 = f(e.el, \".\".concat(a[i]))[0];\n        _r7 || (_r7 = g(\"div\", a[i]), _r7.className = a[i], e.el.append(_r7)), s[i] = _r7, t[i] = _r7;\n      }\n    }), s;\n  }\n  function te(e) {\n    return void 0 === e && (e = \"\"), \".\".concat(e.trim().replace(/([\\.:!+\\/])/g, \"\\\\$1\").replace(/ /g, \".\"));\n  }\n  function se(e) {\n    var t = this,\n      s = t.params,\n      a = t.slidesEl;\n    s.loop && t.loopDestroy();\n    var i = function i(e) {\n      if (\"string\" == typeof e) {\n        var _t23 = document.createElement(\"div\");\n        _t23.innerHTML = e, a.append(_t23.children[0]), _t23.innerHTML = \"\";\n      } else a.append(e);\n    };\n    if (\"object\" == _typeof(e) && \"length\" in e) for (var _t24 = 0; _t24 < e.length; _t24 += 1) e[_t24] && i(e[_t24]);else i(e);\n    t.recalcSlides(), s.loop && t.loopCreate(), s.observer && !t.isElement || t.update();\n  }\n  function ae(e) {\n    var t = this,\n      s = t.params,\n      a = t.activeIndex,\n      i = t.slidesEl;\n    s.loop && t.loopDestroy();\n    var r = a + 1;\n    var n = function n(e) {\n      if (\"string\" == typeof e) {\n        var _t25 = document.createElement(\"div\");\n        _t25.innerHTML = e, i.prepend(_t25.children[0]), _t25.innerHTML = \"\";\n      } else i.prepend(e);\n    };\n    if (\"object\" == _typeof(e) && \"length\" in e) {\n      for (var _t26 = 0; _t26 < e.length; _t26 += 1) e[_t26] && n(e[_t26]);\n      r = a + e.length;\n    } else n(e);\n    t.recalcSlides(), s.loop && t.loopCreate(), s.observer && !t.isElement || t.update(), t.slideTo(r, 0, !1);\n  }\n  function ie(e, t) {\n    var s = this,\n      a = s.params,\n      i = s.activeIndex,\n      r = s.slidesEl;\n    var n = i;\n    a.loop && (n -= s.loopedSlides, s.loopDestroy(), s.recalcSlides());\n    var l = s.slides.length;\n    if (e <= 0) return void s.prependSlide(t);\n    if (e >= l) return void s.appendSlide(t);\n    var o = n > e ? n + 1 : n;\n    var d = [];\n    for (var _t27 = l - 1; _t27 >= e; _t27 -= 1) {\n      var _e33 = s.slides[_t27];\n      _e33.remove(), d.unshift(_e33);\n    }\n    if (\"object\" == _typeof(t) && \"length\" in t) {\n      for (var _e34 = 0; _e34 < t.length; _e34 += 1) t[_e34] && r.append(t[_e34]);\n      o = n > e ? n + t.length : n;\n    } else r.append(t);\n    for (var _e35 = 0; _e35 < d.length; _e35 += 1) r.append(d[_e35]);\n    s.recalcSlides(), a.loop && s.loopCreate(), a.observer && !s.isElement || s.update(), a.loop ? s.slideTo(o + s.loopedSlides, 0, !1) : s.slideTo(o, 0, !1);\n  }\n  function re(e) {\n    var t = this,\n      s = t.params,\n      a = t.activeIndex;\n    var i = a;\n    s.loop && (i -= t.loopedSlides, t.loopDestroy());\n    var r,\n      n = i;\n    if (\"object\" == _typeof(e) && \"length\" in e) {\n      for (var _s20 = 0; _s20 < e.length; _s20 += 1) r = e[_s20], t.slides[r] && t.slides[r].remove(), r < n && (n -= 1);\n      n = Math.max(n, 0);\n    } else r = e, t.slides[r] && t.slides[r].remove(), r < n && (n -= 1), n = Math.max(n, 0);\n    t.recalcSlides(), s.loop && t.loopCreate(), s.observer && !t.isElement || t.update(), s.loop ? t.slideTo(n + t.loopedSlides, 0, !1) : t.slideTo(n, 0, !1);\n  }\n  function ne() {\n    var e = this,\n      t = [];\n    for (var _s21 = 0; _s21 < e.slides.length; _s21 += 1) t.push(_s21);\n    e.removeSlide(t);\n  }\n  function le(e) {\n    var t = e.effect,\n      s = e.swiper,\n      a = e.on,\n      i = e.setTranslate,\n      r = e.setTransition,\n      n = e.overwriteParams,\n      l = e.perspective,\n      o = e.recreateShadows,\n      d = e.getEffectParams;\n    var c;\n    a(\"beforeInit\", function () {\n      if (s.params.effect !== t) return;\n      s.classNames.push(\"\".concat(s.params.containerModifierClass).concat(t)), l && l() && s.classNames.push(\"\".concat(s.params.containerModifierClass, \"3d\"));\n      var e = n ? n() : {};\n      Object.assign(s.params, e), Object.assign(s.originalParams, e);\n    }), a(\"setTranslate\", function () {\n      s.params.effect === t && i();\n    }), a(\"setTransition\", function (e, a) {\n      s.params.effect === t && r(a);\n    }), a(\"transitionEnd\", function () {\n      if (s.params.effect === t && o) {\n        if (!d || !d().slideShadows) return;\n        s.slides.forEach(function (e) {\n          e.querySelectorAll(\".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left\").forEach(function (e) {\n            return e.remove();\n          });\n        }), o();\n      }\n    }), a(\"virtualUpdate\", function () {\n      s.params.effect === t && (s.slides.length || (c = !0), requestAnimationFrame(function () {\n        c && s.slides && s.slides.length && (i(), c = !1);\n      }));\n    });\n  }\n  function oe(e, t) {\n    var s = h(t);\n    return s !== t && (s.style.backfaceVisibility = \"hidden\", s.style[\"-webkit-backface-visibility\"] = \"hidden\"), s;\n  }\n  function de(e) {\n    var t = e.swiper,\n      s = e.duration,\n      a = e.transformElements,\n      i = e.allSlides;\n    var r = t.activeIndex;\n    if (t.params.virtualTranslate && 0 !== s) {\n      var _e36,\n        _s22 = !1;\n      _e36 = i ? a : a.filter(function (e) {\n        var s = e.classList.contains(\"swiper-slide-transform\") ? function (e) {\n          if (!e.parentElement) return t.slides.filter(function (t) {\n            return t.shadowEl && t.shadowEl === e.parentNode;\n          })[0];\n          return e.parentElement;\n        }(e) : e;\n        return t.getSlideIndex(s) === r;\n      }), _e36.forEach(function (e) {\n        E(e, function () {\n          if (_s22) return;\n          if (!t || t.destroyed) return;\n          _s22 = !0, t.animating = !1;\n          var e = new window.CustomEvent(\"transitionend\", {\n            bubbles: !0,\n            cancelable: !0\n          });\n          t.wrapperEl.dispatchEvent(e);\n        });\n      });\n    }\n  }\n  function ce(e, t, s) {\n    var a = \"swiper-slide-shadow\" + (s ? \"-\".concat(s) : \"\"),\n      i = h(t);\n    var r = i.querySelector(\".\".concat(a));\n    return r || (r = g(\"div\", \"swiper-slide-shadow\" + (s ? \"-\".concat(s) : \"\")), i.append(r)), r;\n  }\n  Object.keys(Z).forEach(function (e) {\n    Object.keys(Z[e]).forEach(function (t) {\n      J.prototype[t] = Z[e][t];\n    });\n  }), J.use([function (e) {\n    var t = e.swiper,\n      s = e.on,\n      a = e.emit;\n    var i = r();\n    var n = null,\n      l = null;\n    var o = function o() {\n        t && !t.destroyed && t.initialized && (a(\"beforeResize\"), a(\"resize\"));\n      },\n      d = function d() {\n        t && !t.destroyed && t.initialized && a(\"orientationchange\");\n      };\n    s(\"init\", function () {\n      t.params.resizeObserver && void 0 !== i.ResizeObserver ? t && !t.destroyed && t.initialized && (n = new ResizeObserver(function (e) {\n        l = i.requestAnimationFrame(function () {\n          var s = t.width,\n            a = t.height;\n          var i = s,\n            r = a;\n          e.forEach(function (e) {\n            var s = e.contentBoxSize,\n              a = e.contentRect,\n              n = e.target;\n            n && n !== t.el || (i = a ? a.width : (s[0] || s).inlineSize, r = a ? a.height : (s[0] || s).blockSize);\n          }), i === s && r === a || o();\n        });\n      }), n.observe(t.el)) : (i.addEventListener(\"resize\", o), i.addEventListener(\"orientationchange\", d));\n    }), s(\"destroy\", function () {\n      l && i.cancelAnimationFrame(l), n && n.unobserve && t.el && (n.unobserve(t.el), n = null), i.removeEventListener(\"resize\", o), i.removeEventListener(\"orientationchange\", d);\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on,\n      i = e.emit;\n    var n = [],\n      l = r(),\n      o = function o(e, s) {\n        void 0 === s && (s = {});\n        var a = new (l.MutationObserver || l.WebkitMutationObserver)(function (e) {\n          if (t.__preventObserver__) return;\n          if (1 === e.length) return void i(\"observerUpdate\", e[0]);\n          var s = function s() {\n            i(\"observerUpdate\", e[0]);\n          };\n          l.requestAnimationFrame ? l.requestAnimationFrame(s) : l.setTimeout(s, 0);\n        });\n        a.observe(e, {\n          attributes: void 0 === s.attributes || s.attributes,\n          childList: void 0 === s.childList || s.childList,\n          characterData: void 0 === s.characterData || s.characterData\n        }), n.push(a);\n      };\n    s({\n      observer: !1,\n      observeParents: !1,\n      observeSlideChildren: !1\n    }), a(\"init\", function () {\n      if (t.params.observer) {\n        if (t.params.observeParents) {\n          var _e37 = y(t.el);\n          for (var _t28 = 0; _t28 < _e37.length; _t28 += 1) o(_e37[_t28]);\n        }\n        o(t.el, {\n          childList: t.params.observeSlideChildren\n        }), o(t.wrapperEl, {\n          attributes: !1\n        });\n      }\n    }), a(\"destroy\", function () {\n      n.forEach(function (e) {\n        e.disconnect();\n      }), n.splice(0, n.length);\n    });\n  }]);\n  var pe = [function (e) {\n    var t,\n      s = e.swiper,\n      i = e.extendParams,\n      r = e.on,\n      n = e.emit;\n    i({\n      virtual: {\n        enabled: !1,\n        slides: [],\n        cache: !0,\n        renderSlide: null,\n        renderExternal: null,\n        renderExternalUpdate: !0,\n        addSlidesBefore: 0,\n        addSlidesAfter: 0\n      }\n    });\n    var l = a();\n    s.virtual = {\n      cache: {},\n      from: void 0,\n      to: void 0,\n      slides: [],\n      offset: 0,\n      slidesGrid: []\n    };\n    var o = l.createElement(\"div\");\n    function d(e, t) {\n      var a = s.params.virtual;\n      if (a.cache && s.virtual.cache[t]) return s.virtual.cache[t];\n      var i;\n      return a.renderSlide ? (i = a.renderSlide.call(s, e, t), \"string\" == typeof i && (o.innerHTML = i, i = o.children[0])) : i = s.isElement ? g(\"swiper-slide\") : g(\"div\", s.params.slideClass), i.setAttribute(\"data-swiper-slide-index\", t), a.renderSlide || (i.innerHTML = e), a.cache && (s.virtual.cache[t] = i), i;\n    }\n    function c(e) {\n      var _s$params = s.params,\n        t = _s$params.slidesPerView,\n        a = _s$params.slidesPerGroup,\n        i = _s$params.centeredSlides,\n        r = _s$params.loop,\n        _s$params$virtual = s.params.virtual,\n        l = _s$params$virtual.addSlidesBefore,\n        o = _s$params$virtual.addSlidesAfter,\n        _s$virtual = s.virtual,\n        c = _s$virtual.from,\n        p = _s$virtual.to,\n        u = _s$virtual.slides,\n        m = _s$virtual.slidesGrid,\n        h = _s$virtual.offset;\n      s.params.cssMode || s.updateActiveIndex();\n      var g = s.activeIndex || 0;\n      var v, w, b;\n      v = s.rtlTranslate ? \"right\" : s.isHorizontal() ? \"left\" : \"top\", i ? (w = Math.floor(t / 2) + a + o, b = Math.floor(t / 2) + a + l) : (w = t + (a - 1) + o, b = (r ? t : a) + l);\n      var y = g - b,\n        E = g + w;\n      r || (y = Math.max(y, 0), E = Math.min(E, u.length - 1));\n      var x = (s.slidesGrid[y] || 0) - (s.slidesGrid[0] || 0);\n      function S() {\n        s.updateSlides(), s.updateProgress(), s.updateSlidesClasses(), n(\"virtualUpdate\");\n      }\n      if (r && g >= b ? (y -= b, i || (x += s.slidesGrid[0])) : r && g < b && (y = -b, i && (x += s.slidesGrid[0])), Object.assign(s.virtual, {\n        from: y,\n        to: E,\n        offset: x,\n        slidesGrid: s.slidesGrid,\n        slidesBefore: b,\n        slidesAfter: w\n      }), c === y && p === E && !e) return s.slidesGrid !== m && x !== h && s.slides.forEach(function (e) {\n        e.style[v] = x - Math.abs(s.cssOverflowAdjustment()) + \"px\";\n      }), s.updateProgress(), void n(\"virtualUpdate\");\n      if (s.params.virtual.renderExternal) return s.params.virtual.renderExternal.call(s, {\n        offset: x,\n        from: y,\n        to: E,\n        slides: function () {\n          var e = [];\n          for (var _t29 = y; _t29 <= E; _t29 += 1) e.push(u[_t29]);\n          return e;\n        }()\n      }), void (s.params.virtual.renderExternalUpdate ? S() : n(\"virtualUpdate\"));\n      var T = [],\n        M = [],\n        C = function C(e) {\n          var t = e;\n          return e < 0 ? t = u.length + e : t >= u.length && (t -= u.length), t;\n        };\n      if (e) s.slidesEl.querySelectorAll(\".\".concat(s.params.slideClass, \", swiper-slide\")).forEach(function (e) {\n        e.remove();\n      });else for (var _e38 = c; _e38 <= p; _e38 += 1) if (_e38 < y || _e38 > E) {\n        var _t30 = C(_e38);\n        s.slidesEl.querySelectorAll(\".\".concat(s.params.slideClass, \"[data-swiper-slide-index=\\\"\").concat(_t30, \"\\\"], swiper-slide[data-swiper-slide-index=\\\"\").concat(_t30, \"\\\"]\")).forEach(function (e) {\n          e.remove();\n        });\n      }\n      var P = r ? -u.length : 0,\n        L = r ? 2 * u.length : u.length;\n      for (var _t31 = P; _t31 < L; _t31 += 1) if (_t31 >= y && _t31 <= E) {\n        var _s23 = C(_t31);\n        void 0 === p || e ? M.push(_s23) : (_t31 > p && M.push(_s23), _t31 < c && T.push(_s23));\n      }\n      if (M.forEach(function (e) {\n        s.slidesEl.append(d(u[e], e));\n      }), r) for (var _e39 = T.length - 1; _e39 >= 0; _e39 -= 1) {\n        var _t32 = T[_e39];\n        s.slidesEl.prepend(d(u[_t32], _t32));\n      } else T.sort(function (e, t) {\n        return t - e;\n      }), T.forEach(function (e) {\n        s.slidesEl.prepend(d(u[e], e));\n      });\n      f(s.slidesEl, \".swiper-slide, swiper-slide\").forEach(function (e) {\n        e.style[v] = x - Math.abs(s.cssOverflowAdjustment()) + \"px\";\n      }), S();\n    }\n    r(\"beforeInit\", function () {\n      if (!s.params.virtual.enabled) return;\n      var e;\n      if (void 0 === s.passedParams.virtual.slides) {\n        var _t33 = _toConsumableArray(s.slidesEl.children).filter(function (e) {\n          return e.matches(\".\".concat(s.params.slideClass, \", swiper-slide\"));\n        });\n        _t33 && _t33.length && (s.virtual.slides = _toConsumableArray(_t33), e = !0, _t33.forEach(function (e, t) {\n          e.setAttribute(\"data-swiper-slide-index\", t), s.virtual.cache[t] = e, e.remove();\n        }));\n      }\n      e || (s.virtual.slides = s.params.virtual.slides), s.classNames.push(\"\".concat(s.params.containerModifierClass, \"virtual\")), s.params.watchSlidesProgress = !0, s.originalParams.watchSlidesProgress = !0, s.params.initialSlide || c();\n    }), r(\"setTranslate\", function () {\n      s.params.virtual.enabled && (s.params.cssMode && !s._immediateVirtual ? (clearTimeout(t), t = setTimeout(function () {\n        c();\n      }, 100)) : c());\n    }), r(\"init update resize\", function () {\n      s.params.virtual.enabled && s.params.cssMode && u(s.wrapperEl, \"--swiper-virtual-size\", \"\".concat(s.virtualSize, \"px\"));\n    }), Object.assign(s.virtual, {\n      appendSlide: function appendSlide(e) {\n        if (\"object\" == _typeof(e) && \"length\" in e) for (var _t34 = 0; _t34 < e.length; _t34 += 1) e[_t34] && s.virtual.slides.push(e[_t34]);else s.virtual.slides.push(e);\n        c(!0);\n      },\n      prependSlide: function prependSlide(e) {\n        var t = s.activeIndex;\n        var a = t + 1,\n          i = 1;\n        if (Array.isArray(e)) {\n          for (var _t35 = 0; _t35 < e.length; _t35 += 1) e[_t35] && s.virtual.slides.unshift(e[_t35]);\n          a = t + e.length, i = e.length;\n        } else s.virtual.slides.unshift(e);\n        if (s.params.virtual.cache) {\n          var _e40 = s.virtual.cache,\n            _t36 = {};\n          Object.keys(_e40).forEach(function (s) {\n            var a = _e40[s],\n              r = a.getAttribute(\"data-swiper-slide-index\");\n            r && a.setAttribute(\"data-swiper-slide-index\", parseInt(r, 10) + i), _t36[parseInt(s, 10) + i] = a;\n          }), s.virtual.cache = _t36;\n        }\n        c(!0), s.slideTo(a, 0);\n      },\n      removeSlide: function removeSlide(e) {\n        if (null == e) return;\n        var t = s.activeIndex;\n        if (Array.isArray(e)) for (var _a12 = e.length - 1; _a12 >= 0; _a12 -= 1) s.virtual.slides.splice(e[_a12], 1), s.params.virtual.cache && delete s.virtual.cache[e[_a12]], e[_a12] < t && (t -= 1), t = Math.max(t, 0);else s.virtual.slides.splice(e, 1), s.params.virtual.cache && delete s.virtual.cache[e], e < t && (t -= 1), t = Math.max(t, 0);\n        c(!0), s.slideTo(t, 0);\n      },\n      removeAllSlides: function removeAllSlides() {\n        s.virtual.slides = [], s.params.virtual.cache && (s.virtual.cache = {}), c(!0), s.slideTo(0, 0);\n      },\n      update: c\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      i = e.on,\n      n = e.emit;\n    var l = a(),\n      o = r();\n    function d(e) {\n      if (!t.enabled) return;\n      var s = t.rtlTranslate;\n      var a = e;\n      a.originalEvent && (a = a.originalEvent);\n      var i = a.keyCode || a.charCode,\n        r = t.params.keyboard.pageUpDown,\n        d = r && 33 === i,\n        c = r && 34 === i,\n        p = 37 === i,\n        u = 39 === i,\n        m = 38 === i,\n        h = 40 === i;\n      if (!t.allowSlideNext && (t.isHorizontal() && u || t.isVertical() && h || c)) return !1;\n      if (!t.allowSlidePrev && (t.isHorizontal() && p || t.isVertical() && m || d)) return !1;\n      if (!(a.shiftKey || a.altKey || a.ctrlKey || a.metaKey || l.activeElement && l.activeElement.nodeName && (\"input\" === l.activeElement.nodeName.toLowerCase() || \"textarea\" === l.activeElement.nodeName.toLowerCase()))) {\n        if (t.params.keyboard.onlyInViewport && (d || c || p || u || m || h)) {\n          var _e41 = !1;\n          if (y(t.el, \".\".concat(t.params.slideClass, \", swiper-slide\")).length > 0 && 0 === y(t.el, \".\".concat(t.params.slideActiveClass)).length) return;\n          var _a13 = t.el,\n            _i11 = _a13.clientWidth,\n            _r8 = _a13.clientHeight,\n            _n5 = o.innerWidth,\n            _l4 = o.innerHeight,\n            _d2 = v(_a13);\n          s && (_d2.left -= _a13.scrollLeft);\n          var _c2 = [[_d2.left, _d2.top], [_d2.left + _i11, _d2.top], [_d2.left, _d2.top + _r8], [_d2.left + _i11, _d2.top + _r8]];\n          for (var _t37 = 0; _t37 < _c2.length; _t37 += 1) {\n            var _s24 = _c2[_t37];\n            if (_s24[0] >= 0 && _s24[0] <= _n5 && _s24[1] >= 0 && _s24[1] <= _l4) {\n              if (0 === _s24[0] && 0 === _s24[1]) continue;\n              _e41 = !0;\n            }\n          }\n          if (!_e41) return;\n        }\n        t.isHorizontal() ? ((d || c || p || u) && (a.preventDefault ? a.preventDefault() : a.returnValue = !1), ((c || u) && !s || (d || p) && s) && t.slideNext(), ((d || p) && !s || (c || u) && s) && t.slidePrev()) : ((d || c || m || h) && (a.preventDefault ? a.preventDefault() : a.returnValue = !1), (c || h) && t.slideNext(), (d || m) && t.slidePrev()), n(\"keyPress\", i);\n      }\n    }\n    function c() {\n      t.keyboard.enabled || (l.addEventListener(\"keydown\", d), t.keyboard.enabled = !0);\n    }\n    function p() {\n      t.keyboard.enabled && (l.removeEventListener(\"keydown\", d), t.keyboard.enabled = !1);\n    }\n    t.keyboard = {\n      enabled: !1\n    }, s({\n      keyboard: {\n        enabled: !1,\n        onlyInViewport: !0,\n        pageUpDown: !0\n      }\n    }), i(\"init\", function () {\n      t.params.keyboard.enabled && c();\n    }), i(\"destroy\", function () {\n      t.keyboard.enabled && p();\n    }), Object.assign(t.keyboard, {\n      enable: c,\n      disable: p\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on,\n      i = e.emit;\n    var o = r();\n    var d;\n    s({\n      mousewheel: {\n        enabled: !1,\n        releaseOnEdges: !1,\n        invert: !1,\n        forceToAxis: !1,\n        sensitivity: 1,\n        eventsTarget: \"container\",\n        thresholdDelta: null,\n        thresholdTime: null,\n        noMousewheelClass: \"swiper-no-mousewheel\"\n      }\n    }), t.mousewheel = {\n      enabled: !1\n    };\n    var c,\n      p = l();\n    var u = [];\n    function m() {\n      t.enabled && (t.mouseEntered = !0);\n    }\n    function h() {\n      t.enabled && (t.mouseEntered = !1);\n    }\n    function f(e) {\n      return !(t.params.mousewheel.thresholdDelta && e.delta < t.params.mousewheel.thresholdDelta) && !(t.params.mousewheel.thresholdTime && l() - p < t.params.mousewheel.thresholdTime) && (e.delta >= 6 && l() - p < 60 || (e.direction < 0 ? t.isEnd && !t.params.loop || t.animating || (t.slideNext(), i(\"scroll\", e.raw)) : t.isBeginning && !t.params.loop || t.animating || (t.slidePrev(), i(\"scroll\", e.raw)), p = new o.Date().getTime(), !1));\n    }\n    function g(e) {\n      var s = e,\n        a = !0;\n      if (!t.enabled) return;\n      if (e.target.closest(\".\".concat(t.params.mousewheel.noMousewheelClass))) return;\n      var r = t.params.mousewheel;\n      t.params.cssMode && s.preventDefault();\n      var o = t.el;\n      \"container\" !== t.params.mousewheel.eventsTarget && (o = document.querySelector(t.params.mousewheel.eventsTarget));\n      var p = o && o.contains(s.target);\n      if (!t.mouseEntered && !p && !r.releaseOnEdges) return !0;\n      s.originalEvent && (s = s.originalEvent);\n      var m = 0;\n      var h = t.rtlTranslate ? -1 : 1,\n        g = function (e) {\n          var t = 0,\n            s = 0,\n            a = 0,\n            i = 0;\n          return \"detail\" in e && (s = e.detail), \"wheelDelta\" in e && (s = -e.wheelDelta / 120), \"wheelDeltaY\" in e && (s = -e.wheelDeltaY / 120), \"wheelDeltaX\" in e && (t = -e.wheelDeltaX / 120), \"axis\" in e && e.axis === e.HORIZONTAL_AXIS && (t = s, s = 0), a = 10 * t, i = 10 * s, \"deltaY\" in e && (i = e.deltaY), \"deltaX\" in e && (a = e.deltaX), e.shiftKey && !a && (a = i, i = 0), (a || i) && e.deltaMode && (1 === e.deltaMode ? (a *= 40, i *= 40) : (a *= 800, i *= 800)), a && !t && (t = a < 1 ? -1 : 1), i && !s && (s = i < 1 ? -1 : 1), {\n            spinX: t,\n            spinY: s,\n            pixelX: a,\n            pixelY: i\n          };\n        }(s);\n      if (r.forceToAxis) {\n        if (t.isHorizontal()) {\n          if (!(Math.abs(g.pixelX) > Math.abs(g.pixelY))) return !0;\n          m = -g.pixelX * h;\n        } else {\n          if (!(Math.abs(g.pixelY) > Math.abs(g.pixelX))) return !0;\n          m = -g.pixelY;\n        }\n      } else m = Math.abs(g.pixelX) > Math.abs(g.pixelY) ? -g.pixelX * h : -g.pixelY;\n      if (0 === m) return !0;\n      r.invert && (m = -m);\n      var v = t.getTranslate() + m * r.sensitivity;\n      if (v >= t.minTranslate() && (v = t.minTranslate()), v <= t.maxTranslate() && (v = t.maxTranslate()), a = !!t.params.loop || !(v === t.minTranslate() || v === t.maxTranslate()), a && t.params.nested && s.stopPropagation(), t.params.freeMode && t.params.freeMode.enabled) {\n        var _e42 = {\n            time: l(),\n            delta: Math.abs(m),\n            direction: Math.sign(m)\n          },\n          _a14 = c && _e42.time < c.time + 500 && _e42.delta <= c.delta && _e42.direction === c.direction;\n        if (!_a14) {\n          c = void 0;\n          var _l5 = t.getTranslate() + m * r.sensitivity;\n          var _o5 = t.isBeginning,\n            _p2 = t.isEnd;\n          if (_l5 >= t.minTranslate() && (_l5 = t.minTranslate()), _l5 <= t.maxTranslate() && (_l5 = t.maxTranslate()), t.setTransition(0), t.setTranslate(_l5), t.updateProgress(), t.updateActiveIndex(), t.updateSlidesClasses(), (!_o5 && t.isBeginning || !_p2 && t.isEnd) && t.updateSlidesClasses(), t.params.loop && t.loopFix({\n            direction: _e42.direction < 0 ? \"next\" : \"prev\",\n            byMousewheel: !0\n          }), t.params.freeMode.sticky) {\n            clearTimeout(d), d = void 0, u.length >= 15 && u.shift();\n            var _s25 = u.length ? u[u.length - 1] : void 0,\n              _a15 = u[0];\n            if (u.push(_e42), _s25 && (_e42.delta > _s25.delta || _e42.direction !== _s25.direction)) u.splice(0);else if (u.length >= 15 && _e42.time - _a15.time < 500 && _a15.delta - _e42.delta >= 1 && _e42.delta <= 6) {\n              var _s26 = m > 0 ? .8 : .2;\n              c = _e42, u.splice(0), d = n(function () {\n                t.slideToClosest(t.params.speed, !0, void 0, _s26);\n              }, 0);\n            }\n            d || (d = n(function () {\n              c = _e42, u.splice(0), t.slideToClosest(t.params.speed, !0, void 0, .5);\n            }, 500));\n          }\n          if (_a14 || i(\"scroll\", s), t.params.autoplay && t.params.autoplayDisableOnInteraction && t.autoplay.stop(), _l5 === t.minTranslate() || _l5 === t.maxTranslate()) return !0;\n        }\n      } else {\n        var _s27 = {\n          time: l(),\n          delta: Math.abs(m),\n          direction: Math.sign(m),\n          raw: e\n        };\n        u.length >= 2 && u.shift();\n        var _a16 = u.length ? u[u.length - 1] : void 0;\n        if (u.push(_s27), _a16 ? (_s27.direction !== _a16.direction || _s27.delta > _a16.delta || _s27.time > _a16.time + 150) && f(_s27) : f(_s27), function (e) {\n          var s = t.params.mousewheel;\n          if (e.direction < 0) {\n            if (t.isEnd && !t.params.loop && s.releaseOnEdges) return !0;\n          } else if (t.isBeginning && !t.params.loop && s.releaseOnEdges) return !0;\n          return !1;\n        }(_s27)) return !0;\n      }\n      return s.preventDefault ? s.preventDefault() : s.returnValue = !1, !1;\n    }\n    function v(e) {\n      var s = t.el;\n      \"container\" !== t.params.mousewheel.eventsTarget && (s = document.querySelector(t.params.mousewheel.eventsTarget)), s[e](\"mouseenter\", m), s[e](\"mouseleave\", h), s[e](\"wheel\", g);\n    }\n    function w() {\n      return t.params.cssMode ? (t.wrapperEl.removeEventListener(\"wheel\", g), !0) : !t.mousewheel.enabled && (v(\"addEventListener\"), t.mousewheel.enabled = !0, !0);\n    }\n    function b() {\n      return t.params.cssMode ? (t.wrapperEl.addEventListener(event, g), !0) : !!t.mousewheel.enabled && (v(\"removeEventListener\"), t.mousewheel.enabled = !1, !0);\n    }\n    a(\"init\", function () {\n      !t.params.mousewheel.enabled && t.params.cssMode && b(), t.params.mousewheel.enabled && w();\n    }), a(\"destroy\", function () {\n      t.params.cssMode && w(), t.mousewheel.enabled && b();\n    }), Object.assign(t.mousewheel, {\n      enable: w,\n      disable: b\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on,\n      i = e.emit;\n    s({\n      navigation: {\n        nextEl: null,\n        prevEl: null,\n        hideOnClick: !1,\n        disabledClass: \"swiper-button-disabled\",\n        hiddenClass: \"swiper-button-hidden\",\n        lockClass: \"swiper-button-lock\",\n        navigationDisabledClass: \"swiper-navigation-disabled\"\n      }\n    }), t.navigation = {\n      nextEl: null,\n      prevEl: null\n    };\n    var r = function r(e) {\n      return Array.isArray(e) || (e = [e].filter(function (e) {\n        return !!e;\n      })), e;\n    };\n    function n(e) {\n      var s;\n      return e && \"string\" == typeof e && t.isElement && (s = t.el.shadowRoot.querySelector(e), s) ? s : (e && (\"string\" == typeof e && (s = _toConsumableArray(document.querySelectorAll(e))), t.params.uniqueNavElements && \"string\" == typeof e && s.length > 1 && 1 === t.el.querySelectorAll(e).length && (s = t.el.querySelector(e))), e && !s ? e : s);\n    }\n    function l(e, s) {\n      var a = t.params.navigation;\n      (e = r(e)).forEach(function (e) {\n        var _e$classList2;\n        e && ((_e$classList2 = e.classList)[s ? \"add\" : \"remove\"].apply(_e$classList2, _toConsumableArray(a.disabledClass.split(\" \"))), \"BUTTON\" === e.tagName && (e.disabled = s), t.params.watchOverflow && t.enabled && e.classList[t.isLocked ? \"add\" : \"remove\"](a.lockClass));\n      });\n    }\n    function o() {\n      var _t$navigation = t.navigation,\n        e = _t$navigation.nextEl,\n        s = _t$navigation.prevEl;\n      if (t.params.loop) return l(s, !1), void l(e, !1);\n      l(s, t.isBeginning && !t.params.rewind), l(e, t.isEnd && !t.params.rewind);\n    }\n    function d(e) {\n      e.preventDefault(), (!t.isBeginning || t.params.loop || t.params.rewind) && (t.slidePrev(), i(\"navigationPrev\"));\n    }\n    function c(e) {\n      e.preventDefault(), (!t.isEnd || t.params.loop || t.params.rewind) && (t.slideNext(), i(\"navigationNext\"));\n    }\n    function p() {\n      var e = t.params.navigation;\n      if (t.params.navigation = ee(t, t.originalParams.navigation, t.params.navigation, {\n        nextEl: \"swiper-button-next\",\n        prevEl: \"swiper-button-prev\"\n      }), !e.nextEl && !e.prevEl) return;\n      var s = n(e.nextEl),\n        a = n(e.prevEl);\n      Object.assign(t.navigation, {\n        nextEl: s,\n        prevEl: a\n      }), s = r(s), a = r(a);\n      var i = function i(s, a) {\n        var _s$classList2;\n        s && s.addEventListener(\"click\", \"next\" === a ? c : d), !t.enabled && s && (_s$classList2 = s.classList).add.apply(_s$classList2, _toConsumableArray(e.lockClass.split(\" \")));\n      };\n      s.forEach(function (e) {\n        return i(e, \"next\");\n      }), a.forEach(function (e) {\n        return i(e, \"prev\");\n      });\n    }\n    function u() {\n      var _t$navigation2 = t.navigation,\n        e = _t$navigation2.nextEl,\n        s = _t$navigation2.prevEl;\n      e = r(e), s = r(s);\n      var a = function a(e, s) {\n        var _e$classList3;\n        e.removeEventListener(\"click\", \"next\" === s ? c : d), (_e$classList3 = e.classList).remove.apply(_e$classList3, _toConsumableArray(t.params.navigation.disabledClass.split(\" \")));\n      };\n      e.forEach(function (e) {\n        return a(e, \"next\");\n      }), s.forEach(function (e) {\n        return a(e, \"prev\");\n      });\n    }\n    a(\"init\", function () {\n      !1 === t.params.navigation.enabled ? m() : (p(), o());\n    }), a(\"toEdge fromEdge lock unlock\", function () {\n      o();\n    }), a(\"destroy\", function () {\n      u();\n    }), a(\"enable disable\", function () {\n      var _t$navigation3 = t.navigation,\n        e = _t$navigation3.nextEl,\n        s = _t$navigation3.prevEl;\n      e = r(e), s = r(s), [].concat(_toConsumableArray(e), _toConsumableArray(s)).filter(function (e) {\n        return !!e;\n      }).forEach(function (e) {\n        return e.classList[t.enabled ? \"remove\" : \"add\"](t.params.navigation.lockClass);\n      });\n    }), a(\"click\", function (e, s) {\n      var _t$navigation4 = t.navigation,\n        a = _t$navigation4.nextEl,\n        n = _t$navigation4.prevEl;\n      a = r(a), n = r(n);\n      var l = s.target;\n      if (t.params.navigation.hideOnClick && !n.includes(l) && !a.includes(l)) {\n        if (t.pagination && t.params.pagination && t.params.pagination.clickable && (t.pagination.el === l || t.pagination.el.contains(l))) return;\n        var _e43;\n        a.length ? _e43 = a[0].classList.contains(t.params.navigation.hiddenClass) : n.length && (_e43 = n[0].classList.contains(t.params.navigation.hiddenClass)), i(!0 === _e43 ? \"navigationShow\" : \"navigationHide\"), [].concat(_toConsumableArray(a), _toConsumableArray(n)).filter(function (e) {\n          return !!e;\n        }).forEach(function (e) {\n          return e.classList.toggle(t.params.navigation.hiddenClass);\n        });\n      }\n    });\n    var m = function m() {\n      var _t$el$classList;\n      (_t$el$classList = t.el.classList).add.apply(_t$el$classList, _toConsumableArray(t.params.navigation.navigationDisabledClass.split(\" \"))), u();\n    };\n    Object.assign(t.navigation, {\n      enable: function enable() {\n        var _t$el$classList2;\n        (_t$el$classList2 = t.el.classList).remove.apply(_t$el$classList2, _toConsumableArray(t.params.navigation.navigationDisabledClass.split(\" \"))), p(), o();\n      },\n      disable: m,\n      update: o,\n      init: p,\n      destroy: u\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on,\n      i = e.emit;\n    var r = \"swiper-pagination\";\n    var n;\n    s({\n      pagination: {\n        el: null,\n        bulletElement: \"span\",\n        clickable: !1,\n        hideOnClick: !1,\n        renderBullet: null,\n        renderProgressbar: null,\n        renderFraction: null,\n        renderCustom: null,\n        progressbarOpposite: !1,\n        type: \"bullets\",\n        dynamicBullets: !1,\n        dynamicMainBullets: 1,\n        formatFractionCurrent: function formatFractionCurrent(e) {\n          return e;\n        },\n        formatFractionTotal: function formatFractionTotal(e) {\n          return e;\n        },\n        bulletClass: \"\".concat(r, \"-bullet\"),\n        bulletActiveClass: \"\".concat(r, \"-bullet-active\"),\n        modifierClass: \"\".concat(r, \"-\"),\n        currentClass: \"\".concat(r, \"-current\"),\n        totalClass: \"\".concat(r, \"-total\"),\n        hiddenClass: \"\".concat(r, \"-hidden\"),\n        progressbarFillClass: \"\".concat(r, \"-progressbar-fill\"),\n        progressbarOppositeClass: \"\".concat(r, \"-progressbar-opposite\"),\n        clickableClass: \"\".concat(r, \"-clickable\"),\n        lockClass: \"\".concat(r, \"-lock\"),\n        horizontalClass: \"\".concat(r, \"-horizontal\"),\n        verticalClass: \"\".concat(r, \"-vertical\"),\n        paginationDisabledClass: \"\".concat(r, \"-disabled\")\n      }\n    }), t.pagination = {\n      el: null,\n      bullets: []\n    };\n    var l = 0;\n    var o = function o(e) {\n      return Array.isArray(e) || (e = [e].filter(function (e) {\n        return !!e;\n      })), e;\n    };\n    function d() {\n      return !t.params.pagination.el || !t.pagination.el || Array.isArray(t.pagination.el) && 0 === t.pagination.el.length;\n    }\n    function c(e, s) {\n      var a = t.params.pagination.bulletActiveClass;\n      e && (e = e[(\"prev\" === s ? \"previous\" : \"next\") + \"ElementSibling\"]) && (e.classList.add(\"\".concat(a, \"-\").concat(s)), (e = e[(\"prev\" === s ? \"previous\" : \"next\") + \"ElementSibling\"]) && e.classList.add(\"\".concat(a, \"-\").concat(s, \"-\").concat(s)));\n    }\n    function p(e) {\n      var s = e.target.closest(te(t.params.pagination.bulletClass));\n      if (!s) return;\n      e.preventDefault();\n      var a = b(s) * t.params.slidesPerGroup;\n      if (t.params.loop) {\n        if (t.realIndex === a) return;\n        var _e44 = t.getSlideIndexByData(a),\n          _s28 = t.getSlideIndexByData(t.realIndex);\n        _e44 > t.slides.length - t.loopedSlides && t.loopFix({\n          direction: _e44 > _s28 ? \"next\" : \"prev\",\n          activeSlideIndex: _e44,\n          slideTo: !1\n        }), t.slideToLoop(a);\n      } else t.slideTo(a);\n    }\n    function u() {\n      var e = t.rtl,\n        s = t.params.pagination;\n      if (d()) return;\n      var a,\n        r,\n        p = t.pagination.el;\n      p = o(p);\n      var u = t.virtual && t.params.virtual.enabled ? t.virtual.slides.length : t.slides.length,\n        m = t.params.loop ? Math.ceil(u / t.params.slidesPerGroup) : t.snapGrid.length;\n      if (t.params.loop ? (r = t.previousRealIndex || 0, a = t.params.slidesPerGroup > 1 ? Math.floor(t.realIndex / t.params.slidesPerGroup) : t.realIndex) : void 0 !== t.snapIndex ? (a = t.snapIndex, r = t.previousSnapIndex) : (r = t.previousIndex || 0, a = t.activeIndex || 0), \"bullets\" === s.type && t.pagination.bullets && t.pagination.bullets.length > 0) {\n        var _i12 = t.pagination.bullets;\n        var _o6, _d3, _u2;\n        if (s.dynamicBullets && (n = x(_i12[0], t.isHorizontal() ? \"width\" : \"height\", !0), p.forEach(function (e) {\n          e.style[t.isHorizontal() ? \"width\" : \"height\"] = n * (s.dynamicMainBullets + 4) + \"px\";\n        }), s.dynamicMainBullets > 1 && void 0 !== r && (l += a - (r || 0), l > s.dynamicMainBullets - 1 ? l = s.dynamicMainBullets - 1 : l < 0 && (l = 0)), _o6 = Math.max(a - l, 0), _d3 = _o6 + (Math.min(_i12.length, s.dynamicMainBullets) - 1), _u2 = (_d3 + _o6) / 2), _i12.forEach(function (e) {\n          var _e$classList4;\n          var t = _toConsumableArray([\"\", \"-next\", \"-next-next\", \"-prev\", \"-prev-prev\", \"-main\"].map(function (e) {\n            return \"\".concat(s.bulletActiveClass).concat(e);\n          })).map(function (e) {\n            return \"string\" == typeof e && e.includes(\" \") ? e.split(\" \") : e;\n          }).flat();\n          (_e$classList4 = e.classList).remove.apply(_e$classList4, _toConsumableArray(t));\n        }), p.length > 1) _i12.forEach(function (e) {\n          var _e$classList5, _e$classList6;\n          var i = b(e);\n          i === a ? (_e$classList5 = e.classList).add.apply(_e$classList5, _toConsumableArray(s.bulletActiveClass.split(\" \"))) : t.isElement && e.setAttribute(\"part\", \"bullet\"), s.dynamicBullets && (i >= _o6 && i <= _d3 && (_e$classList6 = e.classList).add.apply(_e$classList6, _toConsumableArray(\"\".concat(s.bulletActiveClass, \"-main\").split(\" \"))), i === _o6 && c(e, \"prev\"), i === _d3 && c(e, \"next\"));\n        });else {\n          var _e45$classList;\n          var _e45 = _i12[a];\n          if (_e45 && (_e45$classList = _e45.classList).add.apply(_e45$classList, _toConsumableArray(s.bulletActiveClass.split(\" \"))), t.isElement && _i12.forEach(function (e, t) {\n            e.setAttribute(\"part\", t === a ? \"bullet-active\" : \"bullet\");\n          }), s.dynamicBullets) {\n            var _e46 = _i12[_o6],\n              _t38 = _i12[_d3];\n            for (var _e47 = _o6; _e47 <= _d3; _e47 += 1) {\n              var _i12$_e47$classList;\n              _i12[_e47] && (_i12$_e47$classList = _i12[_e47].classList).add.apply(_i12$_e47$classList, _toConsumableArray(\"\".concat(s.bulletActiveClass, \"-main\").split(\" \")));\n            }\n            c(_e46, \"prev\"), c(_t38, \"next\");\n          }\n        }\n        if (s.dynamicBullets) {\n          var _a17 = Math.min(_i12.length, s.dynamicMainBullets + 4),\n            _r9 = (n * _a17 - n) / 2 - _u2 * n,\n            _l6 = e ? \"right\" : \"left\";\n          _i12.forEach(function (e) {\n            e.style[t.isHorizontal() ? _l6 : \"top\"] = \"\".concat(_r9, \"px\");\n          });\n        }\n      }\n      p.forEach(function (e, r) {\n        if (\"fraction\" === s.type && (e.querySelectorAll(te(s.currentClass)).forEach(function (e) {\n          e.textContent = s.formatFractionCurrent(a + 1);\n        }), e.querySelectorAll(te(s.totalClass)).forEach(function (e) {\n          e.textContent = s.formatFractionTotal(m);\n        })), \"progressbar\" === s.type) {\n          var _i13;\n          _i13 = s.progressbarOpposite ? t.isHorizontal() ? \"vertical\" : \"horizontal\" : t.isHorizontal() ? \"horizontal\" : \"vertical\";\n          var _r10 = (a + 1) / m;\n          var _n6 = 1,\n            _l7 = 1;\n          \"horizontal\" === _i13 ? _n6 = _r10 : _l7 = _r10, e.querySelectorAll(te(s.progressbarFillClass)).forEach(function (e) {\n            e.style.transform = \"translate3d(0,0,0) scaleX(\".concat(_n6, \") scaleY(\").concat(_l7, \")\"), e.style.transitionDuration = \"\".concat(t.params.speed, \"ms\");\n          });\n        }\n        \"custom\" === s.type && s.renderCustom ? (e.innerHTML = s.renderCustom(t, a + 1, m), 0 === r && i(\"paginationRender\", e)) : (0 === r && i(\"paginationRender\", e), i(\"paginationUpdate\", e)), t.params.watchOverflow && t.enabled && e.classList[t.isLocked ? \"add\" : \"remove\"](s.lockClass);\n      });\n    }\n    function m() {\n      var e = t.params.pagination;\n      if (d()) return;\n      var s = t.virtual && t.params.virtual.enabled ? t.virtual.slides.length : t.slides.length;\n      var a = t.pagination.el;\n      a = o(a);\n      var r = \"\";\n      if (\"bullets\" === e.type) {\n        var _a18 = t.params.loop ? Math.ceil(s / t.params.slidesPerGroup) : t.snapGrid.length;\n        t.params.freeMode && t.params.freeMode.enabled && _a18 > s && (_a18 = s);\n        for (var _s29 = 0; _s29 < _a18; _s29 += 1) e.renderBullet ? r += e.renderBullet.call(t, _s29, e.bulletClass) : r += \"<\".concat(e.bulletElement, \" \").concat(t.isElement ? 'part=\"bullet\"' : \"\", \" class=\\\"\").concat(e.bulletClass, \"\\\"></\").concat(e.bulletElement, \">\");\n      }\n      \"fraction\" === e.type && (r = e.renderFraction ? e.renderFraction.call(t, e.currentClass, e.totalClass) : \"<span class=\\\"\".concat(e.currentClass, \"\\\"></span> / <span class=\\\"\").concat(e.totalClass, \"\\\"></span>\")), \"progressbar\" === e.type && (r = e.renderProgressbar ? e.renderProgressbar.call(t, e.progressbarFillClass) : \"<span class=\\\"\".concat(e.progressbarFillClass, \"\\\"></span>\")), t.pagination.bullets = [], a.forEach(function (s) {\n        var _t$pagination$bullets;\n        \"custom\" !== e.type && (s.innerHTML = r || \"\"), \"bullets\" === e.type && (_t$pagination$bullets = t.pagination.bullets).push.apply(_t$pagination$bullets, _toConsumableArray(s.querySelectorAll(te(e.bulletClass))));\n      }), \"custom\" !== e.type && i(\"paginationRender\", a[0]);\n    }\n    function h() {\n      t.params.pagination = ee(t, t.originalParams.pagination, t.params.pagination, {\n        el: \"swiper-pagination\"\n      });\n      var e = t.params.pagination;\n      if (!e.el) return;\n      var s;\n      \"string\" == typeof e.el && t.isElement && (s = t.el.shadowRoot.querySelector(e.el)), s || \"string\" != typeof e.el || (s = _toConsumableArray(document.querySelectorAll(e.el))), s || (s = e.el), s && 0 !== s.length && (t.params.uniqueNavElements && \"string\" == typeof e.el && Array.isArray(s) && s.length > 1 && (s = _toConsumableArray(t.el.querySelectorAll(e.el)), s.length > 1 && (s = s.filter(function (e) {\n        return y(e, \".swiper\")[0] === t.el;\n      })[0])), Array.isArray(s) && 1 === s.length && (s = s[0]), Object.assign(t.pagination, {\n        el: s\n      }), s = o(s), s.forEach(function (s) {\n        \"bullets\" === e.type && e.clickable && s.classList.add(e.clickableClass), s.classList.add(e.modifierClass + e.type), s.classList.add(t.isHorizontal() ? e.horizontalClass : e.verticalClass), \"bullets\" === e.type && e.dynamicBullets && (s.classList.add(\"\".concat(e.modifierClass).concat(e.type, \"-dynamic\")), l = 0, e.dynamicMainBullets < 1 && (e.dynamicMainBullets = 1)), \"progressbar\" === e.type && e.progressbarOpposite && s.classList.add(e.progressbarOppositeClass), e.clickable && s.addEventListener(\"click\", p), t.enabled || s.classList.add(e.lockClass);\n      }));\n    }\n    function f() {\n      var e = t.params.pagination;\n      if (d()) return;\n      var s = t.pagination.el;\n      s && (s = o(s), s.forEach(function (s) {\n        s.classList.remove(e.hiddenClass), s.classList.remove(e.modifierClass + e.type), s.classList.remove(t.isHorizontal() ? e.horizontalClass : e.verticalClass), e.clickable && s.removeEventListener(\"click\", p);\n      })), t.pagination.bullets && t.pagination.bullets.forEach(function (t) {\n        var _t$classList;\n        return (_t$classList = t.classList).remove.apply(_t$classList, _toConsumableArray(e.bulletActiveClass.split(\" \")));\n      });\n    }\n    a(\"changeDirection\", function () {\n      if (!t.pagination || !t.pagination.el) return;\n      var e = t.params.pagination;\n      var s = t.pagination.el;\n      s = o(s), s.forEach(function (s) {\n        s.classList.remove(e.horizontalClass, e.verticalClass), s.classList.add(t.isHorizontal() ? e.horizontalClass : e.verticalClass);\n      });\n    }), a(\"init\", function () {\n      !1 === t.params.pagination.enabled ? g() : (h(), m(), u());\n    }), a(\"activeIndexChange\", function () {\n      void 0 === t.snapIndex && u();\n    }), a(\"snapIndexChange\", function () {\n      u();\n    }), a(\"snapGridLengthChange\", function () {\n      m(), u();\n    }), a(\"destroy\", function () {\n      f();\n    }), a(\"enable disable\", function () {\n      var e = t.pagination.el;\n      e && (e = o(e), e.forEach(function (e) {\n        return e.classList[t.enabled ? \"remove\" : \"add\"](t.params.pagination.lockClass);\n      }));\n    }), a(\"lock unlock\", function () {\n      u();\n    }), a(\"click\", function (e, s) {\n      var a = s.target;\n      var r = t.pagination.el;\n      if (Array.isArray(r) || (r = [r].filter(function (e) {\n        return !!e;\n      })), t.params.pagination.el && t.params.pagination.hideOnClick && r && r.length > 0 && !a.classList.contains(t.params.pagination.bulletClass)) {\n        if (t.navigation && (t.navigation.nextEl && a === t.navigation.nextEl || t.navigation.prevEl && a === t.navigation.prevEl)) return;\n        var _e48 = r[0].classList.contains(t.params.pagination.hiddenClass);\n        i(!0 === _e48 ? \"paginationShow\" : \"paginationHide\"), r.forEach(function (e) {\n          return e.classList.toggle(t.params.pagination.hiddenClass);\n        });\n      }\n    });\n    var g = function g() {\n      t.el.classList.add(t.params.pagination.paginationDisabledClass);\n      var e = t.pagination.el;\n      e && (e = o(e), e.forEach(function (e) {\n        return e.classList.add(t.params.pagination.paginationDisabledClass);\n      })), f();\n    };\n    Object.assign(t.pagination, {\n      enable: function enable() {\n        t.el.classList.remove(t.params.pagination.paginationDisabledClass);\n        var e = t.pagination.el;\n        e && (e = o(e), e.forEach(function (e) {\n          return e.classList.remove(t.params.pagination.paginationDisabledClass);\n        })), h(), m(), u();\n      },\n      disable: g,\n      render: m,\n      update: u,\n      init: h,\n      destroy: f\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      i = e.on,\n      r = e.emit;\n    var l = a();\n    var o,\n      d,\n      c,\n      p,\n      u = !1,\n      m = null,\n      h = null;\n    function f() {\n      if (!t.params.scrollbar.el || !t.scrollbar.el) return;\n      var e = t.scrollbar,\n        s = t.rtlTranslate,\n        a = e.dragEl,\n        i = e.el,\n        r = t.params.scrollbar,\n        n = t.params.loop ? t.progressLoop : t.progress;\n      var l = d,\n        o = (c - d) * n;\n      s ? (o = -o, o > 0 ? (l = d - o, o = 0) : -o + d > c && (l = c + o)) : o < 0 ? (l = d + o, o = 0) : o + d > c && (l = c - o), t.isHorizontal() ? (a.style.transform = \"translate3d(\".concat(o, \"px, 0, 0)\"), a.style.width = \"\".concat(l, \"px\")) : (a.style.transform = \"translate3d(0px, \".concat(o, \"px, 0)\"), a.style.height = \"\".concat(l, \"px\")), r.hide && (clearTimeout(m), i.style.opacity = 1, m = setTimeout(function () {\n        i.style.opacity = 0, i.style.transitionDuration = \"400ms\";\n      }, 1e3));\n    }\n    function w() {\n      if (!t.params.scrollbar.el || !t.scrollbar.el) return;\n      var e = t.scrollbar,\n        s = e.dragEl,\n        a = e.el;\n      s.style.width = \"\", s.style.height = \"\", c = t.isHorizontal() ? a.offsetWidth : a.offsetHeight, p = t.size / (t.virtualSize + t.params.slidesOffsetBefore - (t.params.centeredSlides ? t.snapGrid[0] : 0)), d = \"auto\" === t.params.scrollbar.dragSize ? c * p : parseInt(t.params.scrollbar.dragSize, 10), t.isHorizontal() ? s.style.width = \"\".concat(d, \"px\") : s.style.height = \"\".concat(d, \"px\"), a.style.display = p >= 1 ? \"none\" : \"\", t.params.scrollbar.hide && (a.style.opacity = 0), t.params.watchOverflow && t.enabled && e.el.classList[t.isLocked ? \"add\" : \"remove\"](t.params.scrollbar.lockClass);\n    }\n    function b(e) {\n      return t.isHorizontal() ? e.clientX : e.clientY;\n    }\n    function y(e) {\n      var s = t.scrollbar,\n        a = t.rtlTranslate,\n        i = s.el;\n      var r;\n      r = (b(e) - v(i)[t.isHorizontal() ? \"left\" : \"top\"] - (null !== o ? o : d / 2)) / (c - d), r = Math.max(Math.min(r, 1), 0), a && (r = 1 - r);\n      var n = t.minTranslate() + (t.maxTranslate() - t.minTranslate()) * r;\n      t.updateProgress(n), t.setTranslate(n), t.updateActiveIndex(), t.updateSlidesClasses();\n    }\n    function E(e) {\n      var s = t.params.scrollbar,\n        a = t.scrollbar,\n        i = t.wrapperEl,\n        n = a.el,\n        l = a.dragEl;\n      u = !0, o = e.target === l ? b(e) - e.target.getBoundingClientRect()[t.isHorizontal() ? \"left\" : \"top\"] : null, e.preventDefault(), e.stopPropagation(), i.style.transitionDuration = \"100ms\", l.style.transitionDuration = \"100ms\", y(e), clearTimeout(h), n.style.transitionDuration = \"0ms\", s.hide && (n.style.opacity = 1), t.params.cssMode && (t.wrapperEl.style[\"scroll-snap-type\"] = \"none\"), r(\"scrollbarDragStart\", e);\n    }\n    function x(e) {\n      var s = t.scrollbar,\n        a = t.wrapperEl,\n        i = s.el,\n        n = s.dragEl;\n      u && (e.preventDefault ? e.preventDefault() : e.returnValue = !1, y(e), a.style.transitionDuration = \"0ms\", i.style.transitionDuration = \"0ms\", n.style.transitionDuration = \"0ms\", r(\"scrollbarDragMove\", e));\n    }\n    function S(e) {\n      var s = t.params.scrollbar,\n        a = t.scrollbar,\n        i = t.wrapperEl,\n        l = a.el;\n      u && (u = !1, t.params.cssMode && (t.wrapperEl.style[\"scroll-snap-type\"] = \"\", i.style.transitionDuration = \"\"), s.hide && (clearTimeout(h), h = n(function () {\n        l.style.opacity = 0, l.style.transitionDuration = \"400ms\";\n      }, 1e3)), r(\"scrollbarDragEnd\", e), s.snapOnRelease && t.slideToClosest());\n    }\n    function T(e) {\n      var s = t.scrollbar,\n        a = t.params,\n        i = s.el;\n      if (!i) return;\n      var r = i,\n        n = !!a.passiveListeners && {\n          passive: !1,\n          capture: !1\n        },\n        o = !!a.passiveListeners && {\n          passive: !0,\n          capture: !1\n        };\n      if (!r) return;\n      var d = \"on\" === e ? \"addEventListener\" : \"removeEventListener\";\n      r[d](\"pointerdown\", E, n), l[d](\"pointermove\", x, n), l[d](\"pointerup\", S, o);\n    }\n    function M() {\n      var e = t.scrollbar,\n        s = t.el;\n      t.params.scrollbar = ee(t, t.originalParams.scrollbar, t.params.scrollbar, {\n        el: \"swiper-scrollbar\"\n      });\n      var a = t.params.scrollbar;\n      if (!a.el) return;\n      var i, r;\n      \"string\" == typeof a.el && t.isElement && (i = t.el.shadowRoot.querySelector(a.el)), i || \"string\" != typeof a.el ? i || (i = a.el) : i = l.querySelectorAll(a.el), t.params.uniqueNavElements && \"string\" == typeof a.el && i.length > 1 && 1 === s.querySelectorAll(a.el).length && (i = s.querySelector(a.el)), i.length > 0 && (i = i[0]), i.classList.add(t.isHorizontal() ? a.horizontalClass : a.verticalClass), i && (r = i.querySelector(\".\".concat(t.params.scrollbar.dragClass)), r || (r = g(\"div\", t.params.scrollbar.dragClass), i.append(r))), Object.assign(e, {\n        el: i,\n        dragEl: r\n      }), a.draggable && t.params.scrollbar.el && t.scrollbar.el && T(\"on\"), i && i.classList[t.enabled ? \"remove\" : \"add\"](t.params.scrollbar.lockClass);\n    }\n    function C() {\n      var e = t.params.scrollbar,\n        s = t.scrollbar.el;\n      s && s.classList.remove(t.isHorizontal() ? e.horizontalClass : e.verticalClass), t.params.scrollbar.el && t.scrollbar.el && T(\"off\");\n    }\n    s({\n      scrollbar: {\n        el: null,\n        dragSize: \"auto\",\n        hide: !1,\n        draggable: !1,\n        snapOnRelease: !0,\n        lockClass: \"swiper-scrollbar-lock\",\n        dragClass: \"swiper-scrollbar-drag\",\n        scrollbarDisabledClass: \"swiper-scrollbar-disabled\",\n        horizontalClass: \"swiper-scrollbar-horizontal\",\n        verticalClass: \"swiper-scrollbar-vertical\"\n      }\n    }), t.scrollbar = {\n      el: null,\n      dragEl: null\n    }, i(\"init\", function () {\n      !1 === t.params.scrollbar.enabled ? P() : (M(), w(), f());\n    }), i(\"update resize observerUpdate lock unlock\", function () {\n      w();\n    }), i(\"setTranslate\", function () {\n      f();\n    }), i(\"setTransition\", function (e, s) {\n      !function (e) {\n        t.params.scrollbar.el && t.scrollbar.el && (t.scrollbar.dragEl.style.transitionDuration = \"\".concat(e, \"ms\"));\n      }(s);\n    }), i(\"enable disable\", function () {\n      var e = t.scrollbar.el;\n      e && e.classList[t.enabled ? \"remove\" : \"add\"](t.params.scrollbar.lockClass);\n    }), i(\"destroy\", function () {\n      C();\n    });\n    var P = function P() {\n      t.el.classList.add(t.params.scrollbar.scrollbarDisabledClass), t.scrollbar.el && t.scrollbar.el.classList.add(t.params.scrollbar.scrollbarDisabledClass), C();\n    };\n    Object.assign(t.scrollbar, {\n      enable: function enable() {\n        t.el.classList.remove(t.params.scrollbar.scrollbarDisabledClass), t.scrollbar.el && t.scrollbar.el.classList.remove(t.params.scrollbar.scrollbarDisabledClass), M(), w(), f();\n      },\n      disable: P,\n      updateSize: w,\n      setTranslate: f,\n      init: M,\n      destroy: C\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      parallax: {\n        enabled: !1\n      }\n    });\n    var i = function i(e, s) {\n        var a = t.rtl,\n          i = a ? -1 : 1,\n          r = e.getAttribute(\"data-swiper-parallax\") || \"0\";\n        var n = e.getAttribute(\"data-swiper-parallax-x\"),\n          l = e.getAttribute(\"data-swiper-parallax-y\");\n        var o = e.getAttribute(\"data-swiper-parallax-scale\"),\n          d = e.getAttribute(\"data-swiper-parallax-opacity\"),\n          c = e.getAttribute(\"data-swiper-parallax-rotate\");\n        if (n || l ? (n = n || \"0\", l = l || \"0\") : t.isHorizontal() ? (n = r, l = \"0\") : (l = r, n = \"0\"), n = n.indexOf(\"%\") >= 0 ? parseInt(n, 10) * s * i + \"%\" : n * s * i + \"px\", l = l.indexOf(\"%\") >= 0 ? parseInt(l, 10) * s + \"%\" : l * s + \"px\", null != d) {\n          var _t39 = d - (d - 1) * (1 - Math.abs(s));\n          e.style.opacity = _t39;\n        }\n        var p = \"translate3d(\".concat(n, \", \").concat(l, \", 0px)\");\n        if (null != o) {\n          p += \" scale(\".concat(o - (o - 1) * (1 - Math.abs(s)), \")\");\n        }\n        if (c && null != c) {\n          p += \" rotate(\".concat(c * s * -1, \"deg)\");\n        }\n        e.style.transform = p;\n      },\n      r = function r() {\n        var e = t.el,\n          s = t.slides,\n          a = t.progress,\n          r = t.snapGrid;\n        f(e, \"[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]\").forEach(function (e) {\n          i(e, a);\n        }), s.forEach(function (e, s) {\n          var n = e.progress;\n          t.params.slidesPerGroup > 1 && \"auto\" !== t.params.slidesPerView && (n += Math.ceil(s / 2) - a * (r.length - 1)), n = Math.min(Math.max(n, -1), 1), e.querySelectorAll(\"[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale], [data-swiper-parallax-rotate]\").forEach(function (e) {\n            i(e, n);\n          });\n        });\n      };\n    a(\"beforeInit\", function () {\n      t.params.parallax.enabled && (t.params.watchSlidesProgress = !0, t.originalParams.watchSlidesProgress = !0);\n    }), a(\"init\", function () {\n      t.params.parallax.enabled && r();\n    }), a(\"setTranslate\", function () {\n      t.params.parallax.enabled && r();\n    }), a(\"setTransition\", function (e, s) {\n      t.params.parallax.enabled && function (e) {\n        void 0 === e && (e = t.params.speed);\n        var s = t.el;\n        s.querySelectorAll(\"[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]\").forEach(function (t) {\n          var s = parseInt(t.getAttribute(\"data-swiper-parallax-duration\"), 10) || e;\n          0 === e && (s = 0), t.style.transitionDuration = \"\".concat(s, \"ms\");\n        });\n      }(s);\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on,\n      i = e.emit;\n    var n = r();\n    s({\n      zoom: {\n        enabled: !1,\n        maxRatio: 3,\n        minRatio: 1,\n        toggle: !0,\n        containerClass: \"swiper-zoom-container\",\n        zoomedSlideClass: \"swiper-slide-zoomed\"\n      }\n    }), t.zoom = {\n      enabled: !1\n    };\n    var l,\n      d,\n      c = 1,\n      p = !1;\n    var u = [],\n      m = {\n        originX: 0,\n        originY: 0,\n        slideEl: void 0,\n        slideWidth: void 0,\n        slideHeight: void 0,\n        imageEl: void 0,\n        imageWrapEl: void 0,\n        maxRatio: 3\n      },\n      h = {\n        isTouched: void 0,\n        isMoved: void 0,\n        currentX: void 0,\n        currentY: void 0,\n        minX: void 0,\n        minY: void 0,\n        maxX: void 0,\n        maxY: void 0,\n        width: void 0,\n        height: void 0,\n        startX: void 0,\n        startY: void 0,\n        touchesStart: {},\n        touchesCurrent: {}\n      },\n      g = {\n        x: void 0,\n        y: void 0,\n        prevPositionX: void 0,\n        prevPositionY: void 0,\n        prevTime: void 0\n      };\n    var w = 1;\n    function b() {\n      if (u.length < 2) return 1;\n      var e = u[0].pageX,\n        t = u[0].pageY,\n        s = u[1].pageX,\n        a = u[1].pageY;\n      return Math.sqrt(Math.pow(s - e, 2) + Math.pow(a - t, 2));\n    }\n    function E(e) {\n      var s = t.isElement ? \"swiper-slide\" : \".\".concat(t.params.slideClass);\n      return !!e.target.matches(s) || t.slides.filter(function (t) {\n        return t.contains(e.target);\n      }).length > 0;\n    }\n    function x(e) {\n      if (\"mouse\" === e.pointerType && u.splice(0, u.length), !E(e)) return;\n      var s = t.params.zoom;\n      if (l = !1, d = !1, u.push(e), !(u.length < 2)) {\n        if (l = !0, m.scaleStart = b(), !m.slideEl) {\n          m.slideEl = e.target.closest(\".\".concat(t.params.slideClass, \", swiper-slide\")), m.slideEl || (m.slideEl = t.slides[t.activeIndex]);\n          var _a19 = m.slideEl.querySelector(\".\".concat(s.containerClass));\n          if (_a19 && (_a19 = _a19.querySelectorAll(\"picture, img, svg, canvas, .swiper-zoom-target\")[0]), m.imageEl = _a19, m.imageWrapEl = _a19 ? y(m.imageEl, \".\".concat(s.containerClass))[0] : void 0, !m.imageWrapEl) return void (m.imageEl = void 0);\n          m.maxRatio = m.imageWrapEl.getAttribute(\"data-swiper-zoom\") || s.maxRatio;\n        }\n        if (m.imageEl) {\n          var _ref3 = function () {\n              if (u.length < 2) return {\n                x: null,\n                y: null\n              };\n              var e = m.imageEl.getBoundingClientRect();\n              return [(u[0].pageX + (u[1].pageX - u[0].pageX) / 2 - e.x) / c, (u[0].pageY + (u[1].pageY - u[0].pageY) / 2 - e.y) / c];\n            }(),\n            _ref4 = _slicedToArray(_ref3, 2),\n            _e49 = _ref4[0],\n            _t40 = _ref4[1];\n          m.originX = _e49, m.originY = _t40, m.imageEl.style.transitionDuration = \"0ms\";\n        }\n        p = !0;\n      }\n    }\n    function S(e) {\n      if (!E(e)) return;\n      var s = t.params.zoom,\n        a = t.zoom,\n        i = u.findIndex(function (t) {\n          return t.pointerId === e.pointerId;\n        });\n      i >= 0 && (u[i] = e), u.length < 2 || (d = !0, m.scaleMove = b(), m.imageEl && (a.scale = m.scaleMove / m.scaleStart * c, a.scale > m.maxRatio && (a.scale = m.maxRatio - 1 + Math.pow(a.scale - m.maxRatio + 1, .5)), a.scale < s.minRatio && (a.scale = s.minRatio + 1 - Math.pow(s.minRatio - a.scale + 1, .5)), m.imageEl.style.transform = \"translate3d(0,0,0) scale(\".concat(a.scale, \")\")));\n    }\n    function T(e) {\n      if (!E(e)) return;\n      if (\"mouse\" === e.pointerType && \"pointerout\" === e.type) return;\n      var s = t.params.zoom,\n        a = t.zoom,\n        i = u.findIndex(function (t) {\n          return t.pointerId === e.pointerId;\n        });\n      i >= 0 && u.splice(i, 1), l && d && (l = !1, d = !1, m.imageEl && (a.scale = Math.max(Math.min(a.scale, m.maxRatio), s.minRatio), m.imageEl.style.transitionDuration = \"\".concat(t.params.speed, \"ms\"), m.imageEl.style.transform = \"translate3d(0,0,0) scale(\".concat(a.scale, \")\"), c = a.scale, p = !1, a.scale > 1 && m.slideEl ? m.slideEl.classList.add(\"\".concat(s.zoomedSlideClass)) : a.scale <= 1 && m.slideEl && m.slideEl.classList.remove(\"\".concat(s.zoomedSlideClass)), 1 === a.scale && (m.originX = 0, m.originY = 0, m.slideEl = void 0)));\n    }\n    function M(e) {\n      if (!E(e) || !function (e) {\n        var s = \".\".concat(t.params.zoom.containerClass);\n        return !!e.target.matches(s) || _toConsumableArray(t.el.querySelectorAll(s)).filter(function (t) {\n          return t.contains(e.target);\n        }).length > 0;\n      }(e)) return;\n      var s = t.zoom;\n      if (!m.imageEl) return;\n      if (!h.isTouched || !m.slideEl) return;\n      h.isMoved || (h.width = m.imageEl.offsetWidth, h.height = m.imageEl.offsetHeight, h.startX = o(m.imageWrapEl, \"x\") || 0, h.startY = o(m.imageWrapEl, \"y\") || 0, m.slideWidth = m.slideEl.offsetWidth, m.slideHeight = m.slideEl.offsetHeight, m.imageWrapEl.style.transitionDuration = \"0ms\");\n      var a = h.width * s.scale,\n        i = h.height * s.scale;\n      if (a < m.slideWidth && i < m.slideHeight) return;\n      h.minX = Math.min(m.slideWidth / 2 - a / 2, 0), h.maxX = -h.minX, h.minY = Math.min(m.slideHeight / 2 - i / 2, 0), h.maxY = -h.minY, h.touchesCurrent.x = u.length > 0 ? u[0].pageX : e.pageX, h.touchesCurrent.y = u.length > 0 ? u[0].pageY : e.pageY;\n      if (Math.max(Math.abs(h.touchesCurrent.x - h.touchesStart.x), Math.abs(h.touchesCurrent.y - h.touchesStart.y)) > 5 && (t.allowClick = !1), !h.isMoved && !p) {\n        if (t.isHorizontal() && (Math.floor(h.minX) === Math.floor(h.startX) && h.touchesCurrent.x < h.touchesStart.x || Math.floor(h.maxX) === Math.floor(h.startX) && h.touchesCurrent.x > h.touchesStart.x)) return void (h.isTouched = !1);\n        if (!t.isHorizontal() && (Math.floor(h.minY) === Math.floor(h.startY) && h.touchesCurrent.y < h.touchesStart.y || Math.floor(h.maxY) === Math.floor(h.startY) && h.touchesCurrent.y > h.touchesStart.y)) return void (h.isTouched = !1);\n      }\n      e.cancelable && e.preventDefault(), e.stopPropagation(), h.isMoved = !0;\n      var r = (s.scale - c) / (m.maxRatio - t.params.zoom.minRatio),\n        n = m.originX,\n        l = m.originY;\n      h.currentX = h.touchesCurrent.x - h.touchesStart.x + h.startX + r * (h.width - 2 * n), h.currentY = h.touchesCurrent.y - h.touchesStart.y + h.startY + r * (h.height - 2 * l), h.currentX < h.minX && (h.currentX = h.minX + 1 - Math.pow(h.minX - h.currentX + 1, .8)), h.currentX > h.maxX && (h.currentX = h.maxX - 1 + Math.pow(h.currentX - h.maxX + 1, .8)), h.currentY < h.minY && (h.currentY = h.minY + 1 - Math.pow(h.minY - h.currentY + 1, .8)), h.currentY > h.maxY && (h.currentY = h.maxY - 1 + Math.pow(h.currentY - h.maxY + 1, .8)), g.prevPositionX || (g.prevPositionX = h.touchesCurrent.x), g.prevPositionY || (g.prevPositionY = h.touchesCurrent.y), g.prevTime || (g.prevTime = Date.now()), g.x = (h.touchesCurrent.x - g.prevPositionX) / (Date.now() - g.prevTime) / 2, g.y = (h.touchesCurrent.y - g.prevPositionY) / (Date.now() - g.prevTime) / 2, Math.abs(h.touchesCurrent.x - g.prevPositionX) < 2 && (g.x = 0), Math.abs(h.touchesCurrent.y - g.prevPositionY) < 2 && (g.y = 0), g.prevPositionX = h.touchesCurrent.x, g.prevPositionY = h.touchesCurrent.y, g.prevTime = Date.now(), m.imageWrapEl.style.transform = \"translate3d(\".concat(h.currentX, \"px, \").concat(h.currentY, \"px,0)\");\n    }\n    function C() {\n      var e = t.zoom;\n      m.slideEl && t.activeIndex !== t.slides.indexOf(m.slideEl) && (m.imageEl && (m.imageEl.style.transform = \"translate3d(0,0,0) scale(1)\"), m.imageWrapEl && (m.imageWrapEl.style.transform = \"translate3d(0,0,0)\"), m.slideEl.classList.remove(\"\".concat(t.params.zoom.zoomedSlideClass)), e.scale = 1, c = 1, m.slideEl = void 0, m.imageEl = void 0, m.imageWrapEl = void 0, m.originX = 0, m.originY = 0);\n    }\n    function P(e) {\n      var s = t.zoom,\n        a = t.params.zoom;\n      if (!m.slideEl) {\n        e && e.target && (m.slideEl = e.target.closest(\".\".concat(t.params.slideClass, \", swiper-slide\"))), m.slideEl || (t.params.virtual && t.params.virtual.enabled && t.virtual ? m.slideEl = f(t.slidesEl, \".\".concat(t.params.slideActiveClass))[0] : m.slideEl = t.slides[t.activeIndex]);\n        var _s30 = m.slideEl.querySelector(\".\".concat(a.containerClass));\n        _s30 && (_s30 = _s30.querySelectorAll(\"picture, img, svg, canvas, .swiper-zoom-target\")[0]), m.imageEl = _s30, m.imageWrapEl = _s30 ? y(m.imageEl, \".\".concat(a.containerClass))[0] : void 0;\n      }\n      if (!m.imageEl || !m.imageWrapEl) return;\n      var i, r, l, o, d, p, u, g, w, b, E, x, S, T, M, C, P, L;\n      t.params.cssMode && (t.wrapperEl.style.overflow = \"hidden\", t.wrapperEl.style.touchAction = \"none\"), m.slideEl.classList.add(\"\".concat(a.zoomedSlideClass)), void 0 === h.touchesStart.x && e ? (i = e.pageX, r = e.pageY) : (i = h.touchesStart.x, r = h.touchesStart.y);\n      var z = \"number\" == typeof e ? e : null;\n      1 === c && z && (i = void 0, r = void 0), s.scale = z || m.imageWrapEl.getAttribute(\"data-swiper-zoom\") || a.maxRatio, c = z || m.imageWrapEl.getAttribute(\"data-swiper-zoom\") || a.maxRatio, !e || 1 === c && z ? (u = 0, g = 0) : (P = m.slideEl.offsetWidth, L = m.slideEl.offsetHeight, l = v(m.slideEl).left + n.scrollX, o = v(m.slideEl).top + n.scrollY, d = l + P / 2 - i, p = o + L / 2 - r, w = m.imageEl.offsetWidth, b = m.imageEl.offsetHeight, E = w * s.scale, x = b * s.scale, S = Math.min(P / 2 - E / 2, 0), T = Math.min(L / 2 - x / 2, 0), M = -S, C = -T, u = d * s.scale, g = p * s.scale, u < S && (u = S), u > M && (u = M), g < T && (g = T), g > C && (g = C)), z && 1 === s.scale && (m.originX = 0, m.originY = 0), m.imageWrapEl.style.transitionDuration = \"300ms\", m.imageWrapEl.style.transform = \"translate3d(\".concat(u, \"px, \").concat(g, \"px,0)\"), m.imageEl.style.transitionDuration = \"300ms\", m.imageEl.style.transform = \"translate3d(0,0,0) scale(\".concat(s.scale, \")\");\n    }\n    function L() {\n      var e = t.zoom,\n        s = t.params.zoom;\n      if (!m.slideEl) {\n        t.params.virtual && t.params.virtual.enabled && t.virtual ? m.slideEl = f(t.slidesEl, \".\".concat(t.params.slideActiveClass))[0] : m.slideEl = t.slides[t.activeIndex];\n        var _e50 = m.slideEl.querySelector(\".\".concat(s.containerClass));\n        _e50 && (_e50 = _e50.querySelectorAll(\"picture, img, svg, canvas, .swiper-zoom-target\")[0]), m.imageEl = _e50, m.imageWrapEl = _e50 ? y(m.imageEl, \".\".concat(s.containerClass))[0] : void 0;\n      }\n      m.imageEl && m.imageWrapEl && (t.params.cssMode && (t.wrapperEl.style.overflow = \"\", t.wrapperEl.style.touchAction = \"\"), e.scale = 1, c = 1, m.imageWrapEl.style.transitionDuration = \"300ms\", m.imageWrapEl.style.transform = \"translate3d(0,0,0)\", m.imageEl.style.transitionDuration = \"300ms\", m.imageEl.style.transform = \"translate3d(0,0,0) scale(1)\", m.slideEl.classList.remove(\"\".concat(s.zoomedSlideClass)), m.slideEl = void 0, m.originX = 0, m.originY = 0);\n    }\n    function z(e) {\n      var s = t.zoom;\n      s.scale && 1 !== s.scale ? L() : P(e);\n    }\n    function A() {\n      return {\n        passiveListener: !!t.params.passiveListeners && {\n          passive: !0,\n          capture: !1\n        },\n        activeListenerWithCapture: !t.params.passiveListeners || {\n          passive: !1,\n          capture: !0\n        }\n      };\n    }\n    function $() {\n      var e = t.zoom;\n      if (e.enabled) return;\n      e.enabled = !0;\n      var _A = A(),\n        s = _A.passiveListener,\n        a = _A.activeListenerWithCapture;\n      t.wrapperEl.addEventListener(\"pointerdown\", x, s), t.wrapperEl.addEventListener(\"pointermove\", S, a), [\"pointerup\", \"pointercancel\", \"pointerout\"].forEach(function (e) {\n        t.wrapperEl.addEventListener(e, T, s);\n      }), t.wrapperEl.addEventListener(\"pointermove\", M, a);\n    }\n    function I() {\n      var e = t.zoom;\n      if (!e.enabled) return;\n      e.enabled = !1;\n      var _A2 = A(),\n        s = _A2.passiveListener,\n        a = _A2.activeListenerWithCapture;\n      t.wrapperEl.removeEventListener(\"pointerdown\", x, s), t.wrapperEl.removeEventListener(\"pointermove\", S, a), [\"pointerup\", \"pointercancel\", \"pointerout\"].forEach(function (e) {\n        t.wrapperEl.removeEventListener(e, T, s);\n      }), t.wrapperEl.removeEventListener(\"pointermove\", M, a);\n    }\n    Object.defineProperty(t.zoom, \"scale\", {\n      get: function get() {\n        return w;\n      },\n      set: function set(e) {\n        if (w !== e) {\n          var _t41 = m.imageEl,\n            _s31 = m.slideEl;\n          i(\"zoomChange\", e, _t41, _s31);\n        }\n        w = e;\n      }\n    }), a(\"init\", function () {\n      t.params.zoom.enabled && $();\n    }), a(\"destroy\", function () {\n      I();\n    }), a(\"touchStart\", function (e, s) {\n      t.zoom.enabled && function (e) {\n        var s = t.device;\n        if (!m.imageEl) return;\n        if (h.isTouched) return;\n        s.android && e.cancelable && e.preventDefault(), h.isTouched = !0;\n        var a = u.length > 0 ? u[0] : e;\n        h.touchesStart.x = a.pageX, h.touchesStart.y = a.pageY;\n      }(s);\n    }), a(\"touchEnd\", function (e, s) {\n      t.zoom.enabled && function () {\n        var e = t.zoom;\n        if (!m.imageEl) return;\n        if (!h.isTouched || !h.isMoved) return h.isTouched = !1, void (h.isMoved = !1);\n        h.isTouched = !1, h.isMoved = !1;\n        var s = 300,\n          a = 300;\n        var i = g.x * s,\n          r = h.currentX + i,\n          n = g.y * a,\n          l = h.currentY + n;\n        0 !== g.x && (s = Math.abs((r - h.currentX) / g.x)), 0 !== g.y && (a = Math.abs((l - h.currentY) / g.y));\n        var o = Math.max(s, a);\n        h.currentX = r, h.currentY = l;\n        var d = h.width * e.scale,\n          c = h.height * e.scale;\n        h.minX = Math.min(m.slideWidth / 2 - d / 2, 0), h.maxX = -h.minX, h.minY = Math.min(m.slideHeight / 2 - c / 2, 0), h.maxY = -h.minY, h.currentX = Math.max(Math.min(h.currentX, h.maxX), h.minX), h.currentY = Math.max(Math.min(h.currentY, h.maxY), h.minY), m.imageWrapEl.style.transitionDuration = \"\".concat(o, \"ms\"), m.imageWrapEl.style.transform = \"translate3d(\".concat(h.currentX, \"px, \").concat(h.currentY, \"px,0)\");\n      }();\n    }), a(\"doubleTap\", function (e, s) {\n      !t.animating && t.params.zoom.enabled && t.zoom.enabled && t.params.zoom.toggle && z(s);\n    }), a(\"transitionEnd\", function () {\n      t.zoom.enabled && t.params.zoom.enabled && C();\n    }), a(\"slideChange\", function () {\n      t.zoom.enabled && t.params.zoom.enabled && t.params.cssMode && C();\n    }), Object.assign(t.zoom, {\n      enable: $,\n      disable: I,\n      in: P,\n      out: L,\n      toggle: z\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    function i(e, t) {\n      var s = function () {\n        var e, t, s;\n        return function (a, i) {\n          for (t = -1, e = a.length; e - t > 1;) s = e + t >> 1, a[s] <= i ? t = s : e = s;\n          return e;\n        };\n      }();\n      var a, i;\n      return this.x = e, this.y = t, this.lastIndex = e.length - 1, this.interpolate = function (e) {\n        return e ? (i = s(this.x, e), a = i - 1, (e - this.x[a]) * (this.y[i] - this.y[a]) / (this.x[i] - this.x[a]) + this.y[a]) : 0;\n      }, this;\n    }\n    function r() {\n      t.controller.control && t.controller.spline && (t.controller.spline = void 0, delete t.controller.spline);\n    }\n    s({\n      controller: {\n        control: void 0,\n        inverse: !1,\n        by: \"slide\"\n      }\n    }), t.controller = {\n      control: void 0\n    }, a(\"beforeInit\", function () {\n      if (\"undefined\" != typeof window && (\"string\" == typeof t.params.controller.control || t.params.controller.control instanceof HTMLElement)) {\n        var _e51 = document.querySelector(t.params.controller.control);\n        if (_e51 && _e51.swiper) t.controller.control = _e51.swiper;else if (_e51) {\n          var _s32 = function _s32(a) {\n            t.controller.control = a.detail[0], t.update(), _e51.removeEventListener(\"init\", _s32);\n          };\n          _e51.addEventListener(\"init\", _s32);\n        }\n      } else t.controller.control = t.params.controller.control;\n    }), a(\"update\", function () {\n      r();\n    }), a(\"resize\", function () {\n      r();\n    }), a(\"observerUpdate\", function () {\n      r();\n    }), a(\"setTranslate\", function (e, s, a) {\n      t.controller.control && !t.controller.control.destroyed && t.controller.setTranslate(s, a);\n    }), a(\"setTransition\", function (e, s, a) {\n      t.controller.control && !t.controller.control.destroyed && t.controller.setTransition(s, a);\n    }), Object.assign(t.controller, {\n      setTranslate: function setTranslate(e, s) {\n        var a = t.controller.control;\n        var r, n;\n        var l = t.constructor;\n        function o(e) {\n          if (e.destroyed) return;\n          var s = t.rtlTranslate ? -t.translate : t.translate;\n          \"slide\" === t.params.controller.by && (!function (e) {\n            t.controller.spline = t.params.loop ? new i(t.slidesGrid, e.slidesGrid) : new i(t.snapGrid, e.snapGrid);\n          }(e), n = -t.controller.spline.interpolate(-s)), n && \"container\" !== t.params.controller.by || (r = (e.maxTranslate() - e.minTranslate()) / (t.maxTranslate() - t.minTranslate()), !Number.isNaN(r) && Number.isFinite(r) || (r = 1), n = (s - t.minTranslate()) * r + e.minTranslate()), t.params.controller.inverse && (n = e.maxTranslate() - n), e.updateProgress(n), e.setTranslate(n, t), e.updateActiveIndex(), e.updateSlidesClasses();\n        }\n        if (Array.isArray(a)) for (var _e52 = 0; _e52 < a.length; _e52 += 1) a[_e52] !== s && a[_e52] instanceof l && o(a[_e52]);else a instanceof l && s !== a && o(a);\n      },\n      setTransition: function setTransition(e, s) {\n        var a = t.constructor,\n          i = t.controller.control;\n        var r;\n        function l(s) {\n          s.destroyed || (s.setTransition(e, t), 0 !== e && (s.transitionStart(), s.params.autoHeight && n(function () {\n            s.updateAutoHeight();\n          }), E(s.wrapperEl, function () {\n            i && s.transitionEnd();\n          })));\n        }\n        if (Array.isArray(i)) for (r = 0; r < i.length; r += 1) i[r] !== s && i[r] instanceof a && l(i[r]);else i instanceof a && s !== i && l(i);\n      }\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      a11y: {\n        enabled: !0,\n        notificationClass: \"swiper-notification\",\n        prevSlideMessage: \"Previous slide\",\n        nextSlideMessage: \"Next slide\",\n        firstSlideMessage: \"This is the first slide\",\n        lastSlideMessage: \"This is the last slide\",\n        paginationBulletMessage: \"Go to slide {{index}}\",\n        slideLabelMessage: \"{{index}} / {{slidesLength}}\",\n        containerMessage: null,\n        containerRoleDescriptionMessage: null,\n        itemRoleDescriptionMessage: null,\n        slideRole: \"group\",\n        id: null\n      }\n    }), t.a11y = {\n      clicked: !1\n    };\n    var i = null;\n    function r(e) {\n      var t = i;\n      0 !== t.length && (t.innerHTML = \"\", t.innerHTML = e);\n    }\n    var n = function n(e) {\n      return Array.isArray(e) || (e = [e].filter(function (e) {\n        return !!e;\n      })), e;\n    };\n    function l(e) {\n      (e = n(e)).forEach(function (e) {\n        e.setAttribute(\"tabIndex\", \"0\");\n      });\n    }\n    function o(e) {\n      (e = n(e)).forEach(function (e) {\n        e.setAttribute(\"tabIndex\", \"-1\");\n      });\n    }\n    function d(e, t) {\n      (e = n(e)).forEach(function (e) {\n        e.setAttribute(\"role\", t);\n      });\n    }\n    function c(e, t) {\n      (e = n(e)).forEach(function (e) {\n        e.setAttribute(\"aria-roledescription\", t);\n      });\n    }\n    function p(e, t) {\n      (e = n(e)).forEach(function (e) {\n        e.setAttribute(\"aria-label\", t);\n      });\n    }\n    function u(e) {\n      (e = n(e)).forEach(function (e) {\n        e.setAttribute(\"aria-disabled\", !0);\n      });\n    }\n    function m(e) {\n      (e = n(e)).forEach(function (e) {\n        e.setAttribute(\"aria-disabled\", !1);\n      });\n    }\n    function h(e) {\n      if (13 !== e.keyCode && 32 !== e.keyCode) return;\n      var s = t.params.a11y,\n        a = e.target;\n      t.pagination && t.pagination.el && (a === t.pagination.el || t.pagination.el.contains(e.target)) && !e.target.matches(te(t.params.pagination.bulletClass)) || (t.navigation && t.navigation.nextEl && a === t.navigation.nextEl && (t.isEnd && !t.params.loop || t.slideNext(), t.isEnd ? r(s.lastSlideMessage) : r(s.nextSlideMessage)), t.navigation && t.navigation.prevEl && a === t.navigation.prevEl && (t.isBeginning && !t.params.loop || t.slidePrev(), t.isBeginning ? r(s.firstSlideMessage) : r(s.prevSlideMessage)), t.pagination && a.matches(te(t.params.pagination.bulletClass)) && a.click());\n    }\n    function f() {\n      return t.pagination && t.pagination.bullets && t.pagination.bullets.length;\n    }\n    function v() {\n      return f() && t.params.pagination.clickable;\n    }\n    var w = function w(e, t, s) {\n        l(e), \"BUTTON\" !== e.tagName && (d(e, \"button\"), e.addEventListener(\"keydown\", h)), p(e, s), function (e, t) {\n          (e = n(e)).forEach(function (e) {\n            e.setAttribute(\"aria-controls\", t);\n          });\n        }(e, t);\n      },\n      y = function y() {\n        t.a11y.clicked = !0;\n      },\n      E = function E() {\n        requestAnimationFrame(function () {\n          requestAnimationFrame(function () {\n            t.destroyed || (t.a11y.clicked = !1);\n          });\n        });\n      },\n      x = function x(e) {\n        if (t.a11y.clicked) return;\n        var s = e.target.closest(\".\".concat(t.params.slideClass, \", swiper-slide\"));\n        if (!s || !t.slides.includes(s)) return;\n        var a = t.slides.indexOf(s) === t.activeIndex,\n          i = t.params.watchSlidesProgress && t.visibleSlides && t.visibleSlides.includes(s);\n        a || i || e.sourceCapabilities && e.sourceCapabilities.firesTouchEvents || (t.isHorizontal() ? t.el.scrollLeft = 0 : t.el.scrollTop = 0, t.slideTo(t.slides.indexOf(s), 0));\n      },\n      S = function S() {\n        var e = t.params.a11y;\n        e.itemRoleDescriptionMessage && c(t.slides, e.itemRoleDescriptionMessage), e.slideRole && d(t.slides, e.slideRole);\n        var s = t.slides.length;\n        e.slideLabelMessage && t.slides.forEach(function (a, i) {\n          var r = t.params.loop ? parseInt(a.getAttribute(\"data-swiper-slide-index\"), 10) : i;\n          p(a, e.slideLabelMessage.replace(/\\{\\{index\\}\\}/, r + 1).replace(/\\{\\{slidesLength\\}\\}/, s));\n        });\n      },\n      T = function T() {\n        var e = t.params.a11y;\n        t.isElement ? t.el.shadowEl.append(i) : t.el.append(i);\n        var s = t.el;\n        e.containerRoleDescriptionMessage && c(s, e.containerRoleDescriptionMessage), e.containerMessage && p(s, e.containerMessage);\n        var a = t.wrapperEl,\n          r = e.id || a.getAttribute(\"id\") || \"swiper-wrapper-\".concat((l = 16, void 0 === l && (l = 16), \"x\".repeat(l).replace(/x/g, function () {\n            return Math.round(16 * Math.random()).toString(16);\n          })));\n        var l;\n        var o = t.params.autoplay && t.params.autoplay.enabled ? \"off\" : \"polite\";\n        var d;\n        d = r, n(a).forEach(function (e) {\n          e.setAttribute(\"id\", d);\n        }), function (e, t) {\n          (e = n(e)).forEach(function (e) {\n            e.setAttribute(\"aria-live\", t);\n          });\n        }(a, o), S();\n        var _ref5 = t.navigation ? t.navigation : {},\n          u = _ref5.nextEl,\n          m = _ref5.prevEl;\n        if (u = n(u), m = n(m), u && u.forEach(function (t) {\n          return w(t, r, e.nextSlideMessage);\n        }), m && m.forEach(function (t) {\n          return w(t, r, e.prevSlideMessage);\n        }), v()) {\n          (Array.isArray(t.pagination.el) ? t.pagination.el : [t.pagination.el]).forEach(function (e) {\n            e.addEventListener(\"keydown\", h);\n          });\n        }\n        t.el.addEventListener(\"focus\", x, !0), t.el.addEventListener(\"pointerdown\", y, !0), t.el.addEventListener(\"pointerup\", E, !0);\n      };\n    a(\"beforeInit\", function () {\n      i = g(\"span\", t.params.a11y.notificationClass), i.setAttribute(\"aria-live\", \"assertive\"), i.setAttribute(\"aria-atomic\", \"true\");\n    }), a(\"afterInit\", function () {\n      t.params.a11y.enabled && T();\n    }), a(\"slidesLengthChange snapGridLengthChange slidesGridLengthChange\", function () {\n      t.params.a11y.enabled && S();\n    }), a(\"fromEdge toEdge afterInit lock unlock\", function () {\n      t.params.a11y.enabled && function () {\n        if (t.params.loop || t.params.rewind || !t.navigation) return;\n        var _t$navigation5 = t.navigation,\n          e = _t$navigation5.nextEl,\n          s = _t$navigation5.prevEl;\n        s && (t.isBeginning ? (u(s), o(s)) : (m(s), l(s))), e && (t.isEnd ? (u(e), o(e)) : (m(e), l(e)));\n      }();\n    }), a(\"paginationUpdate\", function () {\n      t.params.a11y.enabled && function () {\n        var e = t.params.a11y;\n        f() && t.pagination.bullets.forEach(function (s) {\n          t.params.pagination.clickable && (l(s), t.params.pagination.renderBullet || (d(s, \"button\"), p(s, e.paginationBulletMessage.replace(/\\{\\{index\\}\\}/, b(s) + 1)))), s.matches(te(t.params.pagination.bulletActiveClass)) ? s.setAttribute(\"aria-current\", \"true\") : s.removeAttribute(\"aria-current\");\n        });\n      }();\n    }), a(\"destroy\", function () {\n      t.params.a11y.enabled && function () {\n        i && i.remove();\n        var _ref6 = t.navigation ? t.navigation : {},\n          e = _ref6.nextEl,\n          s = _ref6.prevEl;\n        e = n(e), s = n(s), e && e.forEach(function (e) {\n          return e.removeEventListener(\"keydown\", h);\n        }), s && s.forEach(function (e) {\n          return e.removeEventListener(\"keydown\", h);\n        }), v() && (Array.isArray(t.pagination.el) ? t.pagination.el : [t.pagination.el]).forEach(function (e) {\n          e.removeEventListener(\"keydown\", h);\n        });\n        t.el.removeEventListener(\"focus\", x, !0), t.el.removeEventListener(\"pointerdown\", y, !0), t.el.removeEventListener(\"pointerup\", E, !0);\n      }();\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      history: {\n        enabled: !1,\n        root: \"\",\n        replaceState: !1,\n        key: \"slides\",\n        keepQuery: !1\n      }\n    });\n    var i = !1,\n      n = {};\n    var l = function l(e) {\n        return e.toString().replace(/\\s+/g, \"-\").replace(/[^\\w-]+/g, \"\").replace(/--+/g, \"-\").replace(/^-+/, \"\").replace(/-+$/, \"\");\n      },\n      o = function o(e) {\n        var t = r();\n        var s;\n        s = e ? new URL(e) : t.location;\n        var a = s.pathname.slice(1).split(\"/\").filter(function (e) {\n            return \"\" !== e;\n          }),\n          i = a.length;\n        return {\n          key: a[i - 2],\n          value: a[i - 1]\n        };\n      },\n      d = function d(e, s) {\n        var a = r();\n        if (!i || !t.params.history.enabled) return;\n        var n;\n        n = t.params.url ? new URL(t.params.url) : a.location;\n        var o = t.slides[s];\n        var d = l(o.getAttribute(\"data-history\"));\n        if (t.params.history.root.length > 0) {\n          var _s33 = t.params.history.root;\n          \"/\" === _s33[_s33.length - 1] && (_s33 = _s33.slice(0, _s33.length - 1)), d = \"\".concat(_s33, \"/\").concat(e ? \"\".concat(e, \"/\") : \"\").concat(d);\n        } else n.pathname.includes(e) || (d = \"\".concat(e ? \"\".concat(e, \"/\") : \"\").concat(d));\n        t.params.history.keepQuery && (d += n.search);\n        var c = a.history.state;\n        c && c.value === d || (t.params.history.replaceState ? a.history.replaceState({\n          value: d\n        }, null, d) : a.history.pushState({\n          value: d\n        }, null, d));\n      },\n      c = function c(e, s, a) {\n        if (s) for (var _i14 = 0, _r11 = t.slides.length; _i14 < _r11; _i14 += 1) {\n          var _r12 = t.slides[_i14];\n          if (l(_r12.getAttribute(\"data-history\")) === s) {\n            var _s34 = t.getSlideIndex(_r12);\n            t.slideTo(_s34, e, a);\n          }\n        } else t.slideTo(0, e, a);\n      },\n      p = function p() {\n        n = o(t.params.url), c(t.params.speed, n.value, !1);\n      };\n    a(\"init\", function () {\n      t.params.history.enabled && function () {\n        var e = r();\n        if (t.params.history) {\n          if (!e.history || !e.history.pushState) return t.params.history.enabled = !1, void (t.params.hashNavigation.enabled = !0);\n          i = !0, n = o(t.params.url), n.key || n.value ? (c(0, n.value, t.params.runCallbacksOnInit), t.params.history.replaceState || e.addEventListener(\"popstate\", p)) : t.params.history.replaceState || e.addEventListener(\"popstate\", p);\n        }\n      }();\n    }), a(\"destroy\", function () {\n      t.params.history.enabled && function () {\n        var e = r();\n        t.params.history.replaceState || e.removeEventListener(\"popstate\", p);\n      }();\n    }), a(\"transitionEnd _freeModeNoMomentumRelease\", function () {\n      i && d(t.params.history.key, t.activeIndex);\n    }), a(\"slideChange\", function () {\n      i && t.params.cssMode && d(t.params.history.key, t.activeIndex);\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      i = e.emit,\n      n = e.on,\n      l = !1;\n    var o = a(),\n      d = r();\n    s({\n      hashNavigation: {\n        enabled: !1,\n        replaceState: !1,\n        watchState: !1,\n        getSlideIndex: function getSlideIndex(e, s) {\n          if (t.virtual && t.params.virtual.enabled) {\n            var _e53 = t.slides.filter(function (e) {\n              return e.getAttribute(\"data-hash\") === s;\n            })[0];\n            if (!_e53) return 0;\n            return parseInt(_e53.getAttribute(\"data-swiper-slide-index\"), 10);\n          }\n          return t.getSlideIndex(f(t.slidesEl, \".\".concat(t.params.slideClass, \"[data-hash=\\\"\").concat(s, \"\\\"], swiper-slide[data-hash=\\\"\").concat(s, \"\\\"]\"))[0]);\n        }\n      }\n    });\n    var c = function c() {\n        i(\"hashChange\");\n        var e = o.location.hash.replace(\"#\", \"\"),\n          s = t.virtual && t.params.virtual.enabled ? t.slidesEl.querySelector(\"[data-swiper-slide-index=\\\"\".concat(t.activeIndex, \"\\\"]\")) : t.slides[t.activeIndex];\n        if (e !== (s ? s.getAttribute(\"data-hash\") : \"\")) {\n          var _s35 = t.params.hashNavigation.getSlideIndex(t, e);\n          if (void 0 === _s35 || Number.isNaN(_s35)) return;\n          t.slideTo(_s35);\n        }\n      },\n      p = function p() {\n        if (!l || !t.params.hashNavigation.enabled) return;\n        var e = t.virtual && t.params.virtual.enabled ? t.slidesEl.querySelector(\"[data-swiper-slide-index=\\\"\".concat(t.activeIndex, \"\\\"]\")) : t.slides[t.activeIndex],\n          s = e ? e.getAttribute(\"data-hash\") || e.getAttribute(\"data-history\") : \"\";\n        t.params.hashNavigation.replaceState && d.history && d.history.replaceState ? (d.history.replaceState(null, null, \"#\".concat(s) || 0), i(\"hashSet\")) : (o.location.hash = s || \"\", i(\"hashSet\"));\n      };\n    n(\"init\", function () {\n      t.params.hashNavigation.enabled && function () {\n        if (!t.params.hashNavigation.enabled || t.params.history && t.params.history.enabled) return;\n        l = !0;\n        var e = o.location.hash.replace(\"#\", \"\");\n        if (e) {\n          var _s36 = 0,\n            _a20 = t.params.hashNavigation.getSlideIndex(t, e);\n          t.slideTo(_a20 || 0, _s36, t.params.runCallbacksOnInit, !0);\n        }\n        t.params.hashNavigation.watchState && d.addEventListener(\"hashchange\", c);\n      }();\n    }), n(\"destroy\", function () {\n      t.params.hashNavigation.enabled && t.params.hashNavigation.watchState && d.removeEventListener(\"hashchange\", c);\n    }), n(\"transitionEnd _freeModeNoMomentumRelease\", function () {\n      l && p();\n    }), n(\"slideChange\", function () {\n      l && t.params.cssMode && p();\n    });\n  }, function (e) {\n    var t,\n      s,\n      i = e.swiper,\n      r = e.extendParams,\n      n = e.on,\n      l = e.emit,\n      o = e.params;\n    i.autoplay = {\n      running: !1,\n      paused: !1,\n      timeLeft: 0\n    }, r({\n      autoplay: {\n        enabled: !1,\n        delay: 3e3,\n        waitForTransition: !0,\n        disableOnInteraction: !0,\n        stopOnLastSlide: !1,\n        reverseDirection: !1,\n        pauseOnMouseEnter: !1\n      }\n    });\n    var d,\n      c,\n      p,\n      u,\n      m,\n      h,\n      f,\n      g = o && o.autoplay ? o.autoplay.delay : 3e3,\n      v = o && o.autoplay ? o.autoplay.delay : 3e3,\n      w = new Date().getTime;\n    function b(e) {\n      i && !i.destroyed && i.wrapperEl && e.target === i.wrapperEl && (i.wrapperEl.removeEventListener(\"transitionend\", b), M());\n    }\n    var y = function y() {\n        if (i.destroyed || !i.autoplay.running) return;\n        i.autoplay.paused ? c = !0 : c && (v = d, c = !1);\n        var e = i.autoplay.paused ? d : w + v - new Date().getTime();\n        i.autoplay.timeLeft = e, l(\"autoplayTimeLeft\", e, e / g), s = requestAnimationFrame(function () {\n          y();\n        });\n      },\n      E = function E(e) {\n        if (i.destroyed || !i.autoplay.running) return;\n        cancelAnimationFrame(s), y();\n        var a = void 0 === e ? i.params.autoplay.delay : e;\n        g = i.params.autoplay.delay, v = i.params.autoplay.delay;\n        var r = function () {\n          var e;\n          if (e = i.virtual && i.params.virtual.enabled ? i.slides.filter(function (e) {\n            return e.classList.contains(\"swiper-slide-active\");\n          })[0] : i.slides[i.activeIndex], !e) return;\n          return parseInt(e.getAttribute(\"data-swiper-autoplay\"), 10);\n        }();\n        !Number.isNaN(r) && r > 0 && void 0 === e && (a = r, g = r, v = r), d = a;\n        var n = i.params.speed,\n          o = function o() {\n            i && !i.destroyed && (i.params.autoplay.reverseDirection ? !i.isBeginning || i.params.loop || i.params.rewind ? (i.slidePrev(n, !0, !0), l(\"autoplay\")) : i.params.autoplay.stopOnLastSlide || (i.slideTo(i.slides.length - 1, n, !0, !0), l(\"autoplay\")) : !i.isEnd || i.params.loop || i.params.rewind ? (i.slideNext(n, !0, !0), l(\"autoplay\")) : i.params.autoplay.stopOnLastSlide || (i.slideTo(0, n, !0, !0), l(\"autoplay\")), i.params.cssMode && (w = new Date().getTime(), requestAnimationFrame(function () {\n              E();\n            })));\n          };\n        return a > 0 ? (clearTimeout(t), t = setTimeout(function () {\n          o();\n        }, a)) : requestAnimationFrame(function () {\n          o();\n        }), a;\n      },\n      x = function x() {\n        i.autoplay.running = !0, E(), l(\"autoplayStart\");\n      },\n      S = function S() {\n        i.autoplay.running = !1, clearTimeout(t), cancelAnimationFrame(s), l(\"autoplayStop\");\n      },\n      T = function T(e, s) {\n        if (i.destroyed || !i.autoplay.running) return;\n        clearTimeout(t), e || (f = !0);\n        var a = function a() {\n          l(\"autoplayPause\"), i.params.autoplay.waitForTransition ? i.wrapperEl.addEventListener(\"transitionend\", b) : M();\n        };\n        if (i.autoplay.paused = !0, s) return h && (d = i.params.autoplay.delay), h = !1, void a();\n        var r = d || i.params.autoplay.delay;\n        d = r - (new Date().getTime() - w), i.isEnd && d < 0 && !i.params.loop || (d < 0 && (d = 0), a());\n      },\n      M = function M() {\n        i.isEnd && d < 0 && !i.params.loop || i.destroyed || !i.autoplay.running || (w = new Date().getTime(), f ? (f = !1, E(d)) : E(), i.autoplay.paused = !1, l(\"autoplayResume\"));\n      },\n      C = function C() {\n        if (i.destroyed || !i.autoplay.running) return;\n        var e = a();\n        \"hidden\" === e.visibilityState && (f = !0, T(!0)), \"visible\" === e.visibilityState && M();\n      },\n      P = function P(e) {\n        \"mouse\" === e.pointerType && (f = !0, T(!0));\n      },\n      L = function L(e) {\n        \"mouse\" === e.pointerType && i.autoplay.paused && M();\n      };\n    n(\"init\", function () {\n      i.params.autoplay.enabled && (i.params.autoplay.pauseOnMouseEnter && (i.el.addEventListener(\"pointerenter\", P), i.el.addEventListener(\"pointerleave\", L)), a().addEventListener(\"visibilitychange\", C), w = new Date().getTime(), x());\n    }), n(\"destroy\", function () {\n      i.el.removeEventListener(\"pointerenter\", P), i.el.removeEventListener(\"pointerleave\", L), a().removeEventListener(\"visibilitychange\", C), i.autoplay.running && S();\n    }), n(\"beforeTransitionStart\", function (e, t, s) {\n      !i.destroyed && i.autoplay.running && (s || !i.params.autoplay.disableOnInteraction ? T(!0, !0) : S());\n    }), n(\"sliderFirstMove\", function () {\n      !i.destroyed && i.autoplay.running && (i.params.autoplay.disableOnInteraction ? S() : (p = !0, u = !1, f = !1, m = setTimeout(function () {\n        f = !0, u = !0, T(!0);\n      }, 200)));\n    }), n(\"touchEnd\", function () {\n      if (!i.destroyed && i.autoplay.running && p) {\n        if (clearTimeout(m), clearTimeout(t), i.params.autoplay.disableOnInteraction) return u = !1, void (p = !1);\n        u && i.params.cssMode && M(), u = !1, p = !1;\n      }\n    }), n(\"slideChange\", function () {\n      !i.destroyed && i.autoplay.running && (h = !0);\n    }), Object.assign(i.autoplay, {\n      start: x,\n      stop: S,\n      pause: T,\n      resume: M\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      i = e.on;\n    s({\n      thumbs: {\n        swiper: null,\n        multipleActiveThumbs: !0,\n        autoScrollOffset: 0,\n        slideThumbActiveClass: \"swiper-slide-thumb-active\",\n        thumbsContainerClass: \"swiper-thumbs\"\n      }\n    });\n    var r = !1,\n      n = !1;\n    function l() {\n      var e = t.thumbs.swiper;\n      if (!e || e.destroyed) return;\n      var s = e.clickedIndex,\n        a = e.clickedSlide;\n      if (a && a.classList.contains(t.params.thumbs.slideThumbActiveClass)) return;\n      if (null == s) return;\n      var i;\n      i = e.params.loop ? parseInt(e.clickedSlide.getAttribute(\"data-swiper-slide-index\"), 10) : s, t.params.loop ? t.slideToLoop(i) : t.slideTo(i);\n    }\n    function o() {\n      var e = t.params.thumbs;\n      if (r) return !1;\n      r = !0;\n      var s = t.constructor;\n      if (e.swiper instanceof s) t.thumbs.swiper = e.swiper, Object.assign(t.thumbs.swiper.originalParams, {\n        watchSlidesProgress: !0,\n        slideToClickedSlide: !1\n      }), Object.assign(t.thumbs.swiper.params, {\n        watchSlidesProgress: !0,\n        slideToClickedSlide: !1\n      }), t.thumbs.swiper.update();else if (d(e.swiper)) {\n        var _a21 = Object.assign({}, e.swiper);\n        Object.assign(_a21, {\n          watchSlidesProgress: !0,\n          slideToClickedSlide: !1\n        }), t.thumbs.swiper = new s(_a21), n = !0;\n      }\n      return t.thumbs.swiper.el.classList.add(t.params.thumbs.thumbsContainerClass), t.thumbs.swiper.on(\"tap\", l), !0;\n    }\n    function c(e) {\n      var s = t.thumbs.swiper;\n      if (!s || s.destroyed) return;\n      var a = \"auto\" === s.params.slidesPerView ? s.slidesPerViewDynamic() : s.params.slidesPerView;\n      var i = 1;\n      var r = t.params.thumbs.slideThumbActiveClass;\n      if (t.params.slidesPerView > 1 && !t.params.centeredSlides && (i = t.params.slidesPerView), t.params.thumbs.multipleActiveThumbs || (i = 1), i = Math.floor(i), s.slides.forEach(function (e) {\n        return e.classList.remove(r);\n      }), s.params.loop || s.params.virtual && s.params.virtual.enabled) for (var _e54 = 0; _e54 < i; _e54 += 1) f(s.slidesEl, \"[data-swiper-slide-index=\\\"\".concat(t.realIndex + _e54, \"\\\"]\")).forEach(function (e) {\n        e.classList.add(r);\n      });else for (var _e55 = 0; _e55 < i; _e55 += 1) s.slides[t.realIndex + _e55] && s.slides[t.realIndex + _e55].classList.add(r);\n      var n = t.params.thumbs.autoScrollOffset,\n        l = n && !s.params.loop;\n      if (t.realIndex !== s.realIndex || l) {\n        var _i15 = s.activeIndex;\n        var _r13, _o7;\n        if (s.params.loop) {\n          var _e56 = s.slides.filter(function (e) {\n            return e.getAttribute(\"data-swiper-slide-index\") === \"\".concat(t.realIndex);\n          })[0];\n          _r13 = s.slides.indexOf(_e56), _o7 = t.activeIndex > t.previousIndex ? \"next\" : \"prev\";\n        } else _r13 = t.realIndex, _o7 = _r13 > t.previousIndex ? \"next\" : \"prev\";\n        l && (_r13 += \"next\" === _o7 ? n : -1 * n), s.visibleSlidesIndexes && s.visibleSlidesIndexes.indexOf(_r13) < 0 && (s.params.centeredSlides ? _r13 = _r13 > _i15 ? _r13 - Math.floor(a / 2) + 1 : _r13 + Math.floor(a / 2) - 1 : _r13 > _i15 && s.params.slidesPerGroup, s.slideTo(_r13, e ? 0 : void 0));\n      }\n    }\n    t.thumbs = {\n      swiper: null\n    }, i(\"beforeInit\", function () {\n      var e = t.params.thumbs;\n      if (e && e.swiper) if (\"string\" == typeof e.swiper || e.swiper instanceof HTMLElement) {\n        var _s37 = a(),\n          _i16 = function _i16() {\n            var a = \"string\" == typeof e.swiper ? _s37.querySelector(e.swiper) : e.swiper;\n            if (a && a.swiper) e.swiper = a.swiper, o(), c(!0);else if (a) {\n              var _s38 = function _s38(i) {\n                e.swiper = i.detail[0], a.removeEventListener(\"init\", _s38), o(), c(!0), e.swiper.update(), t.update();\n              };\n              a.addEventListener(\"init\", _s38);\n            }\n            return a;\n          },\n          _r14 = function _r14() {\n            if (t.destroyed) return;\n            _i16() || requestAnimationFrame(_r14);\n          };\n        requestAnimationFrame(_r14);\n      } else o(), c(!0);\n    }), i(\"slideChange update resize observerUpdate\", function () {\n      c();\n    }), i(\"setTransition\", function (e, s) {\n      var a = t.thumbs.swiper;\n      a && !a.destroyed && a.setTransition(s);\n    }), i(\"beforeDestroy\", function () {\n      var e = t.thumbs.swiper;\n      e && !e.destroyed && n && e.destroy();\n    }), Object.assign(t.thumbs, {\n      init: o,\n      update: c\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.emit,\n      i = e.once;\n    s({\n      freeMode: {\n        enabled: !1,\n        momentum: !0,\n        momentumRatio: 1,\n        momentumBounce: !0,\n        momentumBounceRatio: 1,\n        momentumVelocityRatio: 1,\n        sticky: !1,\n        minimumVelocity: .02\n      }\n    }), Object.assign(t, {\n      freeMode: {\n        onTouchStart: function onTouchStart() {\n          if (t.params.cssMode) return;\n          var e = t.getTranslate();\n          t.setTranslate(e), t.setTransition(0), t.touchEventsData.velocities.length = 0, t.freeMode.onTouchEnd({\n            currentPos: t.rtl ? t.translate : -t.translate\n          });\n        },\n        onTouchMove: function onTouchMove() {\n          if (t.params.cssMode) return;\n          var e = t.touchEventsData,\n            s = t.touches;\n          0 === e.velocities.length && e.velocities.push({\n            position: s[t.isHorizontal() ? \"startX\" : \"startY\"],\n            time: e.touchStartTime\n          }), e.velocities.push({\n            position: s[t.isHorizontal() ? \"currentX\" : \"currentY\"],\n            time: l()\n          });\n        },\n        onTouchEnd: function onTouchEnd(e) {\n          var s = e.currentPos;\n          if (t.params.cssMode) return;\n          var r = t.params,\n            n = t.wrapperEl,\n            o = t.rtlTranslate,\n            d = t.snapGrid,\n            c = t.touchEventsData,\n            p = l() - c.touchStartTime;\n          if (s < -t.minTranslate()) t.slideTo(t.activeIndex);else if (s > -t.maxTranslate()) t.slides.length < d.length ? t.slideTo(d.length - 1) : t.slideTo(t.slides.length - 1);else {\n            if (r.freeMode.momentum) {\n              if (c.velocities.length > 1) {\n                var _e57 = c.velocities.pop(),\n                  _s39 = c.velocities.pop(),\n                  _a22 = _e57.position - _s39.position,\n                  _i17 = _e57.time - _s39.time;\n                t.velocity = _a22 / _i17, t.velocity /= 2, Math.abs(t.velocity) < r.freeMode.minimumVelocity && (t.velocity = 0), (_i17 > 150 || l() - _e57.time > 300) && (t.velocity = 0);\n              } else t.velocity = 0;\n              t.velocity *= r.freeMode.momentumVelocityRatio, c.velocities.length = 0;\n              var _e58 = 1e3 * r.freeMode.momentumRatio;\n              var _s40 = t.velocity * _e58;\n              var _p3 = t.translate + _s40;\n              o && (_p3 = -_p3);\n              var _u3,\n                _m2 = !1;\n              var _h = 20 * Math.abs(t.velocity) * r.freeMode.momentumBounceRatio;\n              var _f;\n              if (_p3 < t.maxTranslate()) r.freeMode.momentumBounce ? (_p3 + t.maxTranslate() < -_h && (_p3 = t.maxTranslate() - _h), _u3 = t.maxTranslate(), _m2 = !0, c.allowMomentumBounce = !0) : _p3 = t.maxTranslate(), r.loop && r.centeredSlides && (_f = !0);else if (_p3 > t.minTranslate()) r.freeMode.momentumBounce ? (_p3 - t.minTranslate() > _h && (_p3 = t.minTranslate() + _h), _u3 = t.minTranslate(), _m2 = !0, c.allowMomentumBounce = !0) : _p3 = t.minTranslate(), r.loop && r.centeredSlides && (_f = !0);else if (r.freeMode.sticky) {\n                var _e59;\n                for (var _t42 = 0; _t42 < d.length; _t42 += 1) if (d[_t42] > -_p3) {\n                  _e59 = _t42;\n                  break;\n                }\n                _p3 = Math.abs(d[_e59] - _p3) < Math.abs(d[_e59 - 1] - _p3) || \"next\" === t.swipeDirection ? d[_e59] : d[_e59 - 1], _p3 = -_p3;\n              }\n              if (_f && i(\"transitionEnd\", function () {\n                t.loopFix();\n              }), 0 !== t.velocity) {\n                if (_e58 = o ? Math.abs((-_p3 - t.translate) / t.velocity) : Math.abs((_p3 - t.translate) / t.velocity), r.freeMode.sticky) {\n                  var _s41 = Math.abs((o ? -_p3 : _p3) - t.translate),\n                    _a23 = t.slidesSizesGrid[t.activeIndex];\n                  _e58 = _s41 < _a23 ? r.speed : _s41 < 2 * _a23 ? 1.5 * r.speed : 2.5 * r.speed;\n                }\n              } else if (r.freeMode.sticky) return void t.slideToClosest();\n              r.freeMode.momentumBounce && _m2 ? (t.updateProgress(_u3), t.setTransition(_e58), t.setTranslate(_p3), t.transitionStart(!0, t.swipeDirection), t.animating = !0, E(n, function () {\n                t && !t.destroyed && c.allowMomentumBounce && (a(\"momentumBounce\"), t.setTransition(r.speed), setTimeout(function () {\n                  t.setTranslate(_u3), E(n, function () {\n                    t && !t.destroyed && t.transitionEnd();\n                  });\n                }, 0));\n              })) : t.velocity ? (a(\"_freeModeNoMomentumRelease\"), t.updateProgress(_p3), t.setTransition(_e58), t.setTranslate(_p3), t.transitionStart(!0, t.swipeDirection), t.animating || (t.animating = !0, E(n, function () {\n                t && !t.destroyed && t.transitionEnd();\n              }))) : t.updateProgress(_p3), t.updateActiveIndex(), t.updateSlidesClasses();\n            } else {\n              if (r.freeMode.sticky) return void t.slideToClosest();\n              r.freeMode && a(\"_freeModeNoMomentumRelease\");\n            }\n            (!r.freeMode.momentum || p >= r.longSwipesMs) && (t.updateProgress(), t.updateActiveIndex(), t.updateSlidesClasses());\n          }\n        }\n      }\n    });\n  }, function (e) {\n    var t,\n      s,\n      a,\n      i = e.swiper,\n      r = e.extendParams;\n    r({\n      grid: {\n        rows: 1,\n        fill: \"column\"\n      }\n    });\n    var n = function n() {\n      var e = i.params.spaceBetween;\n      return \"string\" == typeof e && e.indexOf(\"%\") >= 0 ? e = parseFloat(e.replace(\"%\", \"\")) / 100 * i.size : \"string\" == typeof e && (e = parseFloat(e)), e;\n    };\n    i.grid = {\n      initSlides: function initSlides(e) {\n        var r = i.params.slidesPerView,\n          _i$params$grid = i.params.grid,\n          n = _i$params$grid.rows,\n          l = _i$params$grid.fill;\n        a = Math.floor(e / n), t = Math.floor(e / n) === e / n ? e : Math.ceil(e / n) * n, \"auto\" !== r && \"row\" === l && (t = Math.max(t, r * n)), s = t / n;\n      },\n      updateSlide: function updateSlide(e, r, l, o) {\n        var d = i.params.slidesPerGroup,\n          c = n(),\n          _i$params$grid2 = i.params.grid,\n          p = _i$params$grid2.rows,\n          u = _i$params$grid2.fill;\n        var m, h, f;\n        if (\"row\" === u && d > 1) {\n          var _s42 = Math.floor(e / (d * p)),\n            _a24 = e - p * d * _s42,\n            _i18 = 0 === _s42 ? d : Math.min(Math.ceil((l - _s42 * p * d) / p), d);\n          f = Math.floor(_a24 / _i18), h = _a24 - f * _i18 + _s42 * d, m = h + f * t / p, r.style.order = m;\n        } else \"column\" === u ? (h = Math.floor(e / p), f = e - h * p, (h > a || h === a && f === p - 1) && (f += 1, f >= p && (f = 0, h += 1))) : (f = Math.floor(e / s), h = e - f * s);\n        r.row = f, r.column = h, r.style[o(\"margin-top\")] = 0 !== f ? c && \"\".concat(c, \"px\") : \"\";\n      },\n      updateWrapperSize: function updateWrapperSize(e, s, a) {\n        var _i$params = i.params,\n          r = _i$params.centeredSlides,\n          l = _i$params.roundLengths,\n          o = n(),\n          d = i.params.grid.rows;\n        if (i.virtualSize = (e + o) * t, i.virtualSize = Math.ceil(i.virtualSize / d) - o, i.wrapperEl.style[a(\"width\")] = \"\".concat(i.virtualSize + o, \"px\"), r) {\n          var _e60 = [];\n          for (var _t43 = 0; _t43 < s.length; _t43 += 1) {\n            var _a25 = s[_t43];\n            l && (_a25 = Math.floor(_a25)), s[_t43] < i.virtualSize + s[0] && _e60.push(_a25);\n          }\n          s.splice(0, s.length), s.push.apply(s, _e60);\n        }\n      }\n    };\n  }, function (e) {\n    var t = e.swiper;\n    Object.assign(t, {\n      appendSlide: se.bind(t),\n      prependSlide: ae.bind(t),\n      addSlide: ie.bind(t),\n      removeSlide: re.bind(t),\n      removeAllSlides: ne.bind(t)\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      fadeEffect: {\n        crossFade: !1\n      }\n    }), le({\n      effect: \"fade\",\n      swiper: t,\n      on: a,\n      setTranslate: function setTranslate() {\n        var e = t.slides;\n        t.params.fadeEffect;\n        for (var _s43 = 0; _s43 < e.length; _s43 += 1) {\n          var _e61 = t.slides[_s43];\n          var _a26 = -_e61.swiperSlideOffset;\n          t.params.virtualTranslate || (_a26 -= t.translate);\n          var _i19 = 0;\n          t.isHorizontal() || (_i19 = _a26, _a26 = 0);\n          var _r15 = t.params.fadeEffect.crossFade ? Math.max(1 - Math.abs(_e61.progress), 0) : 1 + Math.min(Math.max(_e61.progress, -1), 0),\n            _n7 = oe(0, _e61);\n          _n7.style.opacity = _r15, _n7.style.transform = \"translate3d(\".concat(_a26, \"px, \").concat(_i19, \"px, 0px)\");\n        }\n      },\n      setTransition: function setTransition(e) {\n        var s = t.slides.map(function (e) {\n          return h(e);\n        });\n        s.forEach(function (t) {\n          t.style.transitionDuration = \"\".concat(e, \"ms\");\n        }), de({\n          swiper: t,\n          duration: e,\n          transformElements: s,\n          allSlides: !0\n        });\n      },\n      overwriteParams: function overwriteParams() {\n        return {\n          slidesPerView: 1,\n          slidesPerGroup: 1,\n          watchSlidesProgress: !0,\n          spaceBetween: 0,\n          virtualTranslate: !t.params.cssMode\n        };\n      }\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      cubeEffect: {\n        slideShadows: !0,\n        shadow: !0,\n        shadowOffset: 20,\n        shadowScale: .94\n      }\n    });\n    var i = function i(e, t, s) {\n      var a = s ? e.querySelector(\".swiper-slide-shadow-left\") : e.querySelector(\".swiper-slide-shadow-top\"),\n        i = s ? e.querySelector(\".swiper-slide-shadow-right\") : e.querySelector(\".swiper-slide-shadow-bottom\");\n      a || (a = g(\"div\", \"swiper-slide-shadow-\" + (s ? \"left\" : \"top\")), e.append(a)), i || (i = g(\"div\", \"swiper-slide-shadow-\" + (s ? \"right\" : \"bottom\")), e.append(i)), a && (a.style.opacity = Math.max(-t, 0)), i && (i.style.opacity = Math.max(t, 0));\n    };\n    le({\n      effect: \"cube\",\n      swiper: t,\n      on: a,\n      setTranslate: function setTranslate() {\n        var e = t.el,\n          s = t.wrapperEl,\n          a = t.slides,\n          r = t.width,\n          n = t.height,\n          l = t.rtlTranslate,\n          o = t.size,\n          d = t.browser,\n          c = t.params.cubeEffect,\n          p = t.isHorizontal(),\n          u = t.virtual && t.params.virtual.enabled;\n        var m,\n          h = 0;\n        c.shadow && (p ? (m = t.slidesEl.querySelector(\".swiper-cube-shadow\"), m || (m = g(\"div\", \"swiper-cube-shadow\"), t.slidesEl.append(m)), m.style.height = \"\".concat(r, \"px\")) : (m = e.querySelector(\".swiper-cube-shadow\"), m || (m = g(\"div\", \"swiper-cube-shadow\"), e.append(m))));\n        for (var _e62 = 0; _e62 < a.length; _e62 += 1) {\n          var _t44 = a[_e62];\n          var _s44 = _e62;\n          u && (_s44 = parseInt(_t44.getAttribute(\"data-swiper-slide-index\"), 10));\n          var _r16 = 90 * _s44,\n            _n8 = Math.floor(_r16 / 360);\n          l && (_r16 = -_r16, _n8 = Math.floor(-_r16 / 360));\n          var _d4 = Math.max(Math.min(_t44.progress, 1), -1);\n          var _m3 = 0,\n            _f2 = 0,\n            _g = 0;\n          _s44 % 4 == 0 ? (_m3 = 4 * -_n8 * o, _g = 0) : (_s44 - 1) % 4 == 0 ? (_m3 = 0, _g = 4 * -_n8 * o) : (_s44 - 2) % 4 == 0 ? (_m3 = o + 4 * _n8 * o, _g = o) : (_s44 - 3) % 4 == 0 && (_m3 = -o, _g = 3 * o + 4 * o * _n8), l && (_m3 = -_m3), p || (_f2 = _m3, _m3 = 0);\n          var _v = \"rotateX(\".concat(p ? 0 : -_r16, \"deg) rotateY(\").concat(p ? _r16 : 0, \"deg) translate3d(\").concat(_m3, \"px, \").concat(_f2, \"px, \").concat(_g, \"px)\");\n          _d4 <= 1 && _d4 > -1 && (h = 90 * _s44 + 90 * _d4, l && (h = 90 * -_s44 - 90 * _d4)), _t44.style.transform = _v, c.slideShadows && i(_t44, _d4, p);\n        }\n        if (s.style.transformOrigin = \"50% 50% -\".concat(o / 2, \"px\"), s.style[\"-webkit-transform-origin\"] = \"50% 50% -\".concat(o / 2, \"px\"), c.shadow) if (p) m.style.transform = \"translate3d(0px, \".concat(r / 2 + c.shadowOffset, \"px, \").concat(-r / 2, \"px) rotateX(90deg) rotateZ(0deg) scale(\").concat(c.shadowScale, \")\");else {\n          var _e63 = Math.abs(h) - 90 * Math.floor(Math.abs(h) / 90),\n            _t45 = 1.5 - (Math.sin(2 * _e63 * Math.PI / 360) / 2 + Math.cos(2 * _e63 * Math.PI / 360) / 2),\n            _s45 = c.shadowScale,\n            _a27 = c.shadowScale / _t45,\n            _i20 = c.shadowOffset;\n          m.style.transform = \"scale3d(\".concat(_s45, \", 1, \").concat(_a27, \") translate3d(0px, \").concat(n / 2 + _i20, \"px, \").concat(-n / 2 / _a27, \"px) rotateX(-90deg)\");\n        }\n        var f = (d.isSafari || d.isWebView) && d.needPerspectiveFix ? -o / 2 : 0;\n        s.style.transform = \"translate3d(0px,0,\".concat(f, \"px) rotateX(\").concat(t.isHorizontal() ? 0 : h, \"deg) rotateY(\").concat(t.isHorizontal() ? -h : 0, \"deg)\"), s.style.setProperty(\"--swiper-cube-translate-z\", \"\".concat(f, \"px\"));\n      },\n      setTransition: function setTransition(e) {\n        var s = t.el,\n          a = t.slides;\n        if (a.forEach(function (t) {\n          t.style.transitionDuration = \"\".concat(e, \"ms\"), t.querySelectorAll(\".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left\").forEach(function (t) {\n            t.style.transitionDuration = \"\".concat(e, \"ms\");\n          });\n        }), t.params.cubeEffect.shadow && !t.isHorizontal()) {\n          var _t46 = s.querySelector(\".swiper-cube-shadow\");\n          _t46 && (_t46.style.transitionDuration = \"\".concat(e, \"ms\"));\n        }\n      },\n      recreateShadows: function recreateShadows() {\n        var e = t.isHorizontal();\n        t.slides.forEach(function (t) {\n          var s = Math.max(Math.min(t.progress, 1), -1);\n          i(t, s, e);\n        });\n      },\n      getEffectParams: function getEffectParams() {\n        return t.params.cubeEffect;\n      },\n      perspective: function perspective() {\n        return !0;\n      },\n      overwriteParams: function overwriteParams() {\n        return {\n          slidesPerView: 1,\n          slidesPerGroup: 1,\n          watchSlidesProgress: !0,\n          resistanceRatio: 0,\n          spaceBetween: 0,\n          centeredSlides: !1,\n          virtualTranslate: !0\n        };\n      }\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      flipEffect: {\n        slideShadows: !0,\n        limitRotation: !0\n      }\n    });\n    var i = function i(e, s, a) {\n      var i = t.isHorizontal() ? e.querySelector(\".swiper-slide-shadow-left\") : e.querySelector(\".swiper-slide-shadow-top\"),\n        r = t.isHorizontal() ? e.querySelector(\".swiper-slide-shadow-right\") : e.querySelector(\".swiper-slide-shadow-bottom\");\n      i || (i = ce(0, e, t.isHorizontal() ? \"left\" : \"top\")), r || (r = ce(0, e, t.isHorizontal() ? \"right\" : \"bottom\")), i && (i.style.opacity = Math.max(-s, 0)), r && (r.style.opacity = Math.max(s, 0));\n    };\n    le({\n      effect: \"flip\",\n      swiper: t,\n      on: a,\n      setTranslate: function setTranslate() {\n        var e = t.slides,\n          s = t.rtlTranslate,\n          a = t.params.flipEffect;\n        for (var _r17 = 0; _r17 < e.length; _r17 += 1) {\n          var _n9 = e[_r17];\n          var _l8 = _n9.progress;\n          t.params.flipEffect.limitRotation && (_l8 = Math.max(Math.min(_n9.progress, 1), -1));\n          var _o8 = _n9.swiperSlideOffset;\n          var _d5 = -180 * _l8,\n            _c3 = 0,\n            _p4 = t.params.cssMode ? -_o8 - t.translate : -_o8,\n            _u4 = 0;\n          t.isHorizontal() ? s && (_d5 = -_d5) : (_u4 = _p4, _p4 = 0, _c3 = -_d5, _d5 = 0), _n9.style.zIndex = -Math.abs(Math.round(_l8)) + e.length, a.slideShadows && i(_n9, _l8);\n          var _m4 = \"translate3d(\".concat(_p4, \"px, \").concat(_u4, \"px, 0px) rotateX(\").concat(_c3, \"deg) rotateY(\").concat(_d5, \"deg)\");\n          oe(0, _n9).style.transform = _m4;\n        }\n      },\n      setTransition: function setTransition(e) {\n        var s = t.slides.map(function (e) {\n          return h(e);\n        });\n        s.forEach(function (t) {\n          t.style.transitionDuration = \"\".concat(e, \"ms\"), t.querySelectorAll(\".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left\").forEach(function (t) {\n            t.style.transitionDuration = \"\".concat(e, \"ms\");\n          });\n        }), de({\n          swiper: t,\n          duration: e,\n          transformElements: s\n        });\n      },\n      recreateShadows: function recreateShadows() {\n        t.params.flipEffect;\n        t.slides.forEach(function (e) {\n          var s = e.progress;\n          t.params.flipEffect.limitRotation && (s = Math.max(Math.min(e.progress, 1), -1)), i(e, s);\n        });\n      },\n      getEffectParams: function getEffectParams() {\n        return t.params.flipEffect;\n      },\n      perspective: function perspective() {\n        return !0;\n      },\n      overwriteParams: function overwriteParams() {\n        return {\n          slidesPerView: 1,\n          slidesPerGroup: 1,\n          watchSlidesProgress: !0,\n          spaceBetween: 0,\n          virtualTranslate: !t.params.cssMode\n        };\n      }\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      coverflowEffect: {\n        rotate: 50,\n        stretch: 0,\n        depth: 100,\n        scale: 1,\n        modifier: 1,\n        slideShadows: !0\n      }\n    }), le({\n      effect: \"coverflow\",\n      swiper: t,\n      on: a,\n      setTranslate: function setTranslate() {\n        var e = t.width,\n          s = t.height,\n          a = t.slides,\n          i = t.slidesSizesGrid,\n          r = t.params.coverflowEffect,\n          n = t.isHorizontal(),\n          l = t.translate,\n          o = n ? e / 2 - l : s / 2 - l,\n          d = n ? r.rotate : -r.rotate,\n          c = r.depth;\n        for (var _e64 = 0, _t47 = a.length; _e64 < _t47; _e64 += 1) {\n          var _t48 = a[_e64],\n            _s46 = i[_e64],\n            _l9 = (o - _t48.swiperSlideOffset - _s46 / 2) / _s46,\n            _p5 = \"function\" == typeof r.modifier ? r.modifier(_l9) : _l9 * r.modifier;\n          var _u5 = n ? d * _p5 : 0,\n            _m5 = n ? 0 : d * _p5,\n            _h2 = -c * Math.abs(_p5),\n            _f3 = r.stretch;\n          \"string\" == typeof _f3 && -1 !== _f3.indexOf(\"%\") && (_f3 = parseFloat(r.stretch) / 100 * _s46);\n          var _g2 = n ? 0 : _f3 * _p5,\n            _v2 = n ? _f3 * _p5 : 0,\n            _w = 1 - (1 - r.scale) * Math.abs(_p5);\n          Math.abs(_v2) < .001 && (_v2 = 0), Math.abs(_g2) < .001 && (_g2 = 0), Math.abs(_h2) < .001 && (_h2 = 0), Math.abs(_u5) < .001 && (_u5 = 0), Math.abs(_m5) < .001 && (_m5 = 0), Math.abs(_w) < .001 && (_w = 0);\n          var _b = \"translate3d(\".concat(_v2, \"px,\").concat(_g2, \"px,\").concat(_h2, \"px)  rotateX(\").concat(_m5, \"deg) rotateY(\").concat(_u5, \"deg) scale(\").concat(_w, \")\");\n          if (oe(0, _t48).style.transform = _b, _t48.style.zIndex = 1 - Math.abs(Math.round(_p5)), r.slideShadows) {\n            var _e65 = n ? _t48.querySelector(\".swiper-slide-shadow-left\") : _t48.querySelector(\".swiper-slide-shadow-top\"),\n              _s47 = n ? _t48.querySelector(\".swiper-slide-shadow-right\") : _t48.querySelector(\".swiper-slide-shadow-bottom\");\n            _e65 || (_e65 = ce(0, _t48, n ? \"left\" : \"top\")), _s47 || (_s47 = ce(0, _t48, n ? \"right\" : \"bottom\")), _e65 && (_e65.style.opacity = _p5 > 0 ? _p5 : 0), _s47 && (_s47.style.opacity = -_p5 > 0 ? -_p5 : 0);\n          }\n        }\n      },\n      setTransition: function setTransition(e) {\n        t.slides.map(function (e) {\n          return h(e);\n        }).forEach(function (t) {\n          t.style.transitionDuration = \"\".concat(e, \"ms\"), t.querySelectorAll(\".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left\").forEach(function (t) {\n            t.style.transitionDuration = \"\".concat(e, \"ms\");\n          });\n        });\n      },\n      perspective: function perspective() {\n        return !0;\n      },\n      overwriteParams: function overwriteParams() {\n        return {\n          watchSlidesProgress: !0\n        };\n      }\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      creativeEffect: {\n        limitProgress: 1,\n        shadowPerProgress: !1,\n        progressMultiplier: 1,\n        perspective: !0,\n        prev: {\n          translate: [0, 0, 0],\n          rotate: [0, 0, 0],\n          opacity: 1,\n          scale: 1\n        },\n        next: {\n          translate: [0, 0, 0],\n          rotate: [0, 0, 0],\n          opacity: 1,\n          scale: 1\n        }\n      }\n    });\n    var i = function i(e) {\n      return \"string\" == typeof e ? e : \"\".concat(e, \"px\");\n    };\n    le({\n      effect: \"creative\",\n      swiper: t,\n      on: a,\n      setTranslate: function setTranslate() {\n        var e = t.slides,\n          s = t.wrapperEl,\n          a = t.slidesSizesGrid,\n          r = t.params.creativeEffect,\n          n = r.progressMultiplier,\n          l = t.params.centeredSlides;\n        if (l) {\n          var _e66 = a[0] / 2 - t.params.slidesOffsetBefore || 0;\n          s.style.transform = \"translateX(calc(50% - \".concat(_e66, \"px))\");\n        }\n        var _loop = function _loop() {\n          var a = e[_s48],\n            o = a.progress,\n            d = Math.min(Math.max(a.progress, -r.limitProgress), r.limitProgress);\n          var c = d;\n          l || (c = Math.min(Math.max(a.originalProgress, -r.limitProgress), r.limitProgress));\n          var p = a.swiperSlideOffset,\n            u = [t.params.cssMode ? -p - t.translate : -p, 0, 0],\n            m = [0, 0, 0];\n          var h = !1;\n          t.isHorizontal() || (u[1] = u[0], u[0] = 0);\n          var f = {\n            translate: [0, 0, 0],\n            rotate: [0, 0, 0],\n            scale: 1,\n            opacity: 1\n          };\n          d < 0 ? (f = r.next, h = !0) : d > 0 && (f = r.prev, h = !0), u.forEach(function (e, t) {\n            u[t] = \"calc(\".concat(e, \"px + (\").concat(i(f.translate[t]), \" * \").concat(Math.abs(d * n), \"))\");\n          }), m.forEach(function (e, t) {\n            m[t] = f.rotate[t] * Math.abs(d * n);\n          }), a.style.zIndex = -Math.abs(Math.round(o)) + e.length;\n          var g = u.join(\", \"),\n            v = \"rotateX(\".concat(m[0], \"deg) rotateY(\").concat(m[1], \"deg) rotateZ(\").concat(m[2], \"deg)\"),\n            w = c < 0 ? \"scale(\".concat(1 + (1 - f.scale) * c * n, \")\") : \"scale(\".concat(1 - (1 - f.scale) * c * n, \")\"),\n            b = c < 0 ? 1 + (1 - f.opacity) * c * n : 1 - (1 - f.opacity) * c * n,\n            y = \"translate3d(\".concat(g, \") \").concat(v, \" \").concat(w);\n          if (h && f.shadow || !h) {\n            var _e67 = a.querySelector(\".swiper-slide-shadow\");\n            if (!_e67 && f.shadow && (_e67 = ce(0, a)), _e67) {\n              var _t49 = r.shadowPerProgress ? d * (1 / r.limitProgress) : d;\n              _e67.style.opacity = Math.min(Math.max(Math.abs(_t49), 0), 1);\n            }\n          }\n          var E = oe(0, a);\n          E.style.transform = y, E.style.opacity = b, f.origin && (E.style.transformOrigin = f.origin);\n        };\n        for (var _s48 = 0; _s48 < e.length; _s48 += 1) {\n          _loop();\n        }\n      },\n      setTransition: function setTransition(e) {\n        var s = t.slides.map(function (e) {\n          return h(e);\n        });\n        s.forEach(function (t) {\n          t.style.transitionDuration = \"\".concat(e, \"ms\"), t.querySelectorAll(\".swiper-slide-shadow\").forEach(function (t) {\n            t.style.transitionDuration = \"\".concat(e, \"ms\");\n          });\n        }), de({\n          swiper: t,\n          duration: e,\n          transformElements: s,\n          allSlides: !0\n        });\n      },\n      perspective: function perspective() {\n        return t.params.creativeEffect.perspective;\n      },\n      overwriteParams: function overwriteParams() {\n        return {\n          watchSlidesProgress: !0,\n          virtualTranslate: !t.params.cssMode\n        };\n      }\n    });\n  }, function (e) {\n    var t = e.swiper,\n      s = e.extendParams,\n      a = e.on;\n    s({\n      cardsEffect: {\n        slideShadows: !0,\n        rotate: !0,\n        perSlideRotate: 2,\n        perSlideOffset: 8\n      }\n    }), le({\n      effect: \"cards\",\n      swiper: t,\n      on: a,\n      setTranslate: function setTranslate() {\n        var e = t.slides,\n          s = t.activeIndex,\n          a = t.rtlTranslate,\n          i = t.params.cardsEffect,\n          _t$touchEventsData = t.touchEventsData,\n          r = _t$touchEventsData.startTranslate,\n          n = _t$touchEventsData.isTouched,\n          l = a ? -t.translate : t.translate;\n        for (var _o9 = 0; _o9 < e.length; _o9 += 1) {\n          var _d6 = e[_o9],\n            _c4 = _d6.progress,\n            _p6 = Math.min(Math.max(_c4, -4), 4);\n          var _u6 = _d6.swiperSlideOffset;\n          t.params.centeredSlides && !t.params.cssMode && (t.wrapperEl.style.transform = \"translateX(\".concat(t.minTranslate(), \"px)\")), t.params.centeredSlides && t.params.cssMode && (_u6 -= e[0].swiperSlideOffset);\n          var _m6 = t.params.cssMode ? -_u6 - t.translate : -_u6,\n            _h3 = 0;\n          var _f4 = -100 * Math.abs(_p6);\n          var _g3 = 1,\n            _v3 = -i.perSlideRotate * _p6,\n            _w2 = i.perSlideOffset - .75 * Math.abs(_p6);\n          var _b2 = t.virtual && t.params.virtual.enabled ? t.virtual.from + _o9 : _o9,\n            _y = (_b2 === s || _b2 === s - 1) && _p6 > 0 && _p6 < 1 && (n || t.params.cssMode) && l < r,\n            _E = (_b2 === s || _b2 === s + 1) && _p6 < 0 && _p6 > -1 && (n || t.params.cssMode) && l > r;\n          if (_y || _E) {\n            var _e68 = Math.pow(1 - Math.abs((Math.abs(_p6) - .5) / .5), .5);\n            _v3 += -28 * _p6 * _e68, _g3 += -.5 * _e68, _w2 += 96 * _e68, _h3 = -25 * _e68 * Math.abs(_p6) + \"%\";\n          }\n          if (_m6 = _p6 < 0 ? \"calc(\".concat(_m6, \"px \").concat(a ? \"-\" : \"+\", \" (\").concat(_w2 * Math.abs(_p6), \"%))\") : _p6 > 0 ? \"calc(\".concat(_m6, \"px \").concat(a ? \"-\" : \"+\", \" (-\").concat(_w2 * Math.abs(_p6), \"%))\") : \"\".concat(_m6, \"px\"), !t.isHorizontal()) {\n            var _e69 = _h3;\n            _h3 = _m6, _m6 = _e69;\n          }\n          var _x = _p6 < 0 ? \"\" + (1 + (1 - _g3) * _p6) : \"\" + (1 - (1 - _g3) * _p6),\n            _S = \"\\n        translate3d(\".concat(_m6, \", \").concat(_h3, \", \").concat(_f4, \"px)\\n        rotateZ(\").concat(i.rotate ? a ? -_v3 : _v3 : 0, \"deg)\\n        scale(\").concat(_x, \")\\n      \");\n          if (i.slideShadows) {\n            var _e70 = _d6.querySelector(\".swiper-slide-shadow\");\n            _e70 || (_e70 = ce(0, _d6)), _e70 && (_e70.style.opacity = Math.min(Math.max((Math.abs(_p6) - .5) / .5, 0), 1));\n          }\n          _d6.style.zIndex = -Math.abs(Math.round(_c4)) + e.length;\n          oe(0, _d6).style.transform = _S;\n        }\n      },\n      setTransition: function setTransition(e) {\n        var s = t.slides.map(function (e) {\n          return h(e);\n        });\n        s.forEach(function (t) {\n          t.style.transitionDuration = \"\".concat(e, \"ms\"), t.querySelectorAll(\".swiper-slide-shadow\").forEach(function (t) {\n            t.style.transitionDuration = \"\".concat(e, \"ms\");\n          });\n        }), de({\n          swiper: t,\n          duration: e,\n          transformElements: s\n        });\n      },\n      perspective: function perspective() {\n        return !0;\n      },\n      overwriteParams: function overwriteParams() {\n        return {\n          watchSlidesProgress: !0,\n          virtualTranslate: !t.params.cssMode\n        };\n      }\n    });\n  }];\n  return J.use(pe), J;\n});\n\n/*!\r\n * imagesLoaded PACKAGED v5.0.0\r\n * JavaScript is all like \"You images are done yet or what?\"\r\n * MIT License\r\n */\n!function (t, e) {\n  \"object\" == (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) && module.exports ? module.exports = e() : t.EvEmitter = e();\n}(\"undefined\" != typeof window ? window : undefined, function () {\n  function t() {}\n  var e = t.prototype;\n  return e.on = function (t, e) {\n    if (!t || !e) return this;\n    var i = this._events = this._events || {},\n      s = i[t] = i[t] || [];\n    return s.includes(e) || s.push(e), this;\n  }, e.once = function (t, e) {\n    if (!t || !e) return this;\n    this.on(t, e);\n    var i = this._onceEvents = this._onceEvents || {};\n    return (i[t] = i[t] || {})[e] = !0, this;\n  }, e.off = function (t, e) {\n    var i = this._events && this._events[t];\n    if (!i || !i.length) return this;\n    var s = i.indexOf(e);\n    return -1 != s && i.splice(s, 1), this;\n  }, e.emitEvent = function (t, e) {\n    var i = this._events && this._events[t];\n    if (!i || !i.length) return this;\n    i = i.slice(0), e = e || [];\n    var s = this._onceEvents && this._onceEvents[t];\n    var _iterator = _createForOfIteratorHelper(i),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var n = _step.value;\n        s && s[n] && (this.off(t, n), delete s[n]), n.apply(this, e);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    return this;\n  }, e.allOff = function () {\n    return delete this._events, delete this._onceEvents, this;\n  }, t;\n}),\n/*!\r\n * imagesLoaded v5.0.0\r\n * JavaScript is all like \"You images are done yet or what?\"\r\n * MIT License\r\n */\nfunction (t, e) {\n  \"object\" == (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) && module.exports ? module.exports = e(t, require(\"ev-emitter\")) : t.imagesLoaded = e(t, t.EvEmitter);\n}(\"undefined\" != typeof window ? window : undefined, function (t, e) {\n  var i = t.jQuery,\n    s = t.console;\n  function n(t, e, o) {\n    if (!(this instanceof n)) return new n(t, e, o);\n    var r = t;\n    var h;\n    (\"string\" == typeof t && (r = document.querySelectorAll(t)), r) ? (this.elements = (h = r, Array.isArray(h) ? h : \"object\" == _typeof(h) && \"number\" == typeof h.length ? _toConsumableArray(h) : [h]), this.options = {}, \"function\" == typeof e ? o = e : Object.assign(this.options, e), o && this.on(\"always\", o), this.getImages(), i && (this.jqDeferred = new i.Deferred()), setTimeout(this.check.bind(this))) : s.error(\"Bad element for imagesLoaded \".concat(r || t));\n  }\n  n.prototype = Object.create(e.prototype), n.prototype.getImages = function () {\n    this.images = [], this.elements.forEach(this.addElementImages, this);\n  };\n  var o = [1, 9, 11];\n  n.prototype.addElementImages = function (t) {\n    \"IMG\" === t.nodeName && this.addImage(t), !0 === this.options.background && this.addElementBackgroundImages(t);\n    var e = t.nodeType;\n    if (!e || !o.includes(e)) return;\n    var i = t.querySelectorAll(\"img\");\n    var _iterator2 = _createForOfIteratorHelper(i),\n      _step2;\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _t51 = _step2.value;\n        this.addImage(_t51);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n    if (\"string\" == typeof this.options.background) {\n      var _e71 = t.querySelectorAll(this.options.background);\n      var _iterator3 = _createForOfIteratorHelper(_e71),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _t50 = _step3.value;\n          this.addElementBackgroundImages(_t50);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  };\n  var r = /url\\((['\"])?(.*?)\\1\\)/gi;\n  function h(t) {\n    this.img = t;\n  }\n  function d(t, e) {\n    this.url = t, this.element = e, this.img = new Image();\n  }\n  return n.prototype.addElementBackgroundImages = function (t) {\n    var e = getComputedStyle(t);\n    if (!e) return;\n    var i = r.exec(e.backgroundImage);\n    for (; null !== i;) {\n      var _s49 = i && i[2];\n      _s49 && this.addBackground(_s49, t), i = r.exec(e.backgroundImage);\n    }\n  }, n.prototype.addImage = function (t) {\n    var e = new h(t);\n    this.images.push(e);\n  }, n.prototype.addBackground = function (t, e) {\n    var i = new d(t, e);\n    this.images.push(i);\n  }, n.prototype.check = function () {\n    var _this = this;\n    if (this.progressedCount = 0, this.hasAnyBroken = !1, !this.images.length) return void this.complete();\n    var t = function t(_t52, e, i) {\n      setTimeout(function () {\n        _this.progress(_t52, e, i);\n      });\n    };\n    this.images.forEach(function (e) {\n      e.once(\"progress\", t), e.check();\n    });\n  }, n.prototype.progress = function (t, e, i) {\n    this.progressedCount++, this.hasAnyBroken = this.hasAnyBroken || !t.isLoaded, this.emitEvent(\"progress\", [this, t, e]), this.jqDeferred && this.jqDeferred.notify && this.jqDeferred.notify(this, t), this.progressedCount === this.images.length && this.complete(), this.options.debug && s && s.log(\"progress: \".concat(i), t, e);\n  }, n.prototype.complete = function () {\n    var t = this.hasAnyBroken ? \"fail\" : \"done\";\n    if (this.isComplete = !0, this.emitEvent(t, [this]), this.emitEvent(\"always\", [this]), this.jqDeferred) {\n      var _t53 = this.hasAnyBroken ? \"reject\" : \"resolve\";\n      this.jqDeferred[_t53](this);\n    }\n  }, h.prototype = Object.create(e.prototype), h.prototype.check = function () {\n    this.getIsImageComplete() ? this.confirm(0 !== this.img.naturalWidth, \"naturalWidth\") : (this.proxyImage = new Image(), this.img.crossOrigin && (this.proxyImage.crossOrigin = this.img.crossOrigin), this.proxyImage.addEventListener(\"load\", this), this.proxyImage.addEventListener(\"error\", this), this.img.addEventListener(\"load\", this), this.img.addEventListener(\"error\", this), this.proxyImage.src = this.img.currentSrc || this.img.src);\n  }, h.prototype.getIsImageComplete = function () {\n    return this.img.complete && this.img.naturalWidth;\n  }, h.prototype.confirm = function (t, e) {\n    this.isLoaded = t;\n    var i = this.img.parentNode,\n      s = \"PICTURE\" === i.nodeName ? i : this.img;\n    this.emitEvent(\"progress\", [this, s, e]);\n  }, h.prototype.handleEvent = function (t) {\n    var e = \"on\" + t.type;\n    this[e] && this[e](t);\n  }, h.prototype.onload = function () {\n    this.confirm(!0, \"onload\"), this.unbindEvents();\n  }, h.prototype.onerror = function () {\n    this.confirm(!1, \"onerror\"), this.unbindEvents();\n  }, h.prototype.unbindEvents = function () {\n    this.proxyImage.removeEventListener(\"load\", this), this.proxyImage.removeEventListener(\"error\", this), this.img.removeEventListener(\"load\", this), this.img.removeEventListener(\"error\", this);\n  }, d.prototype = Object.create(h.prototype), d.prototype.check = function () {\n    this.img.addEventListener(\"load\", this), this.img.addEventListener(\"error\", this), this.img.src = this.url, this.getIsImageComplete() && (this.confirm(0 !== this.img.naturalWidth, \"naturalWidth\"), this.unbindEvents());\n  }, d.prototype.unbindEvents = function () {\n    this.img.removeEventListener(\"load\", this), this.img.removeEventListener(\"error\", this);\n  }, d.prototype.confirm = function (t, e) {\n    this.isLoaded = t, this.emitEvent(\"progress\", [this, this.element, e]);\n  }, n.makeJQueryPlugin = function (e) {\n    (e = e || t.jQuery) && (i = e, i.fn.imagesLoaded = function (t, e) {\n      return new n(this, t, e).jqDeferred.promise(i(this));\n    });\n  }, n.makeJQueryPlugin(), n;\n});\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\n  // Define the media query\n  // imagesLoaded( document.querySelector('.case-item-img-wrapper'), function( instance ) {\n  //     new Splide('.splide-weapons', {\n  //         drag: false,  \n  //         type   : 'loop',\n  //         perMove: 1,\n  //         perPage: 1,\n  //         // rewind : true,\n  //         isNavigation: false,\n  //         direction: 'ttb',\n  //         height: document.querySelector(\".case-item-img-wrapper\").offsetHeight,\n  //         pagination: false,\n  //         arrows: false,\n  //         gap: 0,\n  //         wheel: true,\n  //         // wheelMinThreshold: 2,\n  //         speed: 600,\n  //         wheelSleep: 1000,\n  //         easing: 'ease-in-out'\n  //     }).mount();\n  // });\n  var mobileHelpMenu = new Swiper('.splide-weapons', {\n    // mod: [Mousewheel],\n    speed: 1000,\n    loop: true,\n    direction: \"vertical\",\n    mousewheel: true,\n    slidesPerView: 1,\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev'\n    }\n  });\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tYWluLmpzIiwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21haW4uanM/YzRjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lNzIpIHsgdGhyb3cgX2U3MjsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gaXQuY2FsbChvKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lNzMpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2U3MzsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0LnJldHVybiAhPSBudWxsKSBpdC5yZXR1cm4oKTsgfSBmaW5hbGx5IHsgaWYgKGRpZEVycikgdGhyb3cgZXJyOyB9IH0gfTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH1cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChyLCBsKSB7IHZhciB0ID0gbnVsbCA9PSByID8gbnVsbCA6IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIFN5bWJvbCAmJiByW1N5bWJvbC5pdGVyYXRvcl0gfHwgcltcIkBAaXRlcmF0b3JcIl07IGlmIChudWxsICE9IHQpIHsgdmFyIGUsIG4sIGksIHUsIGEgPSBbXSwgZiA9ICEwLCBvID0gITE7IHRyeSB7IGlmIChpID0gKHQgPSB0LmNhbGwocikpLm5leHQsIDAgPT09IGwpIHsgaWYgKE9iamVjdCh0KSAhPT0gdCkgcmV0dXJuOyBmID0gITE7IH0gZWxzZSBmb3IgKDsgIShmID0gKGUgPSBpLmNhbGwodCkpLmRvbmUpICYmIChhLnB1c2goZS52YWx1ZSksIGEubGVuZ3RoICE9PSBsKTsgZiA9ICEwKTsgfSBjYXRjaCAocikgeyBvID0gITAsIG4gPSByOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIWYgJiYgbnVsbCAhPSB0LnJldHVybiAmJiAodSA9IHQucmV0dXJuKCksIE9iamVjdCh1KSAhPT0gdSkpIHJldHVybjsgfSBmaW5hbGx5IHsgaWYgKG8pIHRocm93IG47IH0gfSByZXR1cm4gYTsgfSB9XG5mdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH1cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfVxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgaXRlcltTeW1ib2wuaXRlcmF0b3JdICE9IG51bGwgfHwgaXRlcltcIkBAaXRlcmF0b3JcIl0gIT0gbnVsbCkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH1cbmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KGFycik7IH1cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07IHJldHVybiBhcnIyOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGtleSA9IF90b1Byb3BlcnR5S2V5KGtleSk7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBTdHJpbmcoaSk7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG4vLyBpbXBvcnQgU3BsaWRlIGZyb20gJ0BzcGxpZGVqcy9zcGxpZGUnXG4vKipcclxuICogU3dpcGVyIDkuNC4xXHJcbiAqIE1vc3QgbW9kZXJuIG1vYmlsZSB0b3VjaCBzbGlkZXIgYW5kIGZyYW1ld29yayB3aXRoIGhhcmR3YXJlIGFjY2VsZXJhdGVkIHRyYW5zaXRpb25zXHJcbiAqIGh0dHBzOi8vc3dpcGVyanMuY29tXHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDE0LTIwMjMgVmxhZGltaXIgS2hhcmxhbXBpZGlcclxuICpcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXHJcbiAqXHJcbiAqIFJlbGVhc2VkIG9uOiBKdW5lIDEzLCAyMDIzXHJcbiAqL1xuXG4hZnVuY3Rpb24gKGUsIHQpIHtcbiAgXCJvYmplY3RcIiA9PSAodHlwZW9mIGV4cG9ydHMgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihleHBvcnRzKSkgJiYgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgbW9kdWxlID8gbW9kdWxlLmV4cG9ydHMgPSB0KCkgOiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKHQpIDogKGUgPSBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBnbG9iYWxUaGlzID8gZ2xvYmFsVGhpcyA6IGUgfHwgc2VsZikuU3dpcGVyID0gdCgpO1xufSh0aGlzLCBmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIGZ1bmN0aW9uIGUoZSkge1xuICAgIHJldHVybiBudWxsICE9PSBlICYmIFwib2JqZWN0XCIgPT0gX3R5cGVvZihlKSAmJiBcImNvbnN0cnVjdG9yXCIgaW4gZSAmJiBlLmNvbnN0cnVjdG9yID09PSBPYmplY3Q7XG4gIH1cbiAgZnVuY3Rpb24gdChzLCBhKSB7XG4gICAgdm9pZCAwID09PSBzICYmIChzID0ge30pLCB2b2lkIDAgPT09IGEgJiYgKGEgPSB7fSksIE9iamVjdC5rZXlzKGEpLmZvckVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgIHZvaWQgMCA9PT0gc1tpXSA/IHNbaV0gPSBhW2ldIDogZShhW2ldKSAmJiBlKHNbaV0pICYmIE9iamVjdC5rZXlzKGFbaV0pLmxlbmd0aCA+IDAgJiYgdChzW2ldLCBhW2ldKTtcbiAgICB9KTtcbiAgfVxuICB2YXIgcyA9IHtcbiAgICBib2R5OiB7fSxcbiAgICBhZGRFdmVudExpc3RlbmVyOiBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKCkge30sXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcigpIHt9LFxuICAgIGFjdGl2ZUVsZW1lbnQ6IHtcbiAgICAgIGJsdXI6IGZ1bmN0aW9uIGJsdXIoKSB7fSxcbiAgICAgIG5vZGVOYW1lOiBcIlwiXG4gICAgfSxcbiAgICBxdWVyeVNlbGVjdG9yOiBmdW5jdGlvbiBxdWVyeVNlbGVjdG9yKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBxdWVyeVNlbGVjdG9yQWxsOiBmdW5jdGlvbiBxdWVyeVNlbGVjdG9yQWxsKCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH0sXG4gICAgZ2V0RWxlbWVudEJ5SWQ6IGZ1bmN0aW9uIGdldEVsZW1lbnRCeUlkKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBjcmVhdGVFdmVudDogZnVuY3Rpb24gY3JlYXRlRXZlbnQoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbml0RXZlbnQ6IGZ1bmN0aW9uIGluaXRFdmVudCgpIHt9XG4gICAgICB9O1xuICAgIH0sXG4gICAgY3JlYXRlRWxlbWVudDogZnVuY3Rpb24gY3JlYXRlRWxlbWVudCgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICAgICAgY2hpbGROb2RlczogW10sXG4gICAgICAgIHN0eWxlOiB7fSxcbiAgICAgICAgc2V0QXR0cmlidXRlOiBmdW5jdGlvbiBzZXRBdHRyaWJ1dGUoKSB7fSxcbiAgICAgICAgZ2V0RWxlbWVudHNCeVRhZ05hbWU6IGZ1bmN0aW9uIGdldEVsZW1lbnRzQnlUYWdOYW1lKCkge1xuICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuICAgIGNyZWF0ZUVsZW1lbnROUzogZnVuY3Rpb24gY3JlYXRlRWxlbWVudE5TKCkge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH0sXG4gICAgaW1wb3J0Tm9kZTogZnVuY3Rpb24gaW1wb3J0Tm9kZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgbG9jYXRpb246IHtcbiAgICAgIGhhc2g6IFwiXCIsXG4gICAgICBob3N0OiBcIlwiLFxuICAgICAgaG9zdG5hbWU6IFwiXCIsXG4gICAgICBocmVmOiBcIlwiLFxuICAgICAgb3JpZ2luOiBcIlwiLFxuICAgICAgcGF0aG5hbWU6IFwiXCIsXG4gICAgICBwcm90b2NvbDogXCJcIixcbiAgICAgIHNlYXJjaDogXCJcIlxuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gYSgpIHtcbiAgICB2YXIgZSA9IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGRvY3VtZW50ID8gZG9jdW1lbnQgOiB7fTtcbiAgICByZXR1cm4gdChlLCBzKSwgZTtcbiAgfVxuICB2YXIgaSA9IHtcbiAgICBkb2N1bWVudDogcyxcbiAgICBuYXZpZ2F0b3I6IHtcbiAgICAgIHVzZXJBZ2VudDogXCJcIlxuICAgIH0sXG4gICAgbG9jYXRpb246IHtcbiAgICAgIGhhc2g6IFwiXCIsXG4gICAgICBob3N0OiBcIlwiLFxuICAgICAgaG9zdG5hbWU6IFwiXCIsXG4gICAgICBocmVmOiBcIlwiLFxuICAgICAgb3JpZ2luOiBcIlwiLFxuICAgICAgcGF0aG5hbWU6IFwiXCIsXG4gICAgICBwcm90b2NvbDogXCJcIixcbiAgICAgIHNlYXJjaDogXCJcIlxuICAgIH0sXG4gICAgaGlzdG9yeToge1xuICAgICAgcmVwbGFjZVN0YXRlOiBmdW5jdGlvbiByZXBsYWNlU3RhdGUoKSB7fSxcbiAgICAgIHB1c2hTdGF0ZTogZnVuY3Rpb24gcHVzaFN0YXRlKCkge30sXG4gICAgICBnbzogZnVuY3Rpb24gZ28oKSB7fSxcbiAgICAgIGJhY2s6IGZ1bmN0aW9uIGJhY2soKSB7fVxuICAgIH0sXG4gICAgQ3VzdG9tRXZlbnQ6IGZ1bmN0aW9uIEN1c3RvbUV2ZW50KCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBhZGRFdmVudExpc3RlbmVyOiBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKCkge30sXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcigpIHt9LFxuICAgIGdldENvbXB1dGVkU3R5bGU6IGZ1bmN0aW9uIGdldENvbXB1dGVkU3R5bGUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBnZXRQcm9wZXJ0eVZhbHVlOiBmdW5jdGlvbiBnZXRQcm9wZXJ0eVZhbHVlKCkge1xuICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG4gICAgSW1hZ2U6IGZ1bmN0aW9uIEltYWdlKCkge30sXG4gICAgRGF0ZTogZnVuY3Rpb24gRGF0ZSgpIHt9LFxuICAgIHNjcmVlbjoge30sXG4gICAgc2V0VGltZW91dDogZnVuY3Rpb24gc2V0VGltZW91dCgpIHt9LFxuICAgIGNsZWFyVGltZW91dDogZnVuY3Rpb24gY2xlYXJUaW1lb3V0KCkge30sXG4gICAgbWF0Y2hNZWRpYTogZnVuY3Rpb24gbWF0Y2hNZWRpYSgpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9LFxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZTogZnVuY3Rpb24gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGUpIHtcbiAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiID09IHR5cGVvZiBzZXRUaW1lb3V0ID8gKGUoKSwgbnVsbCkgOiBzZXRUaW1lb3V0KGUsIDApO1xuICAgIH0sXG4gICAgY2FuY2VsQW5pbWF0aW9uRnJhbWU6IGZ1bmN0aW9uIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGUpIHtcbiAgICAgIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHNldFRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KGUpO1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gcigpIHtcbiAgICB2YXIgZSA9IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IHt9O1xuICAgIHJldHVybiB0KGUsIGkpLCBlO1xuICB9XG4gIGZ1bmN0aW9uIG4oZSwgdCkge1xuICAgIHJldHVybiB2b2lkIDAgPT09IHQgJiYgKHQgPSAwKSwgc2V0VGltZW91dChlLCB0KTtcbiAgfVxuICBmdW5jdGlvbiBsKCkge1xuICAgIHJldHVybiBEYXRlLm5vdygpO1xuICB9XG4gIGZ1bmN0aW9uIG8oZSwgdCkge1xuICAgIHZvaWQgMCA9PT0gdCAmJiAodCA9IFwieFwiKTtcbiAgICB2YXIgcyA9IHIoKTtcbiAgICB2YXIgYSwgaSwgbjtcbiAgICB2YXIgbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgdCA9IHIoKTtcbiAgICAgIHZhciBzO1xuICAgICAgcmV0dXJuIHQuZ2V0Q29tcHV0ZWRTdHlsZSAmJiAocyA9IHQuZ2V0Q29tcHV0ZWRTdHlsZShlLCBudWxsKSksICFzICYmIGUuY3VycmVudFN0eWxlICYmIChzID0gZS5jdXJyZW50U3R5bGUpLCBzIHx8IChzID0gZS5zdHlsZSksIHM7XG4gICAgfShlKTtcbiAgICByZXR1cm4gcy5XZWJLaXRDU1NNYXRyaXggPyAoaSA9IGwudHJhbnNmb3JtIHx8IGwud2Via2l0VHJhbnNmb3JtLCBpLnNwbGl0KFwiLFwiKS5sZW5ndGggPiA2ICYmIChpID0gaS5zcGxpdChcIiwgXCIpLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIGUucmVwbGFjZShcIixcIiwgXCIuXCIpO1xuICAgIH0pLmpvaW4oXCIsIFwiKSksIG4gPSBuZXcgcy5XZWJLaXRDU1NNYXRyaXgoXCJub25lXCIgPT09IGkgPyBcIlwiIDogaSkpIDogKG4gPSBsLk1velRyYW5zZm9ybSB8fCBsLk9UcmFuc2Zvcm0gfHwgbC5Nc1RyYW5zZm9ybSB8fCBsLm1zVHJhbnNmb3JtIHx8IGwudHJhbnNmb3JtIHx8IGwuZ2V0UHJvcGVydHlWYWx1ZShcInRyYW5zZm9ybVwiKS5yZXBsYWNlKFwidHJhbnNsYXRlKFwiLCBcIm1hdHJpeCgxLCAwLCAwLCAxLFwiKSwgYSA9IG4udG9TdHJpbmcoKS5zcGxpdChcIixcIikpLCBcInhcIiA9PT0gdCAmJiAoaSA9IHMuV2ViS2l0Q1NTTWF0cml4ID8gbi5tNDEgOiAxNiA9PT0gYS5sZW5ndGggPyBwYXJzZUZsb2F0KGFbMTJdKSA6IHBhcnNlRmxvYXQoYVs0XSkpLCBcInlcIiA9PT0gdCAmJiAoaSA9IHMuV2ViS2l0Q1NTTWF0cml4ID8gbi5tNDIgOiAxNiA9PT0gYS5sZW5ndGggPyBwYXJzZUZsb2F0KGFbMTNdKSA6IHBhcnNlRmxvYXQoYVs1XSkpLCBpIHx8IDA7XG4gIH1cbiAgZnVuY3Rpb24gZChlKSB7XG4gICAgcmV0dXJuIFwib2JqZWN0XCIgPT0gX3R5cGVvZihlKSAmJiBudWxsICE9PSBlICYmIGUuY29uc3RydWN0b3IgJiYgXCJPYmplY3RcIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsIC0xKTtcbiAgfVxuICBmdW5jdGlvbiBjKGUpIHtcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ICYmIHZvaWQgMCAhPT0gd2luZG93LkhUTUxFbGVtZW50ID8gZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IDogZSAmJiAoMSA9PT0gZS5ub2RlVHlwZSB8fCAxMSA9PT0gZS5ub2RlVHlwZSk7XG4gIH1cbiAgZnVuY3Rpb24gcCgpIHtcbiAgICB2YXIgZSA9IE9iamVjdChhcmd1bWVudHMubGVuZ3RoIDw9IDAgPyB2b2lkIDAgOiBhcmd1bWVudHNbMF0pLFxuICAgICAgdCA9IFtcIl9fcHJvdG9fX1wiLCBcImNvbnN0cnVjdG9yXCIsIFwicHJvdG90eXBlXCJdO1xuICAgIGZvciAodmFyIF9zID0gMTsgX3MgPCBhcmd1bWVudHMubGVuZ3RoOyBfcyArPSAxKSB7XG4gICAgICB2YXIgX2EgPSBfcyA8IDAgfHwgYXJndW1lbnRzLmxlbmd0aCA8PSBfcyA/IHZvaWQgMCA6IGFyZ3VtZW50c1tfc107XG4gICAgICBpZiAobnVsbCAhPSBfYSAmJiAhYyhfYSkpIHtcbiAgICAgICAgdmFyIF9zMiA9IE9iamVjdC5rZXlzKE9iamVjdChfYSkpLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiB0LmluZGV4T2YoZSkgPCAwO1xuICAgICAgICB9KTtcbiAgICAgICAgZm9yICh2YXIgX3QgPSAwLCBfaSA9IF9zMi5sZW5ndGg7IF90IDwgX2k7IF90ICs9IDEpIHtcbiAgICAgICAgICB2YXIgX2kyID0gX3MyW190XSxcbiAgICAgICAgICAgIF9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfYSwgX2kyKTtcbiAgICAgICAgICB2b2lkIDAgIT09IF9yICYmIF9yLmVudW1lcmFibGUgJiYgKGQoZVtfaTJdKSAmJiBkKF9hW19pMl0pID8gX2FbX2kyXS5fX3N3aXBlcl9fID8gZVtfaTJdID0gX2FbX2kyXSA6IHAoZVtfaTJdLCBfYVtfaTJdKSA6ICFkKGVbX2kyXSkgJiYgZChfYVtfaTJdKSA/IChlW19pMl0gPSB7fSwgX2FbX2kyXS5fX3N3aXBlcl9fID8gZVtfaTJdID0gX2FbX2kyXSA6IHAoZVtfaTJdLCBfYVtfaTJdKSkgOiBlW19pMl0gPSBfYVtfaTJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZTtcbiAgfVxuICBmdW5jdGlvbiB1KGUsIHQsIHMpIHtcbiAgICBlLnN0eWxlLnNldFByb3BlcnR5KHQsIHMpO1xuICB9XG4gIGZ1bmN0aW9uIG0oZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS50YXJnZXRQb3NpdGlvbixcbiAgICAgIGEgPSBlLnNpZGU7XG4gICAgdmFyIGkgPSByKCksXG4gICAgICBuID0gLXQudHJhbnNsYXRlO1xuICAgIHZhciBsLFxuICAgICAgbyA9IG51bGw7XG4gICAgdmFyIGQgPSB0LnBhcmFtcy5zcGVlZDtcbiAgICB0LndyYXBwZXJFbC5zdHlsZS5zY3JvbGxTbmFwVHlwZSA9IFwibm9uZVwiLCBpLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHQuY3NzTW9kZUZyYW1lSUQpO1xuICAgIHZhciBjID0gcyA+IG4gPyBcIm5leHRcIiA6IFwicHJldlwiLFxuICAgICAgcCA9IGZ1bmN0aW9uIHAoZSwgdCkge1xuICAgICAgICByZXR1cm4gXCJuZXh0XCIgPT09IGMgJiYgZSA+PSB0IHx8IFwicHJldlwiID09PSBjICYmIGUgPD0gdDtcbiAgICAgIH0sXG4gICAgICB1ID0gZnVuY3Rpb24gdSgpIHtcbiAgICAgICAgbCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLCBudWxsID09PSBvICYmIChvID0gbCk7XG4gICAgICAgIHZhciBlID0gTWF0aC5tYXgoTWF0aC5taW4oKGwgLSBvKSAvIGQsIDEpLCAwKSxcbiAgICAgICAgICByID0gLjUgLSBNYXRoLmNvcyhlICogTWF0aC5QSSkgLyAyO1xuICAgICAgICB2YXIgYyA9IG4gKyByICogKHMgLSBuKTtcbiAgICAgICAgaWYgKHAoYywgcykgJiYgKGMgPSBzKSwgdC53cmFwcGVyRWwuc2Nyb2xsVG8oX2RlZmluZVByb3BlcnR5KHt9LCBhLCBjKSksIHAoYywgcykpIHJldHVybiB0LndyYXBwZXJFbC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCIsIHQud3JhcHBlckVsLnN0eWxlLnNjcm9sbFNuYXBUeXBlID0gXCJcIiwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdC53cmFwcGVyRWwuc3R5bGUub3ZlcmZsb3cgPSBcIlwiLCB0LndyYXBwZXJFbC5zY3JvbGxUbyhfZGVmaW5lUHJvcGVydHkoe30sIGEsIGMpKTtcbiAgICAgICAgfSksIHZvaWQgaS5jYW5jZWxBbmltYXRpb25GcmFtZSh0LmNzc01vZGVGcmFtZUlEKTtcbiAgICAgICAgdC5jc3NNb2RlRnJhbWVJRCA9IGkucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHUpO1xuICAgICAgfTtcbiAgICB1KCk7XG4gIH1cbiAgZnVuY3Rpb24gaChlKSB7XG4gICAgcmV0dXJuIGUucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItc2xpZGUtdHJhbnNmb3JtXCIpIHx8IGUuc2hhZG93RWwgJiYgZS5zaGFkb3dFbC5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1zbGlkZS10cmFuc2Zvcm1cIikgfHwgZTtcbiAgfVxuICBmdW5jdGlvbiBmKGUsIHQpIHtcbiAgICByZXR1cm4gdm9pZCAwID09PSB0ICYmICh0ID0gXCJcIiksIF90b0NvbnN1bWFibGVBcnJheShlLmNoaWxkcmVuKS5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiBlLm1hdGNoZXModCk7XG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gZyhlLCB0KSB7XG4gICAgdmFyIF9zJGNsYXNzTGlzdDtcbiAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSBbXSk7XG4gICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO1xuICAgIHJldHVybiAoX3MkY2xhc3NMaXN0ID0gcy5jbGFzc0xpc3QpLmFkZC5hcHBseShfcyRjbGFzc0xpc3QsIF90b0NvbnN1bWFibGVBcnJheShBcnJheS5pc0FycmF5KHQpID8gdCA6IFt0XSkpLCBzO1xuICB9XG4gIGZ1bmN0aW9uIHYoZSkge1xuICAgIHZhciB0ID0gcigpLFxuICAgICAgcyA9IGEoKSxcbiAgICAgIGkgPSBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgbiA9IHMuYm9keSxcbiAgICAgIGwgPSBlLmNsaWVudFRvcCB8fCBuLmNsaWVudFRvcCB8fCAwLFxuICAgICAgbyA9IGUuY2xpZW50TGVmdCB8fCBuLmNsaWVudExlZnQgfHwgMCxcbiAgICAgIGQgPSBlID09PSB0ID8gdC5zY3JvbGxZIDogZS5zY3JvbGxUb3AsXG4gICAgICBjID0gZSA9PT0gdCA/IHQuc2Nyb2xsWCA6IGUuc2Nyb2xsTGVmdDtcbiAgICByZXR1cm4ge1xuICAgICAgdG9wOiBpLnRvcCArIGQgLSBsLFxuICAgICAgbGVmdDogaS5sZWZ0ICsgYyAtIG9cbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIHcoZSwgdCkge1xuICAgIHJldHVybiByKCkuZ2V0Q29tcHV0ZWRTdHlsZShlLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKHQpO1xuICB9XG4gIGZ1bmN0aW9uIGIoZSkge1xuICAgIHZhciB0LFxuICAgICAgcyA9IGU7XG4gICAgaWYgKHMpIHtcbiAgICAgIGZvciAodCA9IDA7IG51bGwgIT09IChzID0gcy5wcmV2aW91c1NpYmxpbmcpOykgMSA9PT0gcy5ub2RlVHlwZSAmJiAodCArPSAxKTtcbiAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiB5KGUsIHQpIHtcbiAgICB2YXIgcyA9IFtdO1xuICAgIHZhciBhID0gZS5wYXJlbnRFbGVtZW50O1xuICAgIGZvciAoOyBhOykgdCA/IGEubWF0Y2hlcyh0KSAmJiBzLnB1c2goYSkgOiBzLnB1c2goYSksIGEgPSBhLnBhcmVudEVsZW1lbnQ7XG4gICAgcmV0dXJuIHM7XG4gIH1cbiAgZnVuY3Rpb24gRShlLCB0KSB7XG4gICAgdCAmJiBlLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGZ1bmN0aW9uIHMoYSkge1xuICAgICAgYS50YXJnZXQgPT09IGUgJiYgKHQuY2FsbChlLCBhKSwgZS5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBzKSk7XG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24geChlLCB0LCBzKSB7XG4gICAgdmFyIGEgPSByKCk7XG4gICAgcmV0dXJuIHMgPyBlW1wid2lkdGhcIiA9PT0gdCA/IFwib2Zmc2V0V2lkdGhcIiA6IFwib2Zmc2V0SGVpZ2h0XCJdICsgcGFyc2VGbG9hdChhLmdldENvbXB1dGVkU3R5bGUoZSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShcIndpZHRoXCIgPT09IHQgPyBcIm1hcmdpbi1yaWdodFwiIDogXCJtYXJnaW4tdG9wXCIpKSArIHBhcnNlRmxvYXQoYS5nZXRDb21wdXRlZFN0eWxlKGUsIG51bGwpLmdldFByb3BlcnR5VmFsdWUoXCJ3aWR0aFwiID09PSB0ID8gXCJtYXJnaW4tbGVmdFwiIDogXCJtYXJnaW4tYm90dG9tXCIpKSA6IGUub2Zmc2V0V2lkdGg7XG4gIH1cbiAgdmFyIFMsIFQsIE07XG4gIGZ1bmN0aW9uIEMoKSB7XG4gICAgcmV0dXJuIFMgfHwgKFMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZSA9IHIoKSxcbiAgICAgICAgdCA9IGEoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNtb290aFNjcm9sbDogdC5kb2N1bWVudEVsZW1lbnQgJiYgdC5kb2N1bWVudEVsZW1lbnQuc3R5bGUgJiYgXCJzY3JvbGxCZWhhdmlvclwiIGluIHQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLFxuICAgICAgICB0b3VjaDogISEoXCJvbnRvdWNoc3RhcnRcIiBpbiBlIHx8IGUuRG9jdW1lbnRUb3VjaCAmJiB0IGluc3RhbmNlb2YgZS5Eb2N1bWVudFRvdWNoKVxuICAgICAgfTtcbiAgICB9KCkpLCBTO1xuICB9XG4gIGZ1bmN0aW9uIFAoZSkge1xuICAgIHJldHVybiB2b2lkIDAgPT09IGUgJiYgKGUgPSB7fSksIFQgfHwgKFQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIF9yZWYgPSB2b2lkIDAgPT09IGUgPyB7fSA6IGUsXG4gICAgICAgIHQgPSBfcmVmLnVzZXJBZ2VudDtcbiAgICAgIHZhciBzID0gQygpLFxuICAgICAgICBhID0gcigpLFxuICAgICAgICBpID0gYS5uYXZpZ2F0b3IucGxhdGZvcm0sXG4gICAgICAgIG4gPSB0IHx8IGEubmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgICAgbCA9IHtcbiAgICAgICAgICBpb3M6ICExLFxuICAgICAgICAgIGFuZHJvaWQ6ICExXG4gICAgICAgIH0sXG4gICAgICAgIG8gPSBhLnNjcmVlbi53aWR0aCxcbiAgICAgICAgZCA9IGEuc2NyZWVuLmhlaWdodCxcbiAgICAgICAgYyA9IG4ubWF0Y2goLyhBbmRyb2lkKTs/W1xcc1xcL10rKFtcXGQuXSspPy8pO1xuICAgICAgdmFyIHAgPSBuLm1hdGNoKC8oaVBhZCkuKk9TXFxzKFtcXGRfXSspLyk7XG4gICAgICB2YXIgdSA9IG4ubWF0Y2goLyhpUG9kKSguKk9TXFxzKFtcXGRfXSspKT8vKSxcbiAgICAgICAgbSA9ICFwICYmIG4ubWF0Y2goLyhpUGhvbmVcXHNPU3xpT1MpXFxzKFtcXGRfXSspLyksXG4gICAgICAgIGggPSBcIldpbjMyXCIgPT09IGk7XG4gICAgICB2YXIgZiA9IFwiTWFjSW50ZWxcIiA9PT0gaTtcbiAgICAgIHJldHVybiAhcCAmJiBmICYmIHMudG91Y2ggJiYgW1wiMTAyNHgxMzY2XCIsIFwiMTM2NngxMDI0XCIsIFwiODM0eDExOTRcIiwgXCIxMTk0eDgzNFwiLCBcIjgzNHgxMTEyXCIsIFwiMTExMng4MzRcIiwgXCI3Njh4MTAyNFwiLCBcIjEwMjR4NzY4XCIsIFwiODIweDExODBcIiwgXCIxMTgweDgyMFwiLCBcIjgxMHgxMDgwXCIsIFwiMTA4MHg4MTBcIl0uaW5kZXhPZihcIlwiLmNvbmNhdChvLCBcInhcIikuY29uY2F0KGQpKSA+PSAwICYmIChwID0gbi5tYXRjaCgvKFZlcnNpb24pXFwvKFtcXGQuXSspLyksIHAgfHwgKHAgPSBbMCwgMSwgXCIxM18wXzBcIl0pLCBmID0gITEpLCBjICYmICFoICYmIChsLm9zID0gXCJhbmRyb2lkXCIsIGwuYW5kcm9pZCA9ICEwKSwgKHAgfHwgbSB8fCB1KSAmJiAobC5vcyA9IFwiaW9zXCIsIGwuaW9zID0gITApLCBsO1xuICAgIH0oZSkpLCBUO1xuICB9XG4gIGZ1bmN0aW9uIEwoKSB7XG4gICAgcmV0dXJuIE0gfHwgKE0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZSA9IHIoKTtcbiAgICAgIHZhciB0ID0gITE7XG4gICAgICBmdW5jdGlvbiBzKCkge1xuICAgICAgICB2YXIgdCA9IGUubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICByZXR1cm4gdC5pbmRleE9mKFwic2FmYXJpXCIpID49IDAgJiYgdC5pbmRleE9mKFwiY2hyb21lXCIpIDwgMCAmJiB0LmluZGV4T2YoXCJhbmRyb2lkXCIpIDwgMDtcbiAgICAgIH1cbiAgICAgIGlmIChzKCkpIHtcbiAgICAgICAgdmFyIF9zMyA9IFN0cmluZyhlLm5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICBpZiAoX3MzLmluY2x1ZGVzKFwiVmVyc2lvbi9cIikpIHtcbiAgICAgICAgICB2YXIgX3MzJHNwbGl0JDEkc3BsaXQkMCRzID0gX3MzLnNwbGl0KFwiVmVyc2lvbi9cIilbMV0uc3BsaXQoXCIgXCIpWzBdLnNwbGl0KFwiLlwiKS5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihlKTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgX3MzJHNwbGl0JDEkc3BsaXQkMCRzMiA9IF9zbGljZWRUb0FycmF5KF9zMyRzcGxpdCQxJHNwbGl0JDAkcywgMiksXG4gICAgICAgICAgICBfZSA9IF9zMyRzcGxpdCQxJHNwbGl0JDAkczJbMF0sXG4gICAgICAgICAgICBfYTIgPSBfczMkc3BsaXQkMSRzcGxpdCQwJHMyWzFdO1xuICAgICAgICAgIHQgPSBfZSA8IDE2IHx8IDE2ID09PSBfZSAmJiBfYTIgPCAyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc1NhZmFyaTogdCB8fCBzKCksXG4gICAgICAgIG5lZWRQZXJzcGVjdGl2ZUZpeDogdCxcbiAgICAgICAgaXNXZWJWaWV3OiAvKGlQaG9uZXxpUG9kfGlQYWQpLipBcHBsZVdlYktpdCg/IS4qU2FmYXJpKS9pLnRlc3QoZS5uYXZpZ2F0b3IudXNlckFnZW50KVxuICAgICAgfTtcbiAgICB9KCkpLCBNO1xuICB9XG4gIHZhciB6ID0ge1xuICAgIG9uOiBmdW5jdGlvbiBvbihlLCB0LCBzKSB7XG4gICAgICB2YXIgYSA9IHRoaXM7XG4gICAgICBpZiAoIWEuZXZlbnRzTGlzdGVuZXJzIHx8IGEuZGVzdHJveWVkKSByZXR1cm4gYTtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHQpIHJldHVybiBhO1xuICAgICAgdmFyIGkgPSBzID8gXCJ1bnNoaWZ0XCIgOiBcInB1c2hcIjtcbiAgICAgIHJldHVybiBlLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGEuZXZlbnRzTGlzdGVuZXJzW2VdIHx8IChhLmV2ZW50c0xpc3RlbmVyc1tlXSA9IFtdKSwgYS5ldmVudHNMaXN0ZW5lcnNbZV1baV0odCk7XG4gICAgICB9KSwgYTtcbiAgICB9LFxuICAgIG9uY2U6IGZ1bmN0aW9uIG9uY2UoZSwgdCwgcykge1xuICAgICAgdmFyIGEgPSB0aGlzO1xuICAgICAgaWYgKCFhLmV2ZW50c0xpc3RlbmVycyB8fCBhLmRlc3Ryb3llZCkgcmV0dXJuIGE7XG4gICAgICBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiB0KSByZXR1cm4gYTtcbiAgICAgIGZ1bmN0aW9uIGkoKSB7XG4gICAgICAgIGEub2ZmKGUsIGkpLCBpLl9fZW1pdHRlclByb3h5ICYmIGRlbGV0ZSBpLl9fZW1pdHRlclByb3h5O1xuICAgICAgICBmb3IgKHZhciBzID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IG5ldyBBcnJheShzKSwgbiA9IDA7IG4gPCBzOyBuKyspIHJbbl0gPSBhcmd1bWVudHNbbl07XG4gICAgICAgIHQuYXBwbHkoYSwgcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gaS5fX2VtaXR0ZXJQcm94eSA9IHQsIGEub24oZSwgaSwgcyk7XG4gICAgfSxcbiAgICBvbkFueTogZnVuY3Rpb24gb25BbnkoZSwgdCkge1xuICAgICAgdmFyIHMgPSB0aGlzO1xuICAgICAgaWYgKCFzLmV2ZW50c0xpc3RlbmVycyB8fCBzLmRlc3Ryb3llZCkgcmV0dXJuIHM7XG4gICAgICBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBlKSByZXR1cm4gcztcbiAgICAgIHZhciBhID0gdCA/IFwidW5zaGlmdFwiIDogXCJwdXNoXCI7XG4gICAgICByZXR1cm4gcy5ldmVudHNBbnlMaXN0ZW5lcnMuaW5kZXhPZihlKSA8IDAgJiYgcy5ldmVudHNBbnlMaXN0ZW5lcnNbYV0oZSksIHM7XG4gICAgfSxcbiAgICBvZmZBbnk6IGZ1bmN0aW9uIG9mZkFueShlKSB7XG4gICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICBpZiAoIXQuZXZlbnRzTGlzdGVuZXJzIHx8IHQuZGVzdHJveWVkKSByZXR1cm4gdDtcbiAgICAgIGlmICghdC5ldmVudHNBbnlMaXN0ZW5lcnMpIHJldHVybiB0O1xuICAgICAgdmFyIHMgPSB0LmV2ZW50c0FueUxpc3RlbmVycy5pbmRleE9mKGUpO1xuICAgICAgcmV0dXJuIHMgPj0gMCAmJiB0LmV2ZW50c0FueUxpc3RlbmVycy5zcGxpY2UocywgMSksIHQ7XG4gICAgfSxcbiAgICBvZmY6IGZ1bmN0aW9uIG9mZihlLCB0KSB7XG4gICAgICB2YXIgcyA9IHRoaXM7XG4gICAgICByZXR1cm4gIXMuZXZlbnRzTGlzdGVuZXJzIHx8IHMuZGVzdHJveWVkID8gcyA6IHMuZXZlbnRzTGlzdGVuZXJzID8gKGUuc3BsaXQoXCIgXCIpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdm9pZCAwID09PSB0ID8gcy5ldmVudHNMaXN0ZW5lcnNbZV0gPSBbXSA6IHMuZXZlbnRzTGlzdGVuZXJzW2VdICYmIHMuZXZlbnRzTGlzdGVuZXJzW2VdLmZvckVhY2goZnVuY3Rpb24gKGEsIGkpIHtcbiAgICAgICAgICAoYSA9PT0gdCB8fCBhLl9fZW1pdHRlclByb3h5ICYmIGEuX19lbWl0dGVyUHJveHkgPT09IHQpICYmIHMuZXZlbnRzTGlzdGVuZXJzW2VdLnNwbGljZShpLCAxKTtcbiAgICAgICAgfSk7XG4gICAgICB9KSwgcykgOiBzO1xuICAgIH0sXG4gICAgZW1pdDogZnVuY3Rpb24gZW1pdCgpIHtcbiAgICAgIHZhciBlID0gdGhpcztcbiAgICAgIGlmICghZS5ldmVudHNMaXN0ZW5lcnMgfHwgZS5kZXN0cm95ZWQpIHJldHVybiBlO1xuICAgICAgaWYgKCFlLmV2ZW50c0xpc3RlbmVycykgcmV0dXJuIGU7XG4gICAgICB2YXIgdCwgcywgYTtcbiAgICAgIGZvciAodmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gbmV3IEFycmF5KGkpLCBuID0gMDsgbiA8IGk7IG4rKykgcltuXSA9IGFyZ3VtZW50c1tuXTtcbiAgICAgIFwic3RyaW5nXCIgPT0gdHlwZW9mIHJbMF0gfHwgQXJyYXkuaXNBcnJheShyWzBdKSA/ICh0ID0gclswXSwgcyA9IHIuc2xpY2UoMSwgci5sZW5ndGgpLCBhID0gZSkgOiAodCA9IHJbMF0uZXZlbnRzLCBzID0gclswXS5kYXRhLCBhID0gclswXS5jb250ZXh0IHx8IGUpLCBzLnVuc2hpZnQoYSk7XG4gICAgICByZXR1cm4gKEFycmF5LmlzQXJyYXkodCkgPyB0IDogdC5zcGxpdChcIiBcIikpLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgZS5ldmVudHNBbnlMaXN0ZW5lcnMgJiYgZS5ldmVudHNBbnlMaXN0ZW5lcnMubGVuZ3RoICYmIGUuZXZlbnRzQW55TGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBlLmFwcGx5KGEsIFt0XS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHMpKSk7XG4gICAgICAgIH0pLCBlLmV2ZW50c0xpc3RlbmVycyAmJiBlLmV2ZW50c0xpc3RlbmVyc1t0XSAmJiBlLmV2ZW50c0xpc3RlbmVyc1t0XS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS5hcHBseShhLCBzKTtcbiAgICAgICAgfSk7XG4gICAgICB9KSwgZTtcbiAgICB9XG4gIH07XG4gIHZhciBBID0gZnVuY3Rpb24gQShlLCB0KSB7XG4gICAgICBpZiAoIWUgfHwgZS5kZXN0cm95ZWQgfHwgIWUucGFyYW1zKSByZXR1cm47XG4gICAgICB2YXIgcyA9IHQuY2xvc2VzdChlLmlzRWxlbWVudCA/IFwic3dpcGVyLXNsaWRlXCIgOiBcIi5cIi5jb25jYXQoZS5wYXJhbXMuc2xpZGVDbGFzcykpO1xuICAgICAgaWYgKHMpIHtcbiAgICAgICAgdmFyIF90MiA9IHMucXVlcnlTZWxlY3RvcihcIi5cIi5jb25jYXQoZS5wYXJhbXMubGF6eVByZWxvYWRlckNsYXNzKSk7XG4gICAgICAgIF90MiAmJiBfdDIucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICAkID0gZnVuY3Rpb24gJChlLCB0KSB7XG4gICAgICBpZiAoIWUuc2xpZGVzW3RdKSByZXR1cm47XG4gICAgICB2YXIgcyA9IGUuc2xpZGVzW3RdLnF1ZXJ5U2VsZWN0b3IoJ1tsb2FkaW5nPVwibGF6eVwiXScpO1xuICAgICAgcyAmJiBzLnJlbW92ZUF0dHJpYnV0ZShcImxvYWRpbmdcIik7XG4gICAgfSxcbiAgICBJID0gZnVuY3Rpb24gSShlKSB7XG4gICAgICBpZiAoIWUgfHwgZS5kZXN0cm95ZWQgfHwgIWUucGFyYW1zKSByZXR1cm47XG4gICAgICB2YXIgdCA9IGUucGFyYW1zLmxhenlQcmVsb2FkUHJldk5leHQ7XG4gICAgICB2YXIgcyA9IGUuc2xpZGVzLmxlbmd0aDtcbiAgICAgIGlmICghcyB8fCAhdCB8fCB0IDwgMCkgcmV0dXJuO1xuICAgICAgdCA9IE1hdGgubWluKHQsIHMpO1xuICAgICAgdmFyIGEgPSBcImF1dG9cIiA9PT0gZS5wYXJhbXMuc2xpZGVzUGVyVmlldyA/IGUuc2xpZGVzUGVyVmlld0R5bmFtaWMoKSA6IE1hdGguY2VpbChlLnBhcmFtcy5zbGlkZXNQZXJWaWV3KSxcbiAgICAgICAgaSA9IGUuYWN0aXZlSW5kZXg7XG4gICAgICBpZiAoZS5wYXJhbXMuZ3JpZCAmJiBlLnBhcmFtcy5ncmlkLnJvd3MgPiAxKSB7XG4gICAgICAgIHZhciBfczQgPSBpLFxuICAgICAgICAgIF9yMiA9IFtfczQgLSB0XTtcbiAgICAgICAgcmV0dXJuIF9yMi5wdXNoLmFwcGx5KF9yMiwgX3RvQ29uc3VtYWJsZUFycmF5KEFycmF5LmZyb20oe1xuICAgICAgICAgIGxlbmd0aDogdFxuICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICByZXR1cm4gX3M0ICsgYSArIHQ7XG4gICAgICAgIH0pKSksIHZvaWQgZS5zbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAodCwgcykge1xuICAgICAgICAgIF9yMi5pbmNsdWRlcyh0LmNvbHVtbikgJiYgJChlLCBzKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB2YXIgciA9IGkgKyBhIC0gMTtcbiAgICAgIGlmIChlLnBhcmFtcy5yZXdpbmQgfHwgZS5wYXJhbXMubG9vcCkgZm9yICh2YXIgX2EzID0gaSAtIHQ7IF9hMyA8PSByICsgdDsgX2EzICs9IDEpIHtcbiAgICAgICAgdmFyIF90MyA9IChfYTMgJSBzICsgcykgJSBzO1xuICAgICAgICAoX3QzIDwgaSB8fCBfdDMgPiByKSAmJiAkKGUsIF90Myk7XG4gICAgICB9IGVsc2UgZm9yICh2YXIgX2E0ID0gTWF0aC5tYXgoaSAtIHQsIDApOyBfYTQgPD0gTWF0aC5taW4ociArIHQsIHMgLSAxKTsgX2E0ICs9IDEpIF9hNCAhPT0gaSAmJiAoX2E0ID4gciB8fCBfYTQgPCBpKSAmJiAkKGUsIF9hNCk7XG4gICAgfTtcbiAgdmFyIGsgPSB7XG4gICAgdXBkYXRlU2l6ZTogZnVuY3Rpb24gdXBkYXRlU2l6ZSgpIHtcbiAgICAgIHZhciBlID0gdGhpcztcbiAgICAgIHZhciB0LCBzO1xuICAgICAgdmFyIGEgPSBlLmVsO1xuICAgICAgdCA9IHZvaWQgMCAhPT0gZS5wYXJhbXMud2lkdGggJiYgbnVsbCAhPT0gZS5wYXJhbXMud2lkdGggPyBlLnBhcmFtcy53aWR0aCA6IGEuY2xpZW50V2lkdGgsIHMgPSB2b2lkIDAgIT09IGUucGFyYW1zLmhlaWdodCAmJiBudWxsICE9PSBlLnBhcmFtcy5oZWlnaHQgPyBlLnBhcmFtcy5oZWlnaHQgOiBhLmNsaWVudEhlaWdodCwgMCA9PT0gdCAmJiBlLmlzSG9yaXpvbnRhbCgpIHx8IDAgPT09IHMgJiYgZS5pc1ZlcnRpY2FsKCkgfHwgKHQgPSB0IC0gcGFyc2VJbnQodyhhLCBcInBhZGRpbmctbGVmdFwiKSB8fCAwLCAxMCkgLSBwYXJzZUludCh3KGEsIFwicGFkZGluZy1yaWdodFwiKSB8fCAwLCAxMCksIHMgPSBzIC0gcGFyc2VJbnQodyhhLCBcInBhZGRpbmctdG9wXCIpIHx8IDAsIDEwKSAtIHBhcnNlSW50KHcoYSwgXCJwYWRkaW5nLWJvdHRvbVwiKSB8fCAwLCAxMCksIE51bWJlci5pc05hTih0KSAmJiAodCA9IDApLCBOdW1iZXIuaXNOYU4ocykgJiYgKHMgPSAwKSwgT2JqZWN0LmFzc2lnbihlLCB7XG4gICAgICAgIHdpZHRoOiB0LFxuICAgICAgICBoZWlnaHQ6IHMsXG4gICAgICAgIHNpemU6IGUuaXNIb3Jpem9udGFsKCkgPyB0IDogc1xuICAgICAgfSkpO1xuICAgIH0sXG4gICAgdXBkYXRlU2xpZGVzOiBmdW5jdGlvbiB1cGRhdGVTbGlkZXMoKSB7XG4gICAgICB2YXIgZSA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiB0KHQpIHtcbiAgICAgICAgcmV0dXJuIGUuaXNIb3Jpem9udGFsKCkgPyB0IDoge1xuICAgICAgICAgIHdpZHRoOiBcImhlaWdodFwiLFxuICAgICAgICAgIFwibWFyZ2luLXRvcFwiOiBcIm1hcmdpbi1sZWZ0XCIsXG4gICAgICAgICAgXCJtYXJnaW4tYm90dG9tIFwiOiBcIm1hcmdpbi1yaWdodFwiLFxuICAgICAgICAgIFwibWFyZ2luLWxlZnRcIjogXCJtYXJnaW4tdG9wXCIsXG4gICAgICAgICAgXCJtYXJnaW4tcmlnaHRcIjogXCJtYXJnaW4tYm90dG9tXCIsXG4gICAgICAgICAgXCJwYWRkaW5nLWxlZnRcIjogXCJwYWRkaW5nLXRvcFwiLFxuICAgICAgICAgIFwicGFkZGluZy1yaWdodFwiOiBcInBhZGRpbmctYm90dG9tXCIsXG4gICAgICAgICAgbWFyZ2luUmlnaHQ6IFwibWFyZ2luQm90dG9tXCJcbiAgICAgICAgfVt0XTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIHMoZSwgcykge1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChlLmdldFByb3BlcnR5VmFsdWUodChzKSkgfHwgMCk7XG4gICAgICB9XG4gICAgICB2YXIgYSA9IGUucGFyYW1zLFxuICAgICAgICBpID0gZS53cmFwcGVyRWwsXG4gICAgICAgIHIgPSBlLnNsaWRlc0VsLFxuICAgICAgICBuID0gZS5zaXplLFxuICAgICAgICBsID0gZS5ydGxUcmFuc2xhdGUsXG4gICAgICAgIG8gPSBlLndyb25nUlRMLFxuICAgICAgICBkID0gZS52aXJ0dWFsICYmIGEudmlydHVhbC5lbmFibGVkLFxuICAgICAgICBjID0gZCA/IGUudmlydHVhbC5zbGlkZXMubGVuZ3RoIDogZS5zbGlkZXMubGVuZ3RoLFxuICAgICAgICBwID0gZihyLCBcIi5cIi5jb25jYXQoZS5wYXJhbXMuc2xpZGVDbGFzcywgXCIsIHN3aXBlci1zbGlkZVwiKSksXG4gICAgICAgIG0gPSBkID8gZS52aXJ0dWFsLnNsaWRlcy5sZW5ndGggOiBwLmxlbmd0aDtcbiAgICAgIHZhciBoID0gW107XG4gICAgICB2YXIgZyA9IFtdLFxuICAgICAgICB2ID0gW107XG4gICAgICB2YXIgYiA9IGEuc2xpZGVzT2Zmc2V0QmVmb3JlO1xuICAgICAgXCJmdW5jdGlvblwiID09IHR5cGVvZiBiICYmIChiID0gYS5zbGlkZXNPZmZzZXRCZWZvcmUuY2FsbChlKSk7XG4gICAgICB2YXIgeSA9IGEuc2xpZGVzT2Zmc2V0QWZ0ZXI7XG4gICAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHkgJiYgKHkgPSBhLnNsaWRlc09mZnNldEFmdGVyLmNhbGwoZSkpO1xuICAgICAgdmFyIEUgPSBlLnNuYXBHcmlkLmxlbmd0aCxcbiAgICAgICAgUyA9IGUuc2xpZGVzR3JpZC5sZW5ndGg7XG4gICAgICB2YXIgVCA9IGEuc3BhY2VCZXR3ZWVuLFxuICAgICAgICBNID0gLWIsXG4gICAgICAgIEMgPSAwLFxuICAgICAgICBQID0gMDtcbiAgICAgIGlmICh2b2lkIDAgPT09IG4pIHJldHVybjtcbiAgICAgIFwic3RyaW5nXCIgPT0gdHlwZW9mIFQgJiYgVC5pbmRleE9mKFwiJVwiKSA+PSAwID8gVCA9IHBhcnNlRmxvYXQoVC5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDAgKiBuIDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgVCAmJiAoVCA9IHBhcnNlRmxvYXQoVCkpLCBlLnZpcnR1YWxTaXplID0gLVQsIHAuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBsID8gZS5zdHlsZS5tYXJnaW5MZWZ0ID0gXCJcIiA6IGUuc3R5bGUubWFyZ2luUmlnaHQgPSBcIlwiLCBlLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiXCIsIGUuc3R5bGUubWFyZ2luVG9wID0gXCJcIjtcbiAgICAgIH0pLCBhLmNlbnRlcmVkU2xpZGVzICYmIGEuY3NzTW9kZSAmJiAodShpLCBcIi0tc3dpcGVyLWNlbnRlcmVkLW9mZnNldC1iZWZvcmVcIiwgXCJcIiksIHUoaSwgXCItLXN3aXBlci1jZW50ZXJlZC1vZmZzZXQtYWZ0ZXJcIiwgXCJcIikpO1xuICAgICAgdmFyIEwgPSBhLmdyaWQgJiYgYS5ncmlkLnJvd3MgPiAxICYmIGUuZ3JpZDtcbiAgICAgIHZhciB6O1xuICAgICAgTCAmJiBlLmdyaWQuaW5pdFNsaWRlcyhtKTtcbiAgICAgIHZhciBBID0gXCJhdXRvXCIgPT09IGEuc2xpZGVzUGVyVmlldyAmJiBhLmJyZWFrcG9pbnRzICYmIE9iamVjdC5rZXlzKGEuYnJlYWtwb2ludHMpLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBhLmJyZWFrcG9pbnRzW2VdLnNsaWRlc1BlclZpZXc7XG4gICAgICB9KS5sZW5ndGggPiAwO1xuICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgbTsgX2kzICs9IDEpIHtcbiAgICAgICAgdmFyIF9yMyA9IHZvaWQgMDtcbiAgICAgICAgaWYgKHogPSAwLCBwW19pM10gJiYgKF9yMyA9IHBbX2kzXSksIEwgJiYgZS5ncmlkLnVwZGF0ZVNsaWRlKF9pMywgX3IzLCBtLCB0KSwgIXBbX2kzXSB8fCBcIm5vbmVcIiAhPT0gdyhfcjMsIFwiZGlzcGxheVwiKSkge1xuICAgICAgICAgIGlmIChcImF1dG9cIiA9PT0gYS5zbGlkZXNQZXJWaWV3KSB7XG4gICAgICAgICAgICBBICYmIChwW19pM10uc3R5bGVbdChcIndpZHRoXCIpXSA9IFwiXCIpO1xuICAgICAgICAgICAgdmFyIF9uID0gZ2V0Q29tcHV0ZWRTdHlsZShfcjMpLFxuICAgICAgICAgICAgICBfbCA9IF9yMy5zdHlsZS50cmFuc2Zvcm0sXG4gICAgICAgICAgICAgIF9vID0gX3IzLnN0eWxlLndlYmtpdFRyYW5zZm9ybTtcbiAgICAgICAgICAgIGlmIChfbCAmJiAoX3IzLnN0eWxlLnRyYW5zZm9ybSA9IFwibm9uZVwiKSwgX28gJiYgKF9yMy5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSBcIm5vbmVcIiksIGEucm91bmRMZW5ndGhzKSB6ID0gZS5pc0hvcml6b250YWwoKSA/IHgoX3IzLCBcIndpZHRoXCIsICEwKSA6IHgoX3IzLCBcImhlaWdodFwiLCAhMCk7ZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBfZTIgPSBzKF9uLCBcIndpZHRoXCIpLFxuICAgICAgICAgICAgICAgIF90NCA9IHMoX24sIFwicGFkZGluZy1sZWZ0XCIpLFxuICAgICAgICAgICAgICAgIF9hNSA9IHMoX24sIFwicGFkZGluZy1yaWdodFwiKSxcbiAgICAgICAgICAgICAgICBfaTQgPSBzKF9uLCBcIm1hcmdpbi1sZWZ0XCIpLFxuICAgICAgICAgICAgICAgIF9sMiA9IHMoX24sIFwibWFyZ2luLXJpZ2h0XCIpLFxuICAgICAgICAgICAgICAgIF9vMiA9IF9uLmdldFByb3BlcnR5VmFsdWUoXCJib3gtc2l6aW5nXCIpO1xuICAgICAgICAgICAgICBpZiAoX28yICYmIFwiYm9yZGVyLWJveFwiID09PSBfbzIpIHogPSBfZTIgKyBfaTQgKyBfbDI7ZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIF9yNCA9IF9yMyxcbiAgICAgICAgICAgICAgICAgIF9zNSA9IF9yNC5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICAgIF9uMiA9IF9yNC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICB6ID0gX2UyICsgX3Q0ICsgX2E1ICsgX2k0ICsgX2wyICsgKF9uMiAtIF9zNSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9sICYmIChfcjMuc3R5bGUudHJhbnNmb3JtID0gX2wpLCBfbyAmJiAoX3IzLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IF9vKSwgYS5yb3VuZExlbmd0aHMgJiYgKHogPSBNYXRoLmZsb29yKHopKTtcbiAgICAgICAgICB9IGVsc2UgeiA9IChuIC0gKGEuc2xpZGVzUGVyVmlldyAtIDEpICogVCkgLyBhLnNsaWRlc1BlclZpZXcsIGEucm91bmRMZW5ndGhzICYmICh6ID0gTWF0aC5mbG9vcih6KSksIHBbX2kzXSAmJiAocFtfaTNdLnN0eWxlW3QoXCJ3aWR0aFwiKV0gPSBcIlwiLmNvbmNhdCh6LCBcInB4XCIpKTtcbiAgICAgICAgICBwW19pM10gJiYgKHBbX2kzXS5zd2lwZXJTbGlkZVNpemUgPSB6KSwgdi5wdXNoKHopLCBhLmNlbnRlcmVkU2xpZGVzID8gKE0gPSBNICsgeiAvIDIgKyBDIC8gMiArIFQsIDAgPT09IEMgJiYgMCAhPT0gX2kzICYmIChNID0gTSAtIG4gLyAyIC0gVCksIDAgPT09IF9pMyAmJiAoTSA9IE0gLSBuIC8gMiAtIFQpLCBNYXRoLmFicyhNKSA8IC4wMDEgJiYgKE0gPSAwKSwgYS5yb3VuZExlbmd0aHMgJiYgKE0gPSBNYXRoLmZsb29yKE0pKSwgUCAlIGEuc2xpZGVzUGVyR3JvdXAgPT0gMCAmJiBoLnB1c2goTSksIGcucHVzaChNKSkgOiAoYS5yb3VuZExlbmd0aHMgJiYgKE0gPSBNYXRoLmZsb29yKE0pKSwgKFAgLSBNYXRoLm1pbihlLnBhcmFtcy5zbGlkZXNQZXJHcm91cFNraXAsIFApKSAlIGUucGFyYW1zLnNsaWRlc1Blckdyb3VwID09IDAgJiYgaC5wdXNoKE0pLCBnLnB1c2goTSksIE0gPSBNICsgeiArIFQpLCBlLnZpcnR1YWxTaXplICs9IHogKyBULCBDID0geiwgUCArPSAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZS52aXJ0dWFsU2l6ZSA9IE1hdGgubWF4KGUudmlydHVhbFNpemUsIG4pICsgeSwgbCAmJiBvICYmIChcInNsaWRlXCIgPT09IGEuZWZmZWN0IHx8IFwiY292ZXJmbG93XCIgPT09IGEuZWZmZWN0KSAmJiAoaS5zdHlsZS53aWR0aCA9IFwiXCIuY29uY2F0KGUudmlydHVhbFNpemUgKyBULCBcInB4XCIpKSwgYS5zZXRXcmFwcGVyU2l6ZSAmJiAoaS5zdHlsZVt0KFwid2lkdGhcIildID0gXCJcIi5jb25jYXQoZS52aXJ0dWFsU2l6ZSArIFQsIFwicHhcIikpLCBMICYmIGUuZ3JpZC51cGRhdGVXcmFwcGVyU2l6ZSh6LCBoLCB0KSwgIWEuY2VudGVyZWRTbGlkZXMpIHtcbiAgICAgICAgdmFyIF90NSA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfczYgPSAwOyBfczYgPCBoLmxlbmd0aDsgX3M2ICs9IDEpIHtcbiAgICAgICAgICB2YXIgX2k1ID0gaFtfczZdO1xuICAgICAgICAgIGEucm91bmRMZW5ndGhzICYmIChfaTUgPSBNYXRoLmZsb29yKF9pNSkpLCBoW19zNl0gPD0gZS52aXJ0dWFsU2l6ZSAtIG4gJiYgX3Q1LnB1c2goX2k1KTtcbiAgICAgICAgfVxuICAgICAgICBoID0gX3Q1LCBNYXRoLmZsb29yKGUudmlydHVhbFNpemUgLSBuKSAtIE1hdGguZmxvb3IoaFtoLmxlbmd0aCAtIDFdKSA+IDEgJiYgaC5wdXNoKGUudmlydHVhbFNpemUgLSBuKTtcbiAgICAgIH1cbiAgICAgIGlmIChkICYmIGEubG9vcCkge1xuICAgICAgICB2YXIgX3Q2ID0gdlswXSArIFQ7XG4gICAgICAgIGlmIChhLnNsaWRlc1Blckdyb3VwID4gMSkge1xuICAgICAgICAgIHZhciBfczcgPSBNYXRoLmNlaWwoKGUudmlydHVhbC5zbGlkZXNCZWZvcmUgKyBlLnZpcnR1YWwuc2xpZGVzQWZ0ZXIpIC8gYS5zbGlkZXNQZXJHcm91cCksXG4gICAgICAgICAgICBfaTYgPSBfdDYgKiBhLnNsaWRlc1Blckdyb3VwO1xuICAgICAgICAgIGZvciAodmFyIF9lMyA9IDA7IF9lMyA8IF9zNzsgX2UzICs9IDEpIGgucHVzaChoW2gubGVuZ3RoIC0gMV0gKyBfaTYpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIF9zOCA9IDA7IF9zOCA8IGUudmlydHVhbC5zbGlkZXNCZWZvcmUgKyBlLnZpcnR1YWwuc2xpZGVzQWZ0ZXI7IF9zOCArPSAxKSAxID09PSBhLnNsaWRlc1Blckdyb3VwICYmIGgucHVzaChoW2gubGVuZ3RoIC0gMV0gKyBfdDYpLCBnLnB1c2goZ1tnLmxlbmd0aCAtIDFdICsgX3Q2KSwgZS52aXJ0dWFsU2l6ZSArPSBfdDY7XG4gICAgICB9XG4gICAgICBpZiAoMCA9PT0gaC5sZW5ndGggJiYgKGggPSBbMF0pLCAwICE9PSBUKSB7XG4gICAgICAgIHZhciBfczkgPSBlLmlzSG9yaXpvbnRhbCgpICYmIGwgPyBcIm1hcmdpbkxlZnRcIiA6IHQoXCJtYXJnaW5SaWdodFwiKTtcbiAgICAgICAgcC5maWx0ZXIoZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICByZXR1cm4gIShhLmNzc01vZGUgJiYgIWEubG9vcCkgfHwgdCAhPT0gcC5sZW5ndGggLSAxO1xuICAgICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS5zdHlsZVtfczldID0gXCJcIi5jb25jYXQoVCwgXCJweFwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoYS5jZW50ZXJlZFNsaWRlcyAmJiBhLmNlbnRlcmVkU2xpZGVzQm91bmRzKSB7XG4gICAgICAgIHZhciBfZTQgPSAwO1xuICAgICAgICB2LmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICBfZTQgKz0gdCArIChUIHx8IDApO1xuICAgICAgICB9KSwgX2U0IC09IFQ7XG4gICAgICAgIHZhciBfdDcgPSBfZTQgLSBuO1xuICAgICAgICBoID0gaC5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gZSA8PSAwID8gLWIgOiBlID4gX3Q3ID8gX3Q3ICsgeSA6IGU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGEuY2VudGVySW5zdWZmaWNpZW50U2xpZGVzKSB7XG4gICAgICAgIHZhciBfZTUgPSAwO1xuICAgICAgICBpZiAodi5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgX2U1ICs9IHQgKyAoVCB8fCAwKTtcbiAgICAgICAgfSksIF9lNSAtPSBULCBfZTUgPCBuKSB7XG4gICAgICAgICAgdmFyIF90OCA9IChuIC0gX2U1KSAvIDI7XG4gICAgICAgICAgaC5mb3JFYWNoKGZ1bmN0aW9uIChlLCBzKSB7XG4gICAgICAgICAgICBoW3NdID0gZSAtIF90ODtcbiAgICAgICAgICB9KSwgZy5mb3JFYWNoKGZ1bmN0aW9uIChlLCBzKSB7XG4gICAgICAgICAgICBnW3NdID0gZSArIF90ODtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKE9iamVjdC5hc3NpZ24oZSwge1xuICAgICAgICBzbGlkZXM6IHAsXG4gICAgICAgIHNuYXBHcmlkOiBoLFxuICAgICAgICBzbGlkZXNHcmlkOiBnLFxuICAgICAgICBzbGlkZXNTaXplc0dyaWQ6IHZcbiAgICAgIH0pLCBhLmNlbnRlcmVkU2xpZGVzICYmIGEuY3NzTW9kZSAmJiAhYS5jZW50ZXJlZFNsaWRlc0JvdW5kcykge1xuICAgICAgICB1KGksIFwiLS1zd2lwZXItY2VudGVyZWQtb2Zmc2V0LWJlZm9yZVwiLCAtaFswXSArIFwicHhcIiksIHUoaSwgXCItLXN3aXBlci1jZW50ZXJlZC1vZmZzZXQtYWZ0ZXJcIiwgZS5zaXplIC8gMiAtIHZbdi5sZW5ndGggLSAxXSAvIDIgKyBcInB4XCIpO1xuICAgICAgICB2YXIgX3Q5ID0gLWUuc25hcEdyaWRbMF0sXG4gICAgICAgICAgX3MxMCA9IC1lLnNsaWRlc0dyaWRbMF07XG4gICAgICAgIGUuc25hcEdyaWQgPSBlLnNuYXBHcmlkLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBlICsgX3Q5O1xuICAgICAgICB9KSwgZS5zbGlkZXNHcmlkID0gZS5zbGlkZXNHcmlkLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBlICsgX3MxMDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAobSAhPT0gYyAmJiBlLmVtaXQoXCJzbGlkZXNMZW5ndGhDaGFuZ2VcIiksIGgubGVuZ3RoICE9PSBFICYmIChlLnBhcmFtcy53YXRjaE92ZXJmbG93ICYmIGUuY2hlY2tPdmVyZmxvdygpLCBlLmVtaXQoXCJzbmFwR3JpZExlbmd0aENoYW5nZVwiKSksIGcubGVuZ3RoICE9PSBTICYmIGUuZW1pdChcInNsaWRlc0dyaWRMZW5ndGhDaGFuZ2VcIiksIGEud2F0Y2hTbGlkZXNQcm9ncmVzcyAmJiBlLnVwZGF0ZVNsaWRlc09mZnNldCgpLCAhKGQgfHwgYS5jc3NNb2RlIHx8IFwic2xpZGVcIiAhPT0gYS5lZmZlY3QgJiYgXCJmYWRlXCIgIT09IGEuZWZmZWN0KSkge1xuICAgICAgICB2YXIgX3QxMCA9IFwiXCIuY29uY2F0KGEuY29udGFpbmVyTW9kaWZpZXJDbGFzcywgXCJiYWNrZmFjZS1oaWRkZW5cIiksXG4gICAgICAgICAgX3MxMSA9IGUuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKF90MTApO1xuICAgICAgICBtIDw9IGEubWF4QmFja2ZhY2VIaWRkZW5TbGlkZXMgPyBfczExIHx8IGUuZWwuY2xhc3NMaXN0LmFkZChfdDEwKSA6IF9zMTEgJiYgZS5lbC5jbGFzc0xpc3QucmVtb3ZlKF90MTApO1xuICAgICAgfVxuICAgIH0sXG4gICAgdXBkYXRlQXV0b0hlaWdodDogZnVuY3Rpb24gdXBkYXRlQXV0b0hlaWdodChlKSB7XG4gICAgICB2YXIgdCA9IHRoaXMsXG4gICAgICAgIHMgPSBbXSxcbiAgICAgICAgYSA9IHQudmlydHVhbCAmJiB0LnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQ7XG4gICAgICB2YXIgaSxcbiAgICAgICAgciA9IDA7XG4gICAgICBcIm51bWJlclwiID09IHR5cGVvZiBlID8gdC5zZXRUcmFuc2l0aW9uKGUpIDogITAgPT09IGUgJiYgdC5zZXRUcmFuc2l0aW9uKHQucGFyYW1zLnNwZWVkKTtcbiAgICAgIHZhciBuID0gZnVuY3Rpb24gbihlKSB7XG4gICAgICAgIHJldHVybiBhID8gdC5zbGlkZXNbdC5nZXRTbGlkZUluZGV4QnlEYXRhKGUpXSA6IHQuc2xpZGVzW2VdO1xuICAgICAgfTtcbiAgICAgIGlmIChcImF1dG9cIiAhPT0gdC5wYXJhbXMuc2xpZGVzUGVyVmlldyAmJiB0LnBhcmFtcy5zbGlkZXNQZXJWaWV3ID4gMSkge1xuICAgICAgICBpZiAodC5wYXJhbXMuY2VudGVyZWRTbGlkZXMpICh0LnZpc2libGVTbGlkZXMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgIH0pO2Vsc2UgZm9yIChpID0gMDsgaSA8IE1hdGguY2VpbCh0LnBhcmFtcy5zbGlkZXNQZXJWaWV3KTsgaSArPSAxKSB7XG4gICAgICAgICAgdmFyIF9lNiA9IHQuYWN0aXZlSW5kZXggKyBpO1xuICAgICAgICAgIGlmIChfZTYgPiB0LnNsaWRlcy5sZW5ndGggJiYgIWEpIGJyZWFrO1xuICAgICAgICAgIHMucHVzaChuKF9lNikpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Ugcy5wdXNoKG4odC5hY3RpdmVJbmRleCkpO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHMubGVuZ3RoOyBpICs9IDEpIGlmICh2b2lkIDAgIT09IHNbaV0pIHtcbiAgICAgICAgdmFyIF9lNyA9IHNbaV0ub2Zmc2V0SGVpZ2h0O1xuICAgICAgICByID0gX2U3ID4gciA/IF9lNyA6IHI7XG4gICAgICB9XG4gICAgICAociB8fCAwID09PSByKSAmJiAodC53cmFwcGVyRWwuc3R5bGUuaGVpZ2h0ID0gXCJcIi5jb25jYXQociwgXCJweFwiKSk7XG4gICAgfSxcbiAgICB1cGRhdGVTbGlkZXNPZmZzZXQ6IGZ1bmN0aW9uIHVwZGF0ZVNsaWRlc09mZnNldCgpIHtcbiAgICAgIHZhciBlID0gdGhpcyxcbiAgICAgICAgdCA9IGUuc2xpZGVzLFxuICAgICAgICBzID0gZS5pc0VsZW1lbnQgPyBlLmlzSG9yaXpvbnRhbCgpID8gZS53cmFwcGVyRWwub2Zmc2V0TGVmdCA6IGUud3JhcHBlckVsLm9mZnNldFRvcCA6IDA7XG4gICAgICBmb3IgKHZhciBfYTYgPSAwOyBfYTYgPCB0Lmxlbmd0aDsgX2E2ICs9IDEpIHRbX2E2XS5zd2lwZXJTbGlkZU9mZnNldCA9IChlLmlzSG9yaXpvbnRhbCgpID8gdFtfYTZdLm9mZnNldExlZnQgOiB0W19hNl0ub2Zmc2V0VG9wKSAtIHMgLSBlLmNzc092ZXJmbG93QWRqdXN0bWVudCgpO1xuICAgIH0sXG4gICAgdXBkYXRlU2xpZGVzUHJvZ3Jlc3M6IGZ1bmN0aW9uIHVwZGF0ZVNsaWRlc1Byb2dyZXNzKGUpIHtcbiAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IHRoaXMgJiYgdGhpcy50cmFuc2xhdGUgfHwgMCk7XG4gICAgICB2YXIgdCA9IHRoaXMsXG4gICAgICAgIHMgPSB0LnBhcmFtcyxcbiAgICAgICAgYSA9IHQuc2xpZGVzLFxuICAgICAgICBpID0gdC5ydGxUcmFuc2xhdGUsXG4gICAgICAgIHIgPSB0LnNuYXBHcmlkO1xuICAgICAgaWYgKDAgPT09IGEubGVuZ3RoKSByZXR1cm47XG4gICAgICB2b2lkIDAgPT09IGFbMF0uc3dpcGVyU2xpZGVPZmZzZXQgJiYgdC51cGRhdGVTbGlkZXNPZmZzZXQoKTtcbiAgICAgIHZhciBuID0gLWU7XG4gICAgICBpICYmIChuID0gZSksIGEuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLmNsYXNzTGlzdC5yZW1vdmUocy5zbGlkZVZpc2libGVDbGFzcyk7XG4gICAgICB9KSwgdC52aXNpYmxlU2xpZGVzSW5kZXhlcyA9IFtdLCB0LnZpc2libGVTbGlkZXMgPSBbXTtcbiAgICAgIHZhciBsID0gcy5zcGFjZUJldHdlZW47XG4gICAgICBcInN0cmluZ1wiID09IHR5cGVvZiBsICYmIGwuaW5kZXhPZihcIiVcIikgPj0gMCA/IGwgPSBwYXJzZUZsb2F0KGwucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwICogdC5zaXplIDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgbCAmJiAobCA9IHBhcnNlRmxvYXQobCkpO1xuICAgICAgZm9yICh2YXIgX2U4ID0gMDsgX2U4IDwgYS5sZW5ndGg7IF9lOCArPSAxKSB7XG4gICAgICAgIHZhciBfbzMgPSBhW19lOF07XG4gICAgICAgIHZhciBfZCA9IF9vMy5zd2lwZXJTbGlkZU9mZnNldDtcbiAgICAgICAgcy5jc3NNb2RlICYmIHMuY2VudGVyZWRTbGlkZXMgJiYgKF9kIC09IGFbMF0uc3dpcGVyU2xpZGVPZmZzZXQpO1xuICAgICAgICB2YXIgX2MgPSAobiArIChzLmNlbnRlcmVkU2xpZGVzID8gdC5taW5UcmFuc2xhdGUoKSA6IDApIC0gX2QpIC8gKF9vMy5zd2lwZXJTbGlkZVNpemUgKyBsKSxcbiAgICAgICAgICBfcCA9IChuIC0gclswXSArIChzLmNlbnRlcmVkU2xpZGVzID8gdC5taW5UcmFuc2xhdGUoKSA6IDApIC0gX2QpIC8gKF9vMy5zd2lwZXJTbGlkZVNpemUgKyBsKSxcbiAgICAgICAgICBfdSA9IC0obiAtIF9kKSxcbiAgICAgICAgICBfbSA9IF91ICsgdC5zbGlkZXNTaXplc0dyaWRbX2U4XTtcbiAgICAgICAgKF91ID49IDAgJiYgX3UgPCB0LnNpemUgLSAxIHx8IF9tID4gMSAmJiBfbSA8PSB0LnNpemUgfHwgX3UgPD0gMCAmJiBfbSA+PSB0LnNpemUpICYmICh0LnZpc2libGVTbGlkZXMucHVzaChfbzMpLCB0LnZpc2libGVTbGlkZXNJbmRleGVzLnB1c2goX2U4KSwgYVtfZThdLmNsYXNzTGlzdC5hZGQocy5zbGlkZVZpc2libGVDbGFzcykpLCBfbzMucHJvZ3Jlc3MgPSBpID8gLV9jIDogX2MsIF9vMy5vcmlnaW5hbFByb2dyZXNzID0gaSA/IC1fcCA6IF9wO1xuICAgICAgfVxuICAgIH0sXG4gICAgdXBkYXRlUHJvZ3Jlc3M6IGZ1bmN0aW9uIHVwZGF0ZVByb2dyZXNzKGUpIHtcbiAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgIGlmICh2b2lkIDAgPT09IGUpIHtcbiAgICAgICAgdmFyIF9zMTIgPSB0LnJ0bFRyYW5zbGF0ZSA/IC0xIDogMTtcbiAgICAgICAgZSA9IHQgJiYgdC50cmFuc2xhdGUgJiYgdC50cmFuc2xhdGUgKiBfczEyIHx8IDA7XG4gICAgICB9XG4gICAgICB2YXIgcyA9IHQucGFyYW1zLFxuICAgICAgICBhID0gdC5tYXhUcmFuc2xhdGUoKSAtIHQubWluVHJhbnNsYXRlKCk7XG4gICAgICB2YXIgaSA9IHQucHJvZ3Jlc3MsXG4gICAgICAgIHIgPSB0LmlzQmVnaW5uaW5nLFxuICAgICAgICBuID0gdC5pc0VuZCxcbiAgICAgICAgbCA9IHQucHJvZ3Jlc3NMb29wO1xuICAgICAgdmFyIG8gPSByLFxuICAgICAgICBkID0gbjtcbiAgICAgIGlmICgwID09PSBhKSBpID0gMCwgciA9ICEwLCBuID0gITA7ZWxzZSB7XG4gICAgICAgIGkgPSAoZSAtIHQubWluVHJhbnNsYXRlKCkpIC8gYTtcbiAgICAgICAgdmFyIF9zMTMgPSBNYXRoLmFicyhlIC0gdC5taW5UcmFuc2xhdGUoKSkgPCAxLFxuICAgICAgICAgIF9sMyA9IE1hdGguYWJzKGUgLSB0Lm1heFRyYW5zbGF0ZSgpKSA8IDE7XG4gICAgICAgIHIgPSBfczEzIHx8IGkgPD0gMCwgbiA9IF9sMyB8fCBpID49IDEsIF9zMTMgJiYgKGkgPSAwKSwgX2wzICYmIChpID0gMSk7XG4gICAgICB9XG4gICAgICBpZiAocy5sb29wKSB7XG4gICAgICAgIHZhciBfczE0ID0gdC5nZXRTbGlkZUluZGV4QnlEYXRhKDApLFxuICAgICAgICAgIF9hNyA9IHQuZ2V0U2xpZGVJbmRleEJ5RGF0YSh0LnNsaWRlcy5sZW5ndGggLSAxKSxcbiAgICAgICAgICBfaTcgPSB0LnNsaWRlc0dyaWRbX3MxNF0sXG4gICAgICAgICAgX3I1ID0gdC5zbGlkZXNHcmlkW19hN10sXG4gICAgICAgICAgX24zID0gdC5zbGlkZXNHcmlkW3Quc2xpZGVzR3JpZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICBfbzQgPSBNYXRoLmFicyhlKTtcbiAgICAgICAgbCA9IF9vNCA+PSBfaTcgPyAoX280IC0gX2k3KSAvIF9uMyA6IChfbzQgKyBfbjMgLSBfcjUpIC8gX24zLCBsID4gMSAmJiAobCAtPSAxKTtcbiAgICAgIH1cbiAgICAgIE9iamVjdC5hc3NpZ24odCwge1xuICAgICAgICBwcm9ncmVzczogaSxcbiAgICAgICAgcHJvZ3Jlc3NMb29wOiBsLFxuICAgICAgICBpc0JlZ2lubmluZzogcixcbiAgICAgICAgaXNFbmQ6IG5cbiAgICAgIH0pLCAocy53YXRjaFNsaWRlc1Byb2dyZXNzIHx8IHMuY2VudGVyZWRTbGlkZXMgJiYgcy5hdXRvSGVpZ2h0KSAmJiB0LnVwZGF0ZVNsaWRlc1Byb2dyZXNzKGUpLCByICYmICFvICYmIHQuZW1pdChcInJlYWNoQmVnaW5uaW5nIHRvRWRnZVwiKSwgbiAmJiAhZCAmJiB0LmVtaXQoXCJyZWFjaEVuZCB0b0VkZ2VcIiksIChvICYmICFyIHx8IGQgJiYgIW4pICYmIHQuZW1pdChcImZyb21FZGdlXCIpLCB0LmVtaXQoXCJwcm9ncmVzc1wiLCBpKTtcbiAgICB9LFxuICAgIHVwZGF0ZVNsaWRlc0NsYXNzZXM6IGZ1bmN0aW9uIHVwZGF0ZVNsaWRlc0NsYXNzZXMoKSB7XG4gICAgICB2YXIgZSA9IHRoaXMsXG4gICAgICAgIHQgPSBlLnNsaWRlcyxcbiAgICAgICAgcyA9IGUucGFyYW1zLFxuICAgICAgICBhID0gZS5zbGlkZXNFbCxcbiAgICAgICAgaSA9IGUuYWN0aXZlSW5kZXgsXG4gICAgICAgIHIgPSBlLnZpcnR1YWwgJiYgcy52aXJ0dWFsLmVuYWJsZWQsXG4gICAgICAgIG4gPSBmdW5jdGlvbiBuKGUpIHtcbiAgICAgICAgICByZXR1cm4gZihhLCBcIi5cIi5jb25jYXQocy5zbGlkZUNsYXNzKS5jb25jYXQoZSwgXCIsIHN3aXBlci1zbGlkZVwiKS5jb25jYXQoZSkpWzBdO1xuICAgICAgICB9O1xuICAgICAgdmFyIGw7XG4gICAgICBpZiAodC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUuY2xhc3NMaXN0LnJlbW92ZShzLnNsaWRlQWN0aXZlQ2xhc3MsIHMuc2xpZGVOZXh0Q2xhc3MsIHMuc2xpZGVQcmV2Q2xhc3MpO1xuICAgICAgfSksIHIpIHtcbiAgICAgICAgaWYgKHMubG9vcCkge1xuICAgICAgICAgIHZhciBfdDExID0gaSAtIGUudmlydHVhbC5zbGlkZXNCZWZvcmU7XG4gICAgICAgICAgX3QxMSA8IDAgJiYgKF90MTEgPSBlLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCArIF90MTEpLCBfdDExID49IGUudmlydHVhbC5zbGlkZXMubGVuZ3RoICYmIChfdDExIC09IGUudmlydHVhbC5zbGlkZXMubGVuZ3RoKSwgbCA9IG4oXCJbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XFxcIlwiLmNvbmNhdChfdDExLCBcIlxcXCJdXCIpKTtcbiAgICAgICAgfSBlbHNlIGwgPSBuKFwiW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVxcXCJcIi5jb25jYXQoaSwgXCJcXFwiXVwiKSk7XG4gICAgICB9IGVsc2UgbCA9IHRbaV07XG4gICAgICBpZiAobCkge1xuICAgICAgICBsLmNsYXNzTGlzdC5hZGQocy5zbGlkZUFjdGl2ZUNsYXNzKTtcbiAgICAgICAgdmFyIF9lOSA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgdmFyIHMgPSBbXTtcbiAgICAgICAgICBmb3IgKDsgZS5uZXh0RWxlbWVudFNpYmxpbmc7KSB7XG4gICAgICAgICAgICB2YXIgX2E4ID0gZS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICB0ID8gX2E4Lm1hdGNoZXModCkgJiYgcy5wdXNoKF9hOCkgOiBzLnB1c2goX2E4KSwgZSA9IF9hODtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH0obCwgXCIuXCIuY29uY2F0KHMuc2xpZGVDbGFzcywgXCIsIHN3aXBlci1zbGlkZVwiKSlbMF07XG4gICAgICAgIHMubG9vcCAmJiAhX2U5ICYmIChfZTkgPSB0WzBdKSwgX2U5ICYmIF9lOS5jbGFzc0xpc3QuYWRkKHMuc2xpZGVOZXh0Q2xhc3MpO1xuICAgICAgICB2YXIgX2E5ID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICB2YXIgcyA9IFtdO1xuICAgICAgICAgIGZvciAoOyBlLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7KSB7XG4gICAgICAgICAgICB2YXIgX2ExMCA9IGUucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgICAgICAgIHQgPyBfYTEwLm1hdGNoZXModCkgJiYgcy5wdXNoKF9hMTApIDogcy5wdXNoKF9hMTApLCBlID0gX2ExMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH0obCwgXCIuXCIuY29uY2F0KHMuc2xpZGVDbGFzcywgXCIsIHN3aXBlci1zbGlkZVwiKSlbMF07XG4gICAgICAgIHMubG9vcCAmJiAwID09PSAhX2E5ICYmIChfYTkgPSB0W3QubGVuZ3RoIC0gMV0pLCBfYTkgJiYgX2E5LmNsYXNzTGlzdC5hZGQocy5zbGlkZVByZXZDbGFzcyk7XG4gICAgICB9XG4gICAgICBlLmVtaXRTbGlkZXNDbGFzc2VzKCk7XG4gICAgfSxcbiAgICB1cGRhdGVBY3RpdmVJbmRleDogZnVuY3Rpb24gdXBkYXRlQWN0aXZlSW5kZXgoZSkge1xuICAgICAgdmFyIHQgPSB0aGlzLFxuICAgICAgICBzID0gdC5ydGxUcmFuc2xhdGUgPyB0LnRyYW5zbGF0ZSA6IC10LnRyYW5zbGF0ZSxcbiAgICAgICAgYSA9IHQuc25hcEdyaWQsXG4gICAgICAgIGkgPSB0LnBhcmFtcyxcbiAgICAgICAgciA9IHQuYWN0aXZlSW5kZXgsXG4gICAgICAgIG4gPSB0LnJlYWxJbmRleCxcbiAgICAgICAgbCA9IHQuc25hcEluZGV4O1xuICAgICAgdmFyIG8sXG4gICAgICAgIGQgPSBlO1xuICAgICAgdmFyIGMgPSBmdW5jdGlvbiBjKGUpIHtcbiAgICAgICAgdmFyIHMgPSBlIC0gdC52aXJ0dWFsLnNsaWRlc0JlZm9yZTtcbiAgICAgICAgcmV0dXJuIHMgPCAwICYmIChzID0gdC52aXJ0dWFsLnNsaWRlcy5sZW5ndGggKyBzKSwgcyA+PSB0LnZpcnR1YWwuc2xpZGVzLmxlbmd0aCAmJiAocyAtPSB0LnZpcnR1YWwuc2xpZGVzLmxlbmd0aCksIHM7XG4gICAgICB9O1xuICAgICAgaWYgKHZvaWQgMCA9PT0gZCAmJiAoZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB0ID0gZS5zbGlkZXNHcmlkLFxuICAgICAgICAgIHMgPSBlLnBhcmFtcyxcbiAgICAgICAgICBhID0gZS5ydGxUcmFuc2xhdGUgPyBlLnRyYW5zbGF0ZSA6IC1lLnRyYW5zbGF0ZTtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGZvciAodmFyIF9lMTAgPSAwOyBfZTEwIDwgdC5sZW5ndGg7IF9lMTAgKz0gMSkgdm9pZCAwICE9PSB0W19lMTAgKyAxXSA/IGEgPj0gdFtfZTEwXSAmJiBhIDwgdFtfZTEwICsgMV0gLSAodFtfZTEwICsgMV0gLSB0W19lMTBdKSAvIDIgPyBpID0gX2UxMCA6IGEgPj0gdFtfZTEwXSAmJiBhIDwgdFtfZTEwICsgMV0gJiYgKGkgPSBfZTEwICsgMSkgOiBhID49IHRbX2UxMF0gJiYgKGkgPSBfZTEwKTtcbiAgICAgICAgcmV0dXJuIHMubm9ybWFsaXplU2xpZGVJbmRleCAmJiAoaSA8IDAgfHwgdm9pZCAwID09PSBpKSAmJiAoaSA9IDApLCBpO1xuICAgICAgfSh0KSksIGEuaW5kZXhPZihzKSA+PSAwKSBvID0gYS5pbmRleE9mKHMpO2Vsc2Uge1xuICAgICAgICB2YXIgX2UxMSA9IE1hdGgubWluKGkuc2xpZGVzUGVyR3JvdXBTa2lwLCBkKTtcbiAgICAgICAgbyA9IF9lMTEgKyBNYXRoLmZsb29yKChkIC0gX2UxMSkgLyBpLnNsaWRlc1Blckdyb3VwKTtcbiAgICAgIH1cbiAgICAgIGlmIChvID49IGEubGVuZ3RoICYmIChvID0gYS5sZW5ndGggLSAxKSwgZCA9PT0gcikgcmV0dXJuIG8gIT09IGwgJiYgKHQuc25hcEluZGV4ID0gbywgdC5lbWl0KFwic25hcEluZGV4Q2hhbmdlXCIpKSwgdm9pZCAodC5wYXJhbXMubG9vcCAmJiB0LnZpcnR1YWwgJiYgdC5wYXJhbXMudmlydHVhbC5lbmFibGVkICYmICh0LnJlYWxJbmRleCA9IGMoZCkpKTtcbiAgICAgIHZhciBwO1xuICAgICAgcCA9IHQudmlydHVhbCAmJiBpLnZpcnR1YWwuZW5hYmxlZCAmJiBpLmxvb3AgPyBjKGQpIDogdC5zbGlkZXNbZF0gPyBwYXJzZUludCh0LnNsaWRlc1tkXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKSB8fCBkLCAxMCkgOiBkLCBPYmplY3QuYXNzaWduKHQsIHtcbiAgICAgICAgcHJldmlvdXNTbmFwSW5kZXg6IGwsXG4gICAgICAgIHNuYXBJbmRleDogbyxcbiAgICAgICAgcHJldmlvdXNSZWFsSW5kZXg6IG4sXG4gICAgICAgIHJlYWxJbmRleDogcCxcbiAgICAgICAgcHJldmlvdXNJbmRleDogcixcbiAgICAgICAgYWN0aXZlSW5kZXg6IGRcbiAgICAgIH0pLCB0LmluaXRpYWxpemVkICYmIEkodCksIHQuZW1pdChcImFjdGl2ZUluZGV4Q2hhbmdlXCIpLCB0LmVtaXQoXCJzbmFwSW5kZXhDaGFuZ2VcIiksIG4gIT09IHAgJiYgdC5lbWl0KFwicmVhbEluZGV4Q2hhbmdlXCIpLCAodC5pbml0aWFsaXplZCB8fCB0LnBhcmFtcy5ydW5DYWxsYmFja3NPbkluaXQpICYmIHQuZW1pdChcInNsaWRlQ2hhbmdlXCIpO1xuICAgIH0sXG4gICAgdXBkYXRlQ2xpY2tlZFNsaWRlOiBmdW5jdGlvbiB1cGRhdGVDbGlja2VkU2xpZGUoZSkge1xuICAgICAgdmFyIHQgPSB0aGlzLFxuICAgICAgICBzID0gdC5wYXJhbXMsXG4gICAgICAgIGEgPSBlLmNsb3Nlc3QoXCIuXCIuY29uY2F0KHMuc2xpZGVDbGFzcywgXCIsIHN3aXBlci1zbGlkZVwiKSk7XG4gICAgICB2YXIgaSxcbiAgICAgICAgciA9ICExO1xuICAgICAgaWYgKGEpIGZvciAodmFyIF9lMTIgPSAwOyBfZTEyIDwgdC5zbGlkZXMubGVuZ3RoOyBfZTEyICs9IDEpIGlmICh0LnNsaWRlc1tfZTEyXSA9PT0gYSkge1xuICAgICAgICByID0gITAsIGkgPSBfZTEyO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmICghYSB8fCAhcikgcmV0dXJuIHQuY2xpY2tlZFNsaWRlID0gdm9pZCAwLCB2b2lkICh0LmNsaWNrZWRJbmRleCA9IHZvaWQgMCk7XG4gICAgICB0LmNsaWNrZWRTbGlkZSA9IGEsIHQudmlydHVhbCAmJiB0LnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyB0LmNsaWNrZWRJbmRleCA9IHBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIiksIDEwKSA6IHQuY2xpY2tlZEluZGV4ID0gaSwgcy5zbGlkZVRvQ2xpY2tlZFNsaWRlICYmIHZvaWQgMCAhPT0gdC5jbGlja2VkSW5kZXggJiYgdC5jbGlja2VkSW5kZXggIT09IHQuYWN0aXZlSW5kZXggJiYgdC5zbGlkZVRvQ2xpY2tlZFNsaWRlKCk7XG4gICAgfVxuICB9O1xuICB2YXIgTyA9IHtcbiAgICBnZXRUcmFuc2xhdGU6IGZ1bmN0aW9uIGdldFRyYW5zbGF0ZShlKSB7XG4gICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSB0aGlzLmlzSG9yaXpvbnRhbCgpID8gXCJ4XCIgOiBcInlcIik7XG4gICAgICB2YXIgdCA9IHRoaXMucGFyYW1zLFxuICAgICAgICBzID0gdGhpcy5ydGxUcmFuc2xhdGUsXG4gICAgICAgIGEgPSB0aGlzLnRyYW5zbGF0ZSxcbiAgICAgICAgaSA9IHRoaXMud3JhcHBlckVsO1xuICAgICAgaWYgKHQudmlydHVhbFRyYW5zbGF0ZSkgcmV0dXJuIHMgPyAtYSA6IGE7XG4gICAgICBpZiAodC5jc3NNb2RlKSByZXR1cm4gYTtcbiAgICAgIHZhciByID0gbyhpLCBlKTtcbiAgICAgIHJldHVybiByICs9IHRoaXMuY3NzT3ZlcmZsb3dBZGp1c3RtZW50KCksIHMgJiYgKHIgPSAtciksIHIgfHwgMDtcbiAgICB9LFxuICAgIHNldFRyYW5zbGF0ZTogZnVuY3Rpb24gc2V0VHJhbnNsYXRlKGUsIHQpIHtcbiAgICAgIHZhciBzID0gdGhpcyxcbiAgICAgICAgYSA9IHMucnRsVHJhbnNsYXRlLFxuICAgICAgICBpID0gcy5wYXJhbXMsXG4gICAgICAgIHIgPSBzLndyYXBwZXJFbCxcbiAgICAgICAgbiA9IHMucHJvZ3Jlc3M7XG4gICAgICB2YXIgbCxcbiAgICAgICAgbyA9IDAsXG4gICAgICAgIGQgPSAwO1xuICAgICAgcy5pc0hvcml6b250YWwoKSA/IG8gPSBhID8gLWUgOiBlIDogZCA9IGUsIGkucm91bmRMZW5ndGhzICYmIChvID0gTWF0aC5mbG9vcihvKSwgZCA9IE1hdGguZmxvb3IoZCkpLCBzLnByZXZpb3VzVHJhbnNsYXRlID0gcy50cmFuc2xhdGUsIHMudHJhbnNsYXRlID0gcy5pc0hvcml6b250YWwoKSA/IG8gOiBkLCBpLmNzc01vZGUgPyByW3MuaXNIb3Jpem9udGFsKCkgPyBcInNjcm9sbExlZnRcIiA6IFwic2Nyb2xsVG9wXCJdID0gcy5pc0hvcml6b250YWwoKSA/IC1vIDogLWQgOiBpLnZpcnR1YWxUcmFuc2xhdGUgfHwgKHMuaXNIb3Jpem9udGFsKCkgPyBvIC09IHMuY3NzT3ZlcmZsb3dBZGp1c3RtZW50KCkgOiBkIC09IHMuY3NzT3ZlcmZsb3dBZGp1c3RtZW50KCksIHIuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZChcIi5jb25jYXQobywgXCJweCwgXCIpLmNvbmNhdChkLCBcInB4LCAwcHgpXCIpKTtcbiAgICAgIHZhciBjID0gcy5tYXhUcmFuc2xhdGUoKSAtIHMubWluVHJhbnNsYXRlKCk7XG4gICAgICBsID0gMCA9PT0gYyA/IDAgOiAoZSAtIHMubWluVHJhbnNsYXRlKCkpIC8gYywgbCAhPT0gbiAmJiBzLnVwZGF0ZVByb2dyZXNzKGUpLCBzLmVtaXQoXCJzZXRUcmFuc2xhdGVcIiwgcy50cmFuc2xhdGUsIHQpO1xuICAgIH0sXG4gICAgbWluVHJhbnNsYXRlOiBmdW5jdGlvbiBtaW5UcmFuc2xhdGUoKSB7XG4gICAgICByZXR1cm4gLXRoaXMuc25hcEdyaWRbMF07XG4gICAgfSxcbiAgICBtYXhUcmFuc2xhdGU6IGZ1bmN0aW9uIG1heFRyYW5zbGF0ZSgpIHtcbiAgICAgIHJldHVybiAtdGhpcy5zbmFwR3JpZFt0aGlzLnNuYXBHcmlkLmxlbmd0aCAtIDFdO1xuICAgIH0sXG4gICAgdHJhbnNsYXRlVG86IGZ1bmN0aW9uIHRyYW5zbGF0ZVRvKGUsIHQsIHMsIGEsIGkpIHtcbiAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IDApLCB2b2lkIDAgPT09IHQgJiYgKHQgPSB0aGlzLnBhcmFtcy5zcGVlZCksIHZvaWQgMCA9PT0gcyAmJiAocyA9ICEwKSwgdm9pZCAwID09PSBhICYmIChhID0gITApO1xuICAgICAgdmFyIHIgPSB0aGlzLFxuICAgICAgICBuID0gci5wYXJhbXMsXG4gICAgICAgIGwgPSByLndyYXBwZXJFbDtcbiAgICAgIGlmIChyLmFuaW1hdGluZyAmJiBuLnByZXZlbnRJbnRlcmFjdGlvbk9uVHJhbnNpdGlvbikgcmV0dXJuICExO1xuICAgICAgdmFyIG8gPSByLm1pblRyYW5zbGF0ZSgpLFxuICAgICAgICBkID0gci5tYXhUcmFuc2xhdGUoKTtcbiAgICAgIHZhciBjO1xuICAgICAgaWYgKGMgPSBhICYmIGUgPiBvID8gbyA6IGEgJiYgZSA8IGQgPyBkIDogZSwgci51cGRhdGVQcm9ncmVzcyhjKSwgbi5jc3NNb2RlKSB7XG4gICAgICAgIHZhciBfZTEzID0gci5pc0hvcml6b250YWwoKTtcbiAgICAgICAgaWYgKDAgPT09IHQpIGxbX2UxMyA/IFwic2Nyb2xsTGVmdFwiIDogXCJzY3JvbGxUb3BcIl0gPSAtYztlbHNlIHtcbiAgICAgICAgICBpZiAoIXIuc3VwcG9ydC5zbW9vdGhTY3JvbGwpIHJldHVybiBtKHtcbiAgICAgICAgICAgIHN3aXBlcjogcixcbiAgICAgICAgICAgIHRhcmdldFBvc2l0aW9uOiAtYyxcbiAgICAgICAgICAgIHNpZGU6IF9lMTMgPyBcImxlZnRcIiA6IFwidG9wXCJcbiAgICAgICAgICB9KSwgITA7XG4gICAgICAgICAgbC5zY3JvbGxUbyhfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KHt9LCBfZTEzID8gXCJsZWZ0XCIgOiBcInRvcFwiLCAtYyksIFwiYmVoYXZpb3JcIiwgXCJzbW9vdGhcIikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAwID09PSB0ID8gKHIuc2V0VHJhbnNpdGlvbigwKSwgci5zZXRUcmFuc2xhdGUoYyksIHMgJiYgKHIuZW1pdChcImJlZm9yZVRyYW5zaXRpb25TdGFydFwiLCB0LCBpKSwgci5lbWl0KFwidHJhbnNpdGlvbkVuZFwiKSkpIDogKHIuc2V0VHJhbnNpdGlvbih0KSwgci5zZXRUcmFuc2xhdGUoYyksIHMgJiYgKHIuZW1pdChcImJlZm9yZVRyYW5zaXRpb25TdGFydFwiLCB0LCBpKSwgci5lbWl0KFwidHJhbnNpdGlvblN0YXJ0XCIpKSwgci5hbmltYXRpbmcgfHwgKHIuYW5pbWF0aW5nID0gITAsIHIub25UcmFuc2xhdGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kIHx8IChyLm9uVHJhbnNsYXRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHIgJiYgIXIuZGVzdHJveWVkICYmIGUudGFyZ2V0ID09PSB0aGlzICYmIChyLndyYXBwZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCByLm9uVHJhbnNsYXRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCksIHIub25UcmFuc2xhdGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kID0gbnVsbCwgZGVsZXRlIHIub25UcmFuc2xhdGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kLCBzICYmIHIuZW1pdChcInRyYW5zaXRpb25FbmRcIikpO1xuICAgICAgfSksIHIud3JhcHBlckVsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIHIub25UcmFuc2xhdGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kKSkpLCAhMDtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIEQoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5ydW5DYWxsYmFja3MsXG4gICAgICBhID0gZS5kaXJlY3Rpb24sXG4gICAgICBpID0gZS5zdGVwO1xuICAgIHZhciByID0gdC5hY3RpdmVJbmRleCxcbiAgICAgIG4gPSB0LnByZXZpb3VzSW5kZXg7XG4gICAgdmFyIGwgPSBhO1xuICAgIGlmIChsIHx8IChsID0gciA+IG4gPyBcIm5leHRcIiA6IHIgPCBuID8gXCJwcmV2XCIgOiBcInJlc2V0XCIpLCB0LmVtaXQoXCJ0cmFuc2l0aW9uXCIuY29uY2F0KGkpKSwgcyAmJiByICE9PSBuKSB7XG4gICAgICBpZiAoXCJyZXNldFwiID09PSBsKSByZXR1cm4gdm9pZCB0LmVtaXQoXCJzbGlkZVJlc2V0VHJhbnNpdGlvblwiLmNvbmNhdChpKSk7XG4gICAgICB0LmVtaXQoXCJzbGlkZUNoYW5nZVRyYW5zaXRpb25cIi5jb25jYXQoaSkpLCBcIm5leHRcIiA9PT0gbCA/IHQuZW1pdChcInNsaWRlTmV4dFRyYW5zaXRpb25cIi5jb25jYXQoaSkpIDogdC5lbWl0KFwic2xpZGVQcmV2VHJhbnNpdGlvblwiLmNvbmNhdChpKSk7XG4gICAgfVxuICB9XG4gIHZhciBHID0ge1xuICAgIHNsaWRlVG86IGZ1bmN0aW9uIHNsaWRlVG8oZSwgdCwgcywgYSwgaSkge1xuICAgICAgdm9pZCAwID09PSBlICYmIChlID0gMCksIHZvaWQgMCA9PT0gdCAmJiAodCA9IHRoaXMucGFyYW1zLnNwZWVkKSwgdm9pZCAwID09PSBzICYmIChzID0gITApLCBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIChlID0gcGFyc2VJbnQoZSwgMTApKTtcbiAgICAgIHZhciByID0gdGhpcztcbiAgICAgIHZhciBuID0gZTtcbiAgICAgIG4gPCAwICYmIChuID0gMCk7XG4gICAgICB2YXIgbCA9IHIucGFyYW1zLFxuICAgICAgICBvID0gci5zbmFwR3JpZCxcbiAgICAgICAgZCA9IHIuc2xpZGVzR3JpZCxcbiAgICAgICAgYyA9IHIucHJldmlvdXNJbmRleCxcbiAgICAgICAgcCA9IHIuYWN0aXZlSW5kZXgsXG4gICAgICAgIHUgPSByLnJ0bFRyYW5zbGF0ZSxcbiAgICAgICAgaCA9IHIud3JhcHBlckVsLFxuICAgICAgICBmID0gci5lbmFibGVkO1xuICAgICAgaWYgKHIuYW5pbWF0aW5nICYmIGwucHJldmVudEludGVyYWN0aW9uT25UcmFuc2l0aW9uIHx8ICFmICYmICFhICYmICFpKSByZXR1cm4gITE7XG4gICAgICB2YXIgZyA9IE1hdGgubWluKHIucGFyYW1zLnNsaWRlc1Blckdyb3VwU2tpcCwgbik7XG4gICAgICB2YXIgdiA9IGcgKyBNYXRoLmZsb29yKChuIC0gZykgLyByLnBhcmFtcy5zbGlkZXNQZXJHcm91cCk7XG4gICAgICB2ID49IG8ubGVuZ3RoICYmICh2ID0gby5sZW5ndGggLSAxKTtcbiAgICAgIHZhciB3ID0gLW9bdl07XG4gICAgICBpZiAobC5ub3JtYWxpemVTbGlkZUluZGV4KSBmb3IgKHZhciBfZTE0ID0gMDsgX2UxNCA8IGQubGVuZ3RoOyBfZTE0ICs9IDEpIHtcbiAgICAgICAgdmFyIF90MTIgPSAtTWF0aC5mbG9vcigxMDAgKiB3KSxcbiAgICAgICAgICBfczE1ID0gTWF0aC5mbG9vcigxMDAgKiBkW19lMTRdKSxcbiAgICAgICAgICBfYTExID0gTWF0aC5mbG9vcigxMDAgKiBkW19lMTQgKyAxXSk7XG4gICAgICAgIHZvaWQgMCAhPT0gZFtfZTE0ICsgMV0gPyBfdDEyID49IF9zMTUgJiYgX3QxMiA8IF9hMTEgLSAoX2ExMSAtIF9zMTUpIC8gMiA/IG4gPSBfZTE0IDogX3QxMiA+PSBfczE1ICYmIF90MTIgPCBfYTExICYmIChuID0gX2UxNCArIDEpIDogX3QxMiA+PSBfczE1ICYmIChuID0gX2UxNCk7XG4gICAgICB9XG4gICAgICBpZiAoci5pbml0aWFsaXplZCAmJiBuICE9PSBwKSB7XG4gICAgICAgIGlmICghci5hbGxvd1NsaWRlTmV4dCAmJiAodSA/IHcgPiByLnRyYW5zbGF0ZSAmJiB3ID4gci5taW5UcmFuc2xhdGUoKSA6IHcgPCByLnRyYW5zbGF0ZSAmJiB3IDwgci5taW5UcmFuc2xhdGUoKSkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKCFyLmFsbG93U2xpZGVQcmV2ICYmIHcgPiByLnRyYW5zbGF0ZSAmJiB3ID4gci5tYXhUcmFuc2xhdGUoKSAmJiAocCB8fCAwKSAhPT0gbikgcmV0dXJuICExO1xuICAgICAgfVxuICAgICAgdmFyIGI7XG4gICAgICBpZiAobiAhPT0gKGMgfHwgMCkgJiYgcyAmJiByLmVtaXQoXCJiZWZvcmVTbGlkZUNoYW5nZVN0YXJ0XCIpLCByLnVwZGF0ZVByb2dyZXNzKHcpLCBiID0gbiA+IHAgPyBcIm5leHRcIiA6IG4gPCBwID8gXCJwcmV2XCIgOiBcInJlc2V0XCIsIHUgJiYgLXcgPT09IHIudHJhbnNsYXRlIHx8ICF1ICYmIHcgPT09IHIudHJhbnNsYXRlKSByZXR1cm4gci51cGRhdGVBY3RpdmVJbmRleChuKSwgbC5hdXRvSGVpZ2h0ICYmIHIudXBkYXRlQXV0b0hlaWdodCgpLCByLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKSwgXCJzbGlkZVwiICE9PSBsLmVmZmVjdCAmJiByLnNldFRyYW5zbGF0ZSh3KSwgXCJyZXNldFwiICE9PSBiICYmIChyLnRyYW5zaXRpb25TdGFydChzLCBiKSwgci50cmFuc2l0aW9uRW5kKHMsIGIpKSwgITE7XG4gICAgICBpZiAobC5jc3NNb2RlKSB7XG4gICAgICAgIHZhciBfZTE1ID0gci5pc0hvcml6b250YWwoKSxcbiAgICAgICAgICBfczE2ID0gdSA/IHcgOiAtdztcbiAgICAgICAgaWYgKDAgPT09IHQpIHtcbiAgICAgICAgICB2YXIgX3QxMyA9IHIudmlydHVhbCAmJiByLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQ7XG4gICAgICAgICAgX3QxMyAmJiAoci53cmFwcGVyRWwuc3R5bGUuc2Nyb2xsU25hcFR5cGUgPSBcIm5vbmVcIiwgci5faW1tZWRpYXRlVmlydHVhbCA9ICEwKSwgX3QxMyAmJiAhci5fY3NzTW9kZVZpcnR1YWxJbml0aWFsU2V0ICYmIHIucGFyYW1zLmluaXRpYWxTbGlkZSA+IDAgPyAoci5fY3NzTW9kZVZpcnR1YWxJbml0aWFsU2V0ID0gITAsIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBoW19lMTUgPyBcInNjcm9sbExlZnRcIiA6IFwic2Nyb2xsVG9wXCJdID0gX3MxNjtcbiAgICAgICAgICB9KSkgOiBoW19lMTUgPyBcInNjcm9sbExlZnRcIiA6IFwic2Nyb2xsVG9wXCJdID0gX3MxNiwgX3QxMyAmJiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgci53cmFwcGVyRWwuc3R5bGUuc2Nyb2xsU25hcFR5cGUgPSBcIlwiLCByLl9pbW1lZGlhdGVWaXJ0dWFsID0gITE7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFyLnN1cHBvcnQuc21vb3RoU2Nyb2xsKSByZXR1cm4gbSh7XG4gICAgICAgICAgICBzd2lwZXI6IHIsXG4gICAgICAgICAgICB0YXJnZXRQb3NpdGlvbjogX3MxNixcbiAgICAgICAgICAgIHNpZGU6IF9lMTUgPyBcImxlZnRcIiA6IFwidG9wXCJcbiAgICAgICAgICB9KSwgITA7XG4gICAgICAgICAgaC5zY3JvbGxUbyhfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KHt9LCBfZTE1ID8gXCJsZWZ0XCIgOiBcInRvcFwiLCBfczE2KSwgXCJiZWhhdmlvclwiLCBcInNtb290aFwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHIuc2V0VHJhbnNpdGlvbih0KSwgci5zZXRUcmFuc2xhdGUodyksIHIudXBkYXRlQWN0aXZlSW5kZXgobiksIHIudXBkYXRlU2xpZGVzQ2xhc3NlcygpLCByLmVtaXQoXCJiZWZvcmVUcmFuc2l0aW9uU3RhcnRcIiwgdCwgYSksIHIudHJhbnNpdGlvblN0YXJ0KHMsIGIpLCAwID09PSB0ID8gci50cmFuc2l0aW9uRW5kKHMsIGIpIDogci5hbmltYXRpbmcgfHwgKHIuYW5pbWF0aW5nID0gITAsIHIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQgfHwgKHIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICByICYmICFyLmRlc3Ryb3llZCAmJiBlLnRhcmdldCA9PT0gdGhpcyAmJiAoci53cmFwcGVyRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgci5vblNsaWRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCksIHIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQgPSBudWxsLCBkZWxldGUgci5vblNsaWRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCwgci50cmFuc2l0aW9uRW5kKHMsIGIpKTtcbiAgICAgIH0pLCByLndyYXBwZXJFbC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCByLm9uU2xpZGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kKSksICEwO1xuICAgIH0sXG4gICAgc2xpZGVUb0xvb3A6IGZ1bmN0aW9uIHNsaWRlVG9Mb29wKGUsIHQsIHMsIGEpIHtcbiAgICAgIGlmICh2b2lkIDAgPT09IGUgJiYgKGUgPSAwKSwgdm9pZCAwID09PSB0ICYmICh0ID0gdGhpcy5wYXJhbXMuc3BlZWQpLCB2b2lkIDAgPT09IHMgJiYgKHMgPSAhMCksIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHtcbiAgICAgICAgZSA9IHBhcnNlSW50KGUsIDEwKTtcbiAgICAgIH1cbiAgICAgIHZhciBpID0gdGhpcztcbiAgICAgIHZhciByID0gZTtcbiAgICAgIHJldHVybiBpLnBhcmFtcy5sb29wICYmIChpLnZpcnR1YWwgJiYgaS5wYXJhbXMudmlydHVhbC5lbmFibGVkID8gciArPSBpLnZpcnR1YWwuc2xpZGVzQmVmb3JlIDogciA9IGkuZ2V0U2xpZGVJbmRleEJ5RGF0YShyKSksIGkuc2xpZGVUbyhyLCB0LCBzLCBhKTtcbiAgICB9LFxuICAgIHNsaWRlTmV4dDogZnVuY3Rpb24gc2xpZGVOZXh0KGUsIHQsIHMpIHtcbiAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IHRoaXMucGFyYW1zLnNwZWVkKSwgdm9pZCAwID09PSB0ICYmICh0ID0gITApO1xuICAgICAgdmFyIGEgPSB0aGlzLFxuICAgICAgICBpID0gYS5lbmFibGVkLFxuICAgICAgICByID0gYS5wYXJhbXMsXG4gICAgICAgIG4gPSBhLmFuaW1hdGluZztcbiAgICAgIGlmICghaSkgcmV0dXJuIGE7XG4gICAgICB2YXIgbCA9IHIuc2xpZGVzUGVyR3JvdXA7XG4gICAgICBcImF1dG9cIiA9PT0gci5zbGlkZXNQZXJWaWV3ICYmIDEgPT09IHIuc2xpZGVzUGVyR3JvdXAgJiYgci5zbGlkZXNQZXJHcm91cEF1dG8gJiYgKGwgPSBNYXRoLm1heChhLnNsaWRlc1BlclZpZXdEeW5hbWljKFwiY3VycmVudFwiLCAhMCksIDEpKTtcbiAgICAgIHZhciBvID0gYS5hY3RpdmVJbmRleCA8IHIuc2xpZGVzUGVyR3JvdXBTa2lwID8gMSA6IGwsXG4gICAgICAgIGQgPSBhLnZpcnR1YWwgJiYgci52aXJ0dWFsLmVuYWJsZWQ7XG4gICAgICBpZiAoci5sb29wKSB7XG4gICAgICAgIGlmIChuICYmICFkICYmIHIubG9vcFByZXZlbnRzU2xpZGluZykgcmV0dXJuICExO1xuICAgICAgICBhLmxvb3BGaXgoe1xuICAgICAgICAgIGRpcmVjdGlvbjogXCJuZXh0XCJcbiAgICAgICAgfSksIGEuX2NsaWVudExlZnQgPSBhLndyYXBwZXJFbC5jbGllbnRMZWZ0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHIucmV3aW5kICYmIGEuaXNFbmQgPyBhLnNsaWRlVG8oMCwgZSwgdCwgcykgOiBhLnNsaWRlVG8oYS5hY3RpdmVJbmRleCArIG8sIGUsIHQsIHMpO1xuICAgIH0sXG4gICAgc2xpZGVQcmV2OiBmdW5jdGlvbiBzbGlkZVByZXYoZSwgdCwgcykge1xuICAgICAgdm9pZCAwID09PSBlICYmIChlID0gdGhpcy5wYXJhbXMuc3BlZWQpLCB2b2lkIDAgPT09IHQgJiYgKHQgPSAhMCk7XG4gICAgICB2YXIgYSA9IHRoaXMsXG4gICAgICAgIGkgPSBhLnBhcmFtcyxcbiAgICAgICAgciA9IGEuc25hcEdyaWQsXG4gICAgICAgIG4gPSBhLnNsaWRlc0dyaWQsXG4gICAgICAgIGwgPSBhLnJ0bFRyYW5zbGF0ZSxcbiAgICAgICAgbyA9IGEuZW5hYmxlZCxcbiAgICAgICAgZCA9IGEuYW5pbWF0aW5nO1xuICAgICAgaWYgKCFvKSByZXR1cm4gYTtcbiAgICAgIHZhciBjID0gYS52aXJ0dWFsICYmIGkudmlydHVhbC5lbmFibGVkO1xuICAgICAgaWYgKGkubG9vcCkge1xuICAgICAgICBpZiAoZCAmJiAhYyAmJiBpLmxvb3BQcmV2ZW50c1NsaWRpbmcpIHJldHVybiAhMTtcbiAgICAgICAgYS5sb29wRml4KHtcbiAgICAgICAgICBkaXJlY3Rpb246IFwicHJldlwiXG4gICAgICAgIH0pLCBhLl9jbGllbnRMZWZ0ID0gYS53cmFwcGVyRWwuY2xpZW50TGVmdDtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIHAoZSkge1xuICAgICAgICByZXR1cm4gZSA8IDAgPyAtTWF0aC5mbG9vcihNYXRoLmFicyhlKSkgOiBNYXRoLmZsb29yKGUpO1xuICAgICAgfVxuICAgICAgdmFyIHUgPSBwKGwgPyBhLnRyYW5zbGF0ZSA6IC1hLnRyYW5zbGF0ZSksXG4gICAgICAgIG0gPSByLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBwKGUpO1xuICAgICAgICB9KTtcbiAgICAgIHZhciBoID0gclttLmluZGV4T2YodSkgLSAxXTtcbiAgICAgIGlmICh2b2lkIDAgPT09IGggJiYgaS5jc3NNb2RlKSB7XG4gICAgICAgIHZhciBfZTE2O1xuICAgICAgICByLmZvckVhY2goZnVuY3Rpb24gKHQsIHMpIHtcbiAgICAgICAgICB1ID49IHQgJiYgKF9lMTYgPSBzKTtcbiAgICAgICAgfSksIHZvaWQgMCAhPT0gX2UxNiAmJiAoaCA9IHJbX2UxNiA+IDAgPyBfZTE2IC0gMSA6IF9lMTZdKTtcbiAgICAgIH1cbiAgICAgIHZhciBmID0gMDtcbiAgICAgIGlmICh2b2lkIDAgIT09IGggJiYgKGYgPSBuLmluZGV4T2YoaCksIGYgPCAwICYmIChmID0gYS5hY3RpdmVJbmRleCAtIDEpLCBcImF1dG9cIiA9PT0gaS5zbGlkZXNQZXJWaWV3ICYmIDEgPT09IGkuc2xpZGVzUGVyR3JvdXAgJiYgaS5zbGlkZXNQZXJHcm91cEF1dG8gJiYgKGYgPSBmIC0gYS5zbGlkZXNQZXJWaWV3RHluYW1pYyhcInByZXZpb3VzXCIsICEwKSArIDEsIGYgPSBNYXRoLm1heChmLCAwKSkpLCBpLnJld2luZCAmJiBhLmlzQmVnaW5uaW5nKSB7XG4gICAgICAgIHZhciBfaTggPSBhLnBhcmFtcy52aXJ0dWFsICYmIGEucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCAmJiBhLnZpcnR1YWwgPyBhLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCAtIDEgOiBhLnNsaWRlcy5sZW5ndGggLSAxO1xuICAgICAgICByZXR1cm4gYS5zbGlkZVRvKF9pOCwgZSwgdCwgcyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYS5zbGlkZVRvKGYsIGUsIHQsIHMpO1xuICAgIH0sXG4gICAgc2xpZGVSZXNldDogZnVuY3Rpb24gc2xpZGVSZXNldChlLCB0LCBzKSB7XG4gICAgICByZXR1cm4gdm9pZCAwID09PSBlICYmIChlID0gdGhpcy5wYXJhbXMuc3BlZWQpLCB2b2lkIDAgPT09IHQgJiYgKHQgPSAhMCksIHRoaXMuc2xpZGVUbyh0aGlzLmFjdGl2ZUluZGV4LCBlLCB0LCBzKTtcbiAgICB9LFxuICAgIHNsaWRlVG9DbG9zZXN0OiBmdW5jdGlvbiBzbGlkZVRvQ2xvc2VzdChlLCB0LCBzLCBhKSB7XG4gICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSB0aGlzLnBhcmFtcy5zcGVlZCksIHZvaWQgMCA9PT0gdCAmJiAodCA9ICEwKSwgdm9pZCAwID09PSBhICYmIChhID0gLjUpO1xuICAgICAgdmFyIGkgPSB0aGlzO1xuICAgICAgdmFyIHIgPSBpLmFjdGl2ZUluZGV4O1xuICAgICAgdmFyIG4gPSBNYXRoLm1pbihpLnBhcmFtcy5zbGlkZXNQZXJHcm91cFNraXAsIHIpLFxuICAgICAgICBsID0gbiArIE1hdGguZmxvb3IoKHIgLSBuKSAvIGkucGFyYW1zLnNsaWRlc1Blckdyb3VwKSxcbiAgICAgICAgbyA9IGkucnRsVHJhbnNsYXRlID8gaS50cmFuc2xhdGUgOiAtaS50cmFuc2xhdGU7XG4gICAgICBpZiAobyA+PSBpLnNuYXBHcmlkW2xdKSB7XG4gICAgICAgIHZhciBfZTE3ID0gaS5zbmFwR3JpZFtsXTtcbiAgICAgICAgbyAtIF9lMTcgPiAoaS5zbmFwR3JpZFtsICsgMV0gLSBfZTE3KSAqIGEgJiYgKHIgKz0gaS5wYXJhbXMuc2xpZGVzUGVyR3JvdXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIF9lMTggPSBpLnNuYXBHcmlkW2wgLSAxXTtcbiAgICAgICAgbyAtIF9lMTggPD0gKGkuc25hcEdyaWRbbF0gLSBfZTE4KSAqIGEgJiYgKHIgLT0gaS5wYXJhbXMuc2xpZGVzUGVyR3JvdXApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHIgPSBNYXRoLm1heChyLCAwKSwgciA9IE1hdGgubWluKHIsIGkuc2xpZGVzR3JpZC5sZW5ndGggLSAxKSwgaS5zbGlkZVRvKHIsIGUsIHQsIHMpO1xuICAgIH0sXG4gICAgc2xpZGVUb0NsaWNrZWRTbGlkZTogZnVuY3Rpb24gc2xpZGVUb0NsaWNrZWRTbGlkZSgpIHtcbiAgICAgIHZhciBlID0gdGhpcyxcbiAgICAgICAgdCA9IGUucGFyYW1zLFxuICAgICAgICBzID0gZS5zbGlkZXNFbCxcbiAgICAgICAgYSA9IFwiYXV0b1wiID09PSB0LnNsaWRlc1BlclZpZXcgPyBlLnNsaWRlc1BlclZpZXdEeW5hbWljKCkgOiB0LnNsaWRlc1BlclZpZXc7XG4gICAgICB2YXIgaSxcbiAgICAgICAgciA9IGUuY2xpY2tlZEluZGV4O1xuICAgICAgdmFyIGwgPSBlLmlzRWxlbWVudCA/IFwic3dpcGVyLXNsaWRlXCIgOiBcIi5cIi5jb25jYXQodC5zbGlkZUNsYXNzKTtcbiAgICAgIGlmICh0Lmxvb3ApIHtcbiAgICAgICAgaWYgKGUuYW5pbWF0aW5nKSByZXR1cm47XG4gICAgICAgIGkgPSBwYXJzZUludChlLmNsaWNrZWRTbGlkZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKSwgMTApLCB0LmNlbnRlcmVkU2xpZGVzID8gciA8IGUubG9vcGVkU2xpZGVzIC0gYSAvIDIgfHwgciA+IGUuc2xpZGVzLmxlbmd0aCAtIGUubG9vcGVkU2xpZGVzICsgYSAvIDIgPyAoZS5sb29wRml4KCksIHIgPSBlLmdldFNsaWRlSW5kZXgoZihzLCBcIlwiLmNvbmNhdChsLCBcIltkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cXFwiXCIpLmNvbmNhdChpLCBcIlxcXCJdXCIpKVswXSksIG4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGUuc2xpZGVUbyhyKTtcbiAgICAgICAgfSkpIDogZS5zbGlkZVRvKHIpIDogciA+IGUuc2xpZGVzLmxlbmd0aCAtIGEgPyAoZS5sb29wRml4KCksIHIgPSBlLmdldFNsaWRlSW5kZXgoZihzLCBcIlwiLmNvbmNhdChsLCBcIltkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cXFwiXCIpLmNvbmNhdChpLCBcIlxcXCJdXCIpKVswXSksIG4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGUuc2xpZGVUbyhyKTtcbiAgICAgICAgfSkpIDogZS5zbGlkZVRvKHIpO1xuICAgICAgfSBlbHNlIGUuc2xpZGVUbyhyKTtcbiAgICB9XG4gIH07XG4gIHZhciBIID0ge1xuICAgIGxvb3BDcmVhdGU6IGZ1bmN0aW9uIGxvb3BDcmVhdGUoZSkge1xuICAgICAgdmFyIHQgPSB0aGlzLFxuICAgICAgICBzID0gdC5wYXJhbXMsXG4gICAgICAgIGEgPSB0LnNsaWRlc0VsO1xuICAgICAgaWYgKCFzLmxvb3AgfHwgdC52aXJ0dWFsICYmIHQucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgZihhLCBcIi5cIi5jb25jYXQocy5zbGlkZUNsYXNzLCBcIiwgc3dpcGVyLXNsaWRlXCIpKS5mb3JFYWNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIGUuc2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIiwgdCk7XG4gICAgICB9KSwgdC5sb29wRml4KHtcbiAgICAgICAgc2xpZGVSZWFsSW5kZXg6IGUsXG4gICAgICAgIGRpcmVjdGlvbjogcy5jZW50ZXJlZFNsaWRlcyA/IHZvaWQgMCA6IFwibmV4dFwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGxvb3BGaXg6IGZ1bmN0aW9uIGxvb3BGaXgoZSkge1xuICAgICAgdmFyIF9yZWYyID0gdm9pZCAwID09PSBlID8ge30gOiBlLFxuICAgICAgICB0ID0gX3JlZjIuc2xpZGVSZWFsSW5kZXgsXG4gICAgICAgIF9yZWYyJHNsaWRlVG8gPSBfcmVmMi5zbGlkZVRvLFxuICAgICAgICBzID0gX3JlZjIkc2xpZGVUbyA9PT0gdm9pZCAwID8gITAgOiBfcmVmMiRzbGlkZVRvLFxuICAgICAgICBhID0gX3JlZjIuZGlyZWN0aW9uLFxuICAgICAgICBpID0gX3JlZjIuc2V0VHJhbnNsYXRlLFxuICAgICAgICByID0gX3JlZjIuYWN0aXZlU2xpZGVJbmRleCxcbiAgICAgICAgbiA9IF9yZWYyLmJ5Q29udHJvbGxlcixcbiAgICAgICAgbCA9IF9yZWYyLmJ5TW91c2V3aGVlbDtcbiAgICAgIHZhciBvID0gdGhpcztcbiAgICAgIGlmICghby5wYXJhbXMubG9vcCkgcmV0dXJuO1xuICAgICAgby5lbWl0KFwiYmVmb3JlTG9vcEZpeFwiKTtcbiAgICAgIHZhciBkID0gby5zbGlkZXMsXG4gICAgICAgIGMgPSBvLmFsbG93U2xpZGVQcmV2LFxuICAgICAgICBwID0gby5hbGxvd1NsaWRlTmV4dCxcbiAgICAgICAgdSA9IG8uc2xpZGVzRWwsXG4gICAgICAgIG0gPSBvLnBhcmFtcztcbiAgICAgIGlmIChvLmFsbG93U2xpZGVQcmV2ID0gITAsIG8uYWxsb3dTbGlkZU5leHQgPSAhMCwgby52aXJ0dWFsICYmIG0udmlydHVhbC5lbmFibGVkKSByZXR1cm4gcyAmJiAobS5jZW50ZXJlZFNsaWRlcyB8fCAwICE9PSBvLnNuYXBJbmRleCA/IG0uY2VudGVyZWRTbGlkZXMgJiYgby5zbmFwSW5kZXggPCBtLnNsaWRlc1BlclZpZXcgPyBvLnNsaWRlVG8oby52aXJ0dWFsLnNsaWRlcy5sZW5ndGggKyBvLnNuYXBJbmRleCwgMCwgITEsICEwKSA6IG8uc25hcEluZGV4ID09PSBvLnNuYXBHcmlkLmxlbmd0aCAtIDEgJiYgby5zbGlkZVRvKG8udmlydHVhbC5zbGlkZXNCZWZvcmUsIDAsICExLCAhMCkgOiBvLnNsaWRlVG8oby52aXJ0dWFsLnNsaWRlcy5sZW5ndGgsIDAsICExLCAhMCkpLCBvLmFsbG93U2xpZGVQcmV2ID0gYywgby5hbGxvd1NsaWRlTmV4dCA9IHAsIHZvaWQgby5lbWl0KFwibG9vcEZpeFwiKTtcbiAgICAgIHZhciBoID0gXCJhdXRvXCIgPT09IG0uc2xpZGVzUGVyVmlldyA/IG8uc2xpZGVzUGVyVmlld0R5bmFtaWMoKSA6IE1hdGguY2VpbChwYXJzZUZsb2F0KG0uc2xpZGVzUGVyVmlldywgMTApKTtcbiAgICAgIHZhciBmID0gbS5sb29wZWRTbGlkZXMgfHwgaDtcbiAgICAgIGYgJSBtLnNsaWRlc1Blckdyb3VwICE9IDAgJiYgKGYgKz0gbS5zbGlkZXNQZXJHcm91cCAtIGYgJSBtLnNsaWRlc1Blckdyb3VwKSwgby5sb29wZWRTbGlkZXMgPSBmO1xuICAgICAgdmFyIGcgPSBbXSxcbiAgICAgICAgdiA9IFtdO1xuICAgICAgdmFyIHcgPSBvLmFjdGl2ZUluZGV4O1xuICAgICAgdm9pZCAwID09PSByID8gciA9IG8uZ2V0U2xpZGVJbmRleChvLnNsaWRlcy5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIGUuY2xhc3NMaXN0LmNvbnRhaW5zKG0uc2xpZGVBY3RpdmVDbGFzcyk7XG4gICAgICB9KVswXSkgOiB3ID0gcjtcbiAgICAgIHZhciBiID0gXCJuZXh0XCIgPT09IGEgfHwgIWEsXG4gICAgICAgIHkgPSBcInByZXZcIiA9PT0gYSB8fCAhYTtcbiAgICAgIHZhciBFID0gMCxcbiAgICAgICAgeCA9IDA7XG4gICAgICBpZiAociA8IGYpIHtcbiAgICAgICAgRSA9IE1hdGgubWF4KGYgLSByLCBtLnNsaWRlc1Blckdyb3VwKTtcbiAgICAgICAgZm9yICh2YXIgX2UxOSA9IDA7IF9lMTkgPCBmIC0gcjsgX2UxOSArPSAxKSB7XG4gICAgICAgICAgdmFyIF90MTQgPSBfZTE5IC0gTWF0aC5mbG9vcihfZTE5IC8gZC5sZW5ndGgpICogZC5sZW5ndGg7XG4gICAgICAgICAgZy5wdXNoKGQubGVuZ3RoIC0gX3QxNCAtIDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHIgPiBvLnNsaWRlcy5sZW5ndGggLSAyICogZikge1xuICAgICAgICB4ID0gTWF0aC5tYXgociAtIChvLnNsaWRlcy5sZW5ndGggLSAyICogZiksIG0uc2xpZGVzUGVyR3JvdXApO1xuICAgICAgICBmb3IgKHZhciBfZTIwID0gMDsgX2UyMCA8IHg7IF9lMjAgKz0gMSkge1xuICAgICAgICAgIHZhciBfdDE1ID0gX2UyMCAtIE1hdGguZmxvb3IoX2UyMCAvIGQubGVuZ3RoKSAqIGQubGVuZ3RoO1xuICAgICAgICAgIHYucHVzaChfdDE1KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHkgJiYgZy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIG8uc2xpZGVzW2VdLnN3aXBlckxvb3BNb3ZlRE9NID0gITAsIHUucHJlcGVuZChvLnNsaWRlc1tlXSksIG8uc2xpZGVzW2VdLnN3aXBlckxvb3BNb3ZlRE9NID0gITE7XG4gICAgICB9KSwgYiAmJiB2LmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgby5zbGlkZXNbZV0uc3dpcGVyTG9vcE1vdmVET00gPSAhMCwgdS5hcHBlbmQoby5zbGlkZXNbZV0pLCBvLnNsaWRlc1tlXS5zd2lwZXJMb29wTW92ZURPTSA9ICExO1xuICAgICAgfSksIG8ucmVjYWxjU2xpZGVzKCksIFwiYXV0b1wiID09PSBtLnNsaWRlc1BlclZpZXcgJiYgby51cGRhdGVTbGlkZXMoKSwgbS53YXRjaFNsaWRlc1Byb2dyZXNzICYmIG8udXBkYXRlU2xpZGVzT2Zmc2V0KCksIHMpIGlmIChnLmxlbmd0aCA+IDAgJiYgeSkge1xuICAgICAgICBpZiAodm9pZCAwID09PSB0KSB7XG4gICAgICAgICAgdmFyIF9lMjEgPSBvLnNsaWRlc0dyaWRbd10sXG4gICAgICAgICAgICBfdDE2ID0gby5zbGlkZXNHcmlkW3cgKyBFXSAtIF9lMjE7XG4gICAgICAgICAgbCA/IG8uc2V0VHJhbnNsYXRlKG8udHJhbnNsYXRlIC0gX3QxNikgOiAoby5zbGlkZVRvKHcgKyBFLCAwLCAhMSwgITApLCBpICYmIChvLnRvdWNoZXNbby5pc0hvcml6b250YWwoKSA/IFwic3RhcnRYXCIgOiBcInN0YXJ0WVwiXSArPSBfdDE2KSk7XG4gICAgICAgIH0gZWxzZSBpICYmIG8uc2xpZGVUb0xvb3AodCwgMCwgITEsICEwKTtcbiAgICAgIH0gZWxzZSBpZiAodi5sZW5ndGggPiAwICYmIGIpIGlmICh2b2lkIDAgPT09IHQpIHtcbiAgICAgICAgdmFyIF9lMjIgPSBvLnNsaWRlc0dyaWRbd10sXG4gICAgICAgICAgX3QxNyA9IG8uc2xpZGVzR3JpZFt3IC0geF0gLSBfZTIyO1xuICAgICAgICBsID8gby5zZXRUcmFuc2xhdGUoby50cmFuc2xhdGUgLSBfdDE3KSA6IChvLnNsaWRlVG8odyAtIHgsIDAsICExLCAhMCksIGkgJiYgKG8udG91Y2hlc1tvLmlzSG9yaXpvbnRhbCgpID8gXCJzdGFydFhcIiA6IFwic3RhcnRZXCJdICs9IF90MTcpKTtcbiAgICAgIH0gZWxzZSBvLnNsaWRlVG9Mb29wKHQsIDAsICExLCAhMCk7XG4gICAgICBpZiAoby5hbGxvd1NsaWRlUHJldiA9IGMsIG8uYWxsb3dTbGlkZU5leHQgPSBwLCBvLmNvbnRyb2xsZXIgJiYgby5jb250cm9sbGVyLmNvbnRyb2wgJiYgIW4pIHtcbiAgICAgICAgdmFyIF9lMjMgPSB7XG4gICAgICAgICAgc2xpZGVSZWFsSW5kZXg6IHQsXG4gICAgICAgICAgc2xpZGVUbzogITEsXG4gICAgICAgICAgZGlyZWN0aW9uOiBhLFxuICAgICAgICAgIHNldFRyYW5zbGF0ZTogaSxcbiAgICAgICAgICBhY3RpdmVTbGlkZUluZGV4OiByLFxuICAgICAgICAgIGJ5Q29udHJvbGxlcjogITBcbiAgICAgICAgfTtcbiAgICAgICAgQXJyYXkuaXNBcnJheShvLmNvbnRyb2xsZXIuY29udHJvbCkgPyBvLmNvbnRyb2xsZXIuY29udHJvbC5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgIXQuZGVzdHJveWVkICYmIHQucGFyYW1zLmxvb3AgJiYgdC5sb29wRml4KF9lMjMpO1xuICAgICAgICB9KSA6IG8uY29udHJvbGxlci5jb250cm9sIGluc3RhbmNlb2Ygby5jb25zdHJ1Y3RvciAmJiBvLmNvbnRyb2xsZXIuY29udHJvbC5wYXJhbXMubG9vcCAmJiBvLmNvbnRyb2xsZXIuY29udHJvbC5sb29wRml4KF9lMjMpO1xuICAgICAgfVxuICAgICAgby5lbWl0KFwibG9vcEZpeFwiKTtcbiAgICB9LFxuICAgIGxvb3BEZXN0cm95OiBmdW5jdGlvbiBsb29wRGVzdHJveSgpIHtcbiAgICAgIHZhciBlID0gdGhpcyxcbiAgICAgICAgdCA9IGUucGFyYW1zLFxuICAgICAgICBzID0gZS5zbGlkZXNFbDtcbiAgICAgIGlmICghdC5sb29wIHx8IGUudmlydHVhbCAmJiBlLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQpIHJldHVybjtcbiAgICAgIGUucmVjYWxjU2xpZGVzKCk7XG4gICAgICB2YXIgYSA9IFtdO1xuICAgICAgZS5zbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdCA9IHZvaWQgMCA9PT0gZS5zd2lwZXJTbGlkZUluZGV4ID8gMSAqIGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIikgOiBlLnN3aXBlclNsaWRlSW5kZXg7XG4gICAgICAgIGFbdF0gPSBlO1xuICAgICAgfSksIGUuc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKTtcbiAgICAgIH0pLCBhLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcy5hcHBlbmQoZSk7XG4gICAgICB9KSwgZS5yZWNhbGNTbGlkZXMoKSwgZS5zbGlkZVRvKGUucmVhbEluZGV4LCAwKTtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIFgoZSkge1xuICAgIHZhciB0ID0gdGhpcyxcbiAgICAgIHMgPSBhKCksXG4gICAgICBpID0gcigpLFxuICAgICAgbiA9IHQudG91Y2hFdmVudHNEYXRhO1xuICAgIG4uZXZDYWNoZS5wdXNoKGUpO1xuICAgIHZhciBvID0gdC5wYXJhbXMsXG4gICAgICBkID0gdC50b3VjaGVzLFxuICAgICAgYyA9IHQuZW5hYmxlZDtcbiAgICBpZiAoIWMpIHJldHVybjtcbiAgICBpZiAoIW8uc2ltdWxhdGVUb3VjaCAmJiBcIm1vdXNlXCIgPT09IGUucG9pbnRlclR5cGUpIHJldHVybjtcbiAgICBpZiAodC5hbmltYXRpbmcgJiYgby5wcmV2ZW50SW50ZXJhY3Rpb25PblRyYW5zaXRpb24pIHJldHVybjtcbiAgICAhdC5hbmltYXRpbmcgJiYgby5jc3NNb2RlICYmIG8ubG9vcCAmJiB0Lmxvb3BGaXgoKTtcbiAgICB2YXIgcCA9IGU7XG4gICAgcC5vcmlnaW5hbEV2ZW50ICYmIChwID0gcC5vcmlnaW5hbEV2ZW50KTtcbiAgICB2YXIgdSA9IHAudGFyZ2V0O1xuICAgIGlmIChcIndyYXBwZXJcIiA9PT0gby50b3VjaEV2ZW50c1RhcmdldCAmJiAhdC53cmFwcGVyRWwuY29udGFpbnModSkpIHJldHVybjtcbiAgICBpZiAoXCJ3aGljaFwiIGluIHAgJiYgMyA9PT0gcC53aGljaCkgcmV0dXJuO1xuICAgIGlmIChcImJ1dHRvblwiIGluIHAgJiYgcC5idXR0b24gPiAwKSByZXR1cm47XG4gICAgaWYgKG4uaXNUb3VjaGVkICYmIG4uaXNNb3ZlZCkgcmV0dXJuO1xuICAgIHZhciBtID0gISFvLm5vU3dpcGluZ0NsYXNzICYmIFwiXCIgIT09IG8ubm9Td2lwaW5nQ2xhc3MsXG4gICAgICBoID0gZS5jb21wb3NlZFBhdGggPyBlLmNvbXBvc2VkUGF0aCgpIDogZS5wYXRoO1xuICAgIG0gJiYgcC50YXJnZXQgJiYgcC50YXJnZXQuc2hhZG93Um9vdCAmJiBoICYmICh1ID0gaFswXSk7XG4gICAgdmFyIGYgPSBvLm5vU3dpcGluZ1NlbGVjdG9yID8gby5ub1N3aXBpbmdTZWxlY3RvciA6IFwiLlwiLmNvbmNhdChvLm5vU3dpcGluZ0NsYXNzKSxcbiAgICAgIGcgPSAhKCFwLnRhcmdldCB8fCAhcC50YXJnZXQuc2hhZG93Um9vdCk7XG4gICAgaWYgKG8ubm9Td2lwaW5nICYmIChnID8gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHJldHVybiB2b2lkIDAgPT09IHQgJiYgKHQgPSB0aGlzKSwgZnVuY3Rpb24gdChzKSB7XG4gICAgICAgIGlmICghcyB8fCBzID09PSBhKCkgfHwgcyA9PT0gcigpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcy5hc3NpZ25lZFNsb3QgJiYgKHMgPSBzLmFzc2lnbmVkU2xvdCk7XG4gICAgICAgIHZhciBpID0gcy5jbG9zZXN0KGUpO1xuICAgICAgICByZXR1cm4gaSB8fCBzLmdldFJvb3ROb2RlID8gaSB8fCB0KHMuZ2V0Um9vdE5vZGUoKS5ob3N0KSA6IG51bGw7XG4gICAgICB9KHQpO1xuICAgIH0oZiwgdSkgOiB1LmNsb3Nlc3QoZikpKSByZXR1cm4gdm9pZCAodC5hbGxvd0NsaWNrID0gITApO1xuICAgIGlmIChvLnN3aXBlSGFuZGxlciAmJiAhdS5jbG9zZXN0KG8uc3dpcGVIYW5kbGVyKSkgcmV0dXJuO1xuICAgIGQuY3VycmVudFggPSBwLnBhZ2VYLCBkLmN1cnJlbnRZID0gcC5wYWdlWTtcbiAgICB2YXIgdiA9IGQuY3VycmVudFgsXG4gICAgICB3ID0gZC5jdXJyZW50WSxcbiAgICAgIGIgPSBvLmVkZ2VTd2lwZURldGVjdGlvbiB8fCBvLmlPU0VkZ2VTd2lwZURldGVjdGlvbixcbiAgICAgIHkgPSBvLmVkZ2VTd2lwZVRocmVzaG9sZCB8fCBvLmlPU0VkZ2VTd2lwZVRocmVzaG9sZDtcbiAgICBpZiAoYiAmJiAodiA8PSB5IHx8IHYgPj0gaS5pbm5lcldpZHRoIC0geSkpIHtcbiAgICAgIGlmIChcInByZXZlbnRcIiAhPT0gYikgcmV0dXJuO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKG4sIHtcbiAgICAgIGlzVG91Y2hlZDogITAsXG4gICAgICBpc01vdmVkOiAhMSxcbiAgICAgIGFsbG93VG91Y2hDYWxsYmFja3M6ICEwLFxuICAgICAgaXNTY3JvbGxpbmc6IHZvaWQgMCxcbiAgICAgIHN0YXJ0TW92aW5nOiB2b2lkIDBcbiAgICB9KSwgZC5zdGFydFggPSB2LCBkLnN0YXJ0WSA9IHcsIG4udG91Y2hTdGFydFRpbWUgPSBsKCksIHQuYWxsb3dDbGljayA9ICEwLCB0LnVwZGF0ZVNpemUoKSwgdC5zd2lwZURpcmVjdGlvbiA9IHZvaWQgMCwgby50aHJlc2hvbGQgPiAwICYmIChuLmFsbG93VGhyZXNob2xkTW92ZSA9ICExKTtcbiAgICB2YXIgRSA9ICEwO1xuICAgIHUubWF0Y2hlcyhuLmZvY3VzYWJsZUVsZW1lbnRzKSAmJiAoRSA9ICExLCBcIlNFTEVDVFwiID09PSB1Lm5vZGVOYW1lICYmIChuLmlzVG91Y2hlZCA9ICExKSksIHMuYWN0aXZlRWxlbWVudCAmJiBzLmFjdGl2ZUVsZW1lbnQubWF0Y2hlcyhuLmZvY3VzYWJsZUVsZW1lbnRzKSAmJiBzLmFjdGl2ZUVsZW1lbnQgIT09IHUgJiYgcy5hY3RpdmVFbGVtZW50LmJsdXIoKTtcbiAgICB2YXIgeCA9IEUgJiYgdC5hbGxvd1RvdWNoTW92ZSAmJiBvLnRvdWNoU3RhcnRQcmV2ZW50RGVmYXVsdDtcbiAgICAhby50b3VjaFN0YXJ0Rm9yY2VQcmV2ZW50RGVmYXVsdCAmJiAheCB8fCB1LmlzQ29udGVudEVkaXRhYmxlIHx8IHAucHJldmVudERlZmF1bHQoKSwgby5mcmVlTW9kZSAmJiBvLmZyZWVNb2RlLmVuYWJsZWQgJiYgdC5mcmVlTW9kZSAmJiB0LmFuaW1hdGluZyAmJiAhby5jc3NNb2RlICYmIHQuZnJlZU1vZGUub25Ub3VjaFN0YXJ0KCksIHQuZW1pdChcInRvdWNoU3RhcnRcIiwgcCk7XG4gIH1cbiAgZnVuY3Rpb24gWShlKSB7XG4gICAgdmFyIHQgPSBhKCksXG4gICAgICBzID0gdGhpcyxcbiAgICAgIGkgPSBzLnRvdWNoRXZlbnRzRGF0YSxcbiAgICAgIHIgPSBzLnBhcmFtcyxcbiAgICAgIG4gPSBzLnRvdWNoZXMsXG4gICAgICBvID0gcy5ydGxUcmFuc2xhdGUsXG4gICAgICBkID0gcy5lbmFibGVkO1xuICAgIGlmICghZCkgcmV0dXJuO1xuICAgIGlmICghci5zaW11bGF0ZVRvdWNoICYmIFwibW91c2VcIiA9PT0gZS5wb2ludGVyVHlwZSkgcmV0dXJuO1xuICAgIHZhciBjID0gZTtcbiAgICBpZiAoYy5vcmlnaW5hbEV2ZW50ICYmIChjID0gYy5vcmlnaW5hbEV2ZW50KSwgIWkuaXNUb3VjaGVkKSByZXR1cm4gdm9pZCAoaS5zdGFydE1vdmluZyAmJiBpLmlzU2Nyb2xsaW5nICYmIHMuZW1pdChcInRvdWNoTW92ZU9wcG9zaXRlXCIsIGMpKTtcbiAgICB2YXIgcCA9IGkuZXZDYWNoZS5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiBlLnBvaW50ZXJJZCA9PT0gYy5wb2ludGVySWQ7XG4gICAgfSk7XG4gICAgcCA+PSAwICYmIChpLmV2Q2FjaGVbcF0gPSBjKTtcbiAgICB2YXIgdSA9IGkuZXZDYWNoZS5sZW5ndGggPiAxID8gaS5ldkNhY2hlWzBdIDogYyxcbiAgICAgIG0gPSB1LnBhZ2VYLFxuICAgICAgaCA9IHUucGFnZVk7XG4gICAgaWYgKGMucHJldmVudGVkQnlOZXN0ZWRTd2lwZXIpIHJldHVybiBuLnN0YXJ0WCA9IG0sIHZvaWQgKG4uc3RhcnRZID0gaCk7XG4gICAgaWYgKCFzLmFsbG93VG91Y2hNb3ZlKSByZXR1cm4gYy50YXJnZXQubWF0Y2hlcyhpLmZvY3VzYWJsZUVsZW1lbnRzKSB8fCAocy5hbGxvd0NsaWNrID0gITEpLCB2b2lkIChpLmlzVG91Y2hlZCAmJiAoT2JqZWN0LmFzc2lnbihuLCB7XG4gICAgICBzdGFydFg6IG0sXG4gICAgICBzdGFydFk6IGgsXG4gICAgICBwcmV2WDogcy50b3VjaGVzLmN1cnJlbnRYLFxuICAgICAgcHJldlk6IHMudG91Y2hlcy5jdXJyZW50WSxcbiAgICAgIGN1cnJlbnRYOiBtLFxuICAgICAgY3VycmVudFk6IGhcbiAgICB9KSwgaS50b3VjaFN0YXJ0VGltZSA9IGwoKSkpO1xuICAgIGlmIChyLnRvdWNoUmVsZWFzZU9uRWRnZXMgJiYgIXIubG9vcCkgaWYgKHMuaXNWZXJ0aWNhbCgpKSB7XG4gICAgICBpZiAoaCA8IG4uc3RhcnRZICYmIHMudHJhbnNsYXRlIDw9IHMubWF4VHJhbnNsYXRlKCkgfHwgaCA+IG4uc3RhcnRZICYmIHMudHJhbnNsYXRlID49IHMubWluVHJhbnNsYXRlKCkpIHJldHVybiBpLmlzVG91Y2hlZCA9ICExLCB2b2lkIChpLmlzTW92ZWQgPSAhMSk7XG4gICAgfSBlbHNlIGlmIChtIDwgbi5zdGFydFggJiYgcy50cmFuc2xhdGUgPD0gcy5tYXhUcmFuc2xhdGUoKSB8fCBtID4gbi5zdGFydFggJiYgcy50cmFuc2xhdGUgPj0gcy5taW5UcmFuc2xhdGUoKSkgcmV0dXJuO1xuICAgIGlmICh0LmFjdGl2ZUVsZW1lbnQgJiYgYy50YXJnZXQgPT09IHQuYWN0aXZlRWxlbWVudCAmJiBjLnRhcmdldC5tYXRjaGVzKGkuZm9jdXNhYmxlRWxlbWVudHMpKSByZXR1cm4gaS5pc01vdmVkID0gITAsIHZvaWQgKHMuYWxsb3dDbGljayA9ICExKTtcbiAgICBpZiAoaS5hbGxvd1RvdWNoQ2FsbGJhY2tzICYmIHMuZW1pdChcInRvdWNoTW92ZVwiLCBjKSwgYy50YXJnZXRUb3VjaGVzICYmIGMudGFyZ2V0VG91Y2hlcy5sZW5ndGggPiAxKSByZXR1cm47XG4gICAgbi5jdXJyZW50WCA9IG0sIG4uY3VycmVudFkgPSBoO1xuICAgIHZhciBmID0gbi5jdXJyZW50WCAtIG4uc3RhcnRYLFxuICAgICAgZyA9IG4uY3VycmVudFkgLSBuLnN0YXJ0WTtcbiAgICBpZiAocy5wYXJhbXMudGhyZXNob2xkICYmIE1hdGguc3FydChNYXRoLnBvdyhmLCAyKSArIE1hdGgucG93KGcsIDIpKSA8IHMucGFyYW1zLnRocmVzaG9sZCkgcmV0dXJuO1xuICAgIGlmICh2b2lkIDAgPT09IGkuaXNTY3JvbGxpbmcpIHtcbiAgICAgIHZhciBfZTI0O1xuICAgICAgcy5pc0hvcml6b250YWwoKSAmJiBuLmN1cnJlbnRZID09PSBuLnN0YXJ0WSB8fCBzLmlzVmVydGljYWwoKSAmJiBuLmN1cnJlbnRYID09PSBuLnN0YXJ0WCA/IGkuaXNTY3JvbGxpbmcgPSAhMSA6IGYgKiBmICsgZyAqIGcgPj0gMjUgJiYgKF9lMjQgPSAxODAgKiBNYXRoLmF0YW4yKE1hdGguYWJzKGcpLCBNYXRoLmFicyhmKSkgLyBNYXRoLlBJLCBpLmlzU2Nyb2xsaW5nID0gcy5pc0hvcml6b250YWwoKSA/IF9lMjQgPiByLnRvdWNoQW5nbGUgOiA5MCAtIF9lMjQgPiByLnRvdWNoQW5nbGUpO1xuICAgIH1cbiAgICBpZiAoaS5pc1Njcm9sbGluZyAmJiBzLmVtaXQoXCJ0b3VjaE1vdmVPcHBvc2l0ZVwiLCBjKSwgdm9pZCAwID09PSBpLnN0YXJ0TW92aW5nICYmIChuLmN1cnJlbnRYID09PSBuLnN0YXJ0WCAmJiBuLmN1cnJlbnRZID09PSBuLnN0YXJ0WSB8fCAoaS5zdGFydE1vdmluZyA9ICEwKSksIGkuaXNTY3JvbGxpbmcgfHwgcy56b29tICYmIHMucGFyYW1zLnpvb20gJiYgcy5wYXJhbXMuem9vbS5lbmFibGVkICYmIGkuZXZDYWNoZS5sZW5ndGggPiAxKSByZXR1cm4gdm9pZCAoaS5pc1RvdWNoZWQgPSAhMSk7XG4gICAgaWYgKCFpLnN0YXJ0TW92aW5nKSByZXR1cm47XG4gICAgcy5hbGxvd0NsaWNrID0gITEsICFyLmNzc01vZGUgJiYgYy5jYW5jZWxhYmxlICYmIGMucHJldmVudERlZmF1bHQoKSwgci50b3VjaE1vdmVTdG9wUHJvcGFnYXRpb24gJiYgIXIubmVzdGVkICYmIGMuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdmFyIHYgPSBzLmlzSG9yaXpvbnRhbCgpID8gZiA6IGcsXG4gICAgICB3ID0gcy5pc0hvcml6b250YWwoKSA/IG4uY3VycmVudFggLSBuLnByZXZpb3VzWCA6IG4uY3VycmVudFkgLSBuLnByZXZpb3VzWTtcbiAgICByLm9uZVdheU1vdmVtZW50ICYmICh2ID0gTWF0aC5hYnModikgKiAobyA/IDEgOiAtMSksIHcgPSBNYXRoLmFicyh3KSAqIChvID8gMSA6IC0xKSksIG4uZGlmZiA9IHYsIHYgKj0gci50b3VjaFJhdGlvLCBvICYmICh2ID0gLXYsIHcgPSAtdyk7XG4gICAgdmFyIGIgPSBzLnRvdWNoZXNEaXJlY3Rpb247XG4gICAgcy5zd2lwZURpcmVjdGlvbiA9IHYgPiAwID8gXCJwcmV2XCIgOiBcIm5leHRcIiwgcy50b3VjaGVzRGlyZWN0aW9uID0gdyA+IDAgPyBcInByZXZcIiA6IFwibmV4dFwiO1xuICAgIHZhciB5ID0gcy5wYXJhbXMubG9vcCAmJiAhci5jc3NNb2RlO1xuICAgIGlmICghaS5pc01vdmVkKSB7XG4gICAgICBpZiAoeSAmJiBzLmxvb3BGaXgoe1xuICAgICAgICBkaXJlY3Rpb246IHMuc3dpcGVEaXJlY3Rpb25cbiAgICAgIH0pLCBpLnN0YXJ0VHJhbnNsYXRlID0gcy5nZXRUcmFuc2xhdGUoKSwgcy5zZXRUcmFuc2l0aW9uKDApLCBzLmFuaW1hdGluZykge1xuICAgICAgICB2YXIgX2UyNSA9IG5ldyB3aW5kb3cuQ3VzdG9tRXZlbnQoXCJ0cmFuc2l0aW9uZW5kXCIsIHtcbiAgICAgICAgICBidWJibGVzOiAhMCxcbiAgICAgICAgICBjYW5jZWxhYmxlOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcy53cmFwcGVyRWwuZGlzcGF0Y2hFdmVudChfZTI1KTtcbiAgICAgIH1cbiAgICAgIGkuYWxsb3dNb21lbnR1bUJvdW5jZSA9ICExLCAhci5ncmFiQ3Vyc29yIHx8ICEwICE9PSBzLmFsbG93U2xpZGVOZXh0ICYmICEwICE9PSBzLmFsbG93U2xpZGVQcmV2IHx8IHMuc2V0R3JhYkN1cnNvcighMCksIHMuZW1pdChcInNsaWRlckZpcnN0TW92ZVwiLCBjKTtcbiAgICB9XG4gICAgdmFyIEU7XG4gICAgaS5pc01vdmVkICYmIGIgIT09IHMudG91Y2hlc0RpcmVjdGlvbiAmJiB5ICYmIE1hdGguYWJzKHYpID49IDEgJiYgKHMubG9vcEZpeCh7XG4gICAgICBkaXJlY3Rpb246IHMuc3dpcGVEaXJlY3Rpb24sXG4gICAgICBzZXRUcmFuc2xhdGU6ICEwXG4gICAgfSksIEUgPSAhMCksIHMuZW1pdChcInNsaWRlck1vdmVcIiwgYyksIGkuaXNNb3ZlZCA9ICEwLCBpLmN1cnJlbnRUcmFuc2xhdGUgPSB2ICsgaS5zdGFydFRyYW5zbGF0ZTtcbiAgICB2YXIgeCA9ICEwLFxuICAgICAgUyA9IHIucmVzaXN0YW5jZVJhdGlvO1xuICAgIGlmIChyLnRvdWNoUmVsZWFzZU9uRWRnZXMgJiYgKFMgPSAwKSwgdiA+IDAgPyAoeSAmJiAhRSAmJiBpLmN1cnJlbnRUcmFuc2xhdGUgPiAoci5jZW50ZXJlZFNsaWRlcyA/IHMubWluVHJhbnNsYXRlKCkgLSBzLnNpemUgLyAyIDogcy5taW5UcmFuc2xhdGUoKSkgJiYgcy5sb29wRml4KHtcbiAgICAgIGRpcmVjdGlvbjogXCJwcmV2XCIsXG4gICAgICBzZXRUcmFuc2xhdGU6ICEwLFxuICAgICAgYWN0aXZlU2xpZGVJbmRleDogMFxuICAgIH0pLCBpLmN1cnJlbnRUcmFuc2xhdGUgPiBzLm1pblRyYW5zbGF0ZSgpICYmICh4ID0gITEsIHIucmVzaXN0YW5jZSAmJiAoaS5jdXJyZW50VHJhbnNsYXRlID0gcy5taW5UcmFuc2xhdGUoKSAtIDEgKyBNYXRoLnBvdygtcy5taW5UcmFuc2xhdGUoKSArIGkuc3RhcnRUcmFuc2xhdGUgKyB2LCBTKSkpKSA6IHYgPCAwICYmICh5ICYmICFFICYmIGkuY3VycmVudFRyYW5zbGF0ZSA8IChyLmNlbnRlcmVkU2xpZGVzID8gcy5tYXhUcmFuc2xhdGUoKSArIHMuc2l6ZSAvIDIgOiBzLm1heFRyYW5zbGF0ZSgpKSAmJiBzLmxvb3BGaXgoe1xuICAgICAgZGlyZWN0aW9uOiBcIm5leHRcIixcbiAgICAgIHNldFRyYW5zbGF0ZTogITAsXG4gICAgICBhY3RpdmVTbGlkZUluZGV4OiBzLnNsaWRlcy5sZW5ndGggLSAoXCJhdXRvXCIgPT09IHIuc2xpZGVzUGVyVmlldyA/IHMuc2xpZGVzUGVyVmlld0R5bmFtaWMoKSA6IE1hdGguY2VpbChwYXJzZUZsb2F0KHIuc2xpZGVzUGVyVmlldywgMTApKSlcbiAgICB9KSwgaS5jdXJyZW50VHJhbnNsYXRlIDwgcy5tYXhUcmFuc2xhdGUoKSAmJiAoeCA9ICExLCByLnJlc2lzdGFuY2UgJiYgKGkuY3VycmVudFRyYW5zbGF0ZSA9IHMubWF4VHJhbnNsYXRlKCkgKyAxIC0gTWF0aC5wb3cocy5tYXhUcmFuc2xhdGUoKSAtIGkuc3RhcnRUcmFuc2xhdGUgLSB2LCBTKSkpKSwgeCAmJiAoYy5wcmV2ZW50ZWRCeU5lc3RlZFN3aXBlciA9ICEwKSwgIXMuYWxsb3dTbGlkZU5leHQgJiYgXCJuZXh0XCIgPT09IHMuc3dpcGVEaXJlY3Rpb24gJiYgaS5jdXJyZW50VHJhbnNsYXRlIDwgaS5zdGFydFRyYW5zbGF0ZSAmJiAoaS5jdXJyZW50VHJhbnNsYXRlID0gaS5zdGFydFRyYW5zbGF0ZSksICFzLmFsbG93U2xpZGVQcmV2ICYmIFwicHJldlwiID09PSBzLnN3aXBlRGlyZWN0aW9uICYmIGkuY3VycmVudFRyYW5zbGF0ZSA+IGkuc3RhcnRUcmFuc2xhdGUgJiYgKGkuY3VycmVudFRyYW5zbGF0ZSA9IGkuc3RhcnRUcmFuc2xhdGUpLCBzLmFsbG93U2xpZGVQcmV2IHx8IHMuYWxsb3dTbGlkZU5leHQgfHwgKGkuY3VycmVudFRyYW5zbGF0ZSA9IGkuc3RhcnRUcmFuc2xhdGUpLCByLnRocmVzaG9sZCA+IDApIHtcbiAgICAgIGlmICghKE1hdGguYWJzKHYpID4gci50aHJlc2hvbGQgfHwgaS5hbGxvd1RocmVzaG9sZE1vdmUpKSByZXR1cm4gdm9pZCAoaS5jdXJyZW50VHJhbnNsYXRlID0gaS5zdGFydFRyYW5zbGF0ZSk7XG4gICAgICBpZiAoIWkuYWxsb3dUaHJlc2hvbGRNb3ZlKSByZXR1cm4gaS5hbGxvd1RocmVzaG9sZE1vdmUgPSAhMCwgbi5zdGFydFggPSBuLmN1cnJlbnRYLCBuLnN0YXJ0WSA9IG4uY3VycmVudFksIGkuY3VycmVudFRyYW5zbGF0ZSA9IGkuc3RhcnRUcmFuc2xhdGUsIHZvaWQgKG4uZGlmZiA9IHMuaXNIb3Jpem9udGFsKCkgPyBuLmN1cnJlbnRYIC0gbi5zdGFydFggOiBuLmN1cnJlbnRZIC0gbi5zdGFydFkpO1xuICAgIH1cbiAgICByLmZvbGxvd0ZpbmdlciAmJiAhci5jc3NNb2RlICYmICgoci5mcmVlTW9kZSAmJiByLmZyZWVNb2RlLmVuYWJsZWQgJiYgcy5mcmVlTW9kZSB8fCByLndhdGNoU2xpZGVzUHJvZ3Jlc3MpICYmIChzLnVwZGF0ZUFjdGl2ZUluZGV4KCksIHMudXBkYXRlU2xpZGVzQ2xhc3NlcygpKSwgci5mcmVlTW9kZSAmJiByLmZyZWVNb2RlLmVuYWJsZWQgJiYgcy5mcmVlTW9kZSAmJiBzLmZyZWVNb2RlLm9uVG91Y2hNb3ZlKCksIHMudXBkYXRlUHJvZ3Jlc3MoaS5jdXJyZW50VHJhbnNsYXRlKSwgcy5zZXRUcmFuc2xhdGUoaS5jdXJyZW50VHJhbnNsYXRlKSk7XG4gIH1cbiAgZnVuY3Rpb24gQihlKSB7XG4gICAgdmFyIHQgPSB0aGlzLFxuICAgICAgcyA9IHQudG91Y2hFdmVudHNEYXRhLFxuICAgICAgYSA9IHMuZXZDYWNoZS5maW5kSW5kZXgoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgcmV0dXJuIHQucG9pbnRlcklkID09PSBlLnBvaW50ZXJJZDtcbiAgICAgIH0pO1xuICAgIGlmIChhID49IDAgJiYgcy5ldkNhY2hlLnNwbGljZShhLCAxKSwgW1wicG9pbnRlcmNhbmNlbFwiLCBcInBvaW50ZXJvdXRcIiwgXCJwb2ludGVybGVhdmVcIl0uaW5jbHVkZXMoZS50eXBlKSkge1xuICAgICAgaWYgKCEoXCJwb2ludGVyY2FuY2VsXCIgPT09IGUudHlwZSAmJiAodC5icm93c2VyLmlzU2FmYXJpIHx8IHQuYnJvd3Nlci5pc1dlYlZpZXcpKSkgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaSA9IHQucGFyYW1zLFxuICAgICAgciA9IHQudG91Y2hlcyxcbiAgICAgIG8gPSB0LnJ0bFRyYW5zbGF0ZSxcbiAgICAgIGQgPSB0LnNsaWRlc0dyaWQsXG4gICAgICBjID0gdC5lbmFibGVkO1xuICAgIGlmICghYykgcmV0dXJuO1xuICAgIGlmICghaS5zaW11bGF0ZVRvdWNoICYmIFwibW91c2VcIiA9PT0gZS5wb2ludGVyVHlwZSkgcmV0dXJuO1xuICAgIHZhciBwID0gZTtcbiAgICBpZiAocC5vcmlnaW5hbEV2ZW50ICYmIChwID0gcC5vcmlnaW5hbEV2ZW50KSwgcy5hbGxvd1RvdWNoQ2FsbGJhY2tzICYmIHQuZW1pdChcInRvdWNoRW5kXCIsIHApLCBzLmFsbG93VG91Y2hDYWxsYmFja3MgPSAhMSwgIXMuaXNUb3VjaGVkKSByZXR1cm4gcy5pc01vdmVkICYmIGkuZ3JhYkN1cnNvciAmJiB0LnNldEdyYWJDdXJzb3IoITEpLCBzLmlzTW92ZWQgPSAhMSwgdm9pZCAocy5zdGFydE1vdmluZyA9ICExKTtcbiAgICBpLmdyYWJDdXJzb3IgJiYgcy5pc01vdmVkICYmIHMuaXNUb3VjaGVkICYmICghMCA9PT0gdC5hbGxvd1NsaWRlTmV4dCB8fCAhMCA9PT0gdC5hbGxvd1NsaWRlUHJldikgJiYgdC5zZXRHcmFiQ3Vyc29yKCExKTtcbiAgICB2YXIgdSA9IGwoKSxcbiAgICAgIG0gPSB1IC0gcy50b3VjaFN0YXJ0VGltZTtcbiAgICBpZiAodC5hbGxvd0NsaWNrKSB7XG4gICAgICB2YXIgX2UyNiA9IHAucGF0aCB8fCBwLmNvbXBvc2VkUGF0aCAmJiBwLmNvbXBvc2VkUGF0aCgpO1xuICAgICAgdC51cGRhdGVDbGlja2VkU2xpZGUoX2UyNiAmJiBfZTI2WzBdIHx8IHAudGFyZ2V0KSwgdC5lbWl0KFwidGFwIGNsaWNrXCIsIHApLCBtIDwgMzAwICYmIHUgLSBzLmxhc3RDbGlja1RpbWUgPCAzMDAgJiYgdC5lbWl0KFwiZG91YmxlVGFwIGRvdWJsZUNsaWNrXCIsIHApO1xuICAgIH1cbiAgICBpZiAocy5sYXN0Q2xpY2tUaW1lID0gbCgpLCBuKGZ1bmN0aW9uICgpIHtcbiAgICAgIHQuZGVzdHJveWVkIHx8ICh0LmFsbG93Q2xpY2sgPSAhMCk7XG4gICAgfSksICFzLmlzVG91Y2hlZCB8fCAhcy5pc01vdmVkIHx8ICF0LnN3aXBlRGlyZWN0aW9uIHx8IDAgPT09IHIuZGlmZiB8fCBzLmN1cnJlbnRUcmFuc2xhdGUgPT09IHMuc3RhcnRUcmFuc2xhdGUpIHJldHVybiBzLmlzVG91Y2hlZCA9ICExLCBzLmlzTW92ZWQgPSAhMSwgdm9pZCAocy5zdGFydE1vdmluZyA9ICExKTtcbiAgICB2YXIgaDtcbiAgICBpZiAocy5pc1RvdWNoZWQgPSAhMSwgcy5pc01vdmVkID0gITEsIHMuc3RhcnRNb3ZpbmcgPSAhMSwgaCA9IGkuZm9sbG93RmluZ2VyID8gbyA/IHQudHJhbnNsYXRlIDogLXQudHJhbnNsYXRlIDogLXMuY3VycmVudFRyYW5zbGF0ZSwgaS5jc3NNb2RlKSByZXR1cm47XG4gICAgaWYgKGkuZnJlZU1vZGUgJiYgaS5mcmVlTW9kZS5lbmFibGVkKSByZXR1cm4gdm9pZCB0LmZyZWVNb2RlLm9uVG91Y2hFbmQoe1xuICAgICAgY3VycmVudFBvczogaFxuICAgIH0pO1xuICAgIHZhciBmID0gMCxcbiAgICAgIGcgPSB0LnNsaWRlc1NpemVzR3JpZFswXTtcbiAgICBmb3IgKHZhciBfZTI3ID0gMDsgX2UyNyA8IGQubGVuZ3RoOyBfZTI3ICs9IF9lMjcgPCBpLnNsaWRlc1Blckdyb3VwU2tpcCA/IDEgOiBpLnNsaWRlc1Blckdyb3VwKSB7XG4gICAgICB2YXIgX3QxOCA9IF9lMjcgPCBpLnNsaWRlc1Blckdyb3VwU2tpcCAtIDEgPyAxIDogaS5zbGlkZXNQZXJHcm91cDtcbiAgICAgIHZvaWQgMCAhPT0gZFtfZTI3ICsgX3QxOF0gPyBoID49IGRbX2UyN10gJiYgaCA8IGRbX2UyNyArIF90MThdICYmIChmID0gX2UyNywgZyA9IGRbX2UyNyArIF90MThdIC0gZFtfZTI3XSkgOiBoID49IGRbX2UyN10gJiYgKGYgPSBfZTI3LCBnID0gZFtkLmxlbmd0aCAtIDFdIC0gZFtkLmxlbmd0aCAtIDJdKTtcbiAgICB9XG4gICAgdmFyIHYgPSBudWxsLFxuICAgICAgdyA9IG51bGw7XG4gICAgaS5yZXdpbmQgJiYgKHQuaXNCZWdpbm5pbmcgPyB3ID0gaS52aXJ0dWFsICYmIGkudmlydHVhbC5lbmFibGVkICYmIHQudmlydHVhbCA/IHQudmlydHVhbC5zbGlkZXMubGVuZ3RoIC0gMSA6IHQuc2xpZGVzLmxlbmd0aCAtIDEgOiB0LmlzRW5kICYmICh2ID0gMCkpO1xuICAgIHZhciBiID0gKGggLSBkW2ZdKSAvIGcsXG4gICAgICB5ID0gZiA8IGkuc2xpZGVzUGVyR3JvdXBTa2lwIC0gMSA/IDEgOiBpLnNsaWRlc1Blckdyb3VwO1xuICAgIGlmIChtID4gaS5sb25nU3dpcGVzTXMpIHtcbiAgICAgIGlmICghaS5sb25nU3dpcGVzKSByZXR1cm4gdm9pZCB0LnNsaWRlVG8odC5hY3RpdmVJbmRleCk7XG4gICAgICBcIm5leHRcIiA9PT0gdC5zd2lwZURpcmVjdGlvbiAmJiAoYiA+PSBpLmxvbmdTd2lwZXNSYXRpbyA/IHQuc2xpZGVUbyhpLnJld2luZCAmJiB0LmlzRW5kID8gdiA6IGYgKyB5KSA6IHQuc2xpZGVUbyhmKSksIFwicHJldlwiID09PSB0LnN3aXBlRGlyZWN0aW9uICYmIChiID4gMSAtIGkubG9uZ1N3aXBlc1JhdGlvID8gdC5zbGlkZVRvKGYgKyB5KSA6IG51bGwgIT09IHcgJiYgYiA8IDAgJiYgTWF0aC5hYnMoYikgPiBpLmxvbmdTd2lwZXNSYXRpbyA/IHQuc2xpZGVUbyh3KSA6IHQuc2xpZGVUbyhmKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghaS5zaG9ydFN3aXBlcykgcmV0dXJuIHZvaWQgdC5zbGlkZVRvKHQuYWN0aXZlSW5kZXgpO1xuICAgICAgdC5uYXZpZ2F0aW9uICYmIChwLnRhcmdldCA9PT0gdC5uYXZpZ2F0aW9uLm5leHRFbCB8fCBwLnRhcmdldCA9PT0gdC5uYXZpZ2F0aW9uLnByZXZFbCkgPyBwLnRhcmdldCA9PT0gdC5uYXZpZ2F0aW9uLm5leHRFbCA/IHQuc2xpZGVUbyhmICsgeSkgOiB0LnNsaWRlVG8oZikgOiAoXCJuZXh0XCIgPT09IHQuc3dpcGVEaXJlY3Rpb24gJiYgdC5zbGlkZVRvKG51bGwgIT09IHYgPyB2IDogZiArIHkpLCBcInByZXZcIiA9PT0gdC5zd2lwZURpcmVjdGlvbiAmJiB0LnNsaWRlVG8obnVsbCAhPT0gdyA/IHcgOiBmKSk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIE4oKSB7XG4gICAgdmFyIGUgPSB0aGlzLFxuICAgICAgdCA9IGUucGFyYW1zLFxuICAgICAgcyA9IGUuZWw7XG4gICAgaWYgKHMgJiYgMCA9PT0gcy5vZmZzZXRXaWR0aCkgcmV0dXJuO1xuICAgIHQuYnJlYWtwb2ludHMgJiYgZS5zZXRCcmVha3BvaW50KCk7XG4gICAgdmFyIGEgPSBlLmFsbG93U2xpZGVOZXh0LFxuICAgICAgaSA9IGUuYWxsb3dTbGlkZVByZXYsXG4gICAgICByID0gZS5zbmFwR3JpZCxcbiAgICAgIG4gPSBlLnZpcnR1YWwgJiYgZS5wYXJhbXMudmlydHVhbC5lbmFibGVkO1xuICAgIGUuYWxsb3dTbGlkZU5leHQgPSAhMCwgZS5hbGxvd1NsaWRlUHJldiA9ICEwLCBlLnVwZGF0ZVNpemUoKSwgZS51cGRhdGVTbGlkZXMoKSwgZS51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgdmFyIGwgPSBuICYmIHQubG9vcDtcbiAgICAhKFwiYXV0b1wiID09PSB0LnNsaWRlc1BlclZpZXcgfHwgdC5zbGlkZXNQZXJWaWV3ID4gMSkgfHwgIWUuaXNFbmQgfHwgZS5pc0JlZ2lubmluZyB8fCBlLnBhcmFtcy5jZW50ZXJlZFNsaWRlcyB8fCBsID8gZS5wYXJhbXMubG9vcCAmJiAhbiA/IGUuc2xpZGVUb0xvb3AoZS5yZWFsSW5kZXgsIDAsICExLCAhMCkgOiBlLnNsaWRlVG8oZS5hY3RpdmVJbmRleCwgMCwgITEsICEwKSA6IGUuc2xpZGVUbyhlLnNsaWRlcy5sZW5ndGggLSAxLCAwLCAhMSwgITApLCBlLmF1dG9wbGF5ICYmIGUuYXV0b3BsYXkucnVubmluZyAmJiBlLmF1dG9wbGF5LnBhdXNlZCAmJiAoY2xlYXJUaW1lb3V0KGUuYXV0b3BsYXkucmVzaXplVGltZW91dCksIGUuYXV0b3BsYXkucmVzaXplVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgZS5hdXRvcGxheSAmJiBlLmF1dG9wbGF5LnJ1bm5pbmcgJiYgZS5hdXRvcGxheS5wYXVzZWQgJiYgZS5hdXRvcGxheS5yZXN1bWUoKTtcbiAgICB9LCA1MDApKSwgZS5hbGxvd1NsaWRlUHJldiA9IGksIGUuYWxsb3dTbGlkZU5leHQgPSBhLCBlLnBhcmFtcy53YXRjaE92ZXJmbG93ICYmIHIgIT09IGUuc25hcEdyaWQgJiYgZS5jaGVja092ZXJmbG93KCk7XG4gIH1cbiAgZnVuY3Rpb24gcShlKSB7XG4gICAgdmFyIHQgPSB0aGlzO1xuICAgIHQuZW5hYmxlZCAmJiAodC5hbGxvd0NsaWNrIHx8ICh0LnBhcmFtcy5wcmV2ZW50Q2xpY2tzICYmIGUucHJldmVudERlZmF1bHQoKSwgdC5wYXJhbXMucHJldmVudENsaWNrc1Byb3BhZ2F0aW9uICYmIHQuYW5pbWF0aW5nICYmIChlLnN0b3BQcm9wYWdhdGlvbigpLCBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpKSkpO1xuICB9XG4gIGZ1bmN0aW9uIFIoKSB7XG4gICAgdmFyIGUgPSB0aGlzLFxuICAgICAgdCA9IGUud3JhcHBlckVsLFxuICAgICAgcyA9IGUucnRsVHJhbnNsYXRlLFxuICAgICAgYSA9IGUuZW5hYmxlZDtcbiAgICBpZiAoIWEpIHJldHVybjtcbiAgICB2YXIgaTtcbiAgICBlLnByZXZpb3VzVHJhbnNsYXRlID0gZS50cmFuc2xhdGUsIGUuaXNIb3Jpem9udGFsKCkgPyBlLnRyYW5zbGF0ZSA9IC10LnNjcm9sbExlZnQgOiBlLnRyYW5zbGF0ZSA9IC10LnNjcm9sbFRvcCwgMCA9PT0gZS50cmFuc2xhdGUgJiYgKGUudHJhbnNsYXRlID0gMCksIGUudXBkYXRlQWN0aXZlSW5kZXgoKSwgZS51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgdmFyIHIgPSBlLm1heFRyYW5zbGF0ZSgpIC0gZS5taW5UcmFuc2xhdGUoKTtcbiAgICBpID0gMCA9PT0gciA/IDAgOiAoZS50cmFuc2xhdGUgLSBlLm1pblRyYW5zbGF0ZSgpKSAvIHIsIGkgIT09IGUucHJvZ3Jlc3MgJiYgZS51cGRhdGVQcm9ncmVzcyhzID8gLWUudHJhbnNsYXRlIDogZS50cmFuc2xhdGUpLCBlLmVtaXQoXCJzZXRUcmFuc2xhdGVcIiwgZS50cmFuc2xhdGUsICExKTtcbiAgfVxuICBmdW5jdGlvbiBGKGUpIHtcbiAgICB2YXIgdCA9IHRoaXM7XG4gICAgQSh0LCBlLnRhcmdldCksIHQucGFyYW1zLmNzc01vZGUgfHwgXCJhdXRvXCIgIT09IHQucGFyYW1zLnNsaWRlc1BlclZpZXcgJiYgIXQucGFyYW1zLmF1dG9IZWlnaHQgfHwgdC51cGRhdGUoKTtcbiAgfVxuICB2YXIgXyA9ICExO1xuICBmdW5jdGlvbiBWKCkge31cbiAgdmFyIGogPSBmdW5jdGlvbiBqKGUsIHQpIHtcbiAgICB2YXIgcyA9IGEoKSxcbiAgICAgIGkgPSBlLnBhcmFtcyxcbiAgICAgIHIgPSBlLmVsLFxuICAgICAgbiA9IGUud3JhcHBlckVsLFxuICAgICAgbCA9IGUuZGV2aWNlLFxuICAgICAgbyA9ICEhaS5uZXN0ZWQsXG4gICAgICBkID0gXCJvblwiID09PSB0ID8gXCJhZGRFdmVudExpc3RlbmVyXCIgOiBcInJlbW92ZUV2ZW50TGlzdGVuZXJcIixcbiAgICAgIGMgPSB0O1xuICAgIHJbZF0oXCJwb2ludGVyZG93blwiLCBlLm9uVG91Y2hTdGFydCwge1xuICAgICAgcGFzc2l2ZTogITFcbiAgICB9KSwgc1tkXShcInBvaW50ZXJtb3ZlXCIsIGUub25Ub3VjaE1vdmUsIHtcbiAgICAgIHBhc3NpdmU6ICExLFxuICAgICAgY2FwdHVyZTogb1xuICAgIH0pLCBzW2RdKFwicG9pbnRlcnVwXCIsIGUub25Ub3VjaEVuZCwge1xuICAgICAgcGFzc2l2ZTogITBcbiAgICB9KSwgc1tkXShcInBvaW50ZXJjYW5jZWxcIiwgZS5vblRvdWNoRW5kLCB7XG4gICAgICBwYXNzaXZlOiAhMFxuICAgIH0pLCBzW2RdKFwicG9pbnRlcm91dFwiLCBlLm9uVG91Y2hFbmQsIHtcbiAgICAgIHBhc3NpdmU6ICEwXG4gICAgfSksIHNbZF0oXCJwb2ludGVybGVhdmVcIiwgZS5vblRvdWNoRW5kLCB7XG4gICAgICBwYXNzaXZlOiAhMFxuICAgIH0pLCAoaS5wcmV2ZW50Q2xpY2tzIHx8IGkucHJldmVudENsaWNrc1Byb3BhZ2F0aW9uKSAmJiByW2RdKFwiY2xpY2tcIiwgZS5vbkNsaWNrLCAhMCksIGkuY3NzTW9kZSAmJiBuW2RdKFwic2Nyb2xsXCIsIGUub25TY3JvbGwpLCBpLnVwZGF0ZU9uV2luZG93UmVzaXplID8gZVtjXShsLmlvcyB8fCBsLmFuZHJvaWQgPyBcInJlc2l6ZSBvcmllbnRhdGlvbmNoYW5nZSBvYnNlcnZlclVwZGF0ZVwiIDogXCJyZXNpemUgb2JzZXJ2ZXJVcGRhdGVcIiwgTiwgITApIDogZVtjXShcIm9ic2VydmVyVXBkYXRlXCIsIE4sICEwKSwgcltkXShcImxvYWRcIiwgZS5vbkxvYWQsIHtcbiAgICAgIGNhcHR1cmU6ICEwXG4gICAgfSk7XG4gIH07XG4gIHZhciBXID0gZnVuY3Rpb24gVyhlLCB0KSB7XG4gICAgcmV0dXJuIGUuZ3JpZCAmJiB0LmdyaWQgJiYgdC5ncmlkLnJvd3MgPiAxO1xuICB9O1xuICB2YXIgVSA9IHtcbiAgICBpbml0OiAhMCxcbiAgICBkaXJlY3Rpb246IFwiaG9yaXpvbnRhbFwiLFxuICAgIG9uZVdheU1vdmVtZW50OiAhMSxcbiAgICB0b3VjaEV2ZW50c1RhcmdldDogXCJ3cmFwcGVyXCIsXG4gICAgaW5pdGlhbFNsaWRlOiAwLFxuICAgIHNwZWVkOiAzMDAsXG4gICAgY3NzTW9kZTogITEsXG4gICAgdXBkYXRlT25XaW5kb3dSZXNpemU6ICEwLFxuICAgIHJlc2l6ZU9ic2VydmVyOiAhMCxcbiAgICBuZXN0ZWQ6ICExLFxuICAgIGNyZWF0ZUVsZW1lbnRzOiAhMSxcbiAgICBlbmFibGVkOiAhMCxcbiAgICBmb2N1c2FibGVFbGVtZW50czogXCJpbnB1dCwgc2VsZWN0LCBvcHRpb24sIHRleHRhcmVhLCBidXR0b24sIHZpZGVvLCBsYWJlbFwiLFxuICAgIHdpZHRoOiBudWxsLFxuICAgIGhlaWdodDogbnVsbCxcbiAgICBwcmV2ZW50SW50ZXJhY3Rpb25PblRyYW5zaXRpb246ICExLFxuICAgIHVzZXJBZ2VudDogbnVsbCxcbiAgICB1cmw6IG51bGwsXG4gICAgZWRnZVN3aXBlRGV0ZWN0aW9uOiAhMSxcbiAgICBlZGdlU3dpcGVUaHJlc2hvbGQ6IDIwLFxuICAgIGF1dG9IZWlnaHQ6ICExLFxuICAgIHNldFdyYXBwZXJTaXplOiAhMSxcbiAgICB2aXJ0dWFsVHJhbnNsYXRlOiAhMSxcbiAgICBlZmZlY3Q6IFwic2xpZGVcIixcbiAgICBicmVha3BvaW50czogdm9pZCAwLFxuICAgIGJyZWFrcG9pbnRzQmFzZTogXCJ3aW5kb3dcIixcbiAgICBzcGFjZUJldHdlZW46IDAsXG4gICAgc2xpZGVzUGVyVmlldzogMSxcbiAgICBzbGlkZXNQZXJHcm91cDogMSxcbiAgICBzbGlkZXNQZXJHcm91cFNraXA6IDAsXG4gICAgc2xpZGVzUGVyR3JvdXBBdXRvOiAhMSxcbiAgICBjZW50ZXJlZFNsaWRlczogITEsXG4gICAgY2VudGVyZWRTbGlkZXNCb3VuZHM6ICExLFxuICAgIHNsaWRlc09mZnNldEJlZm9yZTogMCxcbiAgICBzbGlkZXNPZmZzZXRBZnRlcjogMCxcbiAgICBub3JtYWxpemVTbGlkZUluZGV4OiAhMCxcbiAgICBjZW50ZXJJbnN1ZmZpY2llbnRTbGlkZXM6ICExLFxuICAgIHdhdGNoT3ZlcmZsb3c6ICEwLFxuICAgIHJvdW5kTGVuZ3RoczogITEsXG4gICAgdG91Y2hSYXRpbzogMSxcbiAgICB0b3VjaEFuZ2xlOiA0NSxcbiAgICBzaW11bGF0ZVRvdWNoOiAhMCxcbiAgICBzaG9ydFN3aXBlczogITAsXG4gICAgbG9uZ1N3aXBlczogITAsXG4gICAgbG9uZ1N3aXBlc1JhdGlvOiAuNSxcbiAgICBsb25nU3dpcGVzTXM6IDMwMCxcbiAgICBmb2xsb3dGaW5nZXI6ICEwLFxuICAgIGFsbG93VG91Y2hNb3ZlOiAhMCxcbiAgICB0aHJlc2hvbGQ6IDUsXG4gICAgdG91Y2hNb3ZlU3RvcFByb3BhZ2F0aW9uOiAhMSxcbiAgICB0b3VjaFN0YXJ0UHJldmVudERlZmF1bHQ6ICEwLFxuICAgIHRvdWNoU3RhcnRGb3JjZVByZXZlbnREZWZhdWx0OiAhMSxcbiAgICB0b3VjaFJlbGVhc2VPbkVkZ2VzOiAhMSxcbiAgICB1bmlxdWVOYXZFbGVtZW50czogITAsXG4gICAgcmVzaXN0YW5jZTogITAsXG4gICAgcmVzaXN0YW5jZVJhdGlvOiAuODUsXG4gICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogITEsXG4gICAgZ3JhYkN1cnNvcjogITEsXG4gICAgcHJldmVudENsaWNrczogITAsXG4gICAgcHJldmVudENsaWNrc1Byb3BhZ2F0aW9uOiAhMCxcbiAgICBzbGlkZVRvQ2xpY2tlZFNsaWRlOiAhMSxcbiAgICBsb29wOiAhMSxcbiAgICBsb29wZWRTbGlkZXM6IG51bGwsXG4gICAgbG9vcFByZXZlbnRzU2xpZGluZzogITAsXG4gICAgcmV3aW5kOiAhMSxcbiAgICBhbGxvd1NsaWRlUHJldjogITAsXG4gICAgYWxsb3dTbGlkZU5leHQ6ICEwLFxuICAgIHN3aXBlSGFuZGxlcjogbnVsbCxcbiAgICBub1N3aXBpbmc6ICEwLFxuICAgIG5vU3dpcGluZ0NsYXNzOiBcInN3aXBlci1uby1zd2lwaW5nXCIsXG4gICAgbm9Td2lwaW5nU2VsZWN0b3I6IG51bGwsXG4gICAgcGFzc2l2ZUxpc3RlbmVyczogITAsXG4gICAgbWF4QmFja2ZhY2VIaWRkZW5TbGlkZXM6IDEwLFxuICAgIGNvbnRhaW5lck1vZGlmaWVyQ2xhc3M6IFwic3dpcGVyLVwiLFxuICAgIHNsaWRlQ2xhc3M6IFwic3dpcGVyLXNsaWRlXCIsXG4gICAgc2xpZGVBY3RpdmVDbGFzczogXCJzd2lwZXItc2xpZGUtYWN0aXZlXCIsXG4gICAgc2xpZGVWaXNpYmxlQ2xhc3M6IFwic3dpcGVyLXNsaWRlLXZpc2libGVcIixcbiAgICBzbGlkZU5leHRDbGFzczogXCJzd2lwZXItc2xpZGUtbmV4dFwiLFxuICAgIHNsaWRlUHJldkNsYXNzOiBcInN3aXBlci1zbGlkZS1wcmV2XCIsXG4gICAgd3JhcHBlckNsYXNzOiBcInN3aXBlci13cmFwcGVyXCIsXG4gICAgbGF6eVByZWxvYWRlckNsYXNzOiBcInN3aXBlci1sYXp5LXByZWxvYWRlclwiLFxuICAgIGxhenlQcmVsb2FkUHJldk5leHQ6IDAsXG4gICAgcnVuQ2FsbGJhY2tzT25Jbml0OiAhMCxcbiAgICBfZW1pdENsYXNzZXM6ICExXG4gIH07XG4gIGZ1bmN0aW9uIEsoZSwgdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocykge1xuICAgICAgdm9pZCAwID09PSBzICYmIChzID0ge30pO1xuICAgICAgdmFyIGEgPSBPYmplY3Qua2V5cyhzKVswXSxcbiAgICAgICAgaSA9IHNbYV07XG4gICAgICBcIm9iamVjdFwiID09IF90eXBlb2YoaSkgJiYgbnVsbCAhPT0gaSA/IChbXCJuYXZpZ2F0aW9uXCIsIFwicGFnaW5hdGlvblwiLCBcInNjcm9sbGJhclwiXS5pbmRleE9mKGEpID49IDAgJiYgITAgPT09IGVbYV0gJiYgKGVbYV0gPSB7XG4gICAgICAgIGF1dG86ICEwXG4gICAgICB9KSwgYSBpbiBlICYmIFwiZW5hYmxlZFwiIGluIGkgPyAoITAgPT09IGVbYV0gJiYgKGVbYV0gPSB7XG4gICAgICAgIGVuYWJsZWQ6ICEwXG4gICAgICB9KSwgXCJvYmplY3RcIiAhPSBfdHlwZW9mKGVbYV0pIHx8IFwiZW5hYmxlZFwiIGluIGVbYV0gfHwgKGVbYV0uZW5hYmxlZCA9ICEwKSwgZVthXSB8fCAoZVthXSA9IHtcbiAgICAgICAgZW5hYmxlZDogITFcbiAgICAgIH0pLCBwKHQsIHMpKSA6IHAodCwgcykpIDogcCh0LCBzKTtcbiAgICB9O1xuICB9XG4gIHZhciBaID0ge1xuICAgICAgZXZlbnRzRW1pdHRlcjogeixcbiAgICAgIHVwZGF0ZTogayxcbiAgICAgIHRyYW5zbGF0ZTogTyxcbiAgICAgIHRyYW5zaXRpb246IHtcbiAgICAgICAgc2V0VHJhbnNpdGlvbjogZnVuY3Rpb24gc2V0VHJhbnNpdGlvbihlLCB0KSB7XG4gICAgICAgICAgdmFyIHMgPSB0aGlzO1xuICAgICAgICAgIHMucGFyYW1zLmNzc01vZGUgfHwgKHMud3JhcHBlckVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiXCIuY29uY2F0KGUsIFwibXNcIikpLCBzLmVtaXQoXCJzZXRUcmFuc2l0aW9uXCIsIGUsIHQpO1xuICAgICAgICB9LFxuICAgICAgICB0cmFuc2l0aW9uU3RhcnQ6IGZ1bmN0aW9uIHRyYW5zaXRpb25TdGFydChlLCB0KSB7XG4gICAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gITApO1xuICAgICAgICAgIHZhciBzID0gdGhpcyxcbiAgICAgICAgICAgIGEgPSBzLnBhcmFtcztcbiAgICAgICAgICBhLmNzc01vZGUgfHwgKGEuYXV0b0hlaWdodCAmJiBzLnVwZGF0ZUF1dG9IZWlnaHQoKSwgRCh7XG4gICAgICAgICAgICBzd2lwZXI6IHMsXG4gICAgICAgICAgICBydW5DYWxsYmFja3M6IGUsXG4gICAgICAgICAgICBkaXJlY3Rpb246IHQsXG4gICAgICAgICAgICBzdGVwOiBcIlN0YXJ0XCJcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0sXG4gICAgICAgIHRyYW5zaXRpb25FbmQ6IGZ1bmN0aW9uIHRyYW5zaXRpb25FbmQoZSwgdCkge1xuICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9ICEwKTtcbiAgICAgICAgICB2YXIgcyA9IHRoaXMsXG4gICAgICAgICAgICBhID0gcy5wYXJhbXM7XG4gICAgICAgICAgcy5hbmltYXRpbmcgPSAhMSwgYS5jc3NNb2RlIHx8IChzLnNldFRyYW5zaXRpb24oMCksIEQoe1xuICAgICAgICAgICAgc3dpcGVyOiBzLFxuICAgICAgICAgICAgcnVuQ2FsbGJhY2tzOiBlLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiB0LFxuICAgICAgICAgICAgc3RlcDogXCJFbmRcIlxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNsaWRlOiBHLFxuICAgICAgbG9vcDogSCxcbiAgICAgIGdyYWJDdXJzb3I6IHtcbiAgICAgICAgc2V0R3JhYkN1cnNvcjogZnVuY3Rpb24gc2V0R3JhYkN1cnNvcihlKSB7XG4gICAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICAgIGlmICghdC5wYXJhbXMuc2ltdWxhdGVUb3VjaCB8fCB0LnBhcmFtcy53YXRjaE92ZXJmbG93ICYmIHQuaXNMb2NrZWQgfHwgdC5wYXJhbXMuY3NzTW9kZSkgcmV0dXJuO1xuICAgICAgICAgIHZhciBzID0gXCJjb250YWluZXJcIiA9PT0gdC5wYXJhbXMudG91Y2hFdmVudHNUYXJnZXQgPyB0LmVsIDogdC53cmFwcGVyRWw7XG4gICAgICAgICAgdC5pc0VsZW1lbnQgJiYgKHQuX19wcmV2ZW50T2JzZXJ2ZXJfXyA9ICEwKSwgcy5zdHlsZS5jdXJzb3IgPSBcIm1vdmVcIiwgcy5zdHlsZS5jdXJzb3IgPSBlID8gXCJncmFiYmluZ1wiIDogXCJncmFiXCIsIHQuaXNFbGVtZW50ICYmIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0Ll9fcHJldmVudE9ic2VydmVyX18gPSAhMTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5zZXRHcmFiQ3Vyc29yOiBmdW5jdGlvbiB1bnNldEdyYWJDdXJzb3IoKSB7XG4gICAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICAgIGUucGFyYW1zLndhdGNoT3ZlcmZsb3cgJiYgZS5pc0xvY2tlZCB8fCBlLnBhcmFtcy5jc3NNb2RlIHx8IChlLmlzRWxlbWVudCAmJiAoZS5fX3ByZXZlbnRPYnNlcnZlcl9fID0gITApLCBlW1wiY29udGFpbmVyXCIgPT09IGUucGFyYW1zLnRvdWNoRXZlbnRzVGFyZ2V0ID8gXCJlbFwiIDogXCJ3cmFwcGVyRWxcIl0uc3R5bGUuY3Vyc29yID0gXCJcIiwgZS5pc0VsZW1lbnQgJiYgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGUuX19wcmV2ZW50T2JzZXJ2ZXJfXyA9ICExO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGV2ZW50czoge1xuICAgICAgICBhdHRhY2hFdmVudHM6IGZ1bmN0aW9uIGF0dGFjaEV2ZW50cygpIHtcbiAgICAgICAgICB2YXIgZSA9IHRoaXMsXG4gICAgICAgICAgICB0ID0gYSgpLFxuICAgICAgICAgICAgcyA9IGUucGFyYW1zO1xuICAgICAgICAgIGUub25Ub3VjaFN0YXJ0ID0gWC5iaW5kKGUpLCBlLm9uVG91Y2hNb3ZlID0gWS5iaW5kKGUpLCBlLm9uVG91Y2hFbmQgPSBCLmJpbmQoZSksIHMuY3NzTW9kZSAmJiAoZS5vblNjcm9sbCA9IFIuYmluZChlKSksIGUub25DbGljayA9IHEuYmluZChlKSwgZS5vbkxvYWQgPSBGLmJpbmQoZSksIF8gfHwgKHQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgViksIF8gPSAhMCksIGooZSwgXCJvblwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGV0YWNoRXZlbnRzOiBmdW5jdGlvbiBkZXRhY2hFdmVudHMoKSB7XG4gICAgICAgICAgaih0aGlzLCBcIm9mZlwiKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGJyZWFrcG9pbnRzOiB7XG4gICAgICAgIHNldEJyZWFrcG9pbnQ6IGZ1bmN0aW9uIHNldEJyZWFrcG9pbnQoKSB7XG4gICAgICAgICAgdmFyIGUgPSB0aGlzLFxuICAgICAgICAgICAgdCA9IGUucmVhbEluZGV4LFxuICAgICAgICAgICAgcyA9IGUuaW5pdGlhbGl6ZWQsXG4gICAgICAgICAgICBhID0gZS5wYXJhbXMsXG4gICAgICAgICAgICBpID0gZS5lbCxcbiAgICAgICAgICAgIHIgPSBhLmJyZWFrcG9pbnRzO1xuICAgICAgICAgIGlmICghciB8fCByICYmIDAgPT09IE9iamVjdC5rZXlzKHIpLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICAgIHZhciBuID0gZS5nZXRCcmVha3BvaW50KHIsIGUucGFyYW1zLmJyZWFrcG9pbnRzQmFzZSwgZS5lbCk7XG4gICAgICAgICAgaWYgKCFuIHx8IGUuY3VycmVudEJyZWFrcG9pbnQgPT09IG4pIHJldHVybjtcbiAgICAgICAgICB2YXIgbCA9IChuIGluIHIgPyByW25dIDogdm9pZCAwKSB8fCBlLm9yaWdpbmFsUGFyYW1zLFxuICAgICAgICAgICAgbyA9IFcoZSwgYSksXG4gICAgICAgICAgICBkID0gVyhlLCBsKSxcbiAgICAgICAgICAgIGMgPSBhLmVuYWJsZWQ7XG4gICAgICAgICAgbyAmJiAhZCA/IChpLmNsYXNzTGlzdC5yZW1vdmUoXCJcIi5jb25jYXQoYS5jb250YWluZXJNb2RpZmllckNsYXNzLCBcImdyaWRcIiksIFwiXCIuY29uY2F0KGEuY29udGFpbmVyTW9kaWZpZXJDbGFzcywgXCJncmlkLWNvbHVtblwiKSksIGUuZW1pdENvbnRhaW5lckNsYXNzZXMoKSkgOiAhbyAmJiBkICYmIChpLmNsYXNzTGlzdC5hZGQoXCJcIi5jb25jYXQoYS5jb250YWluZXJNb2RpZmllckNsYXNzLCBcImdyaWRcIikpLCAobC5ncmlkLmZpbGwgJiYgXCJjb2x1bW5cIiA9PT0gbC5ncmlkLmZpbGwgfHwgIWwuZ3JpZC5maWxsICYmIFwiY29sdW1uXCIgPT09IGEuZ3JpZC5maWxsKSAmJiBpLmNsYXNzTGlzdC5hZGQoXCJcIi5jb25jYXQoYS5jb250YWluZXJNb2RpZmllckNsYXNzLCBcImdyaWQtY29sdW1uXCIpKSwgZS5lbWl0Q29udGFpbmVyQ2xhc3NlcygpKSwgW1wibmF2aWdhdGlvblwiLCBcInBhZ2luYXRpb25cIiwgXCJzY3JvbGxiYXJcIl0uZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbFt0XSkgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIHMgPSBhW3RdICYmIGFbdF0uZW5hYmxlZCxcbiAgICAgICAgICAgICAgaSA9IGxbdF0gJiYgbFt0XS5lbmFibGVkO1xuICAgICAgICAgICAgcyAmJiAhaSAmJiBlW3RdLmRpc2FibGUoKSwgIXMgJiYgaSAmJiBlW3RdLmVuYWJsZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciB1ID0gbC5kaXJlY3Rpb24gJiYgbC5kaXJlY3Rpb24gIT09IGEuZGlyZWN0aW9uLFxuICAgICAgICAgICAgbSA9IGEubG9vcCAmJiAobC5zbGlkZXNQZXJWaWV3ICE9PSBhLnNsaWRlc1BlclZpZXcgfHwgdSk7XG4gICAgICAgICAgdSAmJiBzICYmIGUuY2hhbmdlRGlyZWN0aW9uKCksIHAoZS5wYXJhbXMsIGwpO1xuICAgICAgICAgIHZhciBoID0gZS5wYXJhbXMuZW5hYmxlZDtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGUsIHtcbiAgICAgICAgICAgIGFsbG93VG91Y2hNb3ZlOiBlLnBhcmFtcy5hbGxvd1RvdWNoTW92ZSxcbiAgICAgICAgICAgIGFsbG93U2xpZGVOZXh0OiBlLnBhcmFtcy5hbGxvd1NsaWRlTmV4dCxcbiAgICAgICAgICAgIGFsbG93U2xpZGVQcmV2OiBlLnBhcmFtcy5hbGxvd1NsaWRlUHJldlxuICAgICAgICAgIH0pLCBjICYmICFoID8gZS5kaXNhYmxlKCkgOiAhYyAmJiBoICYmIGUuZW5hYmxlKCksIGUuY3VycmVudEJyZWFrcG9pbnQgPSBuLCBlLmVtaXQoXCJfYmVmb3JlQnJlYWtwb2ludFwiLCBsKSwgbSAmJiBzICYmIChlLmxvb3BEZXN0cm95KCksIGUubG9vcENyZWF0ZSh0KSwgZS51cGRhdGVTbGlkZXMoKSksIGUuZW1pdChcImJyZWFrcG9pbnRcIiwgbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldEJyZWFrcG9pbnQ6IGZ1bmN0aW9uIGdldEJyZWFrcG9pbnQoZSwgdCwgcykge1xuICAgICAgICAgIGlmICh2b2lkIDAgPT09IHQgJiYgKHQgPSBcIndpbmRvd1wiKSwgIWUgfHwgXCJjb250YWluZXJcIiA9PT0gdCAmJiAhcykgcmV0dXJuO1xuICAgICAgICAgIHZhciBhID0gITE7XG4gICAgICAgICAgdmFyIGkgPSByKCksXG4gICAgICAgICAgICBuID0gXCJ3aW5kb3dcIiA9PT0gdCA/IGkuaW5uZXJIZWlnaHQgOiBzLmNsaWVudEhlaWdodCxcbiAgICAgICAgICAgIGwgPSBPYmplY3Qua2V5cyhlKS5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgMCA9PT0gZS5pbmRleE9mKFwiQFwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBfdDE5ID0gcGFyc2VGbG9hdChlLnN1YnN0cigxKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBuICogX3QxOSxcbiAgICAgICAgICAgICAgICAgIHBvaW50OiBlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBlLFxuICAgICAgICAgICAgICAgIHBvaW50OiBlXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBsLnNvcnQoZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChlLnZhbHVlLCAxMCkgLSBwYXJzZUludCh0LnZhbHVlLCAxMCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZm9yICh2YXIgX2UyOCA9IDA7IF9lMjggPCBsLmxlbmd0aDsgX2UyOCArPSAxKSB7XG4gICAgICAgICAgICB2YXIgX2wkX2UgPSBsW19lMjhdLFxuICAgICAgICAgICAgICBfcjYgPSBfbCRfZS5wb2ludCxcbiAgICAgICAgICAgICAgX240ID0gX2wkX2UudmFsdWU7XG4gICAgICAgICAgICBcIndpbmRvd1wiID09PSB0ID8gaS5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogXCIuY29uY2F0KF9uNCwgXCJweClcIikpLm1hdGNoZXMgJiYgKGEgPSBfcjYpIDogX240IDw9IHMuY2xpZW50V2lkdGggJiYgKGEgPSBfcjYpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gYSB8fCBcIm1heFwiO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2hlY2tPdmVyZmxvdzoge1xuICAgICAgICBjaGVja092ZXJmbG93OiBmdW5jdGlvbiBjaGVja092ZXJmbG93KCkge1xuICAgICAgICAgIHZhciBlID0gdGhpcyxcbiAgICAgICAgICAgIHQgPSBlLmlzTG9ja2VkLFxuICAgICAgICAgICAgcyA9IGUucGFyYW1zLFxuICAgICAgICAgICAgYSA9IHMuc2xpZGVzT2Zmc2V0QmVmb3JlO1xuICAgICAgICAgIGlmIChhKSB7XG4gICAgICAgICAgICB2YXIgX3QyMCA9IGUuc2xpZGVzLmxlbmd0aCAtIDEsXG4gICAgICAgICAgICAgIF9zMTcgPSBlLnNsaWRlc0dyaWRbX3QyMF0gKyBlLnNsaWRlc1NpemVzR3JpZFtfdDIwXSArIDIgKiBhO1xuICAgICAgICAgICAgZS5pc0xvY2tlZCA9IGUuc2l6ZSA+IF9zMTc7XG4gICAgICAgICAgfSBlbHNlIGUuaXNMb2NrZWQgPSAxID09PSBlLnNuYXBHcmlkLmxlbmd0aDtcbiAgICAgICAgICAhMCA9PT0gcy5hbGxvd1NsaWRlTmV4dCAmJiAoZS5hbGxvd1NsaWRlTmV4dCA9ICFlLmlzTG9ja2VkKSwgITAgPT09IHMuYWxsb3dTbGlkZVByZXYgJiYgKGUuYWxsb3dTbGlkZVByZXYgPSAhZS5pc0xvY2tlZCksIHQgJiYgdCAhPT0gZS5pc0xvY2tlZCAmJiAoZS5pc0VuZCA9ICExKSwgdCAhPT0gZS5pc0xvY2tlZCAmJiBlLmVtaXQoZS5pc0xvY2tlZCA/IFwibG9ja1wiIDogXCJ1bmxvY2tcIik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjbGFzc2VzOiB7XG4gICAgICAgIGFkZENsYXNzZXM6IGZ1bmN0aW9uIGFkZENsYXNzZXMoKSB7XG4gICAgICAgICAgdmFyIF9pJGNsYXNzTGlzdDtcbiAgICAgICAgICB2YXIgZSA9IHRoaXMsXG4gICAgICAgICAgICB0ID0gZS5jbGFzc05hbWVzLFxuICAgICAgICAgICAgcyA9IGUucGFyYW1zLFxuICAgICAgICAgICAgYSA9IGUucnRsLFxuICAgICAgICAgICAgaSA9IGUuZWwsXG4gICAgICAgICAgICByID0gZS5kZXZpY2UsXG4gICAgICAgICAgICBuID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgdmFyIHMgPSBbXTtcbiAgICAgICAgICAgICAgcmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIFwib2JqZWN0XCIgPT0gX3R5cGVvZihlKSA/IE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgICAgIGVbYV0gJiYgcy5wdXNoKHQgKyBhKTtcbiAgICAgICAgICAgICAgICB9KSA6IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgcy5wdXNoKHQgKyBlKTtcbiAgICAgICAgICAgICAgfSksIHM7XG4gICAgICAgICAgICB9KFtcImluaXRpYWxpemVkXCIsIHMuZGlyZWN0aW9uLCB7XG4gICAgICAgICAgICAgIFwiZnJlZS1tb2RlXCI6IGUucGFyYW1zLmZyZWVNb2RlICYmIHMuZnJlZU1vZGUuZW5hYmxlZFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBhdXRvaGVpZ2h0OiBzLmF1dG9IZWlnaHRcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgcnRsOiBhXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIGdyaWQ6IHMuZ3JpZCAmJiBzLmdyaWQucm93cyA+IDFcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgXCJncmlkLWNvbHVtblwiOiBzLmdyaWQgJiYgcy5ncmlkLnJvd3MgPiAxICYmIFwiY29sdW1uXCIgPT09IHMuZ3JpZC5maWxsXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIGFuZHJvaWQ6IHIuYW5kcm9pZFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBpb3M6IHIuaW9zXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIFwiY3NzLW1vZGVcIjogcy5jc3NNb2RlXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIGNlbnRlcmVkOiBzLmNzc01vZGUgJiYgcy5jZW50ZXJlZFNsaWRlc1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBcIndhdGNoLXByb2dyZXNzXCI6IHMud2F0Y2hTbGlkZXNQcm9ncmVzc1xuICAgICAgICAgICAgfV0sIHMuY29udGFpbmVyTW9kaWZpZXJDbGFzcyk7XG4gICAgICAgICAgdC5wdXNoLmFwcGx5KHQsIF90b0NvbnN1bWFibGVBcnJheShuKSksIChfaSRjbGFzc0xpc3QgPSBpLmNsYXNzTGlzdCkuYWRkLmFwcGx5KF9pJGNsYXNzTGlzdCwgX3RvQ29uc3VtYWJsZUFycmF5KHQpKSwgZS5lbWl0Q29udGFpbmVyQ2xhc3NlcygpO1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmVDbGFzc2VzOiBmdW5jdGlvbiByZW1vdmVDbGFzc2VzKCkge1xuICAgICAgICAgIHZhciBfZSRjbGFzc0xpc3Q7XG4gICAgICAgICAgdmFyIGUgPSB0aGlzLmVsLFxuICAgICAgICAgICAgdCA9IHRoaXMuY2xhc3NOYW1lcztcbiAgICAgICAgICAoX2UkY2xhc3NMaXN0ID0gZS5jbGFzc0xpc3QpLnJlbW92ZS5hcHBseShfZSRjbGFzc0xpc3QsIF90b0NvbnN1bWFibGVBcnJheSh0KSksIHRoaXMuZW1pdENvbnRhaW5lckNsYXNzZXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgUSA9IHt9O1xuICB2YXIgSiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSigpIHtcbiAgICAgIHZhciBfaTksIF9pMTAsIF9sJG1vZHVsZXM7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSik7XG4gICAgICB2YXIgZSwgdDtcbiAgICAgIGZvciAodmFyIHMgPSBhcmd1bWVudHMubGVuZ3RoLCBpID0gbmV3IEFycmF5KHMpLCByID0gMDsgciA8IHM7IHIrKykgaVtyXSA9IGFyZ3VtZW50c1tyXTtcbiAgICAgIDEgPT09IGkubGVuZ3RoICYmIGlbMF0uY29uc3RydWN0b3IgJiYgXCJPYmplY3RcIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlbMF0pLnNsaWNlKDgsIC0xKSA/IHQgPSBpWzBdIDogKF9pOSA9IGksIF9pMTAgPSBfc2xpY2VkVG9BcnJheShfaTksIDIpLCBlID0gX2kxMFswXSwgdCA9IF9pMTBbMV0sIF9pOSksIHQgfHwgKHQgPSB7fSksIHQgPSBwKHt9LCB0KSwgZSAmJiAhdC5lbCAmJiAodC5lbCA9IGUpO1xuICAgICAgdmFyIG4gPSBhKCk7XG4gICAgICBpZiAodC5lbCAmJiBcInN0cmluZ1wiID09IHR5cGVvZiB0LmVsICYmIG4ucXVlcnlTZWxlY3RvckFsbCh0LmVsKS5sZW5ndGggPiAxKSB7XG4gICAgICAgIHZhciBfZTI5ID0gW107XG4gICAgICAgIHJldHVybiBuLnF1ZXJ5U2VsZWN0b3JBbGwodC5lbCkuZm9yRWFjaChmdW5jdGlvbiAocykge1xuICAgICAgICAgIHZhciBhID0gcCh7fSwgdCwge1xuICAgICAgICAgICAgZWw6IHNcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBfZTI5LnB1c2gobmV3IEooYSkpO1xuICAgICAgICB9KSwgX2UyOTtcbiAgICAgIH1cbiAgICAgIHZhciBsID0gdGhpcztcbiAgICAgIGwuX19zd2lwZXJfXyA9ICEwLCBsLnN1cHBvcnQgPSBDKCksIGwuZGV2aWNlID0gUCh7XG4gICAgICAgIHVzZXJBZ2VudDogdC51c2VyQWdlbnRcbiAgICAgIH0pLCBsLmJyb3dzZXIgPSBMKCksIGwuZXZlbnRzTGlzdGVuZXJzID0ge30sIGwuZXZlbnRzQW55TGlzdGVuZXJzID0gW10sIGwubW9kdWxlcyA9IF90b0NvbnN1bWFibGVBcnJheShsLl9fbW9kdWxlc19fKSwgdC5tb2R1bGVzICYmIEFycmF5LmlzQXJyYXkodC5tb2R1bGVzKSAmJiAoX2wkbW9kdWxlcyA9IGwubW9kdWxlcykucHVzaC5hcHBseShfbCRtb2R1bGVzLCBfdG9Db25zdW1hYmxlQXJyYXkodC5tb2R1bGVzKSk7XG4gICAgICB2YXIgbyA9IHt9O1xuICAgICAgbC5tb2R1bGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZSh7XG4gICAgICAgICAgcGFyYW1zOiB0LFxuICAgICAgICAgIHN3aXBlcjogbCxcbiAgICAgICAgICBleHRlbmRQYXJhbXM6IEsodCwgbyksXG4gICAgICAgICAgb246IGwub24uYmluZChsKSxcbiAgICAgICAgICBvbmNlOiBsLm9uY2UuYmluZChsKSxcbiAgICAgICAgICBvZmY6IGwub2ZmLmJpbmQobCksXG4gICAgICAgICAgZW1pdDogbC5lbWl0LmJpbmQobClcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHZhciBkID0gcCh7fSwgVSwgbyk7XG4gICAgICByZXR1cm4gbC5wYXJhbXMgPSBwKHt9LCBkLCBRLCB0KSwgbC5vcmlnaW5hbFBhcmFtcyA9IHAoe30sIGwucGFyYW1zKSwgbC5wYXNzZWRQYXJhbXMgPSBwKHt9LCB0KSwgbC5wYXJhbXMgJiYgbC5wYXJhbXMub24gJiYgT2JqZWN0LmtleXMobC5wYXJhbXMub24pLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgbC5vbihlLCBsLnBhcmFtcy5vbltlXSk7XG4gICAgICB9KSwgbC5wYXJhbXMgJiYgbC5wYXJhbXMub25BbnkgJiYgbC5vbkFueShsLnBhcmFtcy5vbkFueSksIE9iamVjdC5hc3NpZ24obCwge1xuICAgICAgICBlbmFibGVkOiBsLnBhcmFtcy5lbmFibGVkLFxuICAgICAgICBlbDogZSxcbiAgICAgICAgY2xhc3NOYW1lczogW10sXG4gICAgICAgIHNsaWRlczogW10sXG4gICAgICAgIHNsaWRlc0dyaWQ6IFtdLFxuICAgICAgICBzbmFwR3JpZDogW10sXG4gICAgICAgIHNsaWRlc1NpemVzR3JpZDogW10sXG4gICAgICAgIGlzSG9yaXpvbnRhbDogZnVuY3Rpb24gaXNIb3Jpem9udGFsKCkge1xuICAgICAgICAgIHJldHVybiBcImhvcml6b250YWxcIiA9PT0gbC5wYXJhbXMuZGlyZWN0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBpc1ZlcnRpY2FsOiBmdW5jdGlvbiBpc1ZlcnRpY2FsKCkge1xuICAgICAgICAgIHJldHVybiBcInZlcnRpY2FsXCIgPT09IGwucGFyYW1zLmRpcmVjdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgYWN0aXZlSW5kZXg6IDAsXG4gICAgICAgIHJlYWxJbmRleDogMCxcbiAgICAgICAgaXNCZWdpbm5pbmc6ICEwLFxuICAgICAgICBpc0VuZDogITEsXG4gICAgICAgIHRyYW5zbGF0ZTogMCxcbiAgICAgICAgcHJldmlvdXNUcmFuc2xhdGU6IDAsXG4gICAgICAgIHByb2dyZXNzOiAwLFxuICAgICAgICB2ZWxvY2l0eTogMCxcbiAgICAgICAgYW5pbWF0aW5nOiAhMSxcbiAgICAgICAgY3NzT3ZlcmZsb3dBZGp1c3RtZW50OiBmdW5jdGlvbiBjc3NPdmVyZmxvd0FkanVzdG1lbnQoKSB7XG4gICAgICAgICAgcmV0dXJuIE1hdGgudHJ1bmModGhpcy50cmFuc2xhdGUgLyBNYXRoLnBvdygyLCAyMykpICogTWF0aC5wb3coMiwgMjMpO1xuICAgICAgICB9LFxuICAgICAgICBhbGxvd1NsaWRlTmV4dDogbC5wYXJhbXMuYWxsb3dTbGlkZU5leHQsXG4gICAgICAgIGFsbG93U2xpZGVQcmV2OiBsLnBhcmFtcy5hbGxvd1NsaWRlUHJldixcbiAgICAgICAgdG91Y2hFdmVudHNEYXRhOiB7XG4gICAgICAgICAgaXNUb3VjaGVkOiB2b2lkIDAsXG4gICAgICAgICAgaXNNb3ZlZDogdm9pZCAwLFxuICAgICAgICAgIGFsbG93VG91Y2hDYWxsYmFja3M6IHZvaWQgMCxcbiAgICAgICAgICB0b3VjaFN0YXJ0VGltZTogdm9pZCAwLFxuICAgICAgICAgIGlzU2Nyb2xsaW5nOiB2b2lkIDAsXG4gICAgICAgICAgY3VycmVudFRyYW5zbGF0ZTogdm9pZCAwLFxuICAgICAgICAgIHN0YXJ0VHJhbnNsYXRlOiB2b2lkIDAsXG4gICAgICAgICAgYWxsb3dUaHJlc2hvbGRNb3ZlOiB2b2lkIDAsXG4gICAgICAgICAgZm9jdXNhYmxlRWxlbWVudHM6IGwucGFyYW1zLmZvY3VzYWJsZUVsZW1lbnRzLFxuICAgICAgICAgIGxhc3RDbGlja1RpbWU6IDAsXG4gICAgICAgICAgY2xpY2tUaW1lb3V0OiB2b2lkIDAsXG4gICAgICAgICAgdmVsb2NpdGllczogW10sXG4gICAgICAgICAgYWxsb3dNb21lbnR1bUJvdW5jZTogdm9pZCAwLFxuICAgICAgICAgIHN0YXJ0TW92aW5nOiB2b2lkIDAsXG4gICAgICAgICAgZXZDYWNoZTogW11cbiAgICAgICAgfSxcbiAgICAgICAgYWxsb3dDbGljazogITAsXG4gICAgICAgIGFsbG93VG91Y2hNb3ZlOiBsLnBhcmFtcy5hbGxvd1RvdWNoTW92ZSxcbiAgICAgICAgdG91Y2hlczoge1xuICAgICAgICAgIHN0YXJ0WDogMCxcbiAgICAgICAgICBzdGFydFk6IDAsXG4gICAgICAgICAgY3VycmVudFg6IDAsXG4gICAgICAgICAgY3VycmVudFk6IDAsXG4gICAgICAgICAgZGlmZjogMFxuICAgICAgICB9LFxuICAgICAgICBpbWFnZXNUb0xvYWQ6IFtdLFxuICAgICAgICBpbWFnZXNMb2FkZWQ6IDBcbiAgICAgIH0pLCBsLmVtaXQoXCJfc3dpcGVyXCIpLCBsLnBhcmFtcy5pbml0ICYmIGwuaW5pdCgpLCBsO1xuICAgIH1cbiAgICBfY3JlYXRlQ2xhc3MoSiwgW3tcbiAgICAgIGtleTogXCJnZXRTbGlkZUluZGV4XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2xpZGVJbmRleChlKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcy5zbGlkZXNFbCxcbiAgICAgICAgICBzID0gdGhpcy5wYXJhbXMsXG4gICAgICAgICAgYSA9IGIoZih0LCBcIi5cIi5jb25jYXQocy5zbGlkZUNsYXNzLCBcIiwgc3dpcGVyLXNsaWRlXCIpKVswXSk7XG4gICAgICAgIHJldHVybiBiKGUpIC0gYTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0U2xpZGVJbmRleEJ5RGF0YVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNsaWRlSW5kZXhCeURhdGEoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTbGlkZUluZGV4KHRoaXMuc2xpZGVzLmZpbHRlcihmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHJldHVybiAxICogdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKSA9PT0gZTtcbiAgICAgICAgfSlbMF0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJyZWNhbGNTbGlkZXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWNhbGNTbGlkZXMoKSB7XG4gICAgICAgIHZhciBlID0gdGhpcy5zbGlkZXNFbCxcbiAgICAgICAgICB0ID0gdGhpcy5wYXJhbXM7XG4gICAgICAgIHRoaXMuc2xpZGVzID0gZihlLCBcIi5cIi5jb25jYXQodC5zbGlkZUNsYXNzLCBcIiwgc3dpcGVyLXNsaWRlXCIpKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZW5hYmxlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZW5hYmxlKCkge1xuICAgICAgICB2YXIgZSA9IHRoaXM7XG4gICAgICAgIGUuZW5hYmxlZCB8fCAoZS5lbmFibGVkID0gITAsIGUucGFyYW1zLmdyYWJDdXJzb3IgJiYgZS5zZXRHcmFiQ3Vyc29yKCksIGUuZW1pdChcImVuYWJsZVwiKSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRpc2FibGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICB2YXIgZSA9IHRoaXM7XG4gICAgICAgIGUuZW5hYmxlZCAmJiAoZS5lbmFibGVkID0gITEsIGUucGFyYW1zLmdyYWJDdXJzb3IgJiYgZS51bnNldEdyYWJDdXJzb3IoKSwgZS5lbWl0KFwiZGlzYWJsZVwiKSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInNldFByb2dyZXNzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UHJvZ3Jlc3MoZSwgdCkge1xuICAgICAgICB2YXIgcyA9IHRoaXM7XG4gICAgICAgIGUgPSBNYXRoLm1pbihNYXRoLm1heChlLCAwKSwgMSk7XG4gICAgICAgIHZhciBhID0gcy5taW5UcmFuc2xhdGUoKSxcbiAgICAgICAgICBpID0gKHMubWF4VHJhbnNsYXRlKCkgLSBhKSAqIGUgKyBhO1xuICAgICAgICBzLnRyYW5zbGF0ZVRvKGksIHZvaWQgMCA9PT0gdCA/IDAgOiB0KSwgcy51cGRhdGVBY3RpdmVJbmRleCgpLCBzLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZW1pdENvbnRhaW5lckNsYXNzZXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBlbWl0Q29udGFpbmVyQ2xhc3NlcygpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICBpZiAoIWUucGFyYW1zLl9lbWl0Q2xhc3NlcyB8fCAhZS5lbCkgcmV0dXJuO1xuICAgICAgICB2YXIgdCA9IGUuZWwuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKS5maWx0ZXIoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICByZXR1cm4gMCA9PT0gdC5pbmRleE9mKFwic3dpcGVyXCIpIHx8IDAgPT09IHQuaW5kZXhPZihlLnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGUuZW1pdChcIl9jb250YWluZXJDbGFzc2VzXCIsIHQuam9pbihcIiBcIikpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRTbGlkZUNsYXNzZXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTbGlkZUNsYXNzZXMoZSkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0LmRlc3Ryb3llZCA/IFwiXCIgOiBlLmNsYXNzTmFtZS5zcGxpdChcIiBcIikuZmlsdGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIDAgPT09IGUuaW5kZXhPZihcInN3aXBlci1zbGlkZVwiKSB8fCAwID09PSBlLmluZGV4T2YodC5wYXJhbXMuc2xpZGVDbGFzcyk7XG4gICAgICAgIH0pLmpvaW4oXCIgXCIpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJlbWl0U2xpZGVzQ2xhc3Nlc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGVtaXRTbGlkZXNDbGFzc2VzKCkge1xuICAgICAgICB2YXIgZSA9IHRoaXM7XG4gICAgICAgIGlmICghZS5wYXJhbXMuX2VtaXRDbGFzc2VzIHx8ICFlLmVsKSByZXR1cm47XG4gICAgICAgIHZhciB0ID0gW107XG4gICAgICAgIGUuc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICB2YXIgYSA9IGUuZ2V0U2xpZGVDbGFzc2VzKHMpO1xuICAgICAgICAgIHQucHVzaCh7XG4gICAgICAgICAgICBzbGlkZUVsOiBzLFxuICAgICAgICAgICAgY2xhc3NOYW1lczogYVxuICAgICAgICAgIH0pLCBlLmVtaXQoXCJfc2xpZGVDbGFzc1wiLCBzLCBhKTtcbiAgICAgICAgfSksIGUuZW1pdChcIl9zbGlkZUNsYXNzZXNcIiwgdCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInNsaWRlc1BlclZpZXdEeW5hbWljXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2xpZGVzUGVyVmlld0R5bmFtaWMoZSwgdCkge1xuICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSBcImN1cnJlbnRcIiksIHZvaWQgMCA9PT0gdCAmJiAodCA9ICExKTtcbiAgICAgICAgdmFyIHMgPSB0aGlzLnBhcmFtcyxcbiAgICAgICAgICBhID0gdGhpcy5zbGlkZXMsXG4gICAgICAgICAgaSA9IHRoaXMuc2xpZGVzR3JpZCxcbiAgICAgICAgICByID0gdGhpcy5zbGlkZXNTaXplc0dyaWQsXG4gICAgICAgICAgbiA9IHRoaXMuc2l6ZSxcbiAgICAgICAgICBsID0gdGhpcy5hY3RpdmVJbmRleDtcbiAgICAgICAgdmFyIG8gPSAxO1xuICAgICAgICBpZiAocy5jZW50ZXJlZFNsaWRlcykge1xuICAgICAgICAgIHZhciBfZTMwLFxuICAgICAgICAgICAgX3QyMSA9IGFbbF0gPyBhW2xdLnN3aXBlclNsaWRlU2l6ZSA6IDA7XG4gICAgICAgICAgZm9yICh2YXIgX3MxOCA9IGwgKyAxOyBfczE4IDwgYS5sZW5ndGg7IF9zMTggKz0gMSkgYVtfczE4XSAmJiAhX2UzMCAmJiAoX3QyMSArPSBhW19zMThdLnN3aXBlclNsaWRlU2l6ZSwgbyArPSAxLCBfdDIxID4gbiAmJiAoX2UzMCA9ICEwKSk7XG4gICAgICAgICAgZm9yICh2YXIgX3MxOSA9IGwgLSAxOyBfczE5ID49IDA7IF9zMTkgLT0gMSkgYVtfczE5XSAmJiAhX2UzMCAmJiAoX3QyMSArPSBhW19zMTldLnN3aXBlclNsaWRlU2l6ZSwgbyArPSAxLCBfdDIxID4gbiAmJiAoX2UzMCA9ICEwKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJjdXJyZW50XCIgPT09IGUpIGZvciAodmFyIF9lMzEgPSBsICsgMTsgX2UzMSA8IGEubGVuZ3RoOyBfZTMxICs9IDEpIHtcbiAgICAgICAgICAodCA/IGlbX2UzMV0gKyByW19lMzFdIC0gaVtsXSA8IG4gOiBpW19lMzFdIC0gaVtsXSA8IG4pICYmIChvICs9IDEpO1xuICAgICAgICB9IGVsc2UgZm9yICh2YXIgX2UzMiA9IGwgLSAxOyBfZTMyID49IDA7IF9lMzIgLT0gMSkge1xuICAgICAgICAgIGlbbF0gLSBpW19lMzJdIDwgbiAmJiAobyArPSAxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidXBkYXRlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgICB2YXIgZSA9IHRoaXM7XG4gICAgICAgIGlmICghZSB8fCBlLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICB2YXIgdCA9IGUuc25hcEdyaWQsXG4gICAgICAgICAgcyA9IGUucGFyYW1zO1xuICAgICAgICBmdW5jdGlvbiBhKCkge1xuICAgICAgICAgIHZhciB0ID0gZS5ydGxUcmFuc2xhdGUgPyAtMSAqIGUudHJhbnNsYXRlIDogZS50cmFuc2xhdGUsXG4gICAgICAgICAgICBzID0gTWF0aC5taW4oTWF0aC5tYXgodCwgZS5tYXhUcmFuc2xhdGUoKSksIGUubWluVHJhbnNsYXRlKCkpO1xuICAgICAgICAgIGUuc2V0VHJhbnNsYXRlKHMpLCBlLnVwZGF0ZUFjdGl2ZUluZGV4KCksIGUudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpO1xuICAgICAgICBpZiAocy5icmVha3BvaW50cyAmJiBlLnNldEJyZWFrcG9pbnQoKSwgX3RvQ29uc3VtYWJsZUFycmF5KGUuZWwucXVlcnlTZWxlY3RvckFsbCgnW2xvYWRpbmc9XCJsYXp5XCJdJykpLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICB0LmNvbXBsZXRlICYmIEEoZSwgdCk7XG4gICAgICAgIH0pLCBlLnVwZGF0ZVNpemUoKSwgZS51cGRhdGVTbGlkZXMoKSwgZS51cGRhdGVQcm9ncmVzcygpLCBlLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKSwgcy5mcmVlTW9kZSAmJiBzLmZyZWVNb2RlLmVuYWJsZWQgJiYgIXMuY3NzTW9kZSkgYSgpLCBzLmF1dG9IZWlnaHQgJiYgZS51cGRhdGVBdXRvSGVpZ2h0KCk7ZWxzZSB7XG4gICAgICAgICAgaWYgKChcImF1dG9cIiA9PT0gcy5zbGlkZXNQZXJWaWV3IHx8IHMuc2xpZGVzUGVyVmlldyA+IDEpICYmIGUuaXNFbmQgJiYgIXMuY2VudGVyZWRTbGlkZXMpIHtcbiAgICAgICAgICAgIHZhciBfdDIyID0gZS52aXJ0dWFsICYmIHMudmlydHVhbC5lbmFibGVkID8gZS52aXJ0dWFsLnNsaWRlcyA6IGUuc2xpZGVzO1xuICAgICAgICAgICAgaSA9IGUuc2xpZGVUbyhfdDIyLmxlbmd0aCAtIDEsIDAsICExLCAhMCk7XG4gICAgICAgICAgfSBlbHNlIGkgPSBlLnNsaWRlVG8oZS5hY3RpdmVJbmRleCwgMCwgITEsICEwKTtcbiAgICAgICAgICBpIHx8IGEoKTtcbiAgICAgICAgfVxuICAgICAgICBzLndhdGNoT3ZlcmZsb3cgJiYgdCAhPT0gZS5zbmFwR3JpZCAmJiBlLmNoZWNrT3ZlcmZsb3coKSwgZS5lbWl0KFwidXBkYXRlXCIpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjaGFuZ2VEaXJlY3Rpb25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VEaXJlY3Rpb24oZSwgdCkge1xuICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSAhMCk7XG4gICAgICAgIHZhciBzID0gdGhpcyxcbiAgICAgICAgICBhID0gcy5wYXJhbXMuZGlyZWN0aW9uO1xuICAgICAgICByZXR1cm4gZSB8fCAoZSA9IFwiaG9yaXpvbnRhbFwiID09PSBhID8gXCJ2ZXJ0aWNhbFwiIDogXCJob3Jpem9udGFsXCIpLCBlID09PSBhIHx8IFwiaG9yaXpvbnRhbFwiICE9PSBlICYmIFwidmVydGljYWxcIiAhPT0gZSB8fCAocy5lbC5jbGFzc0xpc3QucmVtb3ZlKFwiXCIuY29uY2F0KHMucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MpLmNvbmNhdChhKSksIHMuZWwuY2xhc3NMaXN0LmFkZChcIlwiLmNvbmNhdChzLnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzKS5jb25jYXQoZSkpLCBzLmVtaXRDb250YWluZXJDbGFzc2VzKCksIHMucGFyYW1zLmRpcmVjdGlvbiA9IGUsIHMuc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICBcInZlcnRpY2FsXCIgPT09IGUgPyB0LnN0eWxlLndpZHRoID0gXCJcIiA6IHQuc3R5bGUuaGVpZ2h0ID0gXCJcIjtcbiAgICAgICAgfSksIHMuZW1pdChcImNoYW5nZURpcmVjdGlvblwiKSwgdCAmJiBzLnVwZGF0ZSgpKSwgcztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2hhbmdlTGFuZ3VhZ2VEaXJlY3Rpb25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VMYW5ndWFnZURpcmVjdGlvbihlKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgdC5ydGwgJiYgXCJydGxcIiA9PT0gZSB8fCAhdC5ydGwgJiYgXCJsdHJcIiA9PT0gZSB8fCAodC5ydGwgPSBcInJ0bFwiID09PSBlLCB0LnJ0bFRyYW5zbGF0ZSA9IFwiaG9yaXpvbnRhbFwiID09PSB0LnBhcmFtcy5kaXJlY3Rpb24gJiYgdC5ydGwsIHQucnRsID8gKHQuZWwuY2xhc3NMaXN0LmFkZChcIlwiLmNvbmNhdCh0LnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzLCBcInJ0bFwiKSksIHQuZWwuZGlyID0gXCJydGxcIikgOiAodC5lbC5jbGFzc0xpc3QucmVtb3ZlKFwiXCIuY29uY2F0KHQucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MsIFwicnRsXCIpKSwgdC5lbC5kaXIgPSBcImx0clwiKSwgdC51cGRhdGUoKSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIm1vdW50XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbW91bnQoZSkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIGlmICh0Lm1vdW50ZWQpIHJldHVybiAhMDtcbiAgICAgICAgdmFyIHMgPSBlIHx8IHQucGFyYW1zLmVsO1xuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgcyAmJiAocyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocykpLCAhcykgcmV0dXJuICExO1xuICAgICAgICBzLnN3aXBlciA9IHQsIHMuc2hhZG93RWwgJiYgKHQuaXNFbGVtZW50ID0gITApO1xuICAgICAgICB2YXIgYSA9IGZ1bmN0aW9uIGEoKSB7XG4gICAgICAgICAgcmV0dXJuIFwiLlwiLmNvbmNhdCgodC5wYXJhbXMud3JhcHBlckNsYXNzIHx8IFwiXCIpLnRyaW0oKS5zcGxpdChcIiBcIikuam9pbihcIi5cIikpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgaSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAocyAmJiBzLnNoYWRvd1Jvb3QgJiYgcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihhKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZihzLCBhKCkpWzBdO1xuICAgICAgICB9KCk7XG4gICAgICAgIHJldHVybiAhaSAmJiB0LnBhcmFtcy5jcmVhdGVFbGVtZW50cyAmJiAoaSA9IGcoXCJkaXZcIiwgdC5wYXJhbXMud3JhcHBlckNsYXNzKSwgcy5hcHBlbmQoaSksIGYocywgXCIuXCIuY29uY2F0KHQucGFyYW1zLnNsaWRlQ2xhc3MpKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgaS5hcHBlbmQoZSk7XG4gICAgICAgIH0pKSwgT2JqZWN0LmFzc2lnbih0LCB7XG4gICAgICAgICAgZWw6IHMsXG4gICAgICAgICAgd3JhcHBlckVsOiBpLFxuICAgICAgICAgIHNsaWRlc0VsOiB0LmlzRWxlbWVudCA/IHMgOiBpLFxuICAgICAgICAgIG1vdW50ZWQ6ICEwLFxuICAgICAgICAgIHJ0bDogXCJydGxcIiA9PT0gcy5kaXIudG9Mb3dlckNhc2UoKSB8fCBcInJ0bFwiID09PSB3KHMsIFwiZGlyZWN0aW9uXCIpLFxuICAgICAgICAgIHJ0bFRyYW5zbGF0ZTogXCJob3Jpem9udGFsXCIgPT09IHQucGFyYW1zLmRpcmVjdGlvbiAmJiAoXCJydGxcIiA9PT0gcy5kaXIudG9Mb3dlckNhc2UoKSB8fCBcInJ0bFwiID09PSB3KHMsIFwiZGlyZWN0aW9uXCIpKSxcbiAgICAgICAgICB3cm9uZ1JUTDogXCItd2Via2l0LWJveFwiID09PSB3KGksIFwiZGlzcGxheVwiKVxuICAgICAgICB9KSwgITA7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGUpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICBpZiAodC5pbml0aWFsaXplZCkgcmV0dXJuIHQ7XG4gICAgICAgIHJldHVybiAhMSA9PT0gdC5tb3VudChlKSB8fCAodC5lbWl0KFwiYmVmb3JlSW5pdFwiKSwgdC5wYXJhbXMuYnJlYWtwb2ludHMgJiYgdC5zZXRCcmVha3BvaW50KCksIHQuYWRkQ2xhc3NlcygpLCB0LnVwZGF0ZVNpemUoKSwgdC51cGRhdGVTbGlkZXMoKSwgdC5wYXJhbXMud2F0Y2hPdmVyZmxvdyAmJiB0LmNoZWNrT3ZlcmZsb3coKSwgdC5wYXJhbXMuZ3JhYkN1cnNvciAmJiB0LmVuYWJsZWQgJiYgdC5zZXRHcmFiQ3Vyc29yKCksIHQucGFyYW1zLmxvb3AgJiYgdC52aXJ0dWFsICYmIHQucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCA/IHQuc2xpZGVUbyh0LnBhcmFtcy5pbml0aWFsU2xpZGUgKyB0LnZpcnR1YWwuc2xpZGVzQmVmb3JlLCAwLCB0LnBhcmFtcy5ydW5DYWxsYmFja3NPbkluaXQsICExLCAhMCkgOiB0LnNsaWRlVG8odC5wYXJhbXMuaW5pdGlhbFNsaWRlLCAwLCB0LnBhcmFtcy5ydW5DYWxsYmFja3NPbkluaXQsICExLCAhMCksIHQucGFyYW1zLmxvb3AgJiYgdC5sb29wQ3JlYXRlKCksIHQuYXR0YWNoRXZlbnRzKCksIF90b0NvbnN1bWFibGVBcnJheSh0LmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tsb2FkaW5nPVwibGF6eVwiXScpKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS5jb21wbGV0ZSA/IEEodCwgZSkgOiBlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBBKHQsIGUudGFyZ2V0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSksIEkodCksIHQuaW5pdGlhbGl6ZWQgPSAhMCwgSSh0KSwgdC5lbWl0KFwiaW5pdFwiKSwgdC5lbWl0KFwiYWZ0ZXJJbml0XCIpKSwgdDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koZSwgdCkge1xuICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSAhMCksIHZvaWQgMCA9PT0gdCAmJiAodCA9ICEwKTtcbiAgICAgICAgdmFyIHMgPSB0aGlzLFxuICAgICAgICAgIGEgPSBzLnBhcmFtcyxcbiAgICAgICAgICBpID0gcy5lbCxcbiAgICAgICAgICByID0gcy53cmFwcGVyRWwsXG4gICAgICAgICAgbiA9IHMuc2xpZGVzO1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSBzLnBhcmFtcyB8fCBzLmRlc3Ryb3llZCB8fCAocy5lbWl0KFwiYmVmb3JlRGVzdHJveVwiKSwgcy5pbml0aWFsaXplZCA9ICExLCBzLmRldGFjaEV2ZW50cygpLCBhLmxvb3AgJiYgcy5sb29wRGVzdHJveSgpLCB0ICYmIChzLnJlbW92ZUNsYXNzZXMoKSwgaS5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKSwgci5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKSwgbiAmJiBuLmxlbmd0aCAmJiBuLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBlLmNsYXNzTGlzdC5yZW1vdmUoYS5zbGlkZVZpc2libGVDbGFzcywgYS5zbGlkZUFjdGl2ZUNsYXNzLCBhLnNsaWRlTmV4dENsYXNzLCBhLnNsaWRlUHJldkNsYXNzKSwgZS5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKSwgZS5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKTtcbiAgICAgICAgfSkpLCBzLmVtaXQoXCJkZXN0cm95XCIpLCBPYmplY3Qua2V5cyhzLmV2ZW50c0xpc3RlbmVycykuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHMub2ZmKGUpO1xuICAgICAgICB9KSwgITEgIT09IGUgJiYgKHMuZWwuc3dpcGVyID0gbnVsbCwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB2YXIgdCA9IGU7XG4gICAgICAgICAgT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgdFtlXSA9IG51bGw7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZGVsZXRlIHRbZV07XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KHMpKSwgcy5kZXN0cm95ZWQgPSAhMCksIG51bGw7XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiZXh0ZW5kRGVmYXVsdHNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBleHRlbmREZWZhdWx0cyhlKSB7XG4gICAgICAgIHAoUSwgZSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImV4dGVuZGVkRGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gUTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiaW5zdGFsbE1vZHVsZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluc3RhbGxNb2R1bGUoZSkge1xuICAgICAgICBKLnByb3RvdHlwZS5fX21vZHVsZXNfXyB8fCAoSi5wcm90b3R5cGUuX19tb2R1bGVzX18gPSBbXSk7XG4gICAgICAgIHZhciB0ID0gSi5wcm90b3R5cGUuX19tb2R1bGVzX187XG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZSAmJiB0LmluZGV4T2YoZSkgPCAwICYmIHQucHVzaChlKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidXNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdXNlKGUpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZSkgPyAoZS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIEouaW5zdGFsbE1vZHVsZShlKTtcbiAgICAgICAgfSksIEopIDogKEouaW5zdGFsbE1vZHVsZShlKSwgSik7XG4gICAgICB9XG4gICAgfV0pO1xuICAgIHJldHVybiBKO1xuICB9KCk7XG4gIGZ1bmN0aW9uIGVlKGUsIHQsIHMsIGEpIHtcbiAgICByZXR1cm4gZS5wYXJhbXMuY3JlYXRlRWxlbWVudHMgJiYgT2JqZWN0LmtleXMoYSkuZm9yRWFjaChmdW5jdGlvbiAoaSkge1xuICAgICAgaWYgKCFzW2ldICYmICEwID09PSBzLmF1dG8pIHtcbiAgICAgICAgdmFyIF9yNyA9IGYoZS5lbCwgXCIuXCIuY29uY2F0KGFbaV0pKVswXTtcbiAgICAgICAgX3I3IHx8IChfcjcgPSBnKFwiZGl2XCIsIGFbaV0pLCBfcjcuY2xhc3NOYW1lID0gYVtpXSwgZS5lbC5hcHBlbmQoX3I3KSksIHNbaV0gPSBfcjcsIHRbaV0gPSBfcjc7XG4gICAgICB9XG4gICAgfSksIHM7XG4gIH1cbiAgZnVuY3Rpb24gdGUoZSkge1xuICAgIHJldHVybiB2b2lkIDAgPT09IGUgJiYgKGUgPSBcIlwiKSwgXCIuXCIuY29uY2F0KGUudHJpbSgpLnJlcGxhY2UoLyhbXFwuOiErXFwvXSkvZywgXCJcXFxcJDFcIikucmVwbGFjZSgvIC9nLCBcIi5cIikpO1xuICB9XG4gIGZ1bmN0aW9uIHNlKGUpIHtcbiAgICB2YXIgdCA9IHRoaXMsXG4gICAgICBzID0gdC5wYXJhbXMsXG4gICAgICBhID0gdC5zbGlkZXNFbDtcbiAgICBzLmxvb3AgJiYgdC5sb29wRGVzdHJveSgpO1xuICAgIHZhciBpID0gZnVuY3Rpb24gaShlKSB7XG4gICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSkge1xuICAgICAgICB2YXIgX3QyMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIF90MjMuaW5uZXJIVE1MID0gZSwgYS5hcHBlbmQoX3QyMy5jaGlsZHJlblswXSksIF90MjMuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgIH0gZWxzZSBhLmFwcGVuZChlKTtcbiAgICB9O1xuICAgIGlmIChcIm9iamVjdFwiID09IF90eXBlb2YoZSkgJiYgXCJsZW5ndGhcIiBpbiBlKSBmb3IgKHZhciBfdDI0ID0gMDsgX3QyNCA8IGUubGVuZ3RoOyBfdDI0ICs9IDEpIGVbX3QyNF0gJiYgaShlW190MjRdKTtlbHNlIGkoZSk7XG4gICAgdC5yZWNhbGNTbGlkZXMoKSwgcy5sb29wICYmIHQubG9vcENyZWF0ZSgpLCBzLm9ic2VydmVyICYmICF0LmlzRWxlbWVudCB8fCB0LnVwZGF0ZSgpO1xuICB9XG4gIGZ1bmN0aW9uIGFlKGUpIHtcbiAgICB2YXIgdCA9IHRoaXMsXG4gICAgICBzID0gdC5wYXJhbXMsXG4gICAgICBhID0gdC5hY3RpdmVJbmRleCxcbiAgICAgIGkgPSB0LnNsaWRlc0VsO1xuICAgIHMubG9vcCAmJiB0Lmxvb3BEZXN0cm95KCk7XG4gICAgdmFyIHIgPSBhICsgMTtcbiAgICB2YXIgbiA9IGZ1bmN0aW9uIG4oZSkge1xuICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHtcbiAgICAgICAgdmFyIF90MjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBfdDI1LmlubmVySFRNTCA9IGUsIGkucHJlcGVuZChfdDI1LmNoaWxkcmVuWzBdKSwgX3QyNS5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgfSBlbHNlIGkucHJlcGVuZChlKTtcbiAgICB9O1xuICAgIGlmIChcIm9iamVjdFwiID09IF90eXBlb2YoZSkgJiYgXCJsZW5ndGhcIiBpbiBlKSB7XG4gICAgICBmb3IgKHZhciBfdDI2ID0gMDsgX3QyNiA8IGUubGVuZ3RoOyBfdDI2ICs9IDEpIGVbX3QyNl0gJiYgbihlW190MjZdKTtcbiAgICAgIHIgPSBhICsgZS5sZW5ndGg7XG4gICAgfSBlbHNlIG4oZSk7XG4gICAgdC5yZWNhbGNTbGlkZXMoKSwgcy5sb29wICYmIHQubG9vcENyZWF0ZSgpLCBzLm9ic2VydmVyICYmICF0LmlzRWxlbWVudCB8fCB0LnVwZGF0ZSgpLCB0LnNsaWRlVG8ociwgMCwgITEpO1xuICB9XG4gIGZ1bmN0aW9uIGllKGUsIHQpIHtcbiAgICB2YXIgcyA9IHRoaXMsXG4gICAgICBhID0gcy5wYXJhbXMsXG4gICAgICBpID0gcy5hY3RpdmVJbmRleCxcbiAgICAgIHIgPSBzLnNsaWRlc0VsO1xuICAgIHZhciBuID0gaTtcbiAgICBhLmxvb3AgJiYgKG4gLT0gcy5sb29wZWRTbGlkZXMsIHMubG9vcERlc3Ryb3koKSwgcy5yZWNhbGNTbGlkZXMoKSk7XG4gICAgdmFyIGwgPSBzLnNsaWRlcy5sZW5ndGg7XG4gICAgaWYgKGUgPD0gMCkgcmV0dXJuIHZvaWQgcy5wcmVwZW5kU2xpZGUodCk7XG4gICAgaWYgKGUgPj0gbCkgcmV0dXJuIHZvaWQgcy5hcHBlbmRTbGlkZSh0KTtcbiAgICB2YXIgbyA9IG4gPiBlID8gbiArIDEgOiBuO1xuICAgIHZhciBkID0gW107XG4gICAgZm9yICh2YXIgX3QyNyA9IGwgLSAxOyBfdDI3ID49IGU7IF90MjcgLT0gMSkge1xuICAgICAgdmFyIF9lMzMgPSBzLnNsaWRlc1tfdDI3XTtcbiAgICAgIF9lMzMucmVtb3ZlKCksIGQudW5zaGlmdChfZTMzKTtcbiAgICB9XG4gICAgaWYgKFwib2JqZWN0XCIgPT0gX3R5cGVvZih0KSAmJiBcImxlbmd0aFwiIGluIHQpIHtcbiAgICAgIGZvciAodmFyIF9lMzQgPSAwOyBfZTM0IDwgdC5sZW5ndGg7IF9lMzQgKz0gMSkgdFtfZTM0XSAmJiByLmFwcGVuZCh0W19lMzRdKTtcbiAgICAgIG8gPSBuID4gZSA/IG4gKyB0Lmxlbmd0aCA6IG47XG4gICAgfSBlbHNlIHIuYXBwZW5kKHQpO1xuICAgIGZvciAodmFyIF9lMzUgPSAwOyBfZTM1IDwgZC5sZW5ndGg7IF9lMzUgKz0gMSkgci5hcHBlbmQoZFtfZTM1XSk7XG4gICAgcy5yZWNhbGNTbGlkZXMoKSwgYS5sb29wICYmIHMubG9vcENyZWF0ZSgpLCBhLm9ic2VydmVyICYmICFzLmlzRWxlbWVudCB8fCBzLnVwZGF0ZSgpLCBhLmxvb3AgPyBzLnNsaWRlVG8obyArIHMubG9vcGVkU2xpZGVzLCAwLCAhMSkgOiBzLnNsaWRlVG8obywgMCwgITEpO1xuICB9XG4gIGZ1bmN0aW9uIHJlKGUpIHtcbiAgICB2YXIgdCA9IHRoaXMsXG4gICAgICBzID0gdC5wYXJhbXMsXG4gICAgICBhID0gdC5hY3RpdmVJbmRleDtcbiAgICB2YXIgaSA9IGE7XG4gICAgcy5sb29wICYmIChpIC09IHQubG9vcGVkU2xpZGVzLCB0Lmxvb3BEZXN0cm95KCkpO1xuICAgIHZhciByLFxuICAgICAgbiA9IGk7XG4gICAgaWYgKFwib2JqZWN0XCIgPT0gX3R5cGVvZihlKSAmJiBcImxlbmd0aFwiIGluIGUpIHtcbiAgICAgIGZvciAodmFyIF9zMjAgPSAwOyBfczIwIDwgZS5sZW5ndGg7IF9zMjAgKz0gMSkgciA9IGVbX3MyMF0sIHQuc2xpZGVzW3JdICYmIHQuc2xpZGVzW3JdLnJlbW92ZSgpLCByIDwgbiAmJiAobiAtPSAxKTtcbiAgICAgIG4gPSBNYXRoLm1heChuLCAwKTtcbiAgICB9IGVsc2UgciA9IGUsIHQuc2xpZGVzW3JdICYmIHQuc2xpZGVzW3JdLnJlbW92ZSgpLCByIDwgbiAmJiAobiAtPSAxKSwgbiA9IE1hdGgubWF4KG4sIDApO1xuICAgIHQucmVjYWxjU2xpZGVzKCksIHMubG9vcCAmJiB0Lmxvb3BDcmVhdGUoKSwgcy5vYnNlcnZlciAmJiAhdC5pc0VsZW1lbnQgfHwgdC51cGRhdGUoKSwgcy5sb29wID8gdC5zbGlkZVRvKG4gKyB0Lmxvb3BlZFNsaWRlcywgMCwgITEpIDogdC5zbGlkZVRvKG4sIDAsICExKTtcbiAgfVxuICBmdW5jdGlvbiBuZSgpIHtcbiAgICB2YXIgZSA9IHRoaXMsXG4gICAgICB0ID0gW107XG4gICAgZm9yICh2YXIgX3MyMSA9IDA7IF9zMjEgPCBlLnNsaWRlcy5sZW5ndGg7IF9zMjEgKz0gMSkgdC5wdXNoKF9zMjEpO1xuICAgIGUucmVtb3ZlU2xpZGUodCk7XG4gIH1cbiAgZnVuY3Rpb24gbGUoZSkge1xuICAgIHZhciB0ID0gZS5lZmZlY3QsXG4gICAgICBzID0gZS5zd2lwZXIsXG4gICAgICBhID0gZS5vbixcbiAgICAgIGkgPSBlLnNldFRyYW5zbGF0ZSxcbiAgICAgIHIgPSBlLnNldFRyYW5zaXRpb24sXG4gICAgICBuID0gZS5vdmVyd3JpdGVQYXJhbXMsXG4gICAgICBsID0gZS5wZXJzcGVjdGl2ZSxcbiAgICAgIG8gPSBlLnJlY3JlYXRlU2hhZG93cyxcbiAgICAgIGQgPSBlLmdldEVmZmVjdFBhcmFtcztcbiAgICB2YXIgYztcbiAgICBhKFwiYmVmb3JlSW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocy5wYXJhbXMuZWZmZWN0ICE9PSB0KSByZXR1cm47XG4gICAgICBzLmNsYXNzTmFtZXMucHVzaChcIlwiLmNvbmNhdChzLnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzKS5jb25jYXQodCkpLCBsICYmIGwoKSAmJiBzLmNsYXNzTmFtZXMucHVzaChcIlwiLmNvbmNhdChzLnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzLCBcIjNkXCIpKTtcbiAgICAgIHZhciBlID0gbiA/IG4oKSA6IHt9O1xuICAgICAgT2JqZWN0LmFzc2lnbihzLnBhcmFtcywgZSksIE9iamVjdC5hc3NpZ24ocy5vcmlnaW5hbFBhcmFtcywgZSk7XG4gICAgfSksIGEoXCJzZXRUcmFuc2xhdGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgcy5wYXJhbXMuZWZmZWN0ID09PSB0ICYmIGkoKTtcbiAgICB9KSwgYShcInNldFRyYW5zaXRpb25cIiwgZnVuY3Rpb24gKGUsIGEpIHtcbiAgICAgIHMucGFyYW1zLmVmZmVjdCA9PT0gdCAmJiByKGEpO1xuICAgIH0pLCBhKFwidHJhbnNpdGlvbkVuZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocy5wYXJhbXMuZWZmZWN0ID09PSB0ICYmIG8pIHtcbiAgICAgICAgaWYgKCFkIHx8ICFkKCkuc2xpZGVTaGFkb3dzKSByZXR1cm47XG4gICAgICAgIHMuc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3AsIC5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0LCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20sIC5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnRcIikuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUucmVtb3ZlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pLCBvKCk7XG4gICAgICB9XG4gICAgfSksIGEoXCJ2aXJ0dWFsVXBkYXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHMucGFyYW1zLmVmZmVjdCA9PT0gdCAmJiAocy5zbGlkZXMubGVuZ3RoIHx8IChjID0gITApLCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICBjICYmIHMuc2xpZGVzICYmIHMuc2xpZGVzLmxlbmd0aCAmJiAoaSgpLCBjID0gITEpO1xuICAgICAgfSkpO1xuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIG9lKGUsIHQpIHtcbiAgICB2YXIgcyA9IGgodCk7XG4gICAgcmV0dXJuIHMgIT09IHQgJiYgKHMuc3R5bGUuYmFja2ZhY2VWaXNpYmlsaXR5ID0gXCJoaWRkZW5cIiwgcy5zdHlsZVtcIi13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eVwiXSA9IFwiaGlkZGVuXCIpLCBzO1xuICB9XG4gIGZ1bmN0aW9uIGRlKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZHVyYXRpb24sXG4gICAgICBhID0gZS50cmFuc2Zvcm1FbGVtZW50cyxcbiAgICAgIGkgPSBlLmFsbFNsaWRlcztcbiAgICB2YXIgciA9IHQuYWN0aXZlSW5kZXg7XG4gICAgaWYgKHQucGFyYW1zLnZpcnR1YWxUcmFuc2xhdGUgJiYgMCAhPT0gcykge1xuICAgICAgdmFyIF9lMzYsXG4gICAgICAgIF9zMjIgPSAhMTtcbiAgICAgIF9lMzYgPSBpID8gYSA6IGEuZmlsdGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBzID0gZS5jbGFzc0xpc3QuY29udGFpbnMoXCJzd2lwZXItc2xpZGUtdHJhbnNmb3JtXCIpID8gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBpZiAoIWUucGFyZW50RWxlbWVudCkgcmV0dXJuIHQuc2xpZGVzLmZpbHRlcihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcmV0dXJuIHQuc2hhZG93RWwgJiYgdC5zaGFkb3dFbCA9PT0gZS5wYXJlbnROb2RlO1xuICAgICAgICAgIH0pWzBdO1xuICAgICAgICAgIHJldHVybiBlLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH0oZSkgOiBlO1xuICAgICAgICByZXR1cm4gdC5nZXRTbGlkZUluZGV4KHMpID09PSByO1xuICAgICAgfSksIF9lMzYuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBFKGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoX3MyMikgcmV0dXJuO1xuICAgICAgICAgIGlmICghdCB8fCB0LmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICAgIF9zMjIgPSAhMCwgdC5hbmltYXRpbmcgPSAhMTtcbiAgICAgICAgICB2YXIgZSA9IG5ldyB3aW5kb3cuQ3VzdG9tRXZlbnQoXCJ0cmFuc2l0aW9uZW5kXCIsIHtcbiAgICAgICAgICAgIGJ1YmJsZXM6ICEwLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogITBcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0LndyYXBwZXJFbC5kaXNwYXRjaEV2ZW50KGUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBjZShlLCB0LCBzKSB7XG4gICAgdmFyIGEgPSBcInN3aXBlci1zbGlkZS1zaGFkb3dcIiArIChzID8gXCItXCIuY29uY2F0KHMpIDogXCJcIiksXG4gICAgICBpID0gaCh0KTtcbiAgICB2YXIgciA9IGkucXVlcnlTZWxlY3RvcihcIi5cIi5jb25jYXQoYSkpO1xuICAgIHJldHVybiByIHx8IChyID0gZyhcImRpdlwiLCBcInN3aXBlci1zbGlkZS1zaGFkb3dcIiArIChzID8gXCItXCIuY29uY2F0KHMpIDogXCJcIikpLCBpLmFwcGVuZChyKSksIHI7XG4gIH1cbiAgT2JqZWN0LmtleXMoWikuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgIE9iamVjdC5rZXlzKFpbZV0pLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgIEoucHJvdG90eXBlW3RdID0gWltlXVt0XTtcbiAgICB9KTtcbiAgfSksIEoudXNlKFtmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5vbixcbiAgICAgIGEgPSBlLmVtaXQ7XG4gICAgdmFyIGkgPSByKCk7XG4gICAgdmFyIG4gPSBudWxsLFxuICAgICAgbCA9IG51bGw7XG4gICAgdmFyIG8gPSBmdW5jdGlvbiBvKCkge1xuICAgICAgICB0ICYmICF0LmRlc3Ryb3llZCAmJiB0LmluaXRpYWxpemVkICYmIChhKFwiYmVmb3JlUmVzaXplXCIpLCBhKFwicmVzaXplXCIpKTtcbiAgICAgIH0sXG4gICAgICBkID0gZnVuY3Rpb24gZCgpIHtcbiAgICAgICAgdCAmJiAhdC5kZXN0cm95ZWQgJiYgdC5pbml0aWFsaXplZCAmJiBhKFwib3JpZW50YXRpb25jaGFuZ2VcIik7XG4gICAgICB9O1xuICAgIHMoXCJpbml0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHQucGFyYW1zLnJlc2l6ZU9ic2VydmVyICYmIHZvaWQgMCAhPT0gaS5SZXNpemVPYnNlcnZlciA/IHQgJiYgIXQuZGVzdHJveWVkICYmIHQuaW5pdGlhbGl6ZWQgJiYgKG4gPSBuZXcgUmVzaXplT2JzZXJ2ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgbCA9IGkucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcyA9IHQud2lkdGgsXG4gICAgICAgICAgICBhID0gdC5oZWlnaHQ7XG4gICAgICAgICAgdmFyIGkgPSBzLFxuICAgICAgICAgICAgciA9IGE7XG4gICAgICAgICAgZS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcyA9IGUuY29udGVudEJveFNpemUsXG4gICAgICAgICAgICAgIGEgPSBlLmNvbnRlbnRSZWN0LFxuICAgICAgICAgICAgICBuID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBuICYmIG4gIT09IHQuZWwgfHwgKGkgPSBhID8gYS53aWR0aCA6IChzWzBdIHx8IHMpLmlubGluZVNpemUsIHIgPSBhID8gYS5oZWlnaHQgOiAoc1swXSB8fCBzKS5ibG9ja1NpemUpO1xuICAgICAgICAgIH0pLCBpID09PSBzICYmIHIgPT09IGEgfHwgbygpO1xuICAgICAgICB9KTtcbiAgICAgIH0pLCBuLm9ic2VydmUodC5lbCkpIDogKGkuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvKSwgaS5hZGRFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgZCkpO1xuICAgIH0pLCBzKFwiZGVzdHJveVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBsICYmIGkuY2FuY2VsQW5pbWF0aW9uRnJhbWUobCksIG4gJiYgbi51bm9ic2VydmUgJiYgdC5lbCAmJiAobi51bm9ic2VydmUodC5lbCksIG4gPSBudWxsKSwgaS5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIG8pLCBpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCBkKTtcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgYSA9IGUub24sXG4gICAgICBpID0gZS5lbWl0O1xuICAgIHZhciBuID0gW10sXG4gICAgICBsID0gcigpLFxuICAgICAgbyA9IGZ1bmN0aW9uIG8oZSwgcykge1xuICAgICAgICB2b2lkIDAgPT09IHMgJiYgKHMgPSB7fSk7XG4gICAgICAgIHZhciBhID0gbmV3IChsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgbC5XZWJraXRNdXRhdGlvbk9ic2VydmVyKShmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGlmICh0Ll9fcHJldmVudE9ic2VydmVyX18pIHJldHVybjtcbiAgICAgICAgICBpZiAoMSA9PT0gZS5sZW5ndGgpIHJldHVybiB2b2lkIGkoXCJvYnNlcnZlclVwZGF0ZVwiLCBlWzBdKTtcbiAgICAgICAgICB2YXIgcyA9IGZ1bmN0aW9uIHMoKSB7XG4gICAgICAgICAgICBpKFwib2JzZXJ2ZXJVcGRhdGVcIiwgZVswXSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBsLnJlcXVlc3RBbmltYXRpb25GcmFtZSA/IGwucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHMpIDogbC5zZXRUaW1lb3V0KHMsIDApO1xuICAgICAgICB9KTtcbiAgICAgICAgYS5vYnNlcnZlKGUsIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzOiB2b2lkIDAgPT09IHMuYXR0cmlidXRlcyB8fCBzLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgY2hpbGRMaXN0OiB2b2lkIDAgPT09IHMuY2hpbGRMaXN0IHx8IHMuY2hpbGRMaXN0LFxuICAgICAgICAgIGNoYXJhY3RlckRhdGE6IHZvaWQgMCA9PT0gcy5jaGFyYWN0ZXJEYXRhIHx8IHMuY2hhcmFjdGVyRGF0YVxuICAgICAgICB9KSwgbi5wdXNoKGEpO1xuICAgICAgfTtcbiAgICBzKHtcbiAgICAgIG9ic2VydmVyOiAhMSxcbiAgICAgIG9ic2VydmVQYXJlbnRzOiAhMSxcbiAgICAgIG9ic2VydmVTbGlkZUNoaWxkcmVuOiAhMVxuICAgIH0pLCBhKFwiaW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodC5wYXJhbXMub2JzZXJ2ZXIpIHtcbiAgICAgICAgaWYgKHQucGFyYW1zLm9ic2VydmVQYXJlbnRzKSB7XG4gICAgICAgICAgdmFyIF9lMzcgPSB5KHQuZWwpO1xuICAgICAgICAgIGZvciAodmFyIF90MjggPSAwOyBfdDI4IDwgX2UzNy5sZW5ndGg7IF90MjggKz0gMSkgbyhfZTM3W190MjhdKTtcbiAgICAgICAgfVxuICAgICAgICBvKHQuZWwsIHtcbiAgICAgICAgICBjaGlsZExpc3Q6IHQucGFyYW1zLm9ic2VydmVTbGlkZUNoaWxkcmVuXG4gICAgICAgIH0pLCBvKHQud3JhcHBlckVsLCB7XG4gICAgICAgICAgYXR0cmlidXRlczogITFcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSksIGEoXCJkZXN0cm95XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG4uZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH0pLCBuLnNwbGljZSgwLCBuLmxlbmd0aCk7XG4gICAgfSk7XG4gIH1dKTtcbiAgdmFyIHBlID0gW2Z1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQsXG4gICAgICBzID0gZS5zd2lwZXIsXG4gICAgICBpID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICByID0gZS5vbixcbiAgICAgIG4gPSBlLmVtaXQ7XG4gICAgaSh7XG4gICAgICB2aXJ0dWFsOiB7XG4gICAgICAgIGVuYWJsZWQ6ICExLFxuICAgICAgICBzbGlkZXM6IFtdLFxuICAgICAgICBjYWNoZTogITAsXG4gICAgICAgIHJlbmRlclNsaWRlOiBudWxsLFxuICAgICAgICByZW5kZXJFeHRlcm5hbDogbnVsbCxcbiAgICAgICAgcmVuZGVyRXh0ZXJuYWxVcGRhdGU6ICEwLFxuICAgICAgICBhZGRTbGlkZXNCZWZvcmU6IDAsXG4gICAgICAgIGFkZFNsaWRlc0FmdGVyOiAwXG4gICAgICB9XG4gICAgfSk7XG4gICAgdmFyIGwgPSBhKCk7XG4gICAgcy52aXJ0dWFsID0ge1xuICAgICAgY2FjaGU6IHt9LFxuICAgICAgZnJvbTogdm9pZCAwLFxuICAgICAgdG86IHZvaWQgMCxcbiAgICAgIHNsaWRlczogW10sXG4gICAgICBvZmZzZXQ6IDAsXG4gICAgICBzbGlkZXNHcmlkOiBbXVxuICAgIH07XG4gICAgdmFyIG8gPSBsLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZnVuY3Rpb24gZChlLCB0KSB7XG4gICAgICB2YXIgYSA9IHMucGFyYW1zLnZpcnR1YWw7XG4gICAgICBpZiAoYS5jYWNoZSAmJiBzLnZpcnR1YWwuY2FjaGVbdF0pIHJldHVybiBzLnZpcnR1YWwuY2FjaGVbdF07XG4gICAgICB2YXIgaTtcbiAgICAgIHJldHVybiBhLnJlbmRlclNsaWRlID8gKGkgPSBhLnJlbmRlclNsaWRlLmNhbGwocywgZSwgdCksIFwic3RyaW5nXCIgPT0gdHlwZW9mIGkgJiYgKG8uaW5uZXJIVE1MID0gaSwgaSA9IG8uY2hpbGRyZW5bMF0pKSA6IGkgPSBzLmlzRWxlbWVudCA/IGcoXCJzd2lwZXItc2xpZGVcIikgOiBnKFwiZGl2XCIsIHMucGFyYW1zLnNsaWRlQ2xhc3MpLCBpLnNldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIsIHQpLCBhLnJlbmRlclNsaWRlIHx8IChpLmlubmVySFRNTCA9IGUpLCBhLmNhY2hlICYmIChzLnZpcnR1YWwuY2FjaGVbdF0gPSBpKSwgaTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYyhlKSB7XG4gICAgICB2YXIgX3MkcGFyYW1zID0gcy5wYXJhbXMsXG4gICAgICAgIHQgPSBfcyRwYXJhbXMuc2xpZGVzUGVyVmlldyxcbiAgICAgICAgYSA9IF9zJHBhcmFtcy5zbGlkZXNQZXJHcm91cCxcbiAgICAgICAgaSA9IF9zJHBhcmFtcy5jZW50ZXJlZFNsaWRlcyxcbiAgICAgICAgciA9IF9zJHBhcmFtcy5sb29wLFxuICAgICAgICBfcyRwYXJhbXMkdmlydHVhbCA9IHMucGFyYW1zLnZpcnR1YWwsXG4gICAgICAgIGwgPSBfcyRwYXJhbXMkdmlydHVhbC5hZGRTbGlkZXNCZWZvcmUsXG4gICAgICAgIG8gPSBfcyRwYXJhbXMkdmlydHVhbC5hZGRTbGlkZXNBZnRlcixcbiAgICAgICAgX3MkdmlydHVhbCA9IHMudmlydHVhbCxcbiAgICAgICAgYyA9IF9zJHZpcnR1YWwuZnJvbSxcbiAgICAgICAgcCA9IF9zJHZpcnR1YWwudG8sXG4gICAgICAgIHUgPSBfcyR2aXJ0dWFsLnNsaWRlcyxcbiAgICAgICAgbSA9IF9zJHZpcnR1YWwuc2xpZGVzR3JpZCxcbiAgICAgICAgaCA9IF9zJHZpcnR1YWwub2Zmc2V0O1xuICAgICAgcy5wYXJhbXMuY3NzTW9kZSB8fCBzLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gICAgICB2YXIgZyA9IHMuYWN0aXZlSW5kZXggfHwgMDtcbiAgICAgIHZhciB2LCB3LCBiO1xuICAgICAgdiA9IHMucnRsVHJhbnNsYXRlID8gXCJyaWdodFwiIDogcy5pc0hvcml6b250YWwoKSA/IFwibGVmdFwiIDogXCJ0b3BcIiwgaSA/ICh3ID0gTWF0aC5mbG9vcih0IC8gMikgKyBhICsgbywgYiA9IE1hdGguZmxvb3IodCAvIDIpICsgYSArIGwpIDogKHcgPSB0ICsgKGEgLSAxKSArIG8sIGIgPSAociA/IHQgOiBhKSArIGwpO1xuICAgICAgdmFyIHkgPSBnIC0gYixcbiAgICAgICAgRSA9IGcgKyB3O1xuICAgICAgciB8fCAoeSA9IE1hdGgubWF4KHksIDApLCBFID0gTWF0aC5taW4oRSwgdS5sZW5ndGggLSAxKSk7XG4gICAgICB2YXIgeCA9IChzLnNsaWRlc0dyaWRbeV0gfHwgMCkgLSAocy5zbGlkZXNHcmlkWzBdIHx8IDApO1xuICAgICAgZnVuY3Rpb24gUygpIHtcbiAgICAgICAgcy51cGRhdGVTbGlkZXMoKSwgcy51cGRhdGVQcm9ncmVzcygpLCBzLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKSwgbihcInZpcnR1YWxVcGRhdGVcIik7XG4gICAgICB9XG4gICAgICBpZiAociAmJiBnID49IGIgPyAoeSAtPSBiLCBpIHx8ICh4ICs9IHMuc2xpZGVzR3JpZFswXSkpIDogciAmJiBnIDwgYiAmJiAoeSA9IC1iLCBpICYmICh4ICs9IHMuc2xpZGVzR3JpZFswXSkpLCBPYmplY3QuYXNzaWduKHMudmlydHVhbCwge1xuICAgICAgICBmcm9tOiB5LFxuICAgICAgICB0bzogRSxcbiAgICAgICAgb2Zmc2V0OiB4LFxuICAgICAgICBzbGlkZXNHcmlkOiBzLnNsaWRlc0dyaWQsXG4gICAgICAgIHNsaWRlc0JlZm9yZTogYixcbiAgICAgICAgc2xpZGVzQWZ0ZXI6IHdcbiAgICAgIH0pLCBjID09PSB5ICYmIHAgPT09IEUgJiYgIWUpIHJldHVybiBzLnNsaWRlc0dyaWQgIT09IG0gJiYgeCAhPT0gaCAmJiBzLnNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUuc3R5bGVbdl0gPSB4IC0gTWF0aC5hYnMocy5jc3NPdmVyZmxvd0FkanVzdG1lbnQoKSkgKyBcInB4XCI7XG4gICAgICB9KSwgcy51cGRhdGVQcm9ncmVzcygpLCB2b2lkIG4oXCJ2aXJ0dWFsVXBkYXRlXCIpO1xuICAgICAgaWYgKHMucGFyYW1zLnZpcnR1YWwucmVuZGVyRXh0ZXJuYWwpIHJldHVybiBzLnBhcmFtcy52aXJ0dWFsLnJlbmRlckV4dGVybmFsLmNhbGwocywge1xuICAgICAgICBvZmZzZXQ6IHgsXG4gICAgICAgIGZyb206IHksXG4gICAgICAgIHRvOiBFLFxuICAgICAgICBzbGlkZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgZSA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIF90MjkgPSB5OyBfdDI5IDw9IEU7IF90MjkgKz0gMSkgZS5wdXNoKHVbX3QyOV0pO1xuICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9KClcbiAgICAgIH0pLCB2b2lkIChzLnBhcmFtcy52aXJ0dWFsLnJlbmRlckV4dGVybmFsVXBkYXRlID8gUygpIDogbihcInZpcnR1YWxVcGRhdGVcIikpO1xuICAgICAgdmFyIFQgPSBbXSxcbiAgICAgICAgTSA9IFtdLFxuICAgICAgICBDID0gZnVuY3Rpb24gQyhlKSB7XG4gICAgICAgICAgdmFyIHQgPSBlO1xuICAgICAgICAgIHJldHVybiBlIDwgMCA/IHQgPSB1Lmxlbmd0aCArIGUgOiB0ID49IHUubGVuZ3RoICYmICh0IC09IHUubGVuZ3RoKSwgdDtcbiAgICAgICAgfTtcbiAgICAgIGlmIChlKSBzLnNsaWRlc0VsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIuY29uY2F0KHMucGFyYW1zLnNsaWRlQ2xhc3MsIFwiLCBzd2lwZXItc2xpZGVcIikpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5yZW1vdmUoKTtcbiAgICAgIH0pO2Vsc2UgZm9yICh2YXIgX2UzOCA9IGM7IF9lMzggPD0gcDsgX2UzOCArPSAxKSBpZiAoX2UzOCA8IHkgfHwgX2UzOCA+IEUpIHtcbiAgICAgICAgdmFyIF90MzAgPSBDKF9lMzgpO1xuICAgICAgICBzLnNsaWRlc0VsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIuY29uY2F0KHMucGFyYW1zLnNsaWRlQ2xhc3MsIFwiW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVxcXCJcIikuY29uY2F0KF90MzAsIFwiXFxcIl0sIHN3aXBlci1zbGlkZVtkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cXFwiXCIpLmNvbmNhdChfdDMwLCBcIlxcXCJdXCIpKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB2YXIgUCA9IHIgPyAtdS5sZW5ndGggOiAwLFxuICAgICAgICBMID0gciA/IDIgKiB1Lmxlbmd0aCA6IHUubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgX3QzMSA9IFA7IF90MzEgPCBMOyBfdDMxICs9IDEpIGlmIChfdDMxID49IHkgJiYgX3QzMSA8PSBFKSB7XG4gICAgICAgIHZhciBfczIzID0gQyhfdDMxKTtcbiAgICAgICAgdm9pZCAwID09PSBwIHx8IGUgPyBNLnB1c2goX3MyMykgOiAoX3QzMSA+IHAgJiYgTS5wdXNoKF9zMjMpLCBfdDMxIDwgYyAmJiBULnB1c2goX3MyMykpO1xuICAgICAgfVxuICAgICAgaWYgKE0uZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBzLnNsaWRlc0VsLmFwcGVuZChkKHVbZV0sIGUpKTtcbiAgICAgIH0pLCByKSBmb3IgKHZhciBfZTM5ID0gVC5sZW5ndGggLSAxOyBfZTM5ID49IDA7IF9lMzkgLT0gMSkge1xuICAgICAgICB2YXIgX3QzMiA9IFRbX2UzOV07XG4gICAgICAgIHMuc2xpZGVzRWwucHJlcGVuZChkKHVbX3QzMl0sIF90MzIpKTtcbiAgICAgIH0gZWxzZSBULnNvcnQoZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHQgLSBlO1xuICAgICAgfSksIFQuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBzLnNsaWRlc0VsLnByZXBlbmQoZCh1W2VdLCBlKSk7XG4gICAgICB9KTtcbiAgICAgIGYocy5zbGlkZXNFbCwgXCIuc3dpcGVyLXNsaWRlLCBzd2lwZXItc2xpZGVcIikuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnN0eWxlW3ZdID0geCAtIE1hdGguYWJzKHMuY3NzT3ZlcmZsb3dBZGp1c3RtZW50KCkpICsgXCJweFwiO1xuICAgICAgfSksIFMoKTtcbiAgICB9XG4gICAgcihcImJlZm9yZUluaXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFzLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQpIHJldHVybjtcbiAgICAgIHZhciBlO1xuICAgICAgaWYgKHZvaWQgMCA9PT0gcy5wYXNzZWRQYXJhbXMudmlydHVhbC5zbGlkZXMpIHtcbiAgICAgICAgdmFyIF90MzMgPSBfdG9Db25zdW1hYmxlQXJyYXkocy5zbGlkZXNFbC5jaGlsZHJlbikuZmlsdGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGUubWF0Y2hlcyhcIi5cIi5jb25jYXQocy5wYXJhbXMuc2xpZGVDbGFzcywgXCIsIHN3aXBlci1zbGlkZVwiKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBfdDMzICYmIF90MzMubGVuZ3RoICYmIChzLnZpcnR1YWwuc2xpZGVzID0gX3RvQ29uc3VtYWJsZUFycmF5KF90MzMpLCBlID0gITAsIF90MzMuZm9yRWFjaChmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIGUuc2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIiwgdCksIHMudmlydHVhbC5jYWNoZVt0XSA9IGUsIGUucmVtb3ZlKCk7XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICAgIGUgfHwgKHMudmlydHVhbC5zbGlkZXMgPSBzLnBhcmFtcy52aXJ0dWFsLnNsaWRlcyksIHMuY2xhc3NOYW1lcy5wdXNoKFwiXCIuY29uY2F0KHMucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MsIFwidmlydHVhbFwiKSksIHMucGFyYW1zLndhdGNoU2xpZGVzUHJvZ3Jlc3MgPSAhMCwgcy5vcmlnaW5hbFBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzID0gITAsIHMucGFyYW1zLmluaXRpYWxTbGlkZSB8fCBjKCk7XG4gICAgfSksIHIoXCJzZXRUcmFuc2xhdGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgcy5wYXJhbXMudmlydHVhbC5lbmFibGVkICYmIChzLnBhcmFtcy5jc3NNb2RlICYmICFzLl9pbW1lZGlhdGVWaXJ0dWFsID8gKGNsZWFyVGltZW91dCh0KSwgdCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBjKCk7XG4gICAgICB9LCAxMDApKSA6IGMoKSk7XG4gICAgfSksIHIoXCJpbml0IHVwZGF0ZSByZXNpemVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgcy5wYXJhbXMudmlydHVhbC5lbmFibGVkICYmIHMucGFyYW1zLmNzc01vZGUgJiYgdShzLndyYXBwZXJFbCwgXCItLXN3aXBlci12aXJ0dWFsLXNpemVcIiwgXCJcIi5jb25jYXQocy52aXJ0dWFsU2l6ZSwgXCJweFwiKSk7XG4gICAgfSksIE9iamVjdC5hc3NpZ24ocy52aXJ0dWFsLCB7XG4gICAgICBhcHBlbmRTbGlkZTogZnVuY3Rpb24gYXBwZW5kU2xpZGUoZSkge1xuICAgICAgICBpZiAoXCJvYmplY3RcIiA9PSBfdHlwZW9mKGUpICYmIFwibGVuZ3RoXCIgaW4gZSkgZm9yICh2YXIgX3QzNCA9IDA7IF90MzQgPCBlLmxlbmd0aDsgX3QzNCArPSAxKSBlW190MzRdICYmIHMudmlydHVhbC5zbGlkZXMucHVzaChlW190MzRdKTtlbHNlIHMudmlydHVhbC5zbGlkZXMucHVzaChlKTtcbiAgICAgICAgYyghMCk7XG4gICAgICB9LFxuICAgICAgcHJlcGVuZFNsaWRlOiBmdW5jdGlvbiBwcmVwZW5kU2xpZGUoZSkge1xuICAgICAgICB2YXIgdCA9IHMuYWN0aXZlSW5kZXg7XG4gICAgICAgIHZhciBhID0gdCArIDEsXG4gICAgICAgICAgaSA9IDE7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSB7XG4gICAgICAgICAgZm9yICh2YXIgX3QzNSA9IDA7IF90MzUgPCBlLmxlbmd0aDsgX3QzNSArPSAxKSBlW190MzVdICYmIHMudmlydHVhbC5zbGlkZXMudW5zaGlmdChlW190MzVdKTtcbiAgICAgICAgICBhID0gdCArIGUubGVuZ3RoLCBpID0gZS5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSBzLnZpcnR1YWwuc2xpZGVzLnVuc2hpZnQoZSk7XG4gICAgICAgIGlmIChzLnBhcmFtcy52aXJ0dWFsLmNhY2hlKSB7XG4gICAgICAgICAgdmFyIF9lNDAgPSBzLnZpcnR1YWwuY2FjaGUsXG4gICAgICAgICAgICBfdDM2ID0ge307XG4gICAgICAgICAgT2JqZWN0LmtleXMoX2U0MCkuZm9yRWFjaChmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgdmFyIGEgPSBfZTQwW3NdLFxuICAgICAgICAgICAgICByID0gYS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKTtcbiAgICAgICAgICAgIHIgJiYgYS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiLCBwYXJzZUludChyLCAxMCkgKyBpKSwgX3QzNltwYXJzZUludChzLCAxMCkgKyBpXSA9IGE7XG4gICAgICAgICAgfSksIHMudmlydHVhbC5jYWNoZSA9IF90MzY7XG4gICAgICAgIH1cbiAgICAgICAgYyghMCksIHMuc2xpZGVUbyhhLCAwKTtcbiAgICAgIH0sXG4gICAgICByZW1vdmVTbGlkZTogZnVuY3Rpb24gcmVtb3ZlU2xpZGUoZSkge1xuICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm47XG4gICAgICAgIHZhciB0ID0gcy5hY3RpdmVJbmRleDtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIGZvciAodmFyIF9hMTIgPSBlLmxlbmd0aCAtIDE7IF9hMTIgPj0gMDsgX2ExMiAtPSAxKSBzLnZpcnR1YWwuc2xpZGVzLnNwbGljZShlW19hMTJdLCAxKSwgcy5wYXJhbXMudmlydHVhbC5jYWNoZSAmJiBkZWxldGUgcy52aXJ0dWFsLmNhY2hlW2VbX2ExMl1dLCBlW19hMTJdIDwgdCAmJiAodCAtPSAxKSwgdCA9IE1hdGgubWF4KHQsIDApO2Vsc2Ugcy52aXJ0dWFsLnNsaWRlcy5zcGxpY2UoZSwgMSksIHMucGFyYW1zLnZpcnR1YWwuY2FjaGUgJiYgZGVsZXRlIHMudmlydHVhbC5jYWNoZVtlXSwgZSA8IHQgJiYgKHQgLT0gMSksIHQgPSBNYXRoLm1heCh0LCAwKTtcbiAgICAgICAgYyghMCksIHMuc2xpZGVUbyh0LCAwKTtcbiAgICAgIH0sXG4gICAgICByZW1vdmVBbGxTbGlkZXM6IGZ1bmN0aW9uIHJlbW92ZUFsbFNsaWRlcygpIHtcbiAgICAgICAgcy52aXJ0dWFsLnNsaWRlcyA9IFtdLCBzLnBhcmFtcy52aXJ0dWFsLmNhY2hlICYmIChzLnZpcnR1YWwuY2FjaGUgPSB7fSksIGMoITApLCBzLnNsaWRlVG8oMCwgMCk7XG4gICAgICB9LFxuICAgICAgdXBkYXRlOiBjXG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQgPSBlLnN3aXBlcixcbiAgICAgIHMgPSBlLmV4dGVuZFBhcmFtcyxcbiAgICAgIGkgPSBlLm9uLFxuICAgICAgbiA9IGUuZW1pdDtcbiAgICB2YXIgbCA9IGEoKSxcbiAgICAgIG8gPSByKCk7XG4gICAgZnVuY3Rpb24gZChlKSB7XG4gICAgICBpZiAoIXQuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgdmFyIHMgPSB0LnJ0bFRyYW5zbGF0ZTtcbiAgICAgIHZhciBhID0gZTtcbiAgICAgIGEub3JpZ2luYWxFdmVudCAmJiAoYSA9IGEub3JpZ2luYWxFdmVudCk7XG4gICAgICB2YXIgaSA9IGEua2V5Q29kZSB8fCBhLmNoYXJDb2RlLFxuICAgICAgICByID0gdC5wYXJhbXMua2V5Ym9hcmQucGFnZVVwRG93bixcbiAgICAgICAgZCA9IHIgJiYgMzMgPT09IGksXG4gICAgICAgIGMgPSByICYmIDM0ID09PSBpLFxuICAgICAgICBwID0gMzcgPT09IGksXG4gICAgICAgIHUgPSAzOSA9PT0gaSxcbiAgICAgICAgbSA9IDM4ID09PSBpLFxuICAgICAgICBoID0gNDAgPT09IGk7XG4gICAgICBpZiAoIXQuYWxsb3dTbGlkZU5leHQgJiYgKHQuaXNIb3Jpem9udGFsKCkgJiYgdSB8fCB0LmlzVmVydGljYWwoKSAmJiBoIHx8IGMpKSByZXR1cm4gITE7XG4gICAgICBpZiAoIXQuYWxsb3dTbGlkZVByZXYgJiYgKHQuaXNIb3Jpem9udGFsKCkgJiYgcCB8fCB0LmlzVmVydGljYWwoKSAmJiBtIHx8IGQpKSByZXR1cm4gITE7XG4gICAgICBpZiAoIShhLnNoaWZ0S2V5IHx8IGEuYWx0S2V5IHx8IGEuY3RybEtleSB8fCBhLm1ldGFLZXkgfHwgbC5hY3RpdmVFbGVtZW50ICYmIGwuYWN0aXZlRWxlbWVudC5ub2RlTmFtZSAmJiAoXCJpbnB1dFwiID09PSBsLmFjdGl2ZUVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSB8fCBcInRleHRhcmVhXCIgPT09IGwuYWN0aXZlRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSkpIHtcbiAgICAgICAgaWYgKHQucGFyYW1zLmtleWJvYXJkLm9ubHlJblZpZXdwb3J0ICYmIChkIHx8IGMgfHwgcCB8fCB1IHx8IG0gfHwgaCkpIHtcbiAgICAgICAgICB2YXIgX2U0MSA9ICExO1xuICAgICAgICAgIGlmICh5KHQuZWwsIFwiLlwiLmNvbmNhdCh0LnBhcmFtcy5zbGlkZUNsYXNzLCBcIiwgc3dpcGVyLXNsaWRlXCIpKS5sZW5ndGggPiAwICYmIDAgPT09IHkodC5lbCwgXCIuXCIuY29uY2F0KHQucGFyYW1zLnNsaWRlQWN0aXZlQ2xhc3MpKS5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgICB2YXIgX2ExMyA9IHQuZWwsXG4gICAgICAgICAgICBfaTExID0gX2ExMy5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgIF9yOCA9IF9hMTMuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgX241ID0gby5pbm5lcldpZHRoLFxuICAgICAgICAgICAgX2w0ID0gby5pbm5lckhlaWdodCxcbiAgICAgICAgICAgIF9kMiA9IHYoX2ExMyk7XG4gICAgICAgICAgcyAmJiAoX2QyLmxlZnQgLT0gX2ExMy5zY3JvbGxMZWZ0KTtcbiAgICAgICAgICB2YXIgX2MyID0gW1tfZDIubGVmdCwgX2QyLnRvcF0sIFtfZDIubGVmdCArIF9pMTEsIF9kMi50b3BdLCBbX2QyLmxlZnQsIF9kMi50b3AgKyBfcjhdLCBbX2QyLmxlZnQgKyBfaTExLCBfZDIudG9wICsgX3I4XV07XG4gICAgICAgICAgZm9yICh2YXIgX3QzNyA9IDA7IF90MzcgPCBfYzIubGVuZ3RoOyBfdDM3ICs9IDEpIHtcbiAgICAgICAgICAgIHZhciBfczI0ID0gX2MyW190MzddO1xuICAgICAgICAgICAgaWYgKF9zMjRbMF0gPj0gMCAmJiBfczI0WzBdIDw9IF9uNSAmJiBfczI0WzFdID49IDAgJiYgX3MyNFsxXSA8PSBfbDQpIHtcbiAgICAgICAgICAgICAgaWYgKDAgPT09IF9zMjRbMF0gJiYgMCA9PT0gX3MyNFsxXSkgY29udGludWU7XG4gICAgICAgICAgICAgIF9lNDEgPSAhMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFfZTQxKSByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdC5pc0hvcml6b250YWwoKSA/ICgoZCB8fCBjIHx8IHAgfHwgdSkgJiYgKGEucHJldmVudERlZmF1bHQgPyBhLnByZXZlbnREZWZhdWx0KCkgOiBhLnJldHVyblZhbHVlID0gITEpLCAoKGMgfHwgdSkgJiYgIXMgfHwgKGQgfHwgcCkgJiYgcykgJiYgdC5zbGlkZU5leHQoKSwgKChkIHx8IHApICYmICFzIHx8IChjIHx8IHUpICYmIHMpICYmIHQuc2xpZGVQcmV2KCkpIDogKChkIHx8IGMgfHwgbSB8fCBoKSAmJiAoYS5wcmV2ZW50RGVmYXVsdCA/IGEucHJldmVudERlZmF1bHQoKSA6IGEucmV0dXJuVmFsdWUgPSAhMSksIChjIHx8IGgpICYmIHQuc2xpZGVOZXh0KCksIChkIHx8IG0pICYmIHQuc2xpZGVQcmV2KCkpLCBuKFwia2V5UHJlc3NcIiwgaSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGMoKSB7XG4gICAgICB0LmtleWJvYXJkLmVuYWJsZWQgfHwgKGwuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZCksIHQua2V5Ym9hcmQuZW5hYmxlZCA9ICEwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcCgpIHtcbiAgICAgIHQua2V5Ym9hcmQuZW5hYmxlZCAmJiAobC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBkKSwgdC5rZXlib2FyZC5lbmFibGVkID0gITEpO1xuICAgIH1cbiAgICB0LmtleWJvYXJkID0ge1xuICAgICAgZW5hYmxlZDogITFcbiAgICB9LCBzKHtcbiAgICAgIGtleWJvYXJkOiB7XG4gICAgICAgIGVuYWJsZWQ6ICExLFxuICAgICAgICBvbmx5SW5WaWV3cG9ydDogITAsXG4gICAgICAgIHBhZ2VVcERvd246ICEwXG4gICAgICB9XG4gICAgfSksIGkoXCJpbml0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHQucGFyYW1zLmtleWJvYXJkLmVuYWJsZWQgJiYgYygpO1xuICAgIH0pLCBpKFwiZGVzdHJveVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0LmtleWJvYXJkLmVuYWJsZWQgJiYgcCgpO1xuICAgIH0pLCBPYmplY3QuYXNzaWduKHQua2V5Ym9hcmQsIHtcbiAgICAgIGVuYWJsZTogYyxcbiAgICAgIGRpc2FibGU6IHBcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgYSA9IGUub24sXG4gICAgICBpID0gZS5lbWl0O1xuICAgIHZhciBvID0gcigpO1xuICAgIHZhciBkO1xuICAgIHMoe1xuICAgICAgbW91c2V3aGVlbDoge1xuICAgICAgICBlbmFibGVkOiAhMSxcbiAgICAgICAgcmVsZWFzZU9uRWRnZXM6ICExLFxuICAgICAgICBpbnZlcnQ6ICExLFxuICAgICAgICBmb3JjZVRvQXhpczogITEsXG4gICAgICAgIHNlbnNpdGl2aXR5OiAxLFxuICAgICAgICBldmVudHNUYXJnZXQ6IFwiY29udGFpbmVyXCIsXG4gICAgICAgIHRocmVzaG9sZERlbHRhOiBudWxsLFxuICAgICAgICB0aHJlc2hvbGRUaW1lOiBudWxsLFxuICAgICAgICBub01vdXNld2hlZWxDbGFzczogXCJzd2lwZXItbm8tbW91c2V3aGVlbFwiXG4gICAgICB9XG4gICAgfSksIHQubW91c2V3aGVlbCA9IHtcbiAgICAgIGVuYWJsZWQ6ICExXG4gICAgfTtcbiAgICB2YXIgYyxcbiAgICAgIHAgPSBsKCk7XG4gICAgdmFyIHUgPSBbXTtcbiAgICBmdW5jdGlvbiBtKCkge1xuICAgICAgdC5lbmFibGVkICYmICh0Lm1vdXNlRW50ZXJlZCA9ICEwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaCgpIHtcbiAgICAgIHQuZW5hYmxlZCAmJiAodC5tb3VzZUVudGVyZWQgPSAhMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGYoZSkge1xuICAgICAgcmV0dXJuICEodC5wYXJhbXMubW91c2V3aGVlbC50aHJlc2hvbGREZWx0YSAmJiBlLmRlbHRhIDwgdC5wYXJhbXMubW91c2V3aGVlbC50aHJlc2hvbGREZWx0YSkgJiYgISh0LnBhcmFtcy5tb3VzZXdoZWVsLnRocmVzaG9sZFRpbWUgJiYgbCgpIC0gcCA8IHQucGFyYW1zLm1vdXNld2hlZWwudGhyZXNob2xkVGltZSkgJiYgKGUuZGVsdGEgPj0gNiAmJiBsKCkgLSBwIDwgNjAgfHwgKGUuZGlyZWN0aW9uIDwgMCA/IHQuaXNFbmQgJiYgIXQucGFyYW1zLmxvb3AgfHwgdC5hbmltYXRpbmcgfHwgKHQuc2xpZGVOZXh0KCksIGkoXCJzY3JvbGxcIiwgZS5yYXcpKSA6IHQuaXNCZWdpbm5pbmcgJiYgIXQucGFyYW1zLmxvb3AgfHwgdC5hbmltYXRpbmcgfHwgKHQuc2xpZGVQcmV2KCksIGkoXCJzY3JvbGxcIiwgZS5yYXcpKSwgcCA9IG5ldyBvLkRhdGUoKS5nZXRUaW1lKCksICExKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGcoZSkge1xuICAgICAgdmFyIHMgPSBlLFxuICAgICAgICBhID0gITA7XG4gICAgICBpZiAoIXQuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoXCIuXCIuY29uY2F0KHQucGFyYW1zLm1vdXNld2hlZWwubm9Nb3VzZXdoZWVsQ2xhc3MpKSkgcmV0dXJuO1xuICAgICAgdmFyIHIgPSB0LnBhcmFtcy5tb3VzZXdoZWVsO1xuICAgICAgdC5wYXJhbXMuY3NzTW9kZSAmJiBzLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgbyA9IHQuZWw7XG4gICAgICBcImNvbnRhaW5lclwiICE9PSB0LnBhcmFtcy5tb3VzZXdoZWVsLmV2ZW50c1RhcmdldCAmJiAobyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodC5wYXJhbXMubW91c2V3aGVlbC5ldmVudHNUYXJnZXQpKTtcbiAgICAgIHZhciBwID0gbyAmJiBvLmNvbnRhaW5zKHMudGFyZ2V0KTtcbiAgICAgIGlmICghdC5tb3VzZUVudGVyZWQgJiYgIXAgJiYgIXIucmVsZWFzZU9uRWRnZXMpIHJldHVybiAhMDtcbiAgICAgIHMub3JpZ2luYWxFdmVudCAmJiAocyA9IHMub3JpZ2luYWxFdmVudCk7XG4gICAgICB2YXIgbSA9IDA7XG4gICAgICB2YXIgaCA9IHQucnRsVHJhbnNsYXRlID8gLTEgOiAxLFxuICAgICAgICBnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB2YXIgdCA9IDAsXG4gICAgICAgICAgICBzID0gMCxcbiAgICAgICAgICAgIGEgPSAwLFxuICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgcmV0dXJuIFwiZGV0YWlsXCIgaW4gZSAmJiAocyA9IGUuZGV0YWlsKSwgXCJ3aGVlbERlbHRhXCIgaW4gZSAmJiAocyA9IC1lLndoZWVsRGVsdGEgLyAxMjApLCBcIndoZWVsRGVsdGFZXCIgaW4gZSAmJiAocyA9IC1lLndoZWVsRGVsdGFZIC8gMTIwKSwgXCJ3aGVlbERlbHRhWFwiIGluIGUgJiYgKHQgPSAtZS53aGVlbERlbHRhWCAvIDEyMCksIFwiYXhpc1wiIGluIGUgJiYgZS5heGlzID09PSBlLkhPUklaT05UQUxfQVhJUyAmJiAodCA9IHMsIHMgPSAwKSwgYSA9IDEwICogdCwgaSA9IDEwICogcywgXCJkZWx0YVlcIiBpbiBlICYmIChpID0gZS5kZWx0YVkpLCBcImRlbHRhWFwiIGluIGUgJiYgKGEgPSBlLmRlbHRhWCksIGUuc2hpZnRLZXkgJiYgIWEgJiYgKGEgPSBpLCBpID0gMCksIChhIHx8IGkpICYmIGUuZGVsdGFNb2RlICYmICgxID09PSBlLmRlbHRhTW9kZSA/IChhICo9IDQwLCBpICo9IDQwKSA6IChhICo9IDgwMCwgaSAqPSA4MDApKSwgYSAmJiAhdCAmJiAodCA9IGEgPCAxID8gLTEgOiAxKSwgaSAmJiAhcyAmJiAocyA9IGkgPCAxID8gLTEgOiAxKSwge1xuICAgICAgICAgICAgc3Bpblg6IHQsXG4gICAgICAgICAgICBzcGluWTogcyxcbiAgICAgICAgICAgIHBpeGVsWDogYSxcbiAgICAgICAgICAgIHBpeGVsWTogaVxuICAgICAgICAgIH07XG4gICAgICAgIH0ocyk7XG4gICAgICBpZiAoci5mb3JjZVRvQXhpcykge1xuICAgICAgICBpZiAodC5pc0hvcml6b250YWwoKSkge1xuICAgICAgICAgIGlmICghKE1hdGguYWJzKGcucGl4ZWxYKSA+IE1hdGguYWJzKGcucGl4ZWxZKSkpIHJldHVybiAhMDtcbiAgICAgICAgICBtID0gLWcucGl4ZWxYICogaDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIShNYXRoLmFicyhnLnBpeGVsWSkgPiBNYXRoLmFicyhnLnBpeGVsWCkpKSByZXR1cm4gITA7XG4gICAgICAgICAgbSA9IC1nLnBpeGVsWTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIG0gPSBNYXRoLmFicyhnLnBpeGVsWCkgPiBNYXRoLmFicyhnLnBpeGVsWSkgPyAtZy5waXhlbFggKiBoIDogLWcucGl4ZWxZO1xuICAgICAgaWYgKDAgPT09IG0pIHJldHVybiAhMDtcbiAgICAgIHIuaW52ZXJ0ICYmIChtID0gLW0pO1xuICAgICAgdmFyIHYgPSB0LmdldFRyYW5zbGF0ZSgpICsgbSAqIHIuc2Vuc2l0aXZpdHk7XG4gICAgICBpZiAodiA+PSB0Lm1pblRyYW5zbGF0ZSgpICYmICh2ID0gdC5taW5UcmFuc2xhdGUoKSksIHYgPD0gdC5tYXhUcmFuc2xhdGUoKSAmJiAodiA9IHQubWF4VHJhbnNsYXRlKCkpLCBhID0gISF0LnBhcmFtcy5sb29wIHx8ICEodiA9PT0gdC5taW5UcmFuc2xhdGUoKSB8fCB2ID09PSB0Lm1heFRyYW5zbGF0ZSgpKSwgYSAmJiB0LnBhcmFtcy5uZXN0ZWQgJiYgcy5zdG9wUHJvcGFnYXRpb24oKSwgdC5wYXJhbXMuZnJlZU1vZGUgJiYgdC5wYXJhbXMuZnJlZU1vZGUuZW5hYmxlZCkge1xuICAgICAgICB2YXIgX2U0MiA9IHtcbiAgICAgICAgICAgIHRpbWU6IGwoKSxcbiAgICAgICAgICAgIGRlbHRhOiBNYXRoLmFicyhtKSxcbiAgICAgICAgICAgIGRpcmVjdGlvbjogTWF0aC5zaWduKG0pXG4gICAgICAgICAgfSxcbiAgICAgICAgICBfYTE0ID0gYyAmJiBfZTQyLnRpbWUgPCBjLnRpbWUgKyA1MDAgJiYgX2U0Mi5kZWx0YSA8PSBjLmRlbHRhICYmIF9lNDIuZGlyZWN0aW9uID09PSBjLmRpcmVjdGlvbjtcbiAgICAgICAgaWYgKCFfYTE0KSB7XG4gICAgICAgICAgYyA9IHZvaWQgMDtcbiAgICAgICAgICB2YXIgX2w1ID0gdC5nZXRUcmFuc2xhdGUoKSArIG0gKiByLnNlbnNpdGl2aXR5O1xuICAgICAgICAgIHZhciBfbzUgPSB0LmlzQmVnaW5uaW5nLFxuICAgICAgICAgICAgX3AyID0gdC5pc0VuZDtcbiAgICAgICAgICBpZiAoX2w1ID49IHQubWluVHJhbnNsYXRlKCkgJiYgKF9sNSA9IHQubWluVHJhbnNsYXRlKCkpLCBfbDUgPD0gdC5tYXhUcmFuc2xhdGUoKSAmJiAoX2w1ID0gdC5tYXhUcmFuc2xhdGUoKSksIHQuc2V0VHJhbnNpdGlvbigwKSwgdC5zZXRUcmFuc2xhdGUoX2w1KSwgdC51cGRhdGVQcm9ncmVzcygpLCB0LnVwZGF0ZUFjdGl2ZUluZGV4KCksIHQudXBkYXRlU2xpZGVzQ2xhc3NlcygpLCAoIV9vNSAmJiB0LmlzQmVnaW5uaW5nIHx8ICFfcDIgJiYgdC5pc0VuZCkgJiYgdC51cGRhdGVTbGlkZXNDbGFzc2VzKCksIHQucGFyYW1zLmxvb3AgJiYgdC5sb29wRml4KHtcbiAgICAgICAgICAgIGRpcmVjdGlvbjogX2U0Mi5kaXJlY3Rpb24gPCAwID8gXCJuZXh0XCIgOiBcInByZXZcIixcbiAgICAgICAgICAgIGJ5TW91c2V3aGVlbDogITBcbiAgICAgICAgICB9KSwgdC5wYXJhbXMuZnJlZU1vZGUuc3RpY2t5KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoZCksIGQgPSB2b2lkIDAsIHUubGVuZ3RoID49IDE1ICYmIHUuc2hpZnQoKTtcbiAgICAgICAgICAgIHZhciBfczI1ID0gdS5sZW5ndGggPyB1W3UubGVuZ3RoIC0gMV0gOiB2b2lkIDAsXG4gICAgICAgICAgICAgIF9hMTUgPSB1WzBdO1xuICAgICAgICAgICAgaWYgKHUucHVzaChfZTQyKSwgX3MyNSAmJiAoX2U0Mi5kZWx0YSA+IF9zMjUuZGVsdGEgfHwgX2U0Mi5kaXJlY3Rpb24gIT09IF9zMjUuZGlyZWN0aW9uKSkgdS5zcGxpY2UoMCk7ZWxzZSBpZiAodS5sZW5ndGggPj0gMTUgJiYgX2U0Mi50aW1lIC0gX2ExNS50aW1lIDwgNTAwICYmIF9hMTUuZGVsdGEgLSBfZTQyLmRlbHRhID49IDEgJiYgX2U0Mi5kZWx0YSA8PSA2KSB7XG4gICAgICAgICAgICAgIHZhciBfczI2ID0gbSA+IDAgPyAuOCA6IC4yO1xuICAgICAgICAgICAgICBjID0gX2U0MiwgdS5zcGxpY2UoMCksIGQgPSBuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0LnNsaWRlVG9DbG9zZXN0KHQucGFyYW1zLnNwZWVkLCAhMCwgdm9pZCAwLCBfczI2KTtcbiAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkIHx8IChkID0gbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGMgPSBfZTQyLCB1LnNwbGljZSgwKSwgdC5zbGlkZVRvQ2xvc2VzdCh0LnBhcmFtcy5zcGVlZCwgITAsIHZvaWQgMCwgLjUpO1xuICAgICAgICAgICAgfSwgNTAwKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChfYTE0IHx8IGkoXCJzY3JvbGxcIiwgcyksIHQucGFyYW1zLmF1dG9wbGF5ICYmIHQucGFyYW1zLmF1dG9wbGF5RGlzYWJsZU9uSW50ZXJhY3Rpb24gJiYgdC5hdXRvcGxheS5zdG9wKCksIF9sNSA9PT0gdC5taW5UcmFuc2xhdGUoKSB8fCBfbDUgPT09IHQubWF4VHJhbnNsYXRlKCkpIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIF9zMjcgPSB7XG4gICAgICAgICAgdGltZTogbCgpLFxuICAgICAgICAgIGRlbHRhOiBNYXRoLmFicyhtKSxcbiAgICAgICAgICBkaXJlY3Rpb246IE1hdGguc2lnbihtKSxcbiAgICAgICAgICByYXc6IGVcbiAgICAgICAgfTtcbiAgICAgICAgdS5sZW5ndGggPj0gMiAmJiB1LnNoaWZ0KCk7XG4gICAgICAgIHZhciBfYTE2ID0gdS5sZW5ndGggPyB1W3UubGVuZ3RoIC0gMV0gOiB2b2lkIDA7XG4gICAgICAgIGlmICh1LnB1c2goX3MyNyksIF9hMTYgPyAoX3MyNy5kaXJlY3Rpb24gIT09IF9hMTYuZGlyZWN0aW9uIHx8IF9zMjcuZGVsdGEgPiBfYTE2LmRlbHRhIHx8IF9zMjcudGltZSA+IF9hMTYudGltZSArIDE1MCkgJiYgZihfczI3KSA6IGYoX3MyNyksIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdmFyIHMgPSB0LnBhcmFtcy5tb3VzZXdoZWVsO1xuICAgICAgICAgIGlmIChlLmRpcmVjdGlvbiA8IDApIHtcbiAgICAgICAgICAgIGlmICh0LmlzRW5kICYmICF0LnBhcmFtcy5sb29wICYmIHMucmVsZWFzZU9uRWRnZXMpIHJldHVybiAhMDtcbiAgICAgICAgICB9IGVsc2UgaWYgKHQuaXNCZWdpbm5pbmcgJiYgIXQucGFyYW1zLmxvb3AgJiYgcy5yZWxlYXNlT25FZGdlcykgcmV0dXJuICEwO1xuICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfShfczI3KSkgcmV0dXJuICEwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHMucHJldmVudERlZmF1bHQgPyBzLnByZXZlbnREZWZhdWx0KCkgOiBzLnJldHVyblZhbHVlID0gITEsICExO1xuICAgIH1cbiAgICBmdW5jdGlvbiB2KGUpIHtcbiAgICAgIHZhciBzID0gdC5lbDtcbiAgICAgIFwiY29udGFpbmVyXCIgIT09IHQucGFyYW1zLm1vdXNld2hlZWwuZXZlbnRzVGFyZ2V0ICYmIChzID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0LnBhcmFtcy5tb3VzZXdoZWVsLmV2ZW50c1RhcmdldCkpLCBzW2VdKFwibW91c2VlbnRlclwiLCBtKSwgc1tlXShcIm1vdXNlbGVhdmVcIiwgaCksIHNbZV0oXCJ3aGVlbFwiLCBnKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdygpIHtcbiAgICAgIHJldHVybiB0LnBhcmFtcy5jc3NNb2RlID8gKHQud3JhcHBlckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCBnKSwgITApIDogIXQubW91c2V3aGVlbC5lbmFibGVkICYmICh2KFwiYWRkRXZlbnRMaXN0ZW5lclwiKSwgdC5tb3VzZXdoZWVsLmVuYWJsZWQgPSAhMCwgITApO1xuICAgIH1cbiAgICBmdW5jdGlvbiBiKCkge1xuICAgICAgcmV0dXJuIHQucGFyYW1zLmNzc01vZGUgPyAodC53cmFwcGVyRWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZyksICEwKSA6ICEhdC5tb3VzZXdoZWVsLmVuYWJsZWQgJiYgKHYoXCJyZW1vdmVFdmVudExpc3RlbmVyXCIpLCB0Lm1vdXNld2hlZWwuZW5hYmxlZCA9ICExLCAhMCk7XG4gICAgfVxuICAgIGEoXCJpbml0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICF0LnBhcmFtcy5tb3VzZXdoZWVsLmVuYWJsZWQgJiYgdC5wYXJhbXMuY3NzTW9kZSAmJiBiKCksIHQucGFyYW1zLm1vdXNld2hlZWwuZW5hYmxlZCAmJiB3KCk7XG4gICAgfSksIGEoXCJkZXN0cm95XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHQucGFyYW1zLmNzc01vZGUgJiYgdygpLCB0Lm1vdXNld2hlZWwuZW5hYmxlZCAmJiBiKCk7XG4gICAgfSksIE9iamVjdC5hc3NpZ24odC5tb3VzZXdoZWVsLCB7XG4gICAgICBlbmFibGU6IHcsXG4gICAgICBkaXNhYmxlOiBiXG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQgPSBlLnN3aXBlcixcbiAgICAgIHMgPSBlLmV4dGVuZFBhcmFtcyxcbiAgICAgIGEgPSBlLm9uLFxuICAgICAgaSA9IGUuZW1pdDtcbiAgICBzKHtcbiAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgbmV4dEVsOiBudWxsLFxuICAgICAgICBwcmV2RWw6IG51bGwsXG4gICAgICAgIGhpZGVPbkNsaWNrOiAhMSxcbiAgICAgICAgZGlzYWJsZWRDbGFzczogXCJzd2lwZXItYnV0dG9uLWRpc2FibGVkXCIsXG4gICAgICAgIGhpZGRlbkNsYXNzOiBcInN3aXBlci1idXR0b24taGlkZGVuXCIsXG4gICAgICAgIGxvY2tDbGFzczogXCJzd2lwZXItYnV0dG9uLWxvY2tcIixcbiAgICAgICAgbmF2aWdhdGlvbkRpc2FibGVkQ2xhc3M6IFwic3dpcGVyLW5hdmlnYXRpb24tZGlzYWJsZWRcIlxuICAgICAgfVxuICAgIH0pLCB0Lm5hdmlnYXRpb24gPSB7XG4gICAgICBuZXh0RWw6IG51bGwsXG4gICAgICBwcmV2RWw6IG51bGxcbiAgICB9O1xuICAgIHZhciByID0gZnVuY3Rpb24gcihlKSB7XG4gICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShlKSB8fCAoZSA9IFtlXS5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuICEhZTtcbiAgICAgIH0pKSwgZTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIG4oZSkge1xuICAgICAgdmFyIHM7XG4gICAgICByZXR1cm4gZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIHQuaXNFbGVtZW50ICYmIChzID0gdC5lbC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoZSksIHMpID8gcyA6IChlICYmIChcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIChzID0gX3RvQ29uc3VtYWJsZUFycmF5KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZSkpKSwgdC5wYXJhbXMudW5pcXVlTmF2RWxlbWVudHMgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiBzLmxlbmd0aCA+IDEgJiYgMSA9PT0gdC5lbC5xdWVyeVNlbGVjdG9yQWxsKGUpLmxlbmd0aCAmJiAocyA9IHQuZWwucXVlcnlTZWxlY3RvcihlKSkpLCBlICYmICFzID8gZSA6IHMpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsKGUsIHMpIHtcbiAgICAgIHZhciBhID0gdC5wYXJhbXMubmF2aWdhdGlvbjtcbiAgICAgIChlID0gcihlKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgX2UkY2xhc3NMaXN0MjtcbiAgICAgICAgZSAmJiAoKF9lJGNsYXNzTGlzdDIgPSBlLmNsYXNzTGlzdClbcyA/IFwiYWRkXCIgOiBcInJlbW92ZVwiXS5hcHBseShfZSRjbGFzc0xpc3QyLCBfdG9Db25zdW1hYmxlQXJyYXkoYS5kaXNhYmxlZENsYXNzLnNwbGl0KFwiIFwiKSkpLCBcIkJVVFRPTlwiID09PSBlLnRhZ05hbWUgJiYgKGUuZGlzYWJsZWQgPSBzKSwgdC5wYXJhbXMud2F0Y2hPdmVyZmxvdyAmJiB0LmVuYWJsZWQgJiYgZS5jbGFzc0xpc3RbdC5pc0xvY2tlZCA/IFwiYWRkXCIgOiBcInJlbW92ZVwiXShhLmxvY2tDbGFzcykpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG8oKSB7XG4gICAgICB2YXIgX3QkbmF2aWdhdGlvbiA9IHQubmF2aWdhdGlvbixcbiAgICAgICAgZSA9IF90JG5hdmlnYXRpb24ubmV4dEVsLFxuICAgICAgICBzID0gX3QkbmF2aWdhdGlvbi5wcmV2RWw7XG4gICAgICBpZiAodC5wYXJhbXMubG9vcCkgcmV0dXJuIGwocywgITEpLCB2b2lkIGwoZSwgITEpO1xuICAgICAgbChzLCB0LmlzQmVnaW5uaW5nICYmICF0LnBhcmFtcy5yZXdpbmQpLCBsKGUsIHQuaXNFbmQgJiYgIXQucGFyYW1zLnJld2luZCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGQoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpLCAoIXQuaXNCZWdpbm5pbmcgfHwgdC5wYXJhbXMubG9vcCB8fCB0LnBhcmFtcy5yZXdpbmQpICYmICh0LnNsaWRlUHJldigpLCBpKFwibmF2aWdhdGlvblByZXZcIikpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKSwgKCF0LmlzRW5kIHx8IHQucGFyYW1zLmxvb3AgfHwgdC5wYXJhbXMucmV3aW5kKSAmJiAodC5zbGlkZU5leHQoKSwgaShcIm5hdmlnYXRpb25OZXh0XCIpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcCgpIHtcbiAgICAgIHZhciBlID0gdC5wYXJhbXMubmF2aWdhdGlvbjtcbiAgICAgIGlmICh0LnBhcmFtcy5uYXZpZ2F0aW9uID0gZWUodCwgdC5vcmlnaW5hbFBhcmFtcy5uYXZpZ2F0aW9uLCB0LnBhcmFtcy5uYXZpZ2F0aW9uLCB7XG4gICAgICAgIG5leHRFbDogXCJzd2lwZXItYnV0dG9uLW5leHRcIixcbiAgICAgICAgcHJldkVsOiBcInN3aXBlci1idXR0b24tcHJldlwiXG4gICAgICB9KSwgIWUubmV4dEVsICYmICFlLnByZXZFbCkgcmV0dXJuO1xuICAgICAgdmFyIHMgPSBuKGUubmV4dEVsKSxcbiAgICAgICAgYSA9IG4oZS5wcmV2RWwpO1xuICAgICAgT2JqZWN0LmFzc2lnbih0Lm5hdmlnYXRpb24sIHtcbiAgICAgICAgbmV4dEVsOiBzLFxuICAgICAgICBwcmV2RWw6IGFcbiAgICAgIH0pLCBzID0gcihzKSwgYSA9IHIoYSk7XG4gICAgICB2YXIgaSA9IGZ1bmN0aW9uIGkocywgYSkge1xuICAgICAgICB2YXIgX3MkY2xhc3NMaXN0MjtcbiAgICAgICAgcyAmJiBzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBcIm5leHRcIiA9PT0gYSA/IGMgOiBkKSwgIXQuZW5hYmxlZCAmJiBzICYmIChfcyRjbGFzc0xpc3QyID0gcy5jbGFzc0xpc3QpLmFkZC5hcHBseShfcyRjbGFzc0xpc3QyLCBfdG9Db25zdW1hYmxlQXJyYXkoZS5sb2NrQ2xhc3Muc3BsaXQoXCIgXCIpKSk7XG4gICAgICB9O1xuICAgICAgcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBpKGUsIFwibmV4dFwiKTtcbiAgICAgIH0pLCBhLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIGkoZSwgXCJwcmV2XCIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHUoKSB7XG4gICAgICB2YXIgX3QkbmF2aWdhdGlvbjIgPSB0Lm5hdmlnYXRpb24sXG4gICAgICAgIGUgPSBfdCRuYXZpZ2F0aW9uMi5uZXh0RWwsXG4gICAgICAgIHMgPSBfdCRuYXZpZ2F0aW9uMi5wcmV2RWw7XG4gICAgICBlID0gcihlKSwgcyA9IHIocyk7XG4gICAgICB2YXIgYSA9IGZ1bmN0aW9uIGEoZSwgcykge1xuICAgICAgICB2YXIgX2UkY2xhc3NMaXN0MztcbiAgICAgICAgZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgXCJuZXh0XCIgPT09IHMgPyBjIDogZCksIChfZSRjbGFzc0xpc3QzID0gZS5jbGFzc0xpc3QpLnJlbW92ZS5hcHBseShfZSRjbGFzc0xpc3QzLCBfdG9Db25zdW1hYmxlQXJyYXkodC5wYXJhbXMubmF2aWdhdGlvbi5kaXNhYmxlZENsYXNzLnNwbGl0KFwiIFwiKSkpO1xuICAgICAgfTtcbiAgICAgIGUuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gYShlLCBcIm5leHRcIik7XG4gICAgICB9KSwgcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBhKGUsIFwicHJldlwiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBhKFwiaW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAhMSA9PT0gdC5wYXJhbXMubmF2aWdhdGlvbi5lbmFibGVkID8gbSgpIDogKHAoKSwgbygpKTtcbiAgICB9KSwgYShcInRvRWRnZSBmcm9tRWRnZSBsb2NrIHVubG9ja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBvKCk7XG4gICAgfSksIGEoXCJkZXN0cm95XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHUoKTtcbiAgICB9KSwgYShcImVuYWJsZSBkaXNhYmxlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfdCRuYXZpZ2F0aW9uMyA9IHQubmF2aWdhdGlvbixcbiAgICAgICAgZSA9IF90JG5hdmlnYXRpb24zLm5leHRFbCxcbiAgICAgICAgcyA9IF90JG5hdmlnYXRpb24zLnByZXZFbDtcbiAgICAgIGUgPSByKGUpLCBzID0gcihzKSwgW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShlKSwgX3RvQ29uc3VtYWJsZUFycmF5KHMpKS5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuICEhZTtcbiAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIGUuY2xhc3NMaXN0W3QuZW5hYmxlZCA/IFwicmVtb3ZlXCIgOiBcImFkZFwiXSh0LnBhcmFtcy5uYXZpZ2F0aW9uLmxvY2tDbGFzcyk7XG4gICAgICB9KTtcbiAgICB9KSwgYShcImNsaWNrXCIsIGZ1bmN0aW9uIChlLCBzKSB7XG4gICAgICB2YXIgX3QkbmF2aWdhdGlvbjQgPSB0Lm5hdmlnYXRpb24sXG4gICAgICAgIGEgPSBfdCRuYXZpZ2F0aW9uNC5uZXh0RWwsXG4gICAgICAgIG4gPSBfdCRuYXZpZ2F0aW9uNC5wcmV2RWw7XG4gICAgICBhID0gcihhKSwgbiA9IHIobik7XG4gICAgICB2YXIgbCA9IHMudGFyZ2V0O1xuICAgICAgaWYgKHQucGFyYW1zLm5hdmlnYXRpb24uaGlkZU9uQ2xpY2sgJiYgIW4uaW5jbHVkZXMobCkgJiYgIWEuaW5jbHVkZXMobCkpIHtcbiAgICAgICAgaWYgKHQucGFnaW5hdGlvbiAmJiB0LnBhcmFtcy5wYWdpbmF0aW9uICYmIHQucGFyYW1zLnBhZ2luYXRpb24uY2xpY2thYmxlICYmICh0LnBhZ2luYXRpb24uZWwgPT09IGwgfHwgdC5wYWdpbmF0aW9uLmVsLmNvbnRhaW5zKGwpKSkgcmV0dXJuO1xuICAgICAgICB2YXIgX2U0MztcbiAgICAgICAgYS5sZW5ndGggPyBfZTQzID0gYVswXS5jbGFzc0xpc3QuY29udGFpbnModC5wYXJhbXMubmF2aWdhdGlvbi5oaWRkZW5DbGFzcykgOiBuLmxlbmd0aCAmJiAoX2U0MyA9IG5bMF0uY2xhc3NMaXN0LmNvbnRhaW5zKHQucGFyYW1zLm5hdmlnYXRpb24uaGlkZGVuQ2xhc3MpKSwgaSghMCA9PT0gX2U0MyA/IFwibmF2aWdhdGlvblNob3dcIiA6IFwibmF2aWdhdGlvbkhpZGVcIiksIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYSksIF90b0NvbnN1bWFibGVBcnJheShuKSkuZmlsdGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuICEhZTtcbiAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBlLmNsYXNzTGlzdC50b2dnbGUodC5wYXJhbXMubmF2aWdhdGlvbi5oaWRkZW5DbGFzcyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBtID0gZnVuY3Rpb24gbSgpIHtcbiAgICAgIHZhciBfdCRlbCRjbGFzc0xpc3Q7XG4gICAgICAoX3QkZWwkY2xhc3NMaXN0ID0gdC5lbC5jbGFzc0xpc3QpLmFkZC5hcHBseShfdCRlbCRjbGFzc0xpc3QsIF90b0NvbnN1bWFibGVBcnJheSh0LnBhcmFtcy5uYXZpZ2F0aW9uLm5hdmlnYXRpb25EaXNhYmxlZENsYXNzLnNwbGl0KFwiIFwiKSkpLCB1KCk7XG4gICAgfTtcbiAgICBPYmplY3QuYXNzaWduKHQubmF2aWdhdGlvbiwge1xuICAgICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICAgIHZhciBfdCRlbCRjbGFzc0xpc3QyO1xuICAgICAgICAoX3QkZWwkY2xhc3NMaXN0MiA9IHQuZWwuY2xhc3NMaXN0KS5yZW1vdmUuYXBwbHkoX3QkZWwkY2xhc3NMaXN0MiwgX3RvQ29uc3VtYWJsZUFycmF5KHQucGFyYW1zLm5hdmlnYXRpb24ubmF2aWdhdGlvbkRpc2FibGVkQ2xhc3Muc3BsaXQoXCIgXCIpKSksIHAoKSwgbygpO1xuICAgICAgfSxcbiAgICAgIGRpc2FibGU6IG0sXG4gICAgICB1cGRhdGU6IG8sXG4gICAgICBpbml0OiBwLFxuICAgICAgZGVzdHJveTogdVxuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICBhID0gZS5vbixcbiAgICAgIGkgPSBlLmVtaXQ7XG4gICAgdmFyIHIgPSBcInN3aXBlci1wYWdpbmF0aW9uXCI7XG4gICAgdmFyIG47XG4gICAgcyh7XG4gICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIGVsOiBudWxsLFxuICAgICAgICBidWxsZXRFbGVtZW50OiBcInNwYW5cIixcbiAgICAgICAgY2xpY2thYmxlOiAhMSxcbiAgICAgICAgaGlkZU9uQ2xpY2s6ICExLFxuICAgICAgICByZW5kZXJCdWxsZXQ6IG51bGwsXG4gICAgICAgIHJlbmRlclByb2dyZXNzYmFyOiBudWxsLFxuICAgICAgICByZW5kZXJGcmFjdGlvbjogbnVsbCxcbiAgICAgICAgcmVuZGVyQ3VzdG9tOiBudWxsLFxuICAgICAgICBwcm9ncmVzc2Jhck9wcG9zaXRlOiAhMSxcbiAgICAgICAgdHlwZTogXCJidWxsZXRzXCIsXG4gICAgICAgIGR5bmFtaWNCdWxsZXRzOiAhMSxcbiAgICAgICAgZHluYW1pY01haW5CdWxsZXRzOiAxLFxuICAgICAgICBmb3JtYXRGcmFjdGlvbkN1cnJlbnQ6IGZ1bmN0aW9uIGZvcm1hdEZyYWN0aW9uQ3VycmVudChlKSB7XG4gICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH0sXG4gICAgICAgIGZvcm1hdEZyYWN0aW9uVG90YWw6IGZ1bmN0aW9uIGZvcm1hdEZyYWN0aW9uVG90YWwoZSkge1xuICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9LFxuICAgICAgICBidWxsZXRDbGFzczogXCJcIi5jb25jYXQociwgXCItYnVsbGV0XCIpLFxuICAgICAgICBidWxsZXRBY3RpdmVDbGFzczogXCJcIi5jb25jYXQociwgXCItYnVsbGV0LWFjdGl2ZVwiKSxcbiAgICAgICAgbW9kaWZpZXJDbGFzczogXCJcIi5jb25jYXQociwgXCItXCIpLFxuICAgICAgICBjdXJyZW50Q2xhc3M6IFwiXCIuY29uY2F0KHIsIFwiLWN1cnJlbnRcIiksXG4gICAgICAgIHRvdGFsQ2xhc3M6IFwiXCIuY29uY2F0KHIsIFwiLXRvdGFsXCIpLFxuICAgICAgICBoaWRkZW5DbGFzczogXCJcIi5jb25jYXQociwgXCItaGlkZGVuXCIpLFxuICAgICAgICBwcm9ncmVzc2JhckZpbGxDbGFzczogXCJcIi5jb25jYXQociwgXCItcHJvZ3Jlc3NiYXItZmlsbFwiKSxcbiAgICAgICAgcHJvZ3Jlc3NiYXJPcHBvc2l0ZUNsYXNzOiBcIlwiLmNvbmNhdChyLCBcIi1wcm9ncmVzc2Jhci1vcHBvc2l0ZVwiKSxcbiAgICAgICAgY2xpY2thYmxlQ2xhc3M6IFwiXCIuY29uY2F0KHIsIFwiLWNsaWNrYWJsZVwiKSxcbiAgICAgICAgbG9ja0NsYXNzOiBcIlwiLmNvbmNhdChyLCBcIi1sb2NrXCIpLFxuICAgICAgICBob3Jpem9udGFsQ2xhc3M6IFwiXCIuY29uY2F0KHIsIFwiLWhvcml6b250YWxcIiksXG4gICAgICAgIHZlcnRpY2FsQ2xhc3M6IFwiXCIuY29uY2F0KHIsIFwiLXZlcnRpY2FsXCIpLFxuICAgICAgICBwYWdpbmF0aW9uRGlzYWJsZWRDbGFzczogXCJcIi5jb25jYXQociwgXCItZGlzYWJsZWRcIilcbiAgICAgIH1cbiAgICB9KSwgdC5wYWdpbmF0aW9uID0ge1xuICAgICAgZWw6IG51bGwsXG4gICAgICBidWxsZXRzOiBbXVxuICAgIH07XG4gICAgdmFyIGwgPSAwO1xuICAgIHZhciBvID0gZnVuY3Rpb24gbyhlKSB7XG4gICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShlKSB8fCAoZSA9IFtlXS5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuICEhZTtcbiAgICAgIH0pKSwgZTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGQoKSB7XG4gICAgICByZXR1cm4gIXQucGFyYW1zLnBhZ2luYXRpb24uZWwgfHwgIXQucGFnaW5hdGlvbi5lbCB8fCBBcnJheS5pc0FycmF5KHQucGFnaW5hdGlvbi5lbCkgJiYgMCA9PT0gdC5wYWdpbmF0aW9uLmVsLmxlbmd0aDtcbiAgICB9XG4gICAgZnVuY3Rpb24gYyhlLCBzKSB7XG4gICAgICB2YXIgYSA9IHQucGFyYW1zLnBhZ2luYXRpb24uYnVsbGV0QWN0aXZlQ2xhc3M7XG4gICAgICBlICYmIChlID0gZVsoXCJwcmV2XCIgPT09IHMgPyBcInByZXZpb3VzXCIgOiBcIm5leHRcIikgKyBcIkVsZW1lbnRTaWJsaW5nXCJdKSAmJiAoZS5jbGFzc0xpc3QuYWRkKFwiXCIuY29uY2F0KGEsIFwiLVwiKS5jb25jYXQocykpLCAoZSA9IGVbKFwicHJldlwiID09PSBzID8gXCJwcmV2aW91c1wiIDogXCJuZXh0XCIpICsgXCJFbGVtZW50U2libGluZ1wiXSkgJiYgZS5jbGFzc0xpc3QuYWRkKFwiXCIuY29uY2F0KGEsIFwiLVwiKS5jb25jYXQocywgXCItXCIpLmNvbmNhdChzKSkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwKGUpIHtcbiAgICAgIHZhciBzID0gZS50YXJnZXQuY2xvc2VzdCh0ZSh0LnBhcmFtcy5wYWdpbmF0aW9uLmJ1bGxldENsYXNzKSk7XG4gICAgICBpZiAoIXMpIHJldHVybjtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciBhID0gYihzKSAqIHQucGFyYW1zLnNsaWRlc1Blckdyb3VwO1xuICAgICAgaWYgKHQucGFyYW1zLmxvb3ApIHtcbiAgICAgICAgaWYgKHQucmVhbEluZGV4ID09PSBhKSByZXR1cm47XG4gICAgICAgIHZhciBfZTQ0ID0gdC5nZXRTbGlkZUluZGV4QnlEYXRhKGEpLFxuICAgICAgICAgIF9zMjggPSB0LmdldFNsaWRlSW5kZXhCeURhdGEodC5yZWFsSW5kZXgpO1xuICAgICAgICBfZTQ0ID4gdC5zbGlkZXMubGVuZ3RoIC0gdC5sb29wZWRTbGlkZXMgJiYgdC5sb29wRml4KHtcbiAgICAgICAgICBkaXJlY3Rpb246IF9lNDQgPiBfczI4ID8gXCJuZXh0XCIgOiBcInByZXZcIixcbiAgICAgICAgICBhY3RpdmVTbGlkZUluZGV4OiBfZTQ0LFxuICAgICAgICAgIHNsaWRlVG86ICExXG4gICAgICAgIH0pLCB0LnNsaWRlVG9Mb29wKGEpO1xuICAgICAgfSBlbHNlIHQuc2xpZGVUbyhhKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdSgpIHtcbiAgICAgIHZhciBlID0gdC5ydGwsXG4gICAgICAgIHMgPSB0LnBhcmFtcy5wYWdpbmF0aW9uO1xuICAgICAgaWYgKGQoKSkgcmV0dXJuO1xuICAgICAgdmFyIGEsXG4gICAgICAgIHIsXG4gICAgICAgIHAgPSB0LnBhZ2luYXRpb24uZWw7XG4gICAgICBwID0gbyhwKTtcbiAgICAgIHZhciB1ID0gdC52aXJ0dWFsICYmIHQucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCA/IHQudmlydHVhbC5zbGlkZXMubGVuZ3RoIDogdC5zbGlkZXMubGVuZ3RoLFxuICAgICAgICBtID0gdC5wYXJhbXMubG9vcCA/IE1hdGguY2VpbCh1IC8gdC5wYXJhbXMuc2xpZGVzUGVyR3JvdXApIDogdC5zbmFwR3JpZC5sZW5ndGg7XG4gICAgICBpZiAodC5wYXJhbXMubG9vcCA/IChyID0gdC5wcmV2aW91c1JlYWxJbmRleCB8fCAwLCBhID0gdC5wYXJhbXMuc2xpZGVzUGVyR3JvdXAgPiAxID8gTWF0aC5mbG9vcih0LnJlYWxJbmRleCAvIHQucGFyYW1zLnNsaWRlc1Blckdyb3VwKSA6IHQucmVhbEluZGV4KSA6IHZvaWQgMCAhPT0gdC5zbmFwSW5kZXggPyAoYSA9IHQuc25hcEluZGV4LCByID0gdC5wcmV2aW91c1NuYXBJbmRleCkgOiAociA9IHQucHJldmlvdXNJbmRleCB8fCAwLCBhID0gdC5hY3RpdmVJbmRleCB8fCAwKSwgXCJidWxsZXRzXCIgPT09IHMudHlwZSAmJiB0LnBhZ2luYXRpb24uYnVsbGV0cyAmJiB0LnBhZ2luYXRpb24uYnVsbGV0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBfaTEyID0gdC5wYWdpbmF0aW9uLmJ1bGxldHM7XG4gICAgICAgIHZhciBfbzYsIF9kMywgX3UyO1xuICAgICAgICBpZiAocy5keW5hbWljQnVsbGV0cyAmJiAobiA9IHgoX2kxMlswXSwgdC5pc0hvcml6b250YWwoKSA/IFwid2lkdGhcIiA6IFwiaGVpZ2h0XCIsICEwKSwgcC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS5zdHlsZVt0LmlzSG9yaXpvbnRhbCgpID8gXCJ3aWR0aFwiIDogXCJoZWlnaHRcIl0gPSBuICogKHMuZHluYW1pY01haW5CdWxsZXRzICsgNCkgKyBcInB4XCI7XG4gICAgICAgIH0pLCBzLmR5bmFtaWNNYWluQnVsbGV0cyA+IDEgJiYgdm9pZCAwICE9PSByICYmIChsICs9IGEgLSAociB8fCAwKSwgbCA+IHMuZHluYW1pY01haW5CdWxsZXRzIC0gMSA/IGwgPSBzLmR5bmFtaWNNYWluQnVsbGV0cyAtIDEgOiBsIDwgMCAmJiAobCA9IDApKSwgX282ID0gTWF0aC5tYXgoYSAtIGwsIDApLCBfZDMgPSBfbzYgKyAoTWF0aC5taW4oX2kxMi5sZW5ndGgsIHMuZHluYW1pY01haW5CdWxsZXRzKSAtIDEpLCBfdTIgPSAoX2QzICsgX282KSAvIDIpLCBfaTEyLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB2YXIgX2UkY2xhc3NMaXN0NDtcbiAgICAgICAgICB2YXIgdCA9IF90b0NvbnN1bWFibGVBcnJheShbXCJcIiwgXCItbmV4dFwiLCBcIi1uZXh0LW5leHRcIiwgXCItcHJldlwiLCBcIi1wcmV2LXByZXZcIiwgXCItbWFpblwiXS5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiLmNvbmNhdChzLmJ1bGxldEFjdGl2ZUNsYXNzKS5jb25jYXQoZSk7XG4gICAgICAgICAgfSkpLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgZS5pbmNsdWRlcyhcIiBcIikgPyBlLnNwbGl0KFwiIFwiKSA6IGU7XG4gICAgICAgICAgfSkuZmxhdCgpO1xuICAgICAgICAgIChfZSRjbGFzc0xpc3Q0ID0gZS5jbGFzc0xpc3QpLnJlbW92ZS5hcHBseShfZSRjbGFzc0xpc3Q0LCBfdG9Db25zdW1hYmxlQXJyYXkodCkpO1xuICAgICAgICB9KSwgcC5sZW5ndGggPiAxKSBfaTEyLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB2YXIgX2UkY2xhc3NMaXN0NSwgX2UkY2xhc3NMaXN0NjtcbiAgICAgICAgICB2YXIgaSA9IGIoZSk7XG4gICAgICAgICAgaSA9PT0gYSA/IChfZSRjbGFzc0xpc3Q1ID0gZS5jbGFzc0xpc3QpLmFkZC5hcHBseShfZSRjbGFzc0xpc3Q1LCBfdG9Db25zdW1hYmxlQXJyYXkocy5idWxsZXRBY3RpdmVDbGFzcy5zcGxpdChcIiBcIikpKSA6IHQuaXNFbGVtZW50ICYmIGUuc2V0QXR0cmlidXRlKFwicGFydFwiLCBcImJ1bGxldFwiKSwgcy5keW5hbWljQnVsbGV0cyAmJiAoaSA+PSBfbzYgJiYgaSA8PSBfZDMgJiYgKF9lJGNsYXNzTGlzdDYgPSBlLmNsYXNzTGlzdCkuYWRkLmFwcGx5KF9lJGNsYXNzTGlzdDYsIF90b0NvbnN1bWFibGVBcnJheShcIlwiLmNvbmNhdChzLmJ1bGxldEFjdGl2ZUNsYXNzLCBcIi1tYWluXCIpLnNwbGl0KFwiIFwiKSkpLCBpID09PSBfbzYgJiYgYyhlLCBcInByZXZcIiksIGkgPT09IF9kMyAmJiBjKGUsIFwibmV4dFwiKSk7XG4gICAgICAgIH0pO2Vsc2Uge1xuICAgICAgICAgIHZhciBfZTQ1JGNsYXNzTGlzdDtcbiAgICAgICAgICB2YXIgX2U0NSA9IF9pMTJbYV07XG4gICAgICAgICAgaWYgKF9lNDUgJiYgKF9lNDUkY2xhc3NMaXN0ID0gX2U0NS5jbGFzc0xpc3QpLmFkZC5hcHBseShfZTQ1JGNsYXNzTGlzdCwgX3RvQ29uc3VtYWJsZUFycmF5KHMuYnVsbGV0QWN0aXZlQ2xhc3Muc3BsaXQoXCIgXCIpKSksIHQuaXNFbGVtZW50ICYmIF9pMTIuZm9yRWFjaChmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgZS5zZXRBdHRyaWJ1dGUoXCJwYXJ0XCIsIHQgPT09IGEgPyBcImJ1bGxldC1hY3RpdmVcIiA6IFwiYnVsbGV0XCIpO1xuICAgICAgICAgIH0pLCBzLmR5bmFtaWNCdWxsZXRzKSB7XG4gICAgICAgICAgICB2YXIgX2U0NiA9IF9pMTJbX282XSxcbiAgICAgICAgICAgICAgX3QzOCA9IF9pMTJbX2QzXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9lNDcgPSBfbzY7IF9lNDcgPD0gX2QzOyBfZTQ3ICs9IDEpIHtcbiAgICAgICAgICAgICAgdmFyIF9pMTIkX2U0NyRjbGFzc0xpc3Q7XG4gICAgICAgICAgICAgIF9pMTJbX2U0N10gJiYgKF9pMTIkX2U0NyRjbGFzc0xpc3QgPSBfaTEyW19lNDddLmNsYXNzTGlzdCkuYWRkLmFwcGx5KF9pMTIkX2U0NyRjbGFzc0xpc3QsIF90b0NvbnN1bWFibGVBcnJheShcIlwiLmNvbmNhdChzLmJ1bGxldEFjdGl2ZUNsYXNzLCBcIi1tYWluXCIpLnNwbGl0KFwiIFwiKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYyhfZTQ2LCBcInByZXZcIiksIGMoX3QzOCwgXCJuZXh0XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocy5keW5hbWljQnVsbGV0cykge1xuICAgICAgICAgIHZhciBfYTE3ID0gTWF0aC5taW4oX2kxMi5sZW5ndGgsIHMuZHluYW1pY01haW5CdWxsZXRzICsgNCksXG4gICAgICAgICAgICBfcjkgPSAobiAqIF9hMTcgLSBuKSAvIDIgLSBfdTIgKiBuLFxuICAgICAgICAgICAgX2w2ID0gZSA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xuICAgICAgICAgIF9pMTIuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5zdHlsZVt0LmlzSG9yaXpvbnRhbCgpID8gX2w2IDogXCJ0b3BcIl0gPSBcIlwiLmNvbmNhdChfcjksIFwicHhcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHAuZm9yRWFjaChmdW5jdGlvbiAoZSwgcikge1xuICAgICAgICBpZiAoXCJmcmFjdGlvblwiID09PSBzLnR5cGUgJiYgKGUucXVlcnlTZWxlY3RvckFsbCh0ZShzLmN1cnJlbnRDbGFzcykpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBlLnRleHRDb250ZW50ID0gcy5mb3JtYXRGcmFjdGlvbkN1cnJlbnQoYSArIDEpO1xuICAgICAgICB9KSwgZS5xdWVyeVNlbGVjdG9yQWxsKHRlKHMudG90YWxDbGFzcykpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBlLnRleHRDb250ZW50ID0gcy5mb3JtYXRGcmFjdGlvblRvdGFsKG0pO1xuICAgICAgICB9KSksIFwicHJvZ3Jlc3NiYXJcIiA9PT0gcy50eXBlKSB7XG4gICAgICAgICAgdmFyIF9pMTM7XG4gICAgICAgICAgX2kxMyA9IHMucHJvZ3Jlc3NiYXJPcHBvc2l0ZSA/IHQuaXNIb3Jpem9udGFsKCkgPyBcInZlcnRpY2FsXCIgOiBcImhvcml6b250YWxcIiA6IHQuaXNIb3Jpem9udGFsKCkgPyBcImhvcml6b250YWxcIiA6IFwidmVydGljYWxcIjtcbiAgICAgICAgICB2YXIgX3IxMCA9IChhICsgMSkgLyBtO1xuICAgICAgICAgIHZhciBfbjYgPSAxLFxuICAgICAgICAgICAgX2w3ID0gMTtcbiAgICAgICAgICBcImhvcml6b250YWxcIiA9PT0gX2kxMyA/IF9uNiA9IF9yMTAgOiBfbDcgPSBfcjEwLCBlLnF1ZXJ5U2VsZWN0b3JBbGwodGUocy5wcm9ncmVzc2JhckZpbGxDbGFzcykpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZCgwLDAsMCkgc2NhbGVYKFwiLmNvbmNhdChfbjYsIFwiKSBzY2FsZVkoXCIpLmNvbmNhdChfbDcsIFwiKVwiKSwgZS5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdCh0LnBhcmFtcy5zcGVlZCwgXCJtc1wiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcImN1c3RvbVwiID09PSBzLnR5cGUgJiYgcy5yZW5kZXJDdXN0b20gPyAoZS5pbm5lckhUTUwgPSBzLnJlbmRlckN1c3RvbSh0LCBhICsgMSwgbSksIDAgPT09IHIgJiYgaShcInBhZ2luYXRpb25SZW5kZXJcIiwgZSkpIDogKDAgPT09IHIgJiYgaShcInBhZ2luYXRpb25SZW5kZXJcIiwgZSksIGkoXCJwYWdpbmF0aW9uVXBkYXRlXCIsIGUpKSwgdC5wYXJhbXMud2F0Y2hPdmVyZmxvdyAmJiB0LmVuYWJsZWQgJiYgZS5jbGFzc0xpc3RbdC5pc0xvY2tlZCA/IFwiYWRkXCIgOiBcInJlbW92ZVwiXShzLmxvY2tDbGFzcyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbSgpIHtcbiAgICAgIHZhciBlID0gdC5wYXJhbXMucGFnaW5hdGlvbjtcbiAgICAgIGlmIChkKCkpIHJldHVybjtcbiAgICAgIHZhciBzID0gdC52aXJ0dWFsICYmIHQucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCA/IHQudmlydHVhbC5zbGlkZXMubGVuZ3RoIDogdC5zbGlkZXMubGVuZ3RoO1xuICAgICAgdmFyIGEgPSB0LnBhZ2luYXRpb24uZWw7XG4gICAgICBhID0gbyhhKTtcbiAgICAgIHZhciByID0gXCJcIjtcbiAgICAgIGlmIChcImJ1bGxldHNcIiA9PT0gZS50eXBlKSB7XG4gICAgICAgIHZhciBfYTE4ID0gdC5wYXJhbXMubG9vcCA/IE1hdGguY2VpbChzIC8gdC5wYXJhbXMuc2xpZGVzUGVyR3JvdXApIDogdC5zbmFwR3JpZC5sZW5ndGg7XG4gICAgICAgIHQucGFyYW1zLmZyZWVNb2RlICYmIHQucGFyYW1zLmZyZWVNb2RlLmVuYWJsZWQgJiYgX2ExOCA+IHMgJiYgKF9hMTggPSBzKTtcbiAgICAgICAgZm9yICh2YXIgX3MyOSA9IDA7IF9zMjkgPCBfYTE4OyBfczI5ICs9IDEpIGUucmVuZGVyQnVsbGV0ID8gciArPSBlLnJlbmRlckJ1bGxldC5jYWxsKHQsIF9zMjksIGUuYnVsbGV0Q2xhc3MpIDogciArPSBcIjxcIi5jb25jYXQoZS5idWxsZXRFbGVtZW50LCBcIiBcIikuY29uY2F0KHQuaXNFbGVtZW50ID8gJ3BhcnQ9XCJidWxsZXRcIicgOiBcIlwiLCBcIiBjbGFzcz1cXFwiXCIpLmNvbmNhdChlLmJ1bGxldENsYXNzLCBcIlxcXCI+PC9cIikuY29uY2F0KGUuYnVsbGV0RWxlbWVudCwgXCI+XCIpO1xuICAgICAgfVxuICAgICAgXCJmcmFjdGlvblwiID09PSBlLnR5cGUgJiYgKHIgPSBlLnJlbmRlckZyYWN0aW9uID8gZS5yZW5kZXJGcmFjdGlvbi5jYWxsKHQsIGUuY3VycmVudENsYXNzLCBlLnRvdGFsQ2xhc3MpIDogXCI8c3BhbiBjbGFzcz1cXFwiXCIuY29uY2F0KGUuY3VycmVudENsYXNzLCBcIlxcXCI+PC9zcGFuPiAvIDxzcGFuIGNsYXNzPVxcXCJcIikuY29uY2F0KGUudG90YWxDbGFzcywgXCJcXFwiPjwvc3Bhbj5cIikpLCBcInByb2dyZXNzYmFyXCIgPT09IGUudHlwZSAmJiAociA9IGUucmVuZGVyUHJvZ3Jlc3NiYXIgPyBlLnJlbmRlclByb2dyZXNzYmFyLmNhbGwodCwgZS5wcm9ncmVzc2JhckZpbGxDbGFzcykgOiBcIjxzcGFuIGNsYXNzPVxcXCJcIi5jb25jYXQoZS5wcm9ncmVzc2JhckZpbGxDbGFzcywgXCJcXFwiPjwvc3Bhbj5cIikpLCB0LnBhZ2luYXRpb24uYnVsbGV0cyA9IFtdLCBhLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgdmFyIF90JHBhZ2luYXRpb24kYnVsbGV0cztcbiAgICAgICAgXCJjdXN0b21cIiAhPT0gZS50eXBlICYmIChzLmlubmVySFRNTCA9IHIgfHwgXCJcIiksIFwiYnVsbGV0c1wiID09PSBlLnR5cGUgJiYgKF90JHBhZ2luYXRpb24kYnVsbGV0cyA9IHQucGFnaW5hdGlvbi5idWxsZXRzKS5wdXNoLmFwcGx5KF90JHBhZ2luYXRpb24kYnVsbGV0cywgX3RvQ29uc3VtYWJsZUFycmF5KHMucXVlcnlTZWxlY3RvckFsbCh0ZShlLmJ1bGxldENsYXNzKSkpKTtcbiAgICAgIH0pLCBcImN1c3RvbVwiICE9PSBlLnR5cGUgJiYgaShcInBhZ2luYXRpb25SZW5kZXJcIiwgYVswXSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGgoKSB7XG4gICAgICB0LnBhcmFtcy5wYWdpbmF0aW9uID0gZWUodCwgdC5vcmlnaW5hbFBhcmFtcy5wYWdpbmF0aW9uLCB0LnBhcmFtcy5wYWdpbmF0aW9uLCB7XG4gICAgICAgIGVsOiBcInN3aXBlci1wYWdpbmF0aW9uXCJcbiAgICAgIH0pO1xuICAgICAgdmFyIGUgPSB0LnBhcmFtcy5wYWdpbmF0aW9uO1xuICAgICAgaWYgKCFlLmVsKSByZXR1cm47XG4gICAgICB2YXIgcztcbiAgICAgIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUuZWwgJiYgdC5pc0VsZW1lbnQgJiYgKHMgPSB0LmVsLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihlLmVsKSksIHMgfHwgXCJzdHJpbmdcIiAhPSB0eXBlb2YgZS5lbCB8fCAocyA9IF90b0NvbnN1bWFibGVBcnJheShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGUuZWwpKSksIHMgfHwgKHMgPSBlLmVsKSwgcyAmJiAwICE9PSBzLmxlbmd0aCAmJiAodC5wYXJhbXMudW5pcXVlTmF2RWxlbWVudHMgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS5lbCAmJiBBcnJheS5pc0FycmF5KHMpICYmIHMubGVuZ3RoID4gMSAmJiAocyA9IF90b0NvbnN1bWFibGVBcnJheSh0LmVsLnF1ZXJ5U2VsZWN0b3JBbGwoZS5lbCkpLCBzLmxlbmd0aCA+IDEgJiYgKHMgPSBzLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4geShlLCBcIi5zd2lwZXJcIilbMF0gPT09IHQuZWw7XG4gICAgICB9KVswXSkpLCBBcnJheS5pc0FycmF5KHMpICYmIDEgPT09IHMubGVuZ3RoICYmIChzID0gc1swXSksIE9iamVjdC5hc3NpZ24odC5wYWdpbmF0aW9uLCB7XG4gICAgICAgIGVsOiBzXG4gICAgICB9KSwgcyA9IG8ocyksIHMuZm9yRWFjaChmdW5jdGlvbiAocykge1xuICAgICAgICBcImJ1bGxldHNcIiA9PT0gZS50eXBlICYmIGUuY2xpY2thYmxlICYmIHMuY2xhc3NMaXN0LmFkZChlLmNsaWNrYWJsZUNsYXNzKSwgcy5jbGFzc0xpc3QuYWRkKGUubW9kaWZpZXJDbGFzcyArIGUudHlwZSksIHMuY2xhc3NMaXN0LmFkZCh0LmlzSG9yaXpvbnRhbCgpID8gZS5ob3Jpem9udGFsQ2xhc3MgOiBlLnZlcnRpY2FsQ2xhc3MpLCBcImJ1bGxldHNcIiA9PT0gZS50eXBlICYmIGUuZHluYW1pY0J1bGxldHMgJiYgKHMuY2xhc3NMaXN0LmFkZChcIlwiLmNvbmNhdChlLm1vZGlmaWVyQ2xhc3MpLmNvbmNhdChlLnR5cGUsIFwiLWR5bmFtaWNcIikpLCBsID0gMCwgZS5keW5hbWljTWFpbkJ1bGxldHMgPCAxICYmIChlLmR5bmFtaWNNYWluQnVsbGV0cyA9IDEpKSwgXCJwcm9ncmVzc2JhclwiID09PSBlLnR5cGUgJiYgZS5wcm9ncmVzc2Jhck9wcG9zaXRlICYmIHMuY2xhc3NMaXN0LmFkZChlLnByb2dyZXNzYmFyT3Bwb3NpdGVDbGFzcyksIGUuY2xpY2thYmxlICYmIHMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHApLCB0LmVuYWJsZWQgfHwgcy5jbGFzc0xpc3QuYWRkKGUubG9ja0NsYXNzKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZigpIHtcbiAgICAgIHZhciBlID0gdC5wYXJhbXMucGFnaW5hdGlvbjtcbiAgICAgIGlmIChkKCkpIHJldHVybjtcbiAgICAgIHZhciBzID0gdC5wYWdpbmF0aW9uLmVsO1xuICAgICAgcyAmJiAocyA9IG8ocyksIHMuZm9yRWFjaChmdW5jdGlvbiAocykge1xuICAgICAgICBzLmNsYXNzTGlzdC5yZW1vdmUoZS5oaWRkZW5DbGFzcyksIHMuY2xhc3NMaXN0LnJlbW92ZShlLm1vZGlmaWVyQ2xhc3MgKyBlLnR5cGUpLCBzLmNsYXNzTGlzdC5yZW1vdmUodC5pc0hvcml6b250YWwoKSA/IGUuaG9yaXpvbnRhbENsYXNzIDogZS52ZXJ0aWNhbENsYXNzKSwgZS5jbGlja2FibGUgJiYgcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcCk7XG4gICAgICB9KSksIHQucGFnaW5hdGlvbi5idWxsZXRzICYmIHQucGFnaW5hdGlvbi5idWxsZXRzLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgdmFyIF90JGNsYXNzTGlzdDtcbiAgICAgICAgcmV0dXJuIChfdCRjbGFzc0xpc3QgPSB0LmNsYXNzTGlzdCkucmVtb3ZlLmFwcGx5KF90JGNsYXNzTGlzdCwgX3RvQ29uc3VtYWJsZUFycmF5KGUuYnVsbGV0QWN0aXZlQ2xhc3Muc3BsaXQoXCIgXCIpKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgYShcImNoYW5nZURpcmVjdGlvblwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXQucGFnaW5hdGlvbiB8fCAhdC5wYWdpbmF0aW9uLmVsKSByZXR1cm47XG4gICAgICB2YXIgZSA9IHQucGFyYW1zLnBhZ2luYXRpb247XG4gICAgICB2YXIgcyA9IHQucGFnaW5hdGlvbi5lbDtcbiAgICAgIHMgPSBvKHMpLCBzLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcy5jbGFzc0xpc3QucmVtb3ZlKGUuaG9yaXpvbnRhbENsYXNzLCBlLnZlcnRpY2FsQ2xhc3MpLCBzLmNsYXNzTGlzdC5hZGQodC5pc0hvcml6b250YWwoKSA/IGUuaG9yaXpvbnRhbENsYXNzIDogZS52ZXJ0aWNhbENsYXNzKTtcbiAgICAgIH0pO1xuICAgIH0pLCBhKFwiaW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAhMSA9PT0gdC5wYXJhbXMucGFnaW5hdGlvbi5lbmFibGVkID8gZygpIDogKGgoKSwgbSgpLCB1KCkpO1xuICAgIH0pLCBhKFwiYWN0aXZlSW5kZXhDaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdm9pZCAwID09PSB0LnNuYXBJbmRleCAmJiB1KCk7XG4gICAgfSksIGEoXCJzbmFwSW5kZXhDaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdSgpO1xuICAgIH0pLCBhKFwic25hcEdyaWRMZW5ndGhDaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgbSgpLCB1KCk7XG4gICAgfSksIGEoXCJkZXN0cm95XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGYoKTtcbiAgICB9KSwgYShcImVuYWJsZSBkaXNhYmxlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBlID0gdC5wYWdpbmF0aW9uLmVsO1xuICAgICAgZSAmJiAoZSA9IG8oZSksIGUuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gZS5jbGFzc0xpc3RbdC5lbmFibGVkID8gXCJyZW1vdmVcIiA6IFwiYWRkXCJdKHQucGFyYW1zLnBhZ2luYXRpb24ubG9ja0NsYXNzKTtcbiAgICAgIH0pKTtcbiAgICB9KSwgYShcImxvY2sgdW5sb2NrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHUoKTtcbiAgICB9KSwgYShcImNsaWNrXCIsIGZ1bmN0aW9uIChlLCBzKSB7XG4gICAgICB2YXIgYSA9IHMudGFyZ2V0O1xuICAgICAgdmFyIHIgPSB0LnBhZ2luYXRpb24uZWw7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShyKSB8fCAociA9IFtyXS5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuICEhZTtcbiAgICAgIH0pKSwgdC5wYXJhbXMucGFnaW5hdGlvbi5lbCAmJiB0LnBhcmFtcy5wYWdpbmF0aW9uLmhpZGVPbkNsaWNrICYmIHIgJiYgci5sZW5ndGggPiAwICYmICFhLmNsYXNzTGlzdC5jb250YWlucyh0LnBhcmFtcy5wYWdpbmF0aW9uLmJ1bGxldENsYXNzKSkge1xuICAgICAgICBpZiAodC5uYXZpZ2F0aW9uICYmICh0Lm5hdmlnYXRpb24ubmV4dEVsICYmIGEgPT09IHQubmF2aWdhdGlvbi5uZXh0RWwgfHwgdC5uYXZpZ2F0aW9uLnByZXZFbCAmJiBhID09PSB0Lm5hdmlnYXRpb24ucHJldkVsKSkgcmV0dXJuO1xuICAgICAgICB2YXIgX2U0OCA9IHJbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKHQucGFyYW1zLnBhZ2luYXRpb24uaGlkZGVuQ2xhc3MpO1xuICAgICAgICBpKCEwID09PSBfZTQ4ID8gXCJwYWdpbmF0aW9uU2hvd1wiIDogXCJwYWdpbmF0aW9uSGlkZVwiKSwgci5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGUuY2xhc3NMaXN0LnRvZ2dsZSh0LnBhcmFtcy5wYWdpbmF0aW9uLmhpZGRlbkNsYXNzKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdmFyIGcgPSBmdW5jdGlvbiBnKCkge1xuICAgICAgdC5lbC5jbGFzc0xpc3QuYWRkKHQucGFyYW1zLnBhZ2luYXRpb24ucGFnaW5hdGlvbkRpc2FibGVkQ2xhc3MpO1xuICAgICAgdmFyIGUgPSB0LnBhZ2luYXRpb24uZWw7XG4gICAgICBlICYmIChlID0gbyhlKSwgZS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBlLmNsYXNzTGlzdC5hZGQodC5wYXJhbXMucGFnaW5hdGlvbi5wYWdpbmF0aW9uRGlzYWJsZWRDbGFzcyk7XG4gICAgICB9KSksIGYoKTtcbiAgICB9O1xuICAgIE9iamVjdC5hc3NpZ24odC5wYWdpbmF0aW9uLCB7XG4gICAgICBlbmFibGU6IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICAgICAgdC5lbC5jbGFzc0xpc3QucmVtb3ZlKHQucGFyYW1zLnBhZ2luYXRpb24ucGFnaW5hdGlvbkRpc2FibGVkQ2xhc3MpO1xuICAgICAgICB2YXIgZSA9IHQucGFnaW5hdGlvbi5lbDtcbiAgICAgICAgZSAmJiAoZSA9IG8oZSksIGUuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBlLmNsYXNzTGlzdC5yZW1vdmUodC5wYXJhbXMucGFnaW5hdGlvbi5wYWdpbmF0aW9uRGlzYWJsZWRDbGFzcyk7XG4gICAgICAgIH0pKSwgaCgpLCBtKCksIHUoKTtcbiAgICAgIH0sXG4gICAgICBkaXNhYmxlOiBnLFxuICAgICAgcmVuZGVyOiBtLFxuICAgICAgdXBkYXRlOiB1LFxuICAgICAgaW5pdDogaCxcbiAgICAgIGRlc3Ryb3k6IGZcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgaSA9IGUub24sXG4gICAgICByID0gZS5lbWl0O1xuICAgIHZhciBsID0gYSgpO1xuICAgIHZhciBvLFxuICAgICAgZCxcbiAgICAgIGMsXG4gICAgICBwLFxuICAgICAgdSA9ICExLFxuICAgICAgbSA9IG51bGwsXG4gICAgICBoID0gbnVsbDtcbiAgICBmdW5jdGlvbiBmKCkge1xuICAgICAgaWYgKCF0LnBhcmFtcy5zY3JvbGxiYXIuZWwgfHwgIXQuc2Nyb2xsYmFyLmVsKSByZXR1cm47XG4gICAgICB2YXIgZSA9IHQuc2Nyb2xsYmFyLFxuICAgICAgICBzID0gdC5ydGxUcmFuc2xhdGUsXG4gICAgICAgIGEgPSBlLmRyYWdFbCxcbiAgICAgICAgaSA9IGUuZWwsXG4gICAgICAgIHIgPSB0LnBhcmFtcy5zY3JvbGxiYXIsXG4gICAgICAgIG4gPSB0LnBhcmFtcy5sb29wID8gdC5wcm9ncmVzc0xvb3AgOiB0LnByb2dyZXNzO1xuICAgICAgdmFyIGwgPSBkLFxuICAgICAgICBvID0gKGMgLSBkKSAqIG47XG4gICAgICBzID8gKG8gPSAtbywgbyA+IDAgPyAobCA9IGQgLSBvLCBvID0gMCkgOiAtbyArIGQgPiBjICYmIChsID0gYyArIG8pKSA6IG8gPCAwID8gKGwgPSBkICsgbywgbyA9IDApIDogbyArIGQgPiBjICYmIChsID0gYyAtIG8pLCB0LmlzSG9yaXpvbnRhbCgpID8gKGEuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZChcIi5jb25jYXQobywgXCJweCwgMCwgMClcIiksIGEuc3R5bGUud2lkdGggPSBcIlwiLmNvbmNhdChsLCBcInB4XCIpKSA6IChhLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoMHB4LCBcIi5jb25jYXQobywgXCJweCwgMClcIiksIGEuc3R5bGUuaGVpZ2h0ID0gXCJcIi5jb25jYXQobCwgXCJweFwiKSksIHIuaGlkZSAmJiAoY2xlYXJUaW1lb3V0KG0pLCBpLnN0eWxlLm9wYWNpdHkgPSAxLCBtID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGkuc3R5bGUub3BhY2l0eSA9IDAsIGkuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCI0MDBtc1wiO1xuICAgICAgfSwgMWUzKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHcoKSB7XG4gICAgICBpZiAoIXQucGFyYW1zLnNjcm9sbGJhci5lbCB8fCAhdC5zY3JvbGxiYXIuZWwpIHJldHVybjtcbiAgICAgIHZhciBlID0gdC5zY3JvbGxiYXIsXG4gICAgICAgIHMgPSBlLmRyYWdFbCxcbiAgICAgICAgYSA9IGUuZWw7XG4gICAgICBzLnN0eWxlLndpZHRoID0gXCJcIiwgcy5zdHlsZS5oZWlnaHQgPSBcIlwiLCBjID0gdC5pc0hvcml6b250YWwoKSA/IGEub2Zmc2V0V2lkdGggOiBhLm9mZnNldEhlaWdodCwgcCA9IHQuc2l6ZSAvICh0LnZpcnR1YWxTaXplICsgdC5wYXJhbXMuc2xpZGVzT2Zmc2V0QmVmb3JlIC0gKHQucGFyYW1zLmNlbnRlcmVkU2xpZGVzID8gdC5zbmFwR3JpZFswXSA6IDApKSwgZCA9IFwiYXV0b1wiID09PSB0LnBhcmFtcy5zY3JvbGxiYXIuZHJhZ1NpemUgPyBjICogcCA6IHBhcnNlSW50KHQucGFyYW1zLnNjcm9sbGJhci5kcmFnU2l6ZSwgMTApLCB0LmlzSG9yaXpvbnRhbCgpID8gcy5zdHlsZS53aWR0aCA9IFwiXCIuY29uY2F0KGQsIFwicHhcIikgOiBzLnN0eWxlLmhlaWdodCA9IFwiXCIuY29uY2F0KGQsIFwicHhcIiksIGEuc3R5bGUuZGlzcGxheSA9IHAgPj0gMSA/IFwibm9uZVwiIDogXCJcIiwgdC5wYXJhbXMuc2Nyb2xsYmFyLmhpZGUgJiYgKGEuc3R5bGUub3BhY2l0eSA9IDApLCB0LnBhcmFtcy53YXRjaE92ZXJmbG93ICYmIHQuZW5hYmxlZCAmJiBlLmVsLmNsYXNzTGlzdFt0LmlzTG9ja2VkID8gXCJhZGRcIiA6IFwicmVtb3ZlXCJdKHQucGFyYW1zLnNjcm9sbGJhci5sb2NrQ2xhc3MpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBiKGUpIHtcbiAgICAgIHJldHVybiB0LmlzSG9yaXpvbnRhbCgpID8gZS5jbGllbnRYIDogZS5jbGllbnRZO1xuICAgIH1cbiAgICBmdW5jdGlvbiB5KGUpIHtcbiAgICAgIHZhciBzID0gdC5zY3JvbGxiYXIsXG4gICAgICAgIGEgPSB0LnJ0bFRyYW5zbGF0ZSxcbiAgICAgICAgaSA9IHMuZWw7XG4gICAgICB2YXIgcjtcbiAgICAgIHIgPSAoYihlKSAtIHYoaSlbdC5pc0hvcml6b250YWwoKSA/IFwibGVmdFwiIDogXCJ0b3BcIl0gLSAobnVsbCAhPT0gbyA/IG8gOiBkIC8gMikpIC8gKGMgLSBkKSwgciA9IE1hdGgubWF4KE1hdGgubWluKHIsIDEpLCAwKSwgYSAmJiAociA9IDEgLSByKTtcbiAgICAgIHZhciBuID0gdC5taW5UcmFuc2xhdGUoKSArICh0Lm1heFRyYW5zbGF0ZSgpIC0gdC5taW5UcmFuc2xhdGUoKSkgKiByO1xuICAgICAgdC51cGRhdGVQcm9ncmVzcyhuKSwgdC5zZXRUcmFuc2xhdGUobiksIHQudXBkYXRlQWN0aXZlSW5kZXgoKSwgdC51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEUoZSkge1xuICAgICAgdmFyIHMgPSB0LnBhcmFtcy5zY3JvbGxiYXIsXG4gICAgICAgIGEgPSB0LnNjcm9sbGJhcixcbiAgICAgICAgaSA9IHQud3JhcHBlckVsLFxuICAgICAgICBuID0gYS5lbCxcbiAgICAgICAgbCA9IGEuZHJhZ0VsO1xuICAgICAgdSA9ICEwLCBvID0gZS50YXJnZXQgPT09IGwgPyBiKGUpIC0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbdC5pc0hvcml6b250YWwoKSA/IFwibGVmdFwiIDogXCJ0b3BcIl0gOiBudWxsLCBlLnByZXZlbnREZWZhdWx0KCksIGUuc3RvcFByb3BhZ2F0aW9uKCksIGkuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCIxMDBtc1wiLCBsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiMTAwbXNcIiwgeShlKSwgY2xlYXJUaW1lb3V0KGgpLCBuLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiMG1zXCIsIHMuaGlkZSAmJiAobi5zdHlsZS5vcGFjaXR5ID0gMSksIHQucGFyYW1zLmNzc01vZGUgJiYgKHQud3JhcHBlckVsLnN0eWxlW1wic2Nyb2xsLXNuYXAtdHlwZVwiXSA9IFwibm9uZVwiKSwgcihcInNjcm9sbGJhckRyYWdTdGFydFwiLCBlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24geChlKSB7XG4gICAgICB2YXIgcyA9IHQuc2Nyb2xsYmFyLFxuICAgICAgICBhID0gdC53cmFwcGVyRWwsXG4gICAgICAgIGkgPSBzLmVsLFxuICAgICAgICBuID0gcy5kcmFnRWw7XG4gICAgICB1ICYmIChlLnByZXZlbnREZWZhdWx0ID8gZS5wcmV2ZW50RGVmYXVsdCgpIDogZS5yZXR1cm5WYWx1ZSA9ICExLCB5KGUpLCBhLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiMG1zXCIsIGkuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCIwbXNcIiwgbi5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIjBtc1wiLCByKFwic2Nyb2xsYmFyRHJhZ01vdmVcIiwgZSkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBTKGUpIHtcbiAgICAgIHZhciBzID0gdC5wYXJhbXMuc2Nyb2xsYmFyLFxuICAgICAgICBhID0gdC5zY3JvbGxiYXIsXG4gICAgICAgIGkgPSB0LndyYXBwZXJFbCxcbiAgICAgICAgbCA9IGEuZWw7XG4gICAgICB1ICYmICh1ID0gITEsIHQucGFyYW1zLmNzc01vZGUgJiYgKHQud3JhcHBlckVsLnN0eWxlW1wic2Nyb2xsLXNuYXAtdHlwZVwiXSA9IFwiXCIsIGkuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCJcIiksIHMuaGlkZSAmJiAoY2xlYXJUaW1lb3V0KGgpLCBoID0gbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGwuc3R5bGUub3BhY2l0eSA9IDAsIGwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCI0MDBtc1wiO1xuICAgICAgfSwgMWUzKSksIHIoXCJzY3JvbGxiYXJEcmFnRW5kXCIsIGUpLCBzLnNuYXBPblJlbGVhc2UgJiYgdC5zbGlkZVRvQ2xvc2VzdCgpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gVChlKSB7XG4gICAgICB2YXIgcyA9IHQuc2Nyb2xsYmFyLFxuICAgICAgICBhID0gdC5wYXJhbXMsXG4gICAgICAgIGkgPSBzLmVsO1xuICAgICAgaWYgKCFpKSByZXR1cm47XG4gICAgICB2YXIgciA9IGksXG4gICAgICAgIG4gPSAhIWEucGFzc2l2ZUxpc3RlbmVycyAmJiB7XG4gICAgICAgICAgcGFzc2l2ZTogITEsXG4gICAgICAgICAgY2FwdHVyZTogITFcbiAgICAgICAgfSxcbiAgICAgICAgbyA9ICEhYS5wYXNzaXZlTGlzdGVuZXJzICYmIHtcbiAgICAgICAgICBwYXNzaXZlOiAhMCxcbiAgICAgICAgICBjYXB0dXJlOiAhMVxuICAgICAgICB9O1xuICAgICAgaWYgKCFyKSByZXR1cm47XG4gICAgICB2YXIgZCA9IFwib25cIiA9PT0gZSA/IFwiYWRkRXZlbnRMaXN0ZW5lclwiIDogXCJyZW1vdmVFdmVudExpc3RlbmVyXCI7XG4gICAgICByW2RdKFwicG9pbnRlcmRvd25cIiwgRSwgbiksIGxbZF0oXCJwb2ludGVybW92ZVwiLCB4LCBuKSwgbFtkXShcInBvaW50ZXJ1cFwiLCBTLCBvKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gTSgpIHtcbiAgICAgIHZhciBlID0gdC5zY3JvbGxiYXIsXG4gICAgICAgIHMgPSB0LmVsO1xuICAgICAgdC5wYXJhbXMuc2Nyb2xsYmFyID0gZWUodCwgdC5vcmlnaW5hbFBhcmFtcy5zY3JvbGxiYXIsIHQucGFyYW1zLnNjcm9sbGJhciwge1xuICAgICAgICBlbDogXCJzd2lwZXItc2Nyb2xsYmFyXCJcbiAgICAgIH0pO1xuICAgICAgdmFyIGEgPSB0LnBhcmFtcy5zY3JvbGxiYXI7XG4gICAgICBpZiAoIWEuZWwpIHJldHVybjtcbiAgICAgIHZhciBpLCByO1xuICAgICAgXCJzdHJpbmdcIiA9PSB0eXBlb2YgYS5lbCAmJiB0LmlzRWxlbWVudCAmJiAoaSA9IHQuZWwuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKGEuZWwpKSwgaSB8fCBcInN0cmluZ1wiICE9IHR5cGVvZiBhLmVsID8gaSB8fCAoaSA9IGEuZWwpIDogaSA9IGwucXVlcnlTZWxlY3RvckFsbChhLmVsKSwgdC5wYXJhbXMudW5pcXVlTmF2RWxlbWVudHMgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgYS5lbCAmJiBpLmxlbmd0aCA+IDEgJiYgMSA9PT0gcy5xdWVyeVNlbGVjdG9yQWxsKGEuZWwpLmxlbmd0aCAmJiAoaSA9IHMucXVlcnlTZWxlY3RvcihhLmVsKSksIGkubGVuZ3RoID4gMCAmJiAoaSA9IGlbMF0pLCBpLmNsYXNzTGlzdC5hZGQodC5pc0hvcml6b250YWwoKSA/IGEuaG9yaXpvbnRhbENsYXNzIDogYS52ZXJ0aWNhbENsYXNzKSwgaSAmJiAociA9IGkucXVlcnlTZWxlY3RvcihcIi5cIi5jb25jYXQodC5wYXJhbXMuc2Nyb2xsYmFyLmRyYWdDbGFzcykpLCByIHx8IChyID0gZyhcImRpdlwiLCB0LnBhcmFtcy5zY3JvbGxiYXIuZHJhZ0NsYXNzKSwgaS5hcHBlbmQocikpKSwgT2JqZWN0LmFzc2lnbihlLCB7XG4gICAgICAgIGVsOiBpLFxuICAgICAgICBkcmFnRWw6IHJcbiAgICAgIH0pLCBhLmRyYWdnYWJsZSAmJiB0LnBhcmFtcy5zY3JvbGxiYXIuZWwgJiYgdC5zY3JvbGxiYXIuZWwgJiYgVChcIm9uXCIpLCBpICYmIGkuY2xhc3NMaXN0W3QuZW5hYmxlZCA/IFwicmVtb3ZlXCIgOiBcImFkZFwiXSh0LnBhcmFtcy5zY3JvbGxiYXIubG9ja0NsYXNzKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gQygpIHtcbiAgICAgIHZhciBlID0gdC5wYXJhbXMuc2Nyb2xsYmFyLFxuICAgICAgICBzID0gdC5zY3JvbGxiYXIuZWw7XG4gICAgICBzICYmIHMuY2xhc3NMaXN0LnJlbW92ZSh0LmlzSG9yaXpvbnRhbCgpID8gZS5ob3Jpem9udGFsQ2xhc3MgOiBlLnZlcnRpY2FsQ2xhc3MpLCB0LnBhcmFtcy5zY3JvbGxiYXIuZWwgJiYgdC5zY3JvbGxiYXIuZWwgJiYgVChcIm9mZlwiKTtcbiAgICB9XG4gICAgcyh7XG4gICAgICBzY3JvbGxiYXI6IHtcbiAgICAgICAgZWw6IG51bGwsXG4gICAgICAgIGRyYWdTaXplOiBcImF1dG9cIixcbiAgICAgICAgaGlkZTogITEsXG4gICAgICAgIGRyYWdnYWJsZTogITEsXG4gICAgICAgIHNuYXBPblJlbGVhc2U6ICEwLFxuICAgICAgICBsb2NrQ2xhc3M6IFwic3dpcGVyLXNjcm9sbGJhci1sb2NrXCIsXG4gICAgICAgIGRyYWdDbGFzczogXCJzd2lwZXItc2Nyb2xsYmFyLWRyYWdcIixcbiAgICAgICAgc2Nyb2xsYmFyRGlzYWJsZWRDbGFzczogXCJzd2lwZXItc2Nyb2xsYmFyLWRpc2FibGVkXCIsXG4gICAgICAgIGhvcml6b250YWxDbGFzczogXCJzd2lwZXItc2Nyb2xsYmFyLWhvcml6b250YWxcIixcbiAgICAgICAgdmVydGljYWxDbGFzczogXCJzd2lwZXItc2Nyb2xsYmFyLXZlcnRpY2FsXCJcbiAgICAgIH1cbiAgICB9KSwgdC5zY3JvbGxiYXIgPSB7XG4gICAgICBlbDogbnVsbCxcbiAgICAgIGRyYWdFbDogbnVsbFxuICAgIH0sIGkoXCJpbml0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICExID09PSB0LnBhcmFtcy5zY3JvbGxiYXIuZW5hYmxlZCA/IFAoKSA6IChNKCksIHcoKSwgZigpKTtcbiAgICB9KSwgaShcInVwZGF0ZSByZXNpemUgb2JzZXJ2ZXJVcGRhdGUgbG9jayB1bmxvY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdygpO1xuICAgIH0pLCBpKFwic2V0VHJhbnNsYXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGYoKTtcbiAgICB9KSwgaShcInNldFRyYW5zaXRpb25cIiwgZnVuY3Rpb24gKGUsIHMpIHtcbiAgICAgICFmdW5jdGlvbiAoZSkge1xuICAgICAgICB0LnBhcmFtcy5zY3JvbGxiYXIuZWwgJiYgdC5zY3JvbGxiYXIuZWwgJiYgKHQuc2Nyb2xsYmFyLmRyYWdFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdChlLCBcIm1zXCIpKTtcbiAgICAgIH0ocyk7XG4gICAgfSksIGkoXCJlbmFibGUgZGlzYWJsZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZSA9IHQuc2Nyb2xsYmFyLmVsO1xuICAgICAgZSAmJiBlLmNsYXNzTGlzdFt0LmVuYWJsZWQgPyBcInJlbW92ZVwiIDogXCJhZGRcIl0odC5wYXJhbXMuc2Nyb2xsYmFyLmxvY2tDbGFzcyk7XG4gICAgfSksIGkoXCJkZXN0cm95XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIEMoKTtcbiAgICB9KTtcbiAgICB2YXIgUCA9IGZ1bmN0aW9uIFAoKSB7XG4gICAgICB0LmVsLmNsYXNzTGlzdC5hZGQodC5wYXJhbXMuc2Nyb2xsYmFyLnNjcm9sbGJhckRpc2FibGVkQ2xhc3MpLCB0LnNjcm9sbGJhci5lbCAmJiB0LnNjcm9sbGJhci5lbC5jbGFzc0xpc3QuYWRkKHQucGFyYW1zLnNjcm9sbGJhci5zY3JvbGxiYXJEaXNhYmxlZENsYXNzKSwgQygpO1xuICAgIH07XG4gICAgT2JqZWN0LmFzc2lnbih0LnNjcm9sbGJhciwge1xuICAgICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICAgIHQuZWwuY2xhc3NMaXN0LnJlbW92ZSh0LnBhcmFtcy5zY3JvbGxiYXIuc2Nyb2xsYmFyRGlzYWJsZWRDbGFzcyksIHQuc2Nyb2xsYmFyLmVsICYmIHQuc2Nyb2xsYmFyLmVsLmNsYXNzTGlzdC5yZW1vdmUodC5wYXJhbXMuc2Nyb2xsYmFyLnNjcm9sbGJhckRpc2FibGVkQ2xhc3MpLCBNKCksIHcoKSwgZigpO1xuICAgICAgfSxcbiAgICAgIGRpc2FibGU6IFAsXG4gICAgICB1cGRhdGVTaXplOiB3LFxuICAgICAgc2V0VHJhbnNsYXRlOiBmLFxuICAgICAgaW5pdDogTSxcbiAgICAgIGRlc3Ryb3k6IENcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgYSA9IGUub247XG4gICAgcyh7XG4gICAgICBwYXJhbGxheDoge1xuICAgICAgICBlbmFibGVkOiAhMVxuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBpID0gZnVuY3Rpb24gaShlLCBzKSB7XG4gICAgICAgIHZhciBhID0gdC5ydGwsXG4gICAgICAgICAgaSA9IGEgPyAtMSA6IDEsXG4gICAgICAgICAgciA9IGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItcGFyYWxsYXhcIikgfHwgXCIwXCI7XG4gICAgICAgIHZhciBuID0gZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1wYXJhbGxheC14XCIpLFxuICAgICAgICAgIGwgPSBlLmdldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLXBhcmFsbGF4LXlcIik7XG4gICAgICAgIHZhciBvID0gZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1wYXJhbGxheC1zY2FsZVwiKSxcbiAgICAgICAgICBkID0gZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1wYXJhbGxheC1vcGFjaXR5XCIpLFxuICAgICAgICAgIGMgPSBlLmdldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLXBhcmFsbGF4LXJvdGF0ZVwiKTtcbiAgICAgICAgaWYgKG4gfHwgbCA/IChuID0gbiB8fCBcIjBcIiwgbCA9IGwgfHwgXCIwXCIpIDogdC5pc0hvcml6b250YWwoKSA/IChuID0gciwgbCA9IFwiMFwiKSA6IChsID0gciwgbiA9IFwiMFwiKSwgbiA9IG4uaW5kZXhPZihcIiVcIikgPj0gMCA/IHBhcnNlSW50KG4sIDEwKSAqIHMgKiBpICsgXCIlXCIgOiBuICogcyAqIGkgKyBcInB4XCIsIGwgPSBsLmluZGV4T2YoXCIlXCIpID49IDAgPyBwYXJzZUludChsLCAxMCkgKiBzICsgXCIlXCIgOiBsICogcyArIFwicHhcIiwgbnVsbCAhPSBkKSB7XG4gICAgICAgICAgdmFyIF90MzkgPSBkIC0gKGQgLSAxKSAqICgxIC0gTWF0aC5hYnMocykpO1xuICAgICAgICAgIGUuc3R5bGUub3BhY2l0eSA9IF90Mzk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHAgPSBcInRyYW5zbGF0ZTNkKFwiLmNvbmNhdChuLCBcIiwgXCIpLmNvbmNhdChsLCBcIiwgMHB4KVwiKTtcbiAgICAgICAgaWYgKG51bGwgIT0gbykge1xuICAgICAgICAgIHAgKz0gXCIgc2NhbGUoXCIuY29uY2F0KG8gLSAobyAtIDEpICogKDEgLSBNYXRoLmFicyhzKSksIFwiKVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYyAmJiBudWxsICE9IGMpIHtcbiAgICAgICAgICBwICs9IFwiIHJvdGF0ZShcIi5jb25jYXQoYyAqIHMgKiAtMSwgXCJkZWcpXCIpO1xuICAgICAgICB9XG4gICAgICAgIGUuc3R5bGUudHJhbnNmb3JtID0gcDtcbiAgICAgIH0sXG4gICAgICByID0gZnVuY3Rpb24gcigpIHtcbiAgICAgICAgdmFyIGUgPSB0LmVsLFxuICAgICAgICAgIHMgPSB0LnNsaWRlcyxcbiAgICAgICAgICBhID0gdC5wcm9ncmVzcyxcbiAgICAgICAgICByID0gdC5zbmFwR3JpZDtcbiAgICAgICAgZihlLCBcIltkYXRhLXN3aXBlci1wYXJhbGxheF0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC14XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXldLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgtb3BhY2l0eV0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC1zY2FsZV1cIikuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGkoZSwgYSk7XG4gICAgICAgIH0pLCBzLmZvckVhY2goZnVuY3Rpb24gKGUsIHMpIHtcbiAgICAgICAgICB2YXIgbiA9IGUucHJvZ3Jlc3M7XG4gICAgICAgICAgdC5wYXJhbXMuc2xpZGVzUGVyR3JvdXAgPiAxICYmIFwiYXV0b1wiICE9PSB0LnBhcmFtcy5zbGlkZXNQZXJWaWV3ICYmIChuICs9IE1hdGguY2VpbChzIC8gMikgLSBhICogKHIubGVuZ3RoIC0gMSkpLCBuID0gTWF0aC5taW4oTWF0aC5tYXgobiwgLTEpLCAxKSwgZS5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtc3dpcGVyLXBhcmFsbGF4XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXhdLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgteV0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC1vcGFjaXR5XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXNjYWxlXSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXJvdGF0ZV1cIikuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaShlLCBuKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIGEoXCJiZWZvcmVJbml0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHQucGFyYW1zLnBhcmFsbGF4LmVuYWJsZWQgJiYgKHQucGFyYW1zLndhdGNoU2xpZGVzUHJvZ3Jlc3MgPSAhMCwgdC5vcmlnaW5hbFBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzID0gITApO1xuICAgIH0pLCBhKFwiaW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0LnBhcmFtcy5wYXJhbGxheC5lbmFibGVkICYmIHIoKTtcbiAgICB9KSwgYShcInNldFRyYW5zbGF0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0LnBhcmFtcy5wYXJhbGxheC5lbmFibGVkICYmIHIoKTtcbiAgICB9KSwgYShcInNldFRyYW5zaXRpb25cIiwgZnVuY3Rpb24gKGUsIHMpIHtcbiAgICAgIHQucGFyYW1zLnBhcmFsbGF4LmVuYWJsZWQgJiYgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gdC5wYXJhbXMuc3BlZWQpO1xuICAgICAgICB2YXIgcyA9IHQuZWw7XG4gICAgICAgIHMucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXN3aXBlci1wYXJhbGxheF0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC14XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXldLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgtb3BhY2l0eV0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC1zY2FsZV1cIikuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHZhciBzID0gcGFyc2VJbnQodC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1wYXJhbGxheC1kdXJhdGlvblwiKSwgMTApIHx8IGU7XG4gICAgICAgICAgMCA9PT0gZSAmJiAocyA9IDApLCB0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiXCIuY29uY2F0KHMsIFwibXNcIik7XG4gICAgICAgIH0pO1xuICAgICAgfShzKTtcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgYSA9IGUub24sXG4gICAgICBpID0gZS5lbWl0O1xuICAgIHZhciBuID0gcigpO1xuICAgIHMoe1xuICAgICAgem9vbToge1xuICAgICAgICBlbmFibGVkOiAhMSxcbiAgICAgICAgbWF4UmF0aW86IDMsXG4gICAgICAgIG1pblJhdGlvOiAxLFxuICAgICAgICB0b2dnbGU6ICEwLFxuICAgICAgICBjb250YWluZXJDbGFzczogXCJzd2lwZXItem9vbS1jb250YWluZXJcIixcbiAgICAgICAgem9vbWVkU2xpZGVDbGFzczogXCJzd2lwZXItc2xpZGUtem9vbWVkXCJcbiAgICAgIH1cbiAgICB9KSwgdC56b29tID0ge1xuICAgICAgZW5hYmxlZDogITFcbiAgICB9O1xuICAgIHZhciBsLFxuICAgICAgZCxcbiAgICAgIGMgPSAxLFxuICAgICAgcCA9ICExO1xuICAgIHZhciB1ID0gW10sXG4gICAgICBtID0ge1xuICAgICAgICBvcmlnaW5YOiAwLFxuICAgICAgICBvcmlnaW5ZOiAwLFxuICAgICAgICBzbGlkZUVsOiB2b2lkIDAsXG4gICAgICAgIHNsaWRlV2lkdGg6IHZvaWQgMCxcbiAgICAgICAgc2xpZGVIZWlnaHQ6IHZvaWQgMCxcbiAgICAgICAgaW1hZ2VFbDogdm9pZCAwLFxuICAgICAgICBpbWFnZVdyYXBFbDogdm9pZCAwLFxuICAgICAgICBtYXhSYXRpbzogM1xuICAgICAgfSxcbiAgICAgIGggPSB7XG4gICAgICAgIGlzVG91Y2hlZDogdm9pZCAwLFxuICAgICAgICBpc01vdmVkOiB2b2lkIDAsXG4gICAgICAgIGN1cnJlbnRYOiB2b2lkIDAsXG4gICAgICAgIGN1cnJlbnRZOiB2b2lkIDAsXG4gICAgICAgIG1pblg6IHZvaWQgMCxcbiAgICAgICAgbWluWTogdm9pZCAwLFxuICAgICAgICBtYXhYOiB2b2lkIDAsXG4gICAgICAgIG1heFk6IHZvaWQgMCxcbiAgICAgICAgd2lkdGg6IHZvaWQgMCxcbiAgICAgICAgaGVpZ2h0OiB2b2lkIDAsXG4gICAgICAgIHN0YXJ0WDogdm9pZCAwLFxuICAgICAgICBzdGFydFk6IHZvaWQgMCxcbiAgICAgICAgdG91Y2hlc1N0YXJ0OiB7fSxcbiAgICAgICAgdG91Y2hlc0N1cnJlbnQ6IHt9XG4gICAgICB9LFxuICAgICAgZyA9IHtcbiAgICAgICAgeDogdm9pZCAwLFxuICAgICAgICB5OiB2b2lkIDAsXG4gICAgICAgIHByZXZQb3NpdGlvblg6IHZvaWQgMCxcbiAgICAgICAgcHJldlBvc2l0aW9uWTogdm9pZCAwLFxuICAgICAgICBwcmV2VGltZTogdm9pZCAwXG4gICAgICB9O1xuICAgIHZhciB3ID0gMTtcbiAgICBmdW5jdGlvbiBiKCkge1xuICAgICAgaWYgKHUubGVuZ3RoIDwgMikgcmV0dXJuIDE7XG4gICAgICB2YXIgZSA9IHVbMF0ucGFnZVgsXG4gICAgICAgIHQgPSB1WzBdLnBhZ2VZLFxuICAgICAgICBzID0gdVsxXS5wYWdlWCxcbiAgICAgICAgYSA9IHVbMV0ucGFnZVk7XG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHMgLSBlLCAyKSArIE1hdGgucG93KGEgLSB0LCAyKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEUoZSkge1xuICAgICAgdmFyIHMgPSB0LmlzRWxlbWVudCA/IFwic3dpcGVyLXNsaWRlXCIgOiBcIi5cIi5jb25jYXQodC5wYXJhbXMuc2xpZGVDbGFzcyk7XG4gICAgICByZXR1cm4gISFlLnRhcmdldC5tYXRjaGVzKHMpIHx8IHQuc2xpZGVzLmZpbHRlcihmdW5jdGlvbiAodCkge1xuICAgICAgICByZXR1cm4gdC5jb250YWlucyhlLnRhcmdldCk7XG4gICAgICB9KS5sZW5ndGggPiAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiB4KGUpIHtcbiAgICAgIGlmIChcIm1vdXNlXCIgPT09IGUucG9pbnRlclR5cGUgJiYgdS5zcGxpY2UoMCwgdS5sZW5ndGgpLCAhRShlKSkgcmV0dXJuO1xuICAgICAgdmFyIHMgPSB0LnBhcmFtcy56b29tO1xuICAgICAgaWYgKGwgPSAhMSwgZCA9ICExLCB1LnB1c2goZSksICEodS5sZW5ndGggPCAyKSkge1xuICAgICAgICBpZiAobCA9ICEwLCBtLnNjYWxlU3RhcnQgPSBiKCksICFtLnNsaWRlRWwpIHtcbiAgICAgICAgICBtLnNsaWRlRWwgPSBlLnRhcmdldC5jbG9zZXN0KFwiLlwiLmNvbmNhdCh0LnBhcmFtcy5zbGlkZUNsYXNzLCBcIiwgc3dpcGVyLXNsaWRlXCIpKSwgbS5zbGlkZUVsIHx8IChtLnNsaWRlRWwgPSB0LnNsaWRlc1t0LmFjdGl2ZUluZGV4XSk7XG4gICAgICAgICAgdmFyIF9hMTkgPSBtLnNsaWRlRWwucXVlcnlTZWxlY3RvcihcIi5cIi5jb25jYXQocy5jb250YWluZXJDbGFzcykpO1xuICAgICAgICAgIGlmIChfYTE5ICYmIChfYTE5ID0gX2ExOS5xdWVyeVNlbGVjdG9yQWxsKFwicGljdHVyZSwgaW1nLCBzdmcsIGNhbnZhcywgLnN3aXBlci16b29tLXRhcmdldFwiKVswXSksIG0uaW1hZ2VFbCA9IF9hMTksIG0uaW1hZ2VXcmFwRWwgPSBfYTE5ID8geShtLmltYWdlRWwsIFwiLlwiLmNvbmNhdChzLmNvbnRhaW5lckNsYXNzKSlbMF0gOiB2b2lkIDAsICFtLmltYWdlV3JhcEVsKSByZXR1cm4gdm9pZCAobS5pbWFnZUVsID0gdm9pZCAwKTtcbiAgICAgICAgICBtLm1heFJhdGlvID0gbS5pbWFnZVdyYXBFbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci16b29tXCIpIHx8IHMubWF4UmF0aW87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0uaW1hZ2VFbCkge1xuICAgICAgICAgIHZhciBfcmVmMyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKHUubGVuZ3RoIDwgMikgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB4OiBudWxsLFxuICAgICAgICAgICAgICAgIHk6IG51bGxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgdmFyIGUgPSBtLmltYWdlRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgIHJldHVybiBbKHVbMF0ucGFnZVggKyAodVsxXS5wYWdlWCAtIHVbMF0ucGFnZVgpIC8gMiAtIGUueCkgLyBjLCAodVswXS5wYWdlWSArICh1WzFdLnBhZ2VZIC0gdVswXS5wYWdlWSkgLyAyIC0gZS55KSAvIGNdO1xuICAgICAgICAgICAgfSgpLFxuICAgICAgICAgICAgX3JlZjQgPSBfc2xpY2VkVG9BcnJheShfcmVmMywgMiksXG4gICAgICAgICAgICBfZTQ5ID0gX3JlZjRbMF0sXG4gICAgICAgICAgICBfdDQwID0gX3JlZjRbMV07XG4gICAgICAgICAgbS5vcmlnaW5YID0gX2U0OSwgbS5vcmlnaW5ZID0gX3Q0MCwgbS5pbWFnZUVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiMG1zXCI7XG4gICAgICAgIH1cbiAgICAgICAgcCA9ICEwO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBTKGUpIHtcbiAgICAgIGlmICghRShlKSkgcmV0dXJuO1xuICAgICAgdmFyIHMgPSB0LnBhcmFtcy56b29tLFxuICAgICAgICBhID0gdC56b29tLFxuICAgICAgICBpID0gdS5maW5kSW5kZXgoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICByZXR1cm4gdC5wb2ludGVySWQgPT09IGUucG9pbnRlcklkO1xuICAgICAgICB9KTtcbiAgICAgIGkgPj0gMCAmJiAodVtpXSA9IGUpLCB1Lmxlbmd0aCA8IDIgfHwgKGQgPSAhMCwgbS5zY2FsZU1vdmUgPSBiKCksIG0uaW1hZ2VFbCAmJiAoYS5zY2FsZSA9IG0uc2NhbGVNb3ZlIC8gbS5zY2FsZVN0YXJ0ICogYywgYS5zY2FsZSA+IG0ubWF4UmF0aW8gJiYgKGEuc2NhbGUgPSBtLm1heFJhdGlvIC0gMSArIE1hdGgucG93KGEuc2NhbGUgLSBtLm1heFJhdGlvICsgMSwgLjUpKSwgYS5zY2FsZSA8IHMubWluUmF0aW8gJiYgKGEuc2NhbGUgPSBzLm1pblJhdGlvICsgMSAtIE1hdGgucG93KHMubWluUmF0aW8gLSBhLnNjYWxlICsgMSwgLjUpKSwgbS5pbWFnZUVsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlKFwiLmNvbmNhdChhLnNjYWxlLCBcIilcIikpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gVChlKSB7XG4gICAgICBpZiAoIUUoZSkpIHJldHVybjtcbiAgICAgIGlmIChcIm1vdXNlXCIgPT09IGUucG9pbnRlclR5cGUgJiYgXCJwb2ludGVyb3V0XCIgPT09IGUudHlwZSkgcmV0dXJuO1xuICAgICAgdmFyIHMgPSB0LnBhcmFtcy56b29tLFxuICAgICAgICBhID0gdC56b29tLFxuICAgICAgICBpID0gdS5maW5kSW5kZXgoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICByZXR1cm4gdC5wb2ludGVySWQgPT09IGUucG9pbnRlcklkO1xuICAgICAgICB9KTtcbiAgICAgIGkgPj0gMCAmJiB1LnNwbGljZShpLCAxKSwgbCAmJiBkICYmIChsID0gITEsIGQgPSAhMSwgbS5pbWFnZUVsICYmIChhLnNjYWxlID0gTWF0aC5tYXgoTWF0aC5taW4oYS5zY2FsZSwgbS5tYXhSYXRpbyksIHMubWluUmF0aW8pLCBtLmltYWdlRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCJcIi5jb25jYXQodC5wYXJhbXMuc3BlZWQsIFwibXNcIiksIG0uaW1hZ2VFbC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZShcIi5jb25jYXQoYS5zY2FsZSwgXCIpXCIpLCBjID0gYS5zY2FsZSwgcCA9ICExLCBhLnNjYWxlID4gMSAmJiBtLnNsaWRlRWwgPyBtLnNsaWRlRWwuY2xhc3NMaXN0LmFkZChcIlwiLmNvbmNhdChzLnpvb21lZFNsaWRlQ2xhc3MpKSA6IGEuc2NhbGUgPD0gMSAmJiBtLnNsaWRlRWwgJiYgbS5zbGlkZUVsLmNsYXNzTGlzdC5yZW1vdmUoXCJcIi5jb25jYXQocy56b29tZWRTbGlkZUNsYXNzKSksIDEgPT09IGEuc2NhbGUgJiYgKG0ub3JpZ2luWCA9IDAsIG0ub3JpZ2luWSA9IDAsIG0uc2xpZGVFbCA9IHZvaWQgMCkpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gTShlKSB7XG4gICAgICBpZiAoIUUoZSkgfHwgIWZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBzID0gXCIuXCIuY29uY2F0KHQucGFyYW1zLnpvb20uY29udGFpbmVyQ2xhc3MpO1xuICAgICAgICByZXR1cm4gISFlLnRhcmdldC5tYXRjaGVzKHMpIHx8IF90b0NvbnN1bWFibGVBcnJheSh0LmVsLnF1ZXJ5U2VsZWN0b3JBbGwocykpLmZpbHRlcihmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHJldHVybiB0LmNvbnRhaW5zKGUudGFyZ2V0KTtcbiAgICAgICAgfSkubGVuZ3RoID4gMDtcbiAgICAgIH0oZSkpIHJldHVybjtcbiAgICAgIHZhciBzID0gdC56b29tO1xuICAgICAgaWYgKCFtLmltYWdlRWwpIHJldHVybjtcbiAgICAgIGlmICghaC5pc1RvdWNoZWQgfHwgIW0uc2xpZGVFbCkgcmV0dXJuO1xuICAgICAgaC5pc01vdmVkIHx8IChoLndpZHRoID0gbS5pbWFnZUVsLm9mZnNldFdpZHRoLCBoLmhlaWdodCA9IG0uaW1hZ2VFbC5vZmZzZXRIZWlnaHQsIGguc3RhcnRYID0gbyhtLmltYWdlV3JhcEVsLCBcInhcIikgfHwgMCwgaC5zdGFydFkgPSBvKG0uaW1hZ2VXcmFwRWwsIFwieVwiKSB8fCAwLCBtLnNsaWRlV2lkdGggPSBtLnNsaWRlRWwub2Zmc2V0V2lkdGgsIG0uc2xpZGVIZWlnaHQgPSBtLnNsaWRlRWwub2Zmc2V0SGVpZ2h0LCBtLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiMG1zXCIpO1xuICAgICAgdmFyIGEgPSBoLndpZHRoICogcy5zY2FsZSxcbiAgICAgICAgaSA9IGguaGVpZ2h0ICogcy5zY2FsZTtcbiAgICAgIGlmIChhIDwgbS5zbGlkZVdpZHRoICYmIGkgPCBtLnNsaWRlSGVpZ2h0KSByZXR1cm47XG4gICAgICBoLm1pblggPSBNYXRoLm1pbihtLnNsaWRlV2lkdGggLyAyIC0gYSAvIDIsIDApLCBoLm1heFggPSAtaC5taW5YLCBoLm1pblkgPSBNYXRoLm1pbihtLnNsaWRlSGVpZ2h0IC8gMiAtIGkgLyAyLCAwKSwgaC5tYXhZID0gLWgubWluWSwgaC50b3VjaGVzQ3VycmVudC54ID0gdS5sZW5ndGggPiAwID8gdVswXS5wYWdlWCA6IGUucGFnZVgsIGgudG91Y2hlc0N1cnJlbnQueSA9IHUubGVuZ3RoID4gMCA/IHVbMF0ucGFnZVkgOiBlLnBhZ2VZO1xuICAgICAgaWYgKE1hdGgubWF4KE1hdGguYWJzKGgudG91Y2hlc0N1cnJlbnQueCAtIGgudG91Y2hlc1N0YXJ0LngpLCBNYXRoLmFicyhoLnRvdWNoZXNDdXJyZW50LnkgLSBoLnRvdWNoZXNTdGFydC55KSkgPiA1ICYmICh0LmFsbG93Q2xpY2sgPSAhMSksICFoLmlzTW92ZWQgJiYgIXApIHtcbiAgICAgICAgaWYgKHQuaXNIb3Jpem9udGFsKCkgJiYgKE1hdGguZmxvb3IoaC5taW5YKSA9PT0gTWF0aC5mbG9vcihoLnN0YXJ0WCkgJiYgaC50b3VjaGVzQ3VycmVudC54IDwgaC50b3VjaGVzU3RhcnQueCB8fCBNYXRoLmZsb29yKGgubWF4WCkgPT09IE1hdGguZmxvb3IoaC5zdGFydFgpICYmIGgudG91Y2hlc0N1cnJlbnQueCA+IGgudG91Y2hlc1N0YXJ0LngpKSByZXR1cm4gdm9pZCAoaC5pc1RvdWNoZWQgPSAhMSk7XG4gICAgICAgIGlmICghdC5pc0hvcml6b250YWwoKSAmJiAoTWF0aC5mbG9vcihoLm1pblkpID09PSBNYXRoLmZsb29yKGguc3RhcnRZKSAmJiBoLnRvdWNoZXNDdXJyZW50LnkgPCBoLnRvdWNoZXNTdGFydC55IHx8IE1hdGguZmxvb3IoaC5tYXhZKSA9PT0gTWF0aC5mbG9vcihoLnN0YXJ0WSkgJiYgaC50b3VjaGVzQ3VycmVudC55ID4gaC50b3VjaGVzU3RhcnQueSkpIHJldHVybiB2b2lkIChoLmlzVG91Y2hlZCA9ICExKTtcbiAgICAgIH1cbiAgICAgIGUuY2FuY2VsYWJsZSAmJiBlLnByZXZlbnREZWZhdWx0KCksIGUuc3RvcFByb3BhZ2F0aW9uKCksIGguaXNNb3ZlZCA9ICEwO1xuICAgICAgdmFyIHIgPSAocy5zY2FsZSAtIGMpIC8gKG0ubWF4UmF0aW8gLSB0LnBhcmFtcy56b29tLm1pblJhdGlvKSxcbiAgICAgICAgbiA9IG0ub3JpZ2luWCxcbiAgICAgICAgbCA9IG0ub3JpZ2luWTtcbiAgICAgIGguY3VycmVudFggPSBoLnRvdWNoZXNDdXJyZW50LnggLSBoLnRvdWNoZXNTdGFydC54ICsgaC5zdGFydFggKyByICogKGgud2lkdGggLSAyICogbiksIGguY3VycmVudFkgPSBoLnRvdWNoZXNDdXJyZW50LnkgLSBoLnRvdWNoZXNTdGFydC55ICsgaC5zdGFydFkgKyByICogKGguaGVpZ2h0IC0gMiAqIGwpLCBoLmN1cnJlbnRYIDwgaC5taW5YICYmIChoLmN1cnJlbnRYID0gaC5taW5YICsgMSAtIE1hdGgucG93KGgubWluWCAtIGguY3VycmVudFggKyAxLCAuOCkpLCBoLmN1cnJlbnRYID4gaC5tYXhYICYmIChoLmN1cnJlbnRYID0gaC5tYXhYIC0gMSArIE1hdGgucG93KGguY3VycmVudFggLSBoLm1heFggKyAxLCAuOCkpLCBoLmN1cnJlbnRZIDwgaC5taW5ZICYmIChoLmN1cnJlbnRZID0gaC5taW5ZICsgMSAtIE1hdGgucG93KGgubWluWSAtIGguY3VycmVudFkgKyAxLCAuOCkpLCBoLmN1cnJlbnRZID4gaC5tYXhZICYmIChoLmN1cnJlbnRZID0gaC5tYXhZIC0gMSArIE1hdGgucG93KGguY3VycmVudFkgLSBoLm1heFkgKyAxLCAuOCkpLCBnLnByZXZQb3NpdGlvblggfHwgKGcucHJldlBvc2l0aW9uWCA9IGgudG91Y2hlc0N1cnJlbnQueCksIGcucHJldlBvc2l0aW9uWSB8fCAoZy5wcmV2UG9zaXRpb25ZID0gaC50b3VjaGVzQ3VycmVudC55KSwgZy5wcmV2VGltZSB8fCAoZy5wcmV2VGltZSA9IERhdGUubm93KCkpLCBnLnggPSAoaC50b3VjaGVzQ3VycmVudC54IC0gZy5wcmV2UG9zaXRpb25YKSAvIChEYXRlLm5vdygpIC0gZy5wcmV2VGltZSkgLyAyLCBnLnkgPSAoaC50b3VjaGVzQ3VycmVudC55IC0gZy5wcmV2UG9zaXRpb25ZKSAvIChEYXRlLm5vdygpIC0gZy5wcmV2VGltZSkgLyAyLCBNYXRoLmFicyhoLnRvdWNoZXNDdXJyZW50LnggLSBnLnByZXZQb3NpdGlvblgpIDwgMiAmJiAoZy54ID0gMCksIE1hdGguYWJzKGgudG91Y2hlc0N1cnJlbnQueSAtIGcucHJldlBvc2l0aW9uWSkgPCAyICYmIChnLnkgPSAwKSwgZy5wcmV2UG9zaXRpb25YID0gaC50b3VjaGVzQ3VycmVudC54LCBnLnByZXZQb3NpdGlvblkgPSBoLnRvdWNoZXNDdXJyZW50LnksIGcucHJldlRpbWUgPSBEYXRlLm5vdygpLCBtLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoXCIuY29uY2F0KGguY3VycmVudFgsIFwicHgsIFwiKS5jb25jYXQoaC5jdXJyZW50WSwgXCJweCwwKVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gQygpIHtcbiAgICAgIHZhciBlID0gdC56b29tO1xuICAgICAgbS5zbGlkZUVsICYmIHQuYWN0aXZlSW5kZXggIT09IHQuc2xpZGVzLmluZGV4T2YobS5zbGlkZUVsKSAmJiAobS5pbWFnZUVsICYmIChtLmltYWdlRWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZCgwLDAsMCkgc2NhbGUoMSlcIiksIG0uaW1hZ2VXcmFwRWwgJiYgKG0uaW1hZ2VXcmFwRWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZCgwLDAsMClcIiksIG0uc2xpZGVFbC5jbGFzc0xpc3QucmVtb3ZlKFwiXCIuY29uY2F0KHQucGFyYW1zLnpvb20uem9vbWVkU2xpZGVDbGFzcykpLCBlLnNjYWxlID0gMSwgYyA9IDEsIG0uc2xpZGVFbCA9IHZvaWQgMCwgbS5pbWFnZUVsID0gdm9pZCAwLCBtLmltYWdlV3JhcEVsID0gdm9pZCAwLCBtLm9yaWdpblggPSAwLCBtLm9yaWdpblkgPSAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gUChlKSB7XG4gICAgICB2YXIgcyA9IHQuem9vbSxcbiAgICAgICAgYSA9IHQucGFyYW1zLnpvb207XG4gICAgICBpZiAoIW0uc2xpZGVFbCkge1xuICAgICAgICBlICYmIGUudGFyZ2V0ICYmIChtLnNsaWRlRWwgPSBlLnRhcmdldC5jbG9zZXN0KFwiLlwiLmNvbmNhdCh0LnBhcmFtcy5zbGlkZUNsYXNzLCBcIiwgc3dpcGVyLXNsaWRlXCIpKSksIG0uc2xpZGVFbCB8fCAodC5wYXJhbXMudmlydHVhbCAmJiB0LnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgJiYgdC52aXJ0dWFsID8gbS5zbGlkZUVsID0gZih0LnNsaWRlc0VsLCBcIi5cIi5jb25jYXQodC5wYXJhbXMuc2xpZGVBY3RpdmVDbGFzcykpWzBdIDogbS5zbGlkZUVsID0gdC5zbGlkZXNbdC5hY3RpdmVJbmRleF0pO1xuICAgICAgICB2YXIgX3MzMCA9IG0uc2xpZGVFbC5xdWVyeVNlbGVjdG9yKFwiLlwiLmNvbmNhdChhLmNvbnRhaW5lckNsYXNzKSk7XG4gICAgICAgIF9zMzAgJiYgKF9zMzAgPSBfczMwLnF1ZXJ5U2VsZWN0b3JBbGwoXCJwaWN0dXJlLCBpbWcsIHN2ZywgY2FudmFzLCAuc3dpcGVyLXpvb20tdGFyZ2V0XCIpWzBdKSwgbS5pbWFnZUVsID0gX3MzMCwgbS5pbWFnZVdyYXBFbCA9IF9zMzAgPyB5KG0uaW1hZ2VFbCwgXCIuXCIuY29uY2F0KGEuY29udGFpbmVyQ2xhc3MpKVswXSA6IHZvaWQgMDtcbiAgICAgIH1cbiAgICAgIGlmICghbS5pbWFnZUVsIHx8ICFtLmltYWdlV3JhcEVsKSByZXR1cm47XG4gICAgICB2YXIgaSwgciwgbCwgbywgZCwgcCwgdSwgZywgdywgYiwgRSwgeCwgUywgVCwgTSwgQywgUCwgTDtcbiAgICAgIHQucGFyYW1zLmNzc01vZGUgJiYgKHQud3JhcHBlckVsLnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIiwgdC53cmFwcGVyRWwuc3R5bGUudG91Y2hBY3Rpb24gPSBcIm5vbmVcIiksIG0uc2xpZGVFbC5jbGFzc0xpc3QuYWRkKFwiXCIuY29uY2F0KGEuem9vbWVkU2xpZGVDbGFzcykpLCB2b2lkIDAgPT09IGgudG91Y2hlc1N0YXJ0LnggJiYgZSA/IChpID0gZS5wYWdlWCwgciA9IGUucGFnZVkpIDogKGkgPSBoLnRvdWNoZXNTdGFydC54LCByID0gaC50b3VjaGVzU3RhcnQueSk7XG4gICAgICB2YXIgeiA9IFwibnVtYmVyXCIgPT0gdHlwZW9mIGUgPyBlIDogbnVsbDtcbiAgICAgIDEgPT09IGMgJiYgeiAmJiAoaSA9IHZvaWQgMCwgciA9IHZvaWQgMCksIHMuc2NhbGUgPSB6IHx8IG0uaW1hZ2VXcmFwRWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItem9vbVwiKSB8fCBhLm1heFJhdGlvLCBjID0geiB8fCBtLmltYWdlV3JhcEVsLmdldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLXpvb21cIikgfHwgYS5tYXhSYXRpbywgIWUgfHwgMSA9PT0gYyAmJiB6ID8gKHUgPSAwLCBnID0gMCkgOiAoUCA9IG0uc2xpZGVFbC5vZmZzZXRXaWR0aCwgTCA9IG0uc2xpZGVFbC5vZmZzZXRIZWlnaHQsIGwgPSB2KG0uc2xpZGVFbCkubGVmdCArIG4uc2Nyb2xsWCwgbyA9IHYobS5zbGlkZUVsKS50b3AgKyBuLnNjcm9sbFksIGQgPSBsICsgUCAvIDIgLSBpLCBwID0gbyArIEwgLyAyIC0gciwgdyA9IG0uaW1hZ2VFbC5vZmZzZXRXaWR0aCwgYiA9IG0uaW1hZ2VFbC5vZmZzZXRIZWlnaHQsIEUgPSB3ICogcy5zY2FsZSwgeCA9IGIgKiBzLnNjYWxlLCBTID0gTWF0aC5taW4oUCAvIDIgLSBFIC8gMiwgMCksIFQgPSBNYXRoLm1pbihMIC8gMiAtIHggLyAyLCAwKSwgTSA9IC1TLCBDID0gLVQsIHUgPSBkICogcy5zY2FsZSwgZyA9IHAgKiBzLnNjYWxlLCB1IDwgUyAmJiAodSA9IFMpLCB1ID4gTSAmJiAodSA9IE0pLCBnIDwgVCAmJiAoZyA9IFQpLCBnID4gQyAmJiAoZyA9IEMpKSwgeiAmJiAxID09PSBzLnNjYWxlICYmIChtLm9yaWdpblggPSAwLCBtLm9yaWdpblkgPSAwKSwgbS5pbWFnZVdyYXBFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIjMwMG1zXCIsIG0uaW1hZ2VXcmFwRWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZChcIi5jb25jYXQodSwgXCJweCwgXCIpLmNvbmNhdChnLCBcInB4LDApXCIpLCBtLmltYWdlRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCIzMDBtc1wiLCBtLmltYWdlRWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZCgwLDAsMCkgc2NhbGUoXCIuY29uY2F0KHMuc2NhbGUsIFwiKVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gTCgpIHtcbiAgICAgIHZhciBlID0gdC56b29tLFxuICAgICAgICBzID0gdC5wYXJhbXMuem9vbTtcbiAgICAgIGlmICghbS5zbGlkZUVsKSB7XG4gICAgICAgIHQucGFyYW1zLnZpcnR1YWwgJiYgdC5wYXJhbXMudmlydHVhbC5lbmFibGVkICYmIHQudmlydHVhbCA/IG0uc2xpZGVFbCA9IGYodC5zbGlkZXNFbCwgXCIuXCIuY29uY2F0KHQucGFyYW1zLnNsaWRlQWN0aXZlQ2xhc3MpKVswXSA6IG0uc2xpZGVFbCA9IHQuc2xpZGVzW3QuYWN0aXZlSW5kZXhdO1xuICAgICAgICB2YXIgX2U1MCA9IG0uc2xpZGVFbC5xdWVyeVNlbGVjdG9yKFwiLlwiLmNvbmNhdChzLmNvbnRhaW5lckNsYXNzKSk7XG4gICAgICAgIF9lNTAgJiYgKF9lNTAgPSBfZTUwLnF1ZXJ5U2VsZWN0b3JBbGwoXCJwaWN0dXJlLCBpbWcsIHN2ZywgY2FudmFzLCAuc3dpcGVyLXpvb20tdGFyZ2V0XCIpWzBdKSwgbS5pbWFnZUVsID0gX2U1MCwgbS5pbWFnZVdyYXBFbCA9IF9lNTAgPyB5KG0uaW1hZ2VFbCwgXCIuXCIuY29uY2F0KHMuY29udGFpbmVyQ2xhc3MpKVswXSA6IHZvaWQgMDtcbiAgICAgIH1cbiAgICAgIG0uaW1hZ2VFbCAmJiBtLmltYWdlV3JhcEVsICYmICh0LnBhcmFtcy5jc3NNb2RlICYmICh0LndyYXBwZXJFbC5zdHlsZS5vdmVyZmxvdyA9IFwiXCIsIHQud3JhcHBlckVsLnN0eWxlLnRvdWNoQWN0aW9uID0gXCJcIiksIGUuc2NhbGUgPSAxLCBjID0gMSwgbS5pbWFnZVdyYXBFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIjMwMG1zXCIsIG0uaW1hZ2VXcmFwRWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZCgwLDAsMClcIiwgbS5pbWFnZUVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiMzAwbXNcIiwgbS5pbWFnZUVsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlKDEpXCIsIG0uc2xpZGVFbC5jbGFzc0xpc3QucmVtb3ZlKFwiXCIuY29uY2F0KHMuem9vbWVkU2xpZGVDbGFzcykpLCBtLnNsaWRlRWwgPSB2b2lkIDAsIG0ub3JpZ2luWCA9IDAsIG0ub3JpZ2luWSA9IDApO1xuICAgIH1cbiAgICBmdW5jdGlvbiB6KGUpIHtcbiAgICAgIHZhciBzID0gdC56b29tO1xuICAgICAgcy5zY2FsZSAmJiAxICE9PSBzLnNjYWxlID8gTCgpIDogUChlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gQSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhc3NpdmVMaXN0ZW5lcjogISF0LnBhcmFtcy5wYXNzaXZlTGlzdGVuZXJzICYmIHtcbiAgICAgICAgICBwYXNzaXZlOiAhMCxcbiAgICAgICAgICBjYXB0dXJlOiAhMVxuICAgICAgICB9LFxuICAgICAgICBhY3RpdmVMaXN0ZW5lcldpdGhDYXB0dXJlOiAhdC5wYXJhbXMucGFzc2l2ZUxpc3RlbmVycyB8fCB7XG4gICAgICAgICAgcGFzc2l2ZTogITEsXG4gICAgICAgICAgY2FwdHVyZTogITBcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gJCgpIHtcbiAgICAgIHZhciBlID0gdC56b29tO1xuICAgICAgaWYgKGUuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgZS5lbmFibGVkID0gITA7XG4gICAgICB2YXIgX0EgPSBBKCksXG4gICAgICAgIHMgPSBfQS5wYXNzaXZlTGlzdGVuZXIsXG4gICAgICAgIGEgPSBfQS5hY3RpdmVMaXN0ZW5lcldpdGhDYXB0dXJlO1xuICAgICAgdC53cmFwcGVyRWwuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHgsIHMpLCB0LndyYXBwZXJFbC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgUywgYSksIFtcInBvaW50ZXJ1cFwiLCBcInBvaW50ZXJjYW5jZWxcIiwgXCJwb2ludGVyb3V0XCJdLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdC53cmFwcGVyRWwuYWRkRXZlbnRMaXN0ZW5lcihlLCBULCBzKTtcbiAgICAgIH0pLCB0LndyYXBwZXJFbC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgTSwgYSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEkoKSB7XG4gICAgICB2YXIgZSA9IHQuem9vbTtcbiAgICAgIGlmICghZS5lbmFibGVkKSByZXR1cm47XG4gICAgICBlLmVuYWJsZWQgPSAhMTtcbiAgICAgIHZhciBfQTIgPSBBKCksXG4gICAgICAgIHMgPSBfQTIucGFzc2l2ZUxpc3RlbmVyLFxuICAgICAgICBhID0gX0EyLmFjdGl2ZUxpc3RlbmVyV2l0aENhcHR1cmU7XG4gICAgICB0LndyYXBwZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgeCwgcyksIHQud3JhcHBlckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCBTLCBhKSwgW1wicG9pbnRlcnVwXCIsIFwicG9pbnRlcmNhbmNlbFwiLCBcInBvaW50ZXJvdXRcIl0uZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICB0LndyYXBwZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKGUsIFQsIHMpO1xuICAgICAgfSksIHQud3JhcHBlckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCBNLCBhKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuem9vbSwgXCJzY2FsZVwiLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHc7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoZSkge1xuICAgICAgICBpZiAodyAhPT0gZSkge1xuICAgICAgICAgIHZhciBfdDQxID0gbS5pbWFnZUVsLFxuICAgICAgICAgICAgX3MzMSA9IG0uc2xpZGVFbDtcbiAgICAgICAgICBpKFwiem9vbUNoYW5nZVwiLCBlLCBfdDQxLCBfczMxKTtcbiAgICAgICAgfVxuICAgICAgICB3ID0gZTtcbiAgICAgIH1cbiAgICB9KSwgYShcImluaXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdC5wYXJhbXMuem9vbS5lbmFibGVkICYmICQoKTtcbiAgICB9KSwgYShcImRlc3Ryb3lcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgSSgpO1xuICAgIH0pLCBhKFwidG91Y2hTdGFydFwiLCBmdW5jdGlvbiAoZSwgcykge1xuICAgICAgdC56b29tLmVuYWJsZWQgJiYgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHMgPSB0LmRldmljZTtcbiAgICAgICAgaWYgKCFtLmltYWdlRWwpIHJldHVybjtcbiAgICAgICAgaWYgKGguaXNUb3VjaGVkKSByZXR1cm47XG4gICAgICAgIHMuYW5kcm9pZCAmJiBlLmNhbmNlbGFibGUgJiYgZS5wcmV2ZW50RGVmYXVsdCgpLCBoLmlzVG91Y2hlZCA9ICEwO1xuICAgICAgICB2YXIgYSA9IHUubGVuZ3RoID4gMCA/IHVbMF0gOiBlO1xuICAgICAgICBoLnRvdWNoZXNTdGFydC54ID0gYS5wYWdlWCwgaC50b3VjaGVzU3RhcnQueSA9IGEucGFnZVk7XG4gICAgICB9KHMpO1xuICAgIH0pLCBhKFwidG91Y2hFbmRcIiwgZnVuY3Rpb24gKGUsIHMpIHtcbiAgICAgIHQuem9vbS5lbmFibGVkICYmIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSB0Lnpvb207XG4gICAgICAgIGlmICghbS5pbWFnZUVsKSByZXR1cm47XG4gICAgICAgIGlmICghaC5pc1RvdWNoZWQgfHwgIWguaXNNb3ZlZCkgcmV0dXJuIGguaXNUb3VjaGVkID0gITEsIHZvaWQgKGguaXNNb3ZlZCA9ICExKTtcbiAgICAgICAgaC5pc1RvdWNoZWQgPSAhMSwgaC5pc01vdmVkID0gITE7XG4gICAgICAgIHZhciBzID0gMzAwLFxuICAgICAgICAgIGEgPSAzMDA7XG4gICAgICAgIHZhciBpID0gZy54ICogcyxcbiAgICAgICAgICByID0gaC5jdXJyZW50WCArIGksXG4gICAgICAgICAgbiA9IGcueSAqIGEsXG4gICAgICAgICAgbCA9IGguY3VycmVudFkgKyBuO1xuICAgICAgICAwICE9PSBnLnggJiYgKHMgPSBNYXRoLmFicygociAtIGguY3VycmVudFgpIC8gZy54KSksIDAgIT09IGcueSAmJiAoYSA9IE1hdGguYWJzKChsIC0gaC5jdXJyZW50WSkgLyBnLnkpKTtcbiAgICAgICAgdmFyIG8gPSBNYXRoLm1heChzLCBhKTtcbiAgICAgICAgaC5jdXJyZW50WCA9IHIsIGguY3VycmVudFkgPSBsO1xuICAgICAgICB2YXIgZCA9IGgud2lkdGggKiBlLnNjYWxlLFxuICAgICAgICAgIGMgPSBoLmhlaWdodCAqIGUuc2NhbGU7XG4gICAgICAgIGgubWluWCA9IE1hdGgubWluKG0uc2xpZGVXaWR0aCAvIDIgLSBkIC8gMiwgMCksIGgubWF4WCA9IC1oLm1pblgsIGgubWluWSA9IE1hdGgubWluKG0uc2xpZGVIZWlnaHQgLyAyIC0gYyAvIDIsIDApLCBoLm1heFkgPSAtaC5taW5ZLCBoLmN1cnJlbnRYID0gTWF0aC5tYXgoTWF0aC5taW4oaC5jdXJyZW50WCwgaC5tYXhYKSwgaC5taW5YKSwgaC5jdXJyZW50WSA9IE1hdGgubWF4KE1hdGgubWluKGguY3VycmVudFksIGgubWF4WSksIGgubWluWSksIG0uaW1hZ2VXcmFwRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCJcIi5jb25jYXQobywgXCJtc1wiKSwgbS5pbWFnZVdyYXBFbC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZTNkKFwiLmNvbmNhdChoLmN1cnJlbnRYLCBcInB4LCBcIikuY29uY2F0KGguY3VycmVudFksIFwicHgsMClcIik7XG4gICAgICB9KCk7XG4gICAgfSksIGEoXCJkb3VibGVUYXBcIiwgZnVuY3Rpb24gKGUsIHMpIHtcbiAgICAgICF0LmFuaW1hdGluZyAmJiB0LnBhcmFtcy56b29tLmVuYWJsZWQgJiYgdC56b29tLmVuYWJsZWQgJiYgdC5wYXJhbXMuem9vbS50b2dnbGUgJiYgeihzKTtcbiAgICB9KSwgYShcInRyYW5zaXRpb25FbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdC56b29tLmVuYWJsZWQgJiYgdC5wYXJhbXMuem9vbS5lbmFibGVkICYmIEMoKTtcbiAgICB9KSwgYShcInNsaWRlQ2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHQuem9vbS5lbmFibGVkICYmIHQucGFyYW1zLnpvb20uZW5hYmxlZCAmJiB0LnBhcmFtcy5jc3NNb2RlICYmIEMoKTtcbiAgICB9KSwgT2JqZWN0LmFzc2lnbih0Lnpvb20sIHtcbiAgICAgIGVuYWJsZTogJCxcbiAgICAgIGRpc2FibGU6IEksXG4gICAgICBpbjogUCxcbiAgICAgIG91dDogTCxcbiAgICAgIHRvZ2dsZTogelxuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICBhID0gZS5vbjtcbiAgICBmdW5jdGlvbiBpKGUsIHQpIHtcbiAgICAgIHZhciBzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZSwgdCwgcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBpKSB7XG4gICAgICAgICAgZm9yICh0ID0gLTEsIGUgPSBhLmxlbmd0aDsgZSAtIHQgPiAxOykgcyA9IGUgKyB0ID4+IDEsIGFbc10gPD0gaSA/IHQgPSBzIDogZSA9IHM7XG4gICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH07XG4gICAgICB9KCk7XG4gICAgICB2YXIgYSwgaTtcbiAgICAgIHJldHVybiB0aGlzLnggPSBlLCB0aGlzLnkgPSB0LCB0aGlzLmxhc3RJbmRleCA9IGUubGVuZ3RoIC0gMSwgdGhpcy5pbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBlID8gKGkgPSBzKHRoaXMueCwgZSksIGEgPSBpIC0gMSwgKGUgLSB0aGlzLnhbYV0pICogKHRoaXMueVtpXSAtIHRoaXMueVthXSkgLyAodGhpcy54W2ldIC0gdGhpcy54W2FdKSArIHRoaXMueVthXSkgOiAwO1xuICAgICAgfSwgdGhpcztcbiAgICB9XG4gICAgZnVuY3Rpb24gcigpIHtcbiAgICAgIHQuY29udHJvbGxlci5jb250cm9sICYmIHQuY29udHJvbGxlci5zcGxpbmUgJiYgKHQuY29udHJvbGxlci5zcGxpbmUgPSB2b2lkIDAsIGRlbGV0ZSB0LmNvbnRyb2xsZXIuc3BsaW5lKTtcbiAgICB9XG4gICAgcyh7XG4gICAgICBjb250cm9sbGVyOiB7XG4gICAgICAgIGNvbnRyb2w6IHZvaWQgMCxcbiAgICAgICAgaW52ZXJzZTogITEsXG4gICAgICAgIGJ5OiBcInNsaWRlXCJcbiAgICAgIH1cbiAgICB9KSwgdC5jb250cm9sbGVyID0ge1xuICAgICAgY29udHJvbDogdm9pZCAwXG4gICAgfSwgYShcImJlZm9yZUluaXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyAmJiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC5wYXJhbXMuY29udHJvbGxlci5jb250cm9sIHx8IHQucGFyYW1zLmNvbnRyb2xsZXIuY29udHJvbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgICB2YXIgX2U1MSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodC5wYXJhbXMuY29udHJvbGxlci5jb250cm9sKTtcbiAgICAgICAgaWYgKF9lNTEgJiYgX2U1MS5zd2lwZXIpIHQuY29udHJvbGxlci5jb250cm9sID0gX2U1MS5zd2lwZXI7ZWxzZSBpZiAoX2U1MSkge1xuICAgICAgICAgIHZhciBfczMyID0gZnVuY3Rpb24gX3MzMihhKSB7XG4gICAgICAgICAgICB0LmNvbnRyb2xsZXIuY29udHJvbCA9IGEuZGV0YWlsWzBdLCB0LnVwZGF0ZSgpLCBfZTUxLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbml0XCIsIF9zMzIpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgX2U1MS5hZGRFdmVudExpc3RlbmVyKFwiaW5pdFwiLCBfczMyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHQuY29udHJvbGxlci5jb250cm9sID0gdC5wYXJhbXMuY29udHJvbGxlci5jb250cm9sO1xuICAgIH0pLCBhKFwidXBkYXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHIoKTtcbiAgICB9KSwgYShcInJlc2l6ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICByKCk7XG4gICAgfSksIGEoXCJvYnNlcnZlclVwZGF0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICByKCk7XG4gICAgfSksIGEoXCJzZXRUcmFuc2xhdGVcIiwgZnVuY3Rpb24gKGUsIHMsIGEpIHtcbiAgICAgIHQuY29udHJvbGxlci5jb250cm9sICYmICF0LmNvbnRyb2xsZXIuY29udHJvbC5kZXN0cm95ZWQgJiYgdC5jb250cm9sbGVyLnNldFRyYW5zbGF0ZShzLCBhKTtcbiAgICB9KSwgYShcInNldFRyYW5zaXRpb25cIiwgZnVuY3Rpb24gKGUsIHMsIGEpIHtcbiAgICAgIHQuY29udHJvbGxlci5jb250cm9sICYmICF0LmNvbnRyb2xsZXIuY29udHJvbC5kZXN0cm95ZWQgJiYgdC5jb250cm9sbGVyLnNldFRyYW5zaXRpb24ocywgYSk7XG4gICAgfSksIE9iamVjdC5hc3NpZ24odC5jb250cm9sbGVyLCB7XG4gICAgICBzZXRUcmFuc2xhdGU6IGZ1bmN0aW9uIHNldFRyYW5zbGF0ZShlLCBzKSB7XG4gICAgICAgIHZhciBhID0gdC5jb250cm9sbGVyLmNvbnRyb2w7XG4gICAgICAgIHZhciByLCBuO1xuICAgICAgICB2YXIgbCA9IHQuY29uc3RydWN0b3I7XG4gICAgICAgIGZ1bmN0aW9uIG8oZSkge1xuICAgICAgICAgIGlmIChlLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICAgIHZhciBzID0gdC5ydGxUcmFuc2xhdGUgPyAtdC50cmFuc2xhdGUgOiB0LnRyYW5zbGF0ZTtcbiAgICAgICAgICBcInNsaWRlXCIgPT09IHQucGFyYW1zLmNvbnRyb2xsZXIuYnkgJiYgKCFmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdC5jb250cm9sbGVyLnNwbGluZSA9IHQucGFyYW1zLmxvb3AgPyBuZXcgaSh0LnNsaWRlc0dyaWQsIGUuc2xpZGVzR3JpZCkgOiBuZXcgaSh0LnNuYXBHcmlkLCBlLnNuYXBHcmlkKTtcbiAgICAgICAgICB9KGUpLCBuID0gLXQuY29udHJvbGxlci5zcGxpbmUuaW50ZXJwb2xhdGUoLXMpKSwgbiAmJiBcImNvbnRhaW5lclwiICE9PSB0LnBhcmFtcy5jb250cm9sbGVyLmJ5IHx8IChyID0gKGUubWF4VHJhbnNsYXRlKCkgLSBlLm1pblRyYW5zbGF0ZSgpKSAvICh0Lm1heFRyYW5zbGF0ZSgpIC0gdC5taW5UcmFuc2xhdGUoKSksICFOdW1iZXIuaXNOYU4ocikgJiYgTnVtYmVyLmlzRmluaXRlKHIpIHx8IChyID0gMSksIG4gPSAocyAtIHQubWluVHJhbnNsYXRlKCkpICogciArIGUubWluVHJhbnNsYXRlKCkpLCB0LnBhcmFtcy5jb250cm9sbGVyLmludmVyc2UgJiYgKG4gPSBlLm1heFRyYW5zbGF0ZSgpIC0gbiksIGUudXBkYXRlUHJvZ3Jlc3MobiksIGUuc2V0VHJhbnNsYXRlKG4sIHQpLCBlLnVwZGF0ZUFjdGl2ZUluZGV4KCksIGUudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSBmb3IgKHZhciBfZTUyID0gMDsgX2U1MiA8IGEubGVuZ3RoOyBfZTUyICs9IDEpIGFbX2U1Ml0gIT09IHMgJiYgYVtfZTUyXSBpbnN0YW5jZW9mIGwgJiYgbyhhW19lNTJdKTtlbHNlIGEgaW5zdGFuY2VvZiBsICYmIHMgIT09IGEgJiYgbyhhKTtcbiAgICAgIH0sXG4gICAgICBzZXRUcmFuc2l0aW9uOiBmdW5jdGlvbiBzZXRUcmFuc2l0aW9uKGUsIHMpIHtcbiAgICAgICAgdmFyIGEgPSB0LmNvbnN0cnVjdG9yLFxuICAgICAgICAgIGkgPSB0LmNvbnRyb2xsZXIuY29udHJvbDtcbiAgICAgICAgdmFyIHI7XG4gICAgICAgIGZ1bmN0aW9uIGwocykge1xuICAgICAgICAgIHMuZGVzdHJveWVkIHx8IChzLnNldFRyYW5zaXRpb24oZSwgdCksIDAgIT09IGUgJiYgKHMudHJhbnNpdGlvblN0YXJ0KCksIHMucGFyYW1zLmF1dG9IZWlnaHQgJiYgbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzLnVwZGF0ZUF1dG9IZWlnaHQoKTtcbiAgICAgICAgICB9KSwgRShzLndyYXBwZXJFbCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaSAmJiBzLnRyYW5zaXRpb25FbmQoKTtcbiAgICAgICAgICB9KSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGkpKSBmb3IgKHIgPSAwOyByIDwgaS5sZW5ndGg7IHIgKz0gMSkgaVtyXSAhPT0gcyAmJiBpW3JdIGluc3RhbmNlb2YgYSAmJiBsKGlbcl0pO2Vsc2UgaSBpbnN0YW5jZW9mIGEgJiYgcyAhPT0gaSAmJiBsKGkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICBhID0gZS5vbjtcbiAgICBzKHtcbiAgICAgIGExMXk6IHtcbiAgICAgICAgZW5hYmxlZDogITAsXG4gICAgICAgIG5vdGlmaWNhdGlvbkNsYXNzOiBcInN3aXBlci1ub3RpZmljYXRpb25cIixcbiAgICAgICAgcHJldlNsaWRlTWVzc2FnZTogXCJQcmV2aW91cyBzbGlkZVwiLFxuICAgICAgICBuZXh0U2xpZGVNZXNzYWdlOiBcIk5leHQgc2xpZGVcIixcbiAgICAgICAgZmlyc3RTbGlkZU1lc3NhZ2U6IFwiVGhpcyBpcyB0aGUgZmlyc3Qgc2xpZGVcIixcbiAgICAgICAgbGFzdFNsaWRlTWVzc2FnZTogXCJUaGlzIGlzIHRoZSBsYXN0IHNsaWRlXCIsXG4gICAgICAgIHBhZ2luYXRpb25CdWxsZXRNZXNzYWdlOiBcIkdvIHRvIHNsaWRlIHt7aW5kZXh9fVwiLFxuICAgICAgICBzbGlkZUxhYmVsTWVzc2FnZTogXCJ7e2luZGV4fX0gLyB7e3NsaWRlc0xlbmd0aH19XCIsXG4gICAgICAgIGNvbnRhaW5lck1lc3NhZ2U6IG51bGwsXG4gICAgICAgIGNvbnRhaW5lclJvbGVEZXNjcmlwdGlvbk1lc3NhZ2U6IG51bGwsXG4gICAgICAgIGl0ZW1Sb2xlRGVzY3JpcHRpb25NZXNzYWdlOiBudWxsLFxuICAgICAgICBzbGlkZVJvbGU6IFwiZ3JvdXBcIixcbiAgICAgICAgaWQ6IG51bGxcbiAgICAgIH1cbiAgICB9KSwgdC5hMTF5ID0ge1xuICAgICAgY2xpY2tlZDogITFcbiAgICB9O1xuICAgIHZhciBpID0gbnVsbDtcbiAgICBmdW5jdGlvbiByKGUpIHtcbiAgICAgIHZhciB0ID0gaTtcbiAgICAgIDAgIT09IHQubGVuZ3RoICYmICh0LmlubmVySFRNTCA9IFwiXCIsIHQuaW5uZXJIVE1MID0gZSk7XG4gICAgfVxuICAgIHZhciBuID0gZnVuY3Rpb24gbihlKSB7XG4gICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShlKSB8fCAoZSA9IFtlXS5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuICEhZTtcbiAgICAgIH0pKSwgZTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGwoZSkge1xuICAgICAgKGUgPSBuKGUpKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUuc2V0QXR0cmlidXRlKFwidGFiSW5kZXhcIiwgXCIwXCIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG8oZSkge1xuICAgICAgKGUgPSBuKGUpKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUuc2V0QXR0cmlidXRlKFwidGFiSW5kZXhcIiwgXCItMVwiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkKGUsIHQpIHtcbiAgICAgIChlID0gbihlKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgdCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYyhlLCB0KSB7XG4gICAgICAoZSA9IG4oZSkpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLXJvbGVkZXNjcmlwdGlvblwiLCB0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwKGUsIHQpIHtcbiAgICAgIChlID0gbihlKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdShlKSB7XG4gICAgICAoZSA9IG4oZSkpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIsICEwKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtKGUpIHtcbiAgICAgIChlID0gbihlKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnNldEF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIiwgITEpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGgoZSkge1xuICAgICAgaWYgKDEzICE9PSBlLmtleUNvZGUgJiYgMzIgIT09IGUua2V5Q29kZSkgcmV0dXJuO1xuICAgICAgdmFyIHMgPSB0LnBhcmFtcy5hMTF5LFxuICAgICAgICBhID0gZS50YXJnZXQ7XG4gICAgICB0LnBhZ2luYXRpb24gJiYgdC5wYWdpbmF0aW9uLmVsICYmIChhID09PSB0LnBhZ2luYXRpb24uZWwgfHwgdC5wYWdpbmF0aW9uLmVsLmNvbnRhaW5zKGUudGFyZ2V0KSkgJiYgIWUudGFyZ2V0Lm1hdGNoZXModGUodC5wYXJhbXMucGFnaW5hdGlvbi5idWxsZXRDbGFzcykpIHx8ICh0Lm5hdmlnYXRpb24gJiYgdC5uYXZpZ2F0aW9uLm5leHRFbCAmJiBhID09PSB0Lm5hdmlnYXRpb24ubmV4dEVsICYmICh0LmlzRW5kICYmICF0LnBhcmFtcy5sb29wIHx8IHQuc2xpZGVOZXh0KCksIHQuaXNFbmQgPyByKHMubGFzdFNsaWRlTWVzc2FnZSkgOiByKHMubmV4dFNsaWRlTWVzc2FnZSkpLCB0Lm5hdmlnYXRpb24gJiYgdC5uYXZpZ2F0aW9uLnByZXZFbCAmJiBhID09PSB0Lm5hdmlnYXRpb24ucHJldkVsICYmICh0LmlzQmVnaW5uaW5nICYmICF0LnBhcmFtcy5sb29wIHx8IHQuc2xpZGVQcmV2KCksIHQuaXNCZWdpbm5pbmcgPyByKHMuZmlyc3RTbGlkZU1lc3NhZ2UpIDogcihzLnByZXZTbGlkZU1lc3NhZ2UpKSwgdC5wYWdpbmF0aW9uICYmIGEubWF0Y2hlcyh0ZSh0LnBhcmFtcy5wYWdpbmF0aW9uLmJ1bGxldENsYXNzKSkgJiYgYS5jbGljaygpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZigpIHtcbiAgICAgIHJldHVybiB0LnBhZ2luYXRpb24gJiYgdC5wYWdpbmF0aW9uLmJ1bGxldHMgJiYgdC5wYWdpbmF0aW9uLmJ1bGxldHMubGVuZ3RoO1xuICAgIH1cbiAgICBmdW5jdGlvbiB2KCkge1xuICAgICAgcmV0dXJuIGYoKSAmJiB0LnBhcmFtcy5wYWdpbmF0aW9uLmNsaWNrYWJsZTtcbiAgICB9XG4gICAgdmFyIHcgPSBmdW5jdGlvbiB3KGUsIHQsIHMpIHtcbiAgICAgICAgbChlKSwgXCJCVVRUT05cIiAhPT0gZS50YWdOYW1lICYmIChkKGUsIFwiYnV0dG9uXCIpLCBlLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGgpKSwgcChlLCBzKSwgZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAoZSA9IG4oZSkpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUuc2V0QXR0cmlidXRlKFwiYXJpYS1jb250cm9sc1wiLCB0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfShlLCB0KTtcbiAgICAgIH0sXG4gICAgICB5ID0gZnVuY3Rpb24geSgpIHtcbiAgICAgICAgdC5hMTF5LmNsaWNrZWQgPSAhMDtcbiAgICAgIH0sXG4gICAgICBFID0gZnVuY3Rpb24gRSgpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdC5kZXN0cm95ZWQgfHwgKHQuYTExeS5jbGlja2VkID0gITEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICB4ID0gZnVuY3Rpb24geChlKSB7XG4gICAgICAgIGlmICh0LmExMXkuY2xpY2tlZCkgcmV0dXJuO1xuICAgICAgICB2YXIgcyA9IGUudGFyZ2V0LmNsb3Nlc3QoXCIuXCIuY29uY2F0KHQucGFyYW1zLnNsaWRlQ2xhc3MsIFwiLCBzd2lwZXItc2xpZGVcIikpO1xuICAgICAgICBpZiAoIXMgfHwgIXQuc2xpZGVzLmluY2x1ZGVzKHMpKSByZXR1cm47XG4gICAgICAgIHZhciBhID0gdC5zbGlkZXMuaW5kZXhPZihzKSA9PT0gdC5hY3RpdmVJbmRleCxcbiAgICAgICAgICBpID0gdC5wYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcyAmJiB0LnZpc2libGVTbGlkZXMgJiYgdC52aXNpYmxlU2xpZGVzLmluY2x1ZGVzKHMpO1xuICAgICAgICBhIHx8IGkgfHwgZS5zb3VyY2VDYXBhYmlsaXRpZXMgJiYgZS5zb3VyY2VDYXBhYmlsaXRpZXMuZmlyZXNUb3VjaEV2ZW50cyB8fCAodC5pc0hvcml6b250YWwoKSA/IHQuZWwuc2Nyb2xsTGVmdCA9IDAgOiB0LmVsLnNjcm9sbFRvcCA9IDAsIHQuc2xpZGVUbyh0LnNsaWRlcy5pbmRleE9mKHMpLCAwKSk7XG4gICAgICB9LFxuICAgICAgUyA9IGZ1bmN0aW9uIFMoKSB7XG4gICAgICAgIHZhciBlID0gdC5wYXJhbXMuYTExeTtcbiAgICAgICAgZS5pdGVtUm9sZURlc2NyaXB0aW9uTWVzc2FnZSAmJiBjKHQuc2xpZGVzLCBlLml0ZW1Sb2xlRGVzY3JpcHRpb25NZXNzYWdlKSwgZS5zbGlkZVJvbGUgJiYgZCh0LnNsaWRlcywgZS5zbGlkZVJvbGUpO1xuICAgICAgICB2YXIgcyA9IHQuc2xpZGVzLmxlbmd0aDtcbiAgICAgICAgZS5zbGlkZUxhYmVsTWVzc2FnZSAmJiB0LnNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChhLCBpKSB7XG4gICAgICAgICAgdmFyIHIgPSB0LnBhcmFtcy5sb29wID8gcGFyc2VJbnQoYS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN3aXBlci1zbGlkZS1pbmRleFwiKSwgMTApIDogaTtcbiAgICAgICAgICBwKGEsIGUuc2xpZGVMYWJlbE1lc3NhZ2UucmVwbGFjZSgvXFx7XFx7aW5kZXhcXH1cXH0vLCByICsgMSkucmVwbGFjZSgvXFx7XFx7c2xpZGVzTGVuZ3RoXFx9XFx9LywgcykpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBUID0gZnVuY3Rpb24gVCgpIHtcbiAgICAgICAgdmFyIGUgPSB0LnBhcmFtcy5hMTF5O1xuICAgICAgICB0LmlzRWxlbWVudCA/IHQuZWwuc2hhZG93RWwuYXBwZW5kKGkpIDogdC5lbC5hcHBlbmQoaSk7XG4gICAgICAgIHZhciBzID0gdC5lbDtcbiAgICAgICAgZS5jb250YWluZXJSb2xlRGVzY3JpcHRpb25NZXNzYWdlICYmIGMocywgZS5jb250YWluZXJSb2xlRGVzY3JpcHRpb25NZXNzYWdlKSwgZS5jb250YWluZXJNZXNzYWdlICYmIHAocywgZS5jb250YWluZXJNZXNzYWdlKTtcbiAgICAgICAgdmFyIGEgPSB0LndyYXBwZXJFbCxcbiAgICAgICAgICByID0gZS5pZCB8fCBhLmdldEF0dHJpYnV0ZShcImlkXCIpIHx8IFwic3dpcGVyLXdyYXBwZXItXCIuY29uY2F0KChsID0gMTYsIHZvaWQgMCA9PT0gbCAmJiAobCA9IDE2KSwgXCJ4XCIucmVwZWF0KGwpLnJlcGxhY2UoL3gvZywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoMTYgKiBNYXRoLnJhbmRvbSgpKS50b1N0cmluZygxNik7XG4gICAgICAgICAgfSkpKTtcbiAgICAgICAgdmFyIGw7XG4gICAgICAgIHZhciBvID0gdC5wYXJhbXMuYXV0b3BsYXkgJiYgdC5wYXJhbXMuYXV0b3BsYXkuZW5hYmxlZCA/IFwib2ZmXCIgOiBcInBvbGl0ZVwiO1xuICAgICAgICB2YXIgZDtcbiAgICAgICAgZCA9IHIsIG4oYSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUuc2V0QXR0cmlidXRlKFwiaWRcIiwgZCk7XG4gICAgICAgIH0pLCBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIChlID0gbihlKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIiwgdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0oYSwgbyksIFMoKTtcbiAgICAgICAgdmFyIF9yZWY1ID0gdC5uYXZpZ2F0aW9uID8gdC5uYXZpZ2F0aW9uIDoge30sXG4gICAgICAgICAgdSA9IF9yZWY1Lm5leHRFbCxcbiAgICAgICAgICBtID0gX3JlZjUucHJldkVsO1xuICAgICAgICBpZiAodSA9IG4odSksIG0gPSBuKG0pLCB1ICYmIHUuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHJldHVybiB3KHQsIHIsIGUubmV4dFNsaWRlTWVzc2FnZSk7XG4gICAgICAgIH0pLCBtICYmIG0uZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHJldHVybiB3KHQsIHIsIGUucHJldlNsaWRlTWVzc2FnZSk7XG4gICAgICAgIH0pLCB2KCkpIHtcbiAgICAgICAgICAoQXJyYXkuaXNBcnJheSh0LnBhZ2luYXRpb24uZWwpID8gdC5wYWdpbmF0aW9uLmVsIDogW3QucGFnaW5hdGlvbi5lbF0pLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdC5lbC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgeCwgITApLCB0LmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCB5LCAhMCksIHQuZWwuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBFLCAhMCk7XG4gICAgICB9O1xuICAgIGEoXCJiZWZvcmVJbml0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGkgPSBnKFwic3BhblwiLCB0LnBhcmFtcy5hMTF5Lm5vdGlmaWNhdGlvbkNsYXNzKSwgaS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIiwgXCJhc3NlcnRpdmVcIiksIGkuc2V0QXR0cmlidXRlKFwiYXJpYS1hdG9taWNcIiwgXCJ0cnVlXCIpO1xuICAgIH0pLCBhKFwiYWZ0ZXJJbml0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHQucGFyYW1zLmExMXkuZW5hYmxlZCAmJiBUKCk7XG4gICAgfSksIGEoXCJzbGlkZXNMZW5ndGhDaGFuZ2Ugc25hcEdyaWRMZW5ndGhDaGFuZ2Ugc2xpZGVzR3JpZExlbmd0aENoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0LnBhcmFtcy5hMTF5LmVuYWJsZWQgJiYgUygpO1xuICAgIH0pLCBhKFwiZnJvbUVkZ2UgdG9FZGdlIGFmdGVySW5pdCBsb2NrIHVubG9ja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0LnBhcmFtcy5hMTF5LmVuYWJsZWQgJiYgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodC5wYXJhbXMubG9vcCB8fCB0LnBhcmFtcy5yZXdpbmQgfHwgIXQubmF2aWdhdGlvbikgcmV0dXJuO1xuICAgICAgICB2YXIgX3QkbmF2aWdhdGlvbjUgPSB0Lm5hdmlnYXRpb24sXG4gICAgICAgICAgZSA9IF90JG5hdmlnYXRpb241Lm5leHRFbCxcbiAgICAgICAgICBzID0gX3QkbmF2aWdhdGlvbjUucHJldkVsO1xuICAgICAgICBzICYmICh0LmlzQmVnaW5uaW5nID8gKHUocyksIG8ocykpIDogKG0ocyksIGwocykpKSwgZSAmJiAodC5pc0VuZCA/ICh1KGUpLCBvKGUpKSA6IChtKGUpLCBsKGUpKSk7XG4gICAgICB9KCk7XG4gICAgfSksIGEoXCJwYWdpbmF0aW9uVXBkYXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHQucGFyYW1zLmExMXkuZW5hYmxlZCAmJiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gdC5wYXJhbXMuYTExeTtcbiAgICAgICAgZigpICYmIHQucGFnaW5hdGlvbi5idWxsZXRzLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICB0LnBhcmFtcy5wYWdpbmF0aW9uLmNsaWNrYWJsZSAmJiAobChzKSwgdC5wYXJhbXMucGFnaW5hdGlvbi5yZW5kZXJCdWxsZXQgfHwgKGQocywgXCJidXR0b25cIiksIHAocywgZS5wYWdpbmF0aW9uQnVsbGV0TWVzc2FnZS5yZXBsYWNlKC9cXHtcXHtpbmRleFxcfVxcfS8sIGIocykgKyAxKSkpKSwgcy5tYXRjaGVzKHRlKHQucGFyYW1zLnBhZ2luYXRpb24uYnVsbGV0QWN0aXZlQ2xhc3MpKSA/IHMuc2V0QXR0cmlidXRlKFwiYXJpYS1jdXJyZW50XCIsIFwidHJ1ZVwiKSA6IHMucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1jdXJyZW50XCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0oKTtcbiAgICB9KSwgYShcImRlc3Ryb3lcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdC5wYXJhbXMuYTExeS5lbmFibGVkICYmIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaSAmJiBpLnJlbW92ZSgpO1xuICAgICAgICB2YXIgX3JlZjYgPSB0Lm5hdmlnYXRpb24gPyB0Lm5hdmlnYXRpb24gOiB7fSxcbiAgICAgICAgICBlID0gX3JlZjYubmV4dEVsLFxuICAgICAgICAgIHMgPSBfcmVmNi5wcmV2RWw7XG4gICAgICAgIGUgPSBuKGUpLCBzID0gbihzKSwgZSAmJiBlLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICByZXR1cm4gZS5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoKTtcbiAgICAgICAgfSksIHMgJiYgcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaCk7XG4gICAgICAgIH0pLCB2KCkgJiYgKEFycmF5LmlzQXJyYXkodC5wYWdpbmF0aW9uLmVsKSA/IHQucGFnaW5hdGlvbi5lbCA6IFt0LnBhZ2luYXRpb24uZWxdKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHQuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHgsICEwKSwgdC5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgeSwgITApLCB0LmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgRSwgITApO1xuICAgICAgfSgpO1xuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICBhID0gZS5vbjtcbiAgICBzKHtcbiAgICAgIGhpc3Rvcnk6IHtcbiAgICAgICAgZW5hYmxlZDogITEsXG4gICAgICAgIHJvb3Q6IFwiXCIsXG4gICAgICAgIHJlcGxhY2VTdGF0ZTogITEsXG4gICAgICAgIGtleTogXCJzbGlkZXNcIixcbiAgICAgICAga2VlcFF1ZXJ5OiAhMVxuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBpID0gITEsXG4gICAgICBuID0ge307XG4gICAgdmFyIGwgPSBmdW5jdGlvbiBsKGUpIHtcbiAgICAgICAgcmV0dXJuIGUudG9TdHJpbmcoKS5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKS5yZXBsYWNlKC9bXlxcdy1dKy9nLCBcIlwiKS5yZXBsYWNlKC8tLSsvZywgXCItXCIpLnJlcGxhY2UoL14tKy8sIFwiXCIpLnJlcGxhY2UoLy0rJC8sIFwiXCIpO1xuICAgICAgfSxcbiAgICAgIG8gPSBmdW5jdGlvbiBvKGUpIHtcbiAgICAgICAgdmFyIHQgPSByKCk7XG4gICAgICAgIHZhciBzO1xuICAgICAgICBzID0gZSA/IG5ldyBVUkwoZSkgOiB0LmxvY2F0aW9uO1xuICAgICAgICB2YXIgYSA9IHMucGF0aG5hbWUuc2xpY2UoMSkuc3BsaXQoXCIvXCIpLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCIgIT09IGU7XG4gICAgICAgICAgfSksXG4gICAgICAgICAgaSA9IGEubGVuZ3RoO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGtleTogYVtpIC0gMl0sXG4gICAgICAgICAgdmFsdWU6IGFbaSAtIDFdXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgZCA9IGZ1bmN0aW9uIGQoZSwgcykge1xuICAgICAgICB2YXIgYSA9IHIoKTtcbiAgICAgICAgaWYgKCFpIHx8ICF0LnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQpIHJldHVybjtcbiAgICAgICAgdmFyIG47XG4gICAgICAgIG4gPSB0LnBhcmFtcy51cmwgPyBuZXcgVVJMKHQucGFyYW1zLnVybCkgOiBhLmxvY2F0aW9uO1xuICAgICAgICB2YXIgbyA9IHQuc2xpZGVzW3NdO1xuICAgICAgICB2YXIgZCA9IGwoby5nZXRBdHRyaWJ1dGUoXCJkYXRhLWhpc3RvcnlcIikpO1xuICAgICAgICBpZiAodC5wYXJhbXMuaGlzdG9yeS5yb290Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2YXIgX3MzMyA9IHQucGFyYW1zLmhpc3Rvcnkucm9vdDtcbiAgICAgICAgICBcIi9cIiA9PT0gX3MzM1tfczMzLmxlbmd0aCAtIDFdICYmIChfczMzID0gX3MzMy5zbGljZSgwLCBfczMzLmxlbmd0aCAtIDEpKSwgZCA9IFwiXCIuY29uY2F0KF9zMzMsIFwiL1wiKS5jb25jYXQoZSA/IFwiXCIuY29uY2F0KGUsIFwiL1wiKSA6IFwiXCIpLmNvbmNhdChkKTtcbiAgICAgICAgfSBlbHNlIG4ucGF0aG5hbWUuaW5jbHVkZXMoZSkgfHwgKGQgPSBcIlwiLmNvbmNhdChlID8gXCJcIi5jb25jYXQoZSwgXCIvXCIpIDogXCJcIikuY29uY2F0KGQpKTtcbiAgICAgICAgdC5wYXJhbXMuaGlzdG9yeS5rZWVwUXVlcnkgJiYgKGQgKz0gbi5zZWFyY2gpO1xuICAgICAgICB2YXIgYyA9IGEuaGlzdG9yeS5zdGF0ZTtcbiAgICAgICAgYyAmJiBjLnZhbHVlID09PSBkIHx8ICh0LnBhcmFtcy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSA/IGEuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe1xuICAgICAgICAgIHZhbHVlOiBkXG4gICAgICAgIH0sIG51bGwsIGQpIDogYS5oaXN0b3J5LnB1c2hTdGF0ZSh7XG4gICAgICAgICAgdmFsdWU6IGRcbiAgICAgICAgfSwgbnVsbCwgZCkpO1xuICAgICAgfSxcbiAgICAgIGMgPSBmdW5jdGlvbiBjKGUsIHMsIGEpIHtcbiAgICAgICAgaWYgKHMpIGZvciAodmFyIF9pMTQgPSAwLCBfcjExID0gdC5zbGlkZXMubGVuZ3RoOyBfaTE0IDwgX3IxMTsgX2kxNCArPSAxKSB7XG4gICAgICAgICAgdmFyIF9yMTIgPSB0LnNsaWRlc1tfaTE0XTtcbiAgICAgICAgICBpZiAobChfcjEyLmdldEF0dHJpYnV0ZShcImRhdGEtaGlzdG9yeVwiKSkgPT09IHMpIHtcbiAgICAgICAgICAgIHZhciBfczM0ID0gdC5nZXRTbGlkZUluZGV4KF9yMTIpO1xuICAgICAgICAgICAgdC5zbGlkZVRvKF9zMzQsIGUsIGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHQuc2xpZGVUbygwLCBlLCBhKTtcbiAgICAgIH0sXG4gICAgICBwID0gZnVuY3Rpb24gcCgpIHtcbiAgICAgICAgbiA9IG8odC5wYXJhbXMudXJsKSwgYyh0LnBhcmFtcy5zcGVlZCwgbi52YWx1ZSwgITEpO1xuICAgICAgfTtcbiAgICBhKFwiaW5pdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0LnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQgJiYgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZSA9IHIoKTtcbiAgICAgICAgaWYgKHQucGFyYW1zLmhpc3RvcnkpIHtcbiAgICAgICAgICBpZiAoIWUuaGlzdG9yeSB8fCAhZS5oaXN0b3J5LnB1c2hTdGF0ZSkgcmV0dXJuIHQucGFyYW1zLmhpc3RvcnkuZW5hYmxlZCA9ICExLCB2b2lkICh0LnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5lbmFibGVkID0gITApO1xuICAgICAgICAgIGkgPSAhMCwgbiA9IG8odC5wYXJhbXMudXJsKSwgbi5rZXkgfHwgbi52YWx1ZSA/IChjKDAsIG4udmFsdWUsIHQucGFyYW1zLnJ1bkNhbGxiYWNrc09uSW5pdCksIHQucGFyYW1zLmhpc3RvcnkucmVwbGFjZVN0YXRlIHx8IGUuYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsIHApKSA6IHQucGFyYW1zLmhpc3RvcnkucmVwbGFjZVN0YXRlIHx8IGUuYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsIHApO1xuICAgICAgICB9XG4gICAgICB9KCk7XG4gICAgfSksIGEoXCJkZXN0cm95XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHQucGFyYW1zLmhpc3RvcnkuZW5hYmxlZCAmJiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gcigpO1xuICAgICAgICB0LnBhcmFtcy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSB8fCBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCBwKTtcbiAgICAgIH0oKTtcbiAgICB9KSwgYShcInRyYW5zaXRpb25FbmQgX2ZyZWVNb2RlTm9Nb21lbnR1bVJlbGVhc2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaSAmJiBkKHQucGFyYW1zLmhpc3Rvcnkua2V5LCB0LmFjdGl2ZUluZGV4KTtcbiAgICB9KSwgYShcInNsaWRlQ2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGkgJiYgdC5wYXJhbXMuY3NzTW9kZSAmJiBkKHQucGFyYW1zLmhpc3Rvcnkua2V5LCB0LmFjdGl2ZUluZGV4KTtcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgaSA9IGUuZW1pdCxcbiAgICAgIG4gPSBlLm9uLFxuICAgICAgbCA9ICExO1xuICAgIHZhciBvID0gYSgpLFxuICAgICAgZCA9IHIoKTtcbiAgICBzKHtcbiAgICAgIGhhc2hOYXZpZ2F0aW9uOiB7XG4gICAgICAgIGVuYWJsZWQ6ICExLFxuICAgICAgICByZXBsYWNlU3RhdGU6ICExLFxuICAgICAgICB3YXRjaFN0YXRlOiAhMSxcbiAgICAgICAgZ2V0U2xpZGVJbmRleDogZnVuY3Rpb24gZ2V0U2xpZGVJbmRleChlLCBzKSB7XG4gICAgICAgICAgaWYgKHQudmlydHVhbCAmJiB0LnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIHZhciBfZTUzID0gdC5zbGlkZXMuZmlsdGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBlLmdldEF0dHJpYnV0ZShcImRhdGEtaGFzaFwiKSA9PT0gcztcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICAgICAgaWYgKCFfZTUzKSByZXR1cm4gMDtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChfZTUzLmdldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLXNsaWRlLWluZGV4XCIpLCAxMCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0LmdldFNsaWRlSW5kZXgoZih0LnNsaWRlc0VsLCBcIi5cIi5jb25jYXQodC5wYXJhbXMuc2xpZGVDbGFzcywgXCJbZGF0YS1oYXNoPVxcXCJcIikuY29uY2F0KHMsIFwiXFxcIl0sIHN3aXBlci1zbGlkZVtkYXRhLWhhc2g9XFxcIlwiKS5jb25jYXQocywgXCJcXFwiXVwiKSlbMF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgdmFyIGMgPSBmdW5jdGlvbiBjKCkge1xuICAgICAgICBpKFwiaGFzaENoYW5nZVwiKTtcbiAgICAgICAgdmFyIGUgPSBvLmxvY2F0aW9uLmhhc2gucmVwbGFjZShcIiNcIiwgXCJcIiksXG4gICAgICAgICAgcyA9IHQudmlydHVhbCAmJiB0LnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyB0LnNsaWRlc0VsLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XFxcIlwiLmNvbmNhdCh0LmFjdGl2ZUluZGV4LCBcIlxcXCJdXCIpKSA6IHQuc2xpZGVzW3QuYWN0aXZlSW5kZXhdO1xuICAgICAgICBpZiAoZSAhPT0gKHMgPyBzLmdldEF0dHJpYnV0ZShcImRhdGEtaGFzaFwiKSA6IFwiXCIpKSB7XG4gICAgICAgICAgdmFyIF9zMzUgPSB0LnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5nZXRTbGlkZUluZGV4KHQsIGUpO1xuICAgICAgICAgIGlmICh2b2lkIDAgPT09IF9zMzUgfHwgTnVtYmVyLmlzTmFOKF9zMzUpKSByZXR1cm47XG4gICAgICAgICAgdC5zbGlkZVRvKF9zMzUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcCA9IGZ1bmN0aW9uIHAoKSB7XG4gICAgICAgIGlmICghbCB8fCAhdC5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgICB2YXIgZSA9IHQudmlydHVhbCAmJiB0LnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyB0LnNsaWRlc0VsLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XFxcIlwiLmNvbmNhdCh0LmFjdGl2ZUluZGV4LCBcIlxcXCJdXCIpKSA6IHQuc2xpZGVzW3QuYWN0aXZlSW5kZXhdLFxuICAgICAgICAgIHMgPSBlID8gZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWhhc2hcIikgfHwgZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWhpc3RvcnlcIikgOiBcIlwiO1xuICAgICAgICB0LnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5yZXBsYWNlU3RhdGUgJiYgZC5oaXN0b3J5ICYmIGQuaGlzdG9yeS5yZXBsYWNlU3RhdGUgPyAoZC5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBudWxsLCBcIiNcIi5jb25jYXQocykgfHwgXCJcIiksIGkoXCJoYXNoU2V0XCIpKSA6IChvLmxvY2F0aW9uLmhhc2ggPSBzIHx8IFwiXCIsIGkoXCJoYXNoU2V0XCIpKTtcbiAgICAgIH07XG4gICAgbihcImluaXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdC5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZW5hYmxlZCAmJiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdC5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZW5hYmxlZCB8fCB0LnBhcmFtcy5oaXN0b3J5ICYmIHQucGFyYW1zLmhpc3RvcnkuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgICBsID0gITA7XG4gICAgICAgIHZhciBlID0gby5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoXCIjXCIsIFwiXCIpO1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgIHZhciBfczM2ID0gMCxcbiAgICAgICAgICAgIF9hMjAgPSB0LnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5nZXRTbGlkZUluZGV4KHQsIGUpO1xuICAgICAgICAgIHQuc2xpZGVUbyhfYTIwIHx8IDAsIF9zMzYsIHQucGFyYW1zLnJ1bkNhbGxiYWNrc09uSW5pdCwgITApO1xuICAgICAgICB9XG4gICAgICAgIHQucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLndhdGNoU3RhdGUgJiYgZC5hZGRFdmVudExpc3RlbmVyKFwiaGFzaGNoYW5nZVwiLCBjKTtcbiAgICAgIH0oKTtcbiAgICB9KSwgbihcImRlc3Ryb3lcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdC5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZW5hYmxlZCAmJiB0LnBhcmFtcy5oYXNoTmF2aWdhdGlvbi53YXRjaFN0YXRlICYmIGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImhhc2hjaGFuZ2VcIiwgYyk7XG4gICAgfSksIG4oXCJ0cmFuc2l0aW9uRW5kIF9mcmVlTW9kZU5vTW9tZW50dW1SZWxlYXNlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGwgJiYgcCgpO1xuICAgIH0pLCBuKFwic2xpZGVDaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgbCAmJiB0LnBhcmFtcy5jc3NNb2RlICYmIHAoKTtcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCxcbiAgICAgIHMsXG4gICAgICBpID0gZS5zd2lwZXIsXG4gICAgICByID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICBuID0gZS5vbixcbiAgICAgIGwgPSBlLmVtaXQsXG4gICAgICBvID0gZS5wYXJhbXM7XG4gICAgaS5hdXRvcGxheSA9IHtcbiAgICAgIHJ1bm5pbmc6ICExLFxuICAgICAgcGF1c2VkOiAhMSxcbiAgICAgIHRpbWVMZWZ0OiAwXG4gICAgfSwgcih7XG4gICAgICBhdXRvcGxheToge1xuICAgICAgICBlbmFibGVkOiAhMSxcbiAgICAgICAgZGVsYXk6IDNlMyxcbiAgICAgICAgd2FpdEZvclRyYW5zaXRpb246ICEwLFxuICAgICAgICBkaXNhYmxlT25JbnRlcmFjdGlvbjogITAsXG4gICAgICAgIHN0b3BPbkxhc3RTbGlkZTogITEsXG4gICAgICAgIHJldmVyc2VEaXJlY3Rpb246ICExLFxuICAgICAgICBwYXVzZU9uTW91c2VFbnRlcjogITFcbiAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgZCxcbiAgICAgIGMsXG4gICAgICBwLFxuICAgICAgdSxcbiAgICAgIG0sXG4gICAgICBoLFxuICAgICAgZixcbiAgICAgIGcgPSBvICYmIG8uYXV0b3BsYXkgPyBvLmF1dG9wbGF5LmRlbGF5IDogM2UzLFxuICAgICAgdiA9IG8gJiYgby5hdXRvcGxheSA/IG8uYXV0b3BsYXkuZGVsYXkgOiAzZTMsXG4gICAgICB3ID0gbmV3IERhdGUoKS5nZXRUaW1lO1xuICAgIGZ1bmN0aW9uIGIoZSkge1xuICAgICAgaSAmJiAhaS5kZXN0cm95ZWQgJiYgaS53cmFwcGVyRWwgJiYgZS50YXJnZXQgPT09IGkud3JhcHBlckVsICYmIChpLndyYXBwZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBiKSwgTSgpKTtcbiAgICB9XG4gICAgdmFyIHkgPSBmdW5jdGlvbiB5KCkge1xuICAgICAgICBpZiAoaS5kZXN0cm95ZWQgfHwgIWkuYXV0b3BsYXkucnVubmluZykgcmV0dXJuO1xuICAgICAgICBpLmF1dG9wbGF5LnBhdXNlZCA/IGMgPSAhMCA6IGMgJiYgKHYgPSBkLCBjID0gITEpO1xuICAgICAgICB2YXIgZSA9IGkuYXV0b3BsYXkucGF1c2VkID8gZCA6IHcgKyB2IC0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIGkuYXV0b3BsYXkudGltZUxlZnQgPSBlLCBsKFwiYXV0b3BsYXlUaW1lTGVmdFwiLCBlLCBlIC8gZyksIHMgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHkoKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgRSA9IGZ1bmN0aW9uIEUoZSkge1xuICAgICAgICBpZiAoaS5kZXN0cm95ZWQgfHwgIWkuYXV0b3BsYXkucnVubmluZykgcmV0dXJuO1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShzKSwgeSgpO1xuICAgICAgICB2YXIgYSA9IHZvaWQgMCA9PT0gZSA/IGkucGFyYW1zLmF1dG9wbGF5LmRlbGF5IDogZTtcbiAgICAgICAgZyA9IGkucGFyYW1zLmF1dG9wbGF5LmRlbGF5LCB2ID0gaS5wYXJhbXMuYXV0b3BsYXkuZGVsYXk7XG4gICAgICAgIHZhciByID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBlO1xuICAgICAgICAgIGlmIChlID0gaS52aXJ0dWFsICYmIGkucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCA/IGkuc2xpZGVzLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwic3dpcGVyLXNsaWRlLWFjdGl2ZVwiKTtcbiAgICAgICAgICB9KVswXSA6IGkuc2xpZGVzW2kuYWN0aXZlSW5kZXhdLCAhZSkgcmV0dXJuO1xuICAgICAgICAgIHJldHVybiBwYXJzZUludChlLmdldEF0dHJpYnV0ZShcImRhdGEtc3dpcGVyLWF1dG9wbGF5XCIpLCAxMCk7XG4gICAgICAgIH0oKTtcbiAgICAgICAgIU51bWJlci5pc05hTihyKSAmJiByID4gMCAmJiB2b2lkIDAgPT09IGUgJiYgKGEgPSByLCBnID0gciwgdiA9IHIpLCBkID0gYTtcbiAgICAgICAgdmFyIG4gPSBpLnBhcmFtcy5zcGVlZCxcbiAgICAgICAgICBvID0gZnVuY3Rpb24gbygpIHtcbiAgICAgICAgICAgIGkgJiYgIWkuZGVzdHJveWVkICYmIChpLnBhcmFtcy5hdXRvcGxheS5yZXZlcnNlRGlyZWN0aW9uID8gIWkuaXNCZWdpbm5pbmcgfHwgaS5wYXJhbXMubG9vcCB8fCBpLnBhcmFtcy5yZXdpbmQgPyAoaS5zbGlkZVByZXYobiwgITAsICEwKSwgbChcImF1dG9wbGF5XCIpKSA6IGkucGFyYW1zLmF1dG9wbGF5LnN0b3BPbkxhc3RTbGlkZSB8fCAoaS5zbGlkZVRvKGkuc2xpZGVzLmxlbmd0aCAtIDEsIG4sICEwLCAhMCksIGwoXCJhdXRvcGxheVwiKSkgOiAhaS5pc0VuZCB8fCBpLnBhcmFtcy5sb29wIHx8IGkucGFyYW1zLnJld2luZCA/IChpLnNsaWRlTmV4dChuLCAhMCwgITApLCBsKFwiYXV0b3BsYXlcIikpIDogaS5wYXJhbXMuYXV0b3BsYXkuc3RvcE9uTGFzdFNsaWRlIHx8IChpLnNsaWRlVG8oMCwgbiwgITAsICEwKSwgbChcImF1dG9wbGF5XCIpKSwgaS5wYXJhbXMuY3NzTW9kZSAmJiAodyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBFKCk7XG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICAgIH07XG4gICAgICAgIHJldHVybiBhID4gMCA/IChjbGVhclRpbWVvdXQodCksIHQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBvKCk7XG4gICAgICAgIH0sIGEpKSA6IHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgbygpO1xuICAgICAgICB9KSwgYTtcbiAgICAgIH0sXG4gICAgICB4ID0gZnVuY3Rpb24geCgpIHtcbiAgICAgICAgaS5hdXRvcGxheS5ydW5uaW5nID0gITAsIEUoKSwgbChcImF1dG9wbGF5U3RhcnRcIik7XG4gICAgICB9LFxuICAgICAgUyA9IGZ1bmN0aW9uIFMoKSB7XG4gICAgICAgIGkuYXV0b3BsYXkucnVubmluZyA9ICExLCBjbGVhclRpbWVvdXQodCksIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHMpLCBsKFwiYXV0b3BsYXlTdG9wXCIpO1xuICAgICAgfSxcbiAgICAgIFQgPSBmdW5jdGlvbiBUKGUsIHMpIHtcbiAgICAgICAgaWYgKGkuZGVzdHJveWVkIHx8ICFpLmF1dG9wbGF5LnJ1bm5pbmcpIHJldHVybjtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHQpLCBlIHx8IChmID0gITApO1xuICAgICAgICB2YXIgYSA9IGZ1bmN0aW9uIGEoKSB7XG4gICAgICAgICAgbChcImF1dG9wbGF5UGF1c2VcIiksIGkucGFyYW1zLmF1dG9wbGF5LndhaXRGb3JUcmFuc2l0aW9uID8gaS53cmFwcGVyRWwuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgYikgOiBNKCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChpLmF1dG9wbGF5LnBhdXNlZCA9ICEwLCBzKSByZXR1cm4gaCAmJiAoZCA9IGkucGFyYW1zLmF1dG9wbGF5LmRlbGF5KSwgaCA9ICExLCB2b2lkIGEoKTtcbiAgICAgICAgdmFyIHIgPSBkIHx8IGkucGFyYW1zLmF1dG9wbGF5LmRlbGF5O1xuICAgICAgICBkID0gciAtIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHcpLCBpLmlzRW5kICYmIGQgPCAwICYmICFpLnBhcmFtcy5sb29wIHx8IChkIDwgMCAmJiAoZCA9IDApLCBhKCkpO1xuICAgICAgfSxcbiAgICAgIE0gPSBmdW5jdGlvbiBNKCkge1xuICAgICAgICBpLmlzRW5kICYmIGQgPCAwICYmICFpLnBhcmFtcy5sb29wIHx8IGkuZGVzdHJveWVkIHx8ICFpLmF1dG9wbGF5LnJ1bm5pbmcgfHwgKHcgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgZiA/IChmID0gITEsIEUoZCkpIDogRSgpLCBpLmF1dG9wbGF5LnBhdXNlZCA9ICExLCBsKFwiYXV0b3BsYXlSZXN1bWVcIikpO1xuICAgICAgfSxcbiAgICAgIEMgPSBmdW5jdGlvbiBDKCkge1xuICAgICAgICBpZiAoaS5kZXN0cm95ZWQgfHwgIWkuYXV0b3BsYXkucnVubmluZykgcmV0dXJuO1xuICAgICAgICB2YXIgZSA9IGEoKTtcbiAgICAgICAgXCJoaWRkZW5cIiA9PT0gZS52aXNpYmlsaXR5U3RhdGUgJiYgKGYgPSAhMCwgVCghMCkpLCBcInZpc2libGVcIiA9PT0gZS52aXNpYmlsaXR5U3RhdGUgJiYgTSgpO1xuICAgICAgfSxcbiAgICAgIFAgPSBmdW5jdGlvbiBQKGUpIHtcbiAgICAgICAgXCJtb3VzZVwiID09PSBlLnBvaW50ZXJUeXBlICYmIChmID0gITAsIFQoITApKTtcbiAgICAgIH0sXG4gICAgICBMID0gZnVuY3Rpb24gTChlKSB7XG4gICAgICAgIFwibW91c2VcIiA9PT0gZS5wb2ludGVyVHlwZSAmJiBpLmF1dG9wbGF5LnBhdXNlZCAmJiBNKCk7XG4gICAgICB9O1xuICAgIG4oXCJpbml0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGkucGFyYW1zLmF1dG9wbGF5LmVuYWJsZWQgJiYgKGkucGFyYW1zLmF1dG9wbGF5LnBhdXNlT25Nb3VzZUVudGVyICYmIChpLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZW50ZXJcIiwgUCksIGkuZWwuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJsZWF2ZVwiLCBMKSksIGEoKS5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCBDKSwgdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLCB4KCkpO1xuICAgIH0pLCBuKFwiZGVzdHJveVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZW50ZXJcIiwgUCksIGkuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJsZWF2ZVwiLCBMKSwgYSgpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIEMpLCBpLmF1dG9wbGF5LnJ1bm5pbmcgJiYgUygpO1xuICAgIH0pLCBuKFwiYmVmb3JlVHJhbnNpdGlvblN0YXJ0XCIsIGZ1bmN0aW9uIChlLCB0LCBzKSB7XG4gICAgICAhaS5kZXN0cm95ZWQgJiYgaS5hdXRvcGxheS5ydW5uaW5nICYmIChzIHx8ICFpLnBhcmFtcy5hdXRvcGxheS5kaXNhYmxlT25JbnRlcmFjdGlvbiA/IFQoITAsICEwKSA6IFMoKSk7XG4gICAgfSksIG4oXCJzbGlkZXJGaXJzdE1vdmVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgIWkuZGVzdHJveWVkICYmIGkuYXV0b3BsYXkucnVubmluZyAmJiAoaS5wYXJhbXMuYXV0b3BsYXkuZGlzYWJsZU9uSW50ZXJhY3Rpb24gPyBTKCkgOiAocCA9ICEwLCB1ID0gITEsIGYgPSAhMSwgbSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBmID0gITAsIHUgPSAhMCwgVCghMCk7XG4gICAgICB9LCAyMDApKSk7XG4gICAgfSksIG4oXCJ0b3VjaEVuZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWkuZGVzdHJveWVkICYmIGkuYXV0b3BsYXkucnVubmluZyAmJiBwKSB7XG4gICAgICAgIGlmIChjbGVhclRpbWVvdXQobSksIGNsZWFyVGltZW91dCh0KSwgaS5wYXJhbXMuYXV0b3BsYXkuZGlzYWJsZU9uSW50ZXJhY3Rpb24pIHJldHVybiB1ID0gITEsIHZvaWQgKHAgPSAhMSk7XG4gICAgICAgIHUgJiYgaS5wYXJhbXMuY3NzTW9kZSAmJiBNKCksIHUgPSAhMSwgcCA9ICExO1xuICAgICAgfVxuICAgIH0pLCBuKFwic2xpZGVDaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgIWkuZGVzdHJveWVkICYmIGkuYXV0b3BsYXkucnVubmluZyAmJiAoaCA9ICEwKTtcbiAgICB9KSwgT2JqZWN0LmFzc2lnbihpLmF1dG9wbGF5LCB7XG4gICAgICBzdGFydDogeCxcbiAgICAgIHN0b3A6IFMsXG4gICAgICBwYXVzZTogVCxcbiAgICAgIHJlc3VtZTogTVxuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICBpID0gZS5vbjtcbiAgICBzKHtcbiAgICAgIHRodW1iczoge1xuICAgICAgICBzd2lwZXI6IG51bGwsXG4gICAgICAgIG11bHRpcGxlQWN0aXZlVGh1bWJzOiAhMCxcbiAgICAgICAgYXV0b1Njcm9sbE9mZnNldDogMCxcbiAgICAgICAgc2xpZGVUaHVtYkFjdGl2ZUNsYXNzOiBcInN3aXBlci1zbGlkZS10aHVtYi1hY3RpdmVcIixcbiAgICAgICAgdGh1bWJzQ29udGFpbmVyQ2xhc3M6IFwic3dpcGVyLXRodW1ic1wiXG4gICAgICB9XG4gICAgfSk7XG4gICAgdmFyIHIgPSAhMSxcbiAgICAgIG4gPSAhMTtcbiAgICBmdW5jdGlvbiBsKCkge1xuICAgICAgdmFyIGUgPSB0LnRodW1icy5zd2lwZXI7XG4gICAgICBpZiAoIWUgfHwgZS5kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgIHZhciBzID0gZS5jbGlja2VkSW5kZXgsXG4gICAgICAgIGEgPSBlLmNsaWNrZWRTbGlkZTtcbiAgICAgIGlmIChhICYmIGEuY2xhc3NMaXN0LmNvbnRhaW5zKHQucGFyYW1zLnRodW1icy5zbGlkZVRodW1iQWN0aXZlQ2xhc3MpKSByZXR1cm47XG4gICAgICBpZiAobnVsbCA9PSBzKSByZXR1cm47XG4gICAgICB2YXIgaTtcbiAgICAgIGkgPSBlLnBhcmFtcy5sb29wID8gcGFyc2VJbnQoZS5jbGlja2VkU2xpZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIiksIDEwKSA6IHMsIHQucGFyYW1zLmxvb3AgPyB0LnNsaWRlVG9Mb29wKGkpIDogdC5zbGlkZVRvKGkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvKCkge1xuICAgICAgdmFyIGUgPSB0LnBhcmFtcy50aHVtYnM7XG4gICAgICBpZiAocikgcmV0dXJuICExO1xuICAgICAgciA9ICEwO1xuICAgICAgdmFyIHMgPSB0LmNvbnN0cnVjdG9yO1xuICAgICAgaWYgKGUuc3dpcGVyIGluc3RhbmNlb2YgcykgdC50aHVtYnMuc3dpcGVyID0gZS5zd2lwZXIsIE9iamVjdC5hc3NpZ24odC50aHVtYnMuc3dpcGVyLm9yaWdpbmFsUGFyYW1zLCB7XG4gICAgICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6ICEwLFxuICAgICAgICBzbGlkZVRvQ2xpY2tlZFNsaWRlOiAhMVxuICAgICAgfSksIE9iamVjdC5hc3NpZ24odC50aHVtYnMuc3dpcGVyLnBhcmFtcywge1xuICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiAhMCxcbiAgICAgICAgc2xpZGVUb0NsaWNrZWRTbGlkZTogITFcbiAgICAgIH0pLCB0LnRodW1icy5zd2lwZXIudXBkYXRlKCk7ZWxzZSBpZiAoZChlLnN3aXBlcikpIHtcbiAgICAgICAgdmFyIF9hMjEgPSBPYmplY3QuYXNzaWduKHt9LCBlLnN3aXBlcik7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oX2EyMSwge1xuICAgICAgICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6ICEwLFxuICAgICAgICAgIHNsaWRlVG9DbGlja2VkU2xpZGU6ICExXG4gICAgICAgIH0pLCB0LnRodW1icy5zd2lwZXIgPSBuZXcgcyhfYTIxKSwgbiA9ICEwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHQudGh1bWJzLnN3aXBlci5lbC5jbGFzc0xpc3QuYWRkKHQucGFyYW1zLnRodW1icy50aHVtYnNDb250YWluZXJDbGFzcyksIHQudGh1bWJzLnN3aXBlci5vbihcInRhcFwiLCBsKSwgITA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGMoZSkge1xuICAgICAgdmFyIHMgPSB0LnRodW1icy5zd2lwZXI7XG4gICAgICBpZiAoIXMgfHwgcy5kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgIHZhciBhID0gXCJhdXRvXCIgPT09IHMucGFyYW1zLnNsaWRlc1BlclZpZXcgPyBzLnNsaWRlc1BlclZpZXdEeW5hbWljKCkgOiBzLnBhcmFtcy5zbGlkZXNQZXJWaWV3O1xuICAgICAgdmFyIGkgPSAxO1xuICAgICAgdmFyIHIgPSB0LnBhcmFtcy50aHVtYnMuc2xpZGVUaHVtYkFjdGl2ZUNsYXNzO1xuICAgICAgaWYgKHQucGFyYW1zLnNsaWRlc1BlclZpZXcgPiAxICYmICF0LnBhcmFtcy5jZW50ZXJlZFNsaWRlcyAmJiAoaSA9IHQucGFyYW1zLnNsaWRlc1BlclZpZXcpLCB0LnBhcmFtcy50aHVtYnMubXVsdGlwbGVBY3RpdmVUaHVtYnMgfHwgKGkgPSAxKSwgaSA9IE1hdGguZmxvb3IoaSksIHMuc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIGUuY2xhc3NMaXN0LnJlbW92ZShyKTtcbiAgICAgIH0pLCBzLnBhcmFtcy5sb29wIHx8IHMucGFyYW1zLnZpcnR1YWwgJiYgcy5wYXJhbXMudmlydHVhbC5lbmFibGVkKSBmb3IgKHZhciBfZTU0ID0gMDsgX2U1NCA8IGk7IF9lNTQgKz0gMSkgZihzLnNsaWRlc0VsLCBcIltkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cXFwiXCIuY29uY2F0KHQucmVhbEluZGV4ICsgX2U1NCwgXCJcXFwiXVwiKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLmNsYXNzTGlzdC5hZGQocik7XG4gICAgICB9KTtlbHNlIGZvciAodmFyIF9lNTUgPSAwOyBfZTU1IDwgaTsgX2U1NSArPSAxKSBzLnNsaWRlc1t0LnJlYWxJbmRleCArIF9lNTVdICYmIHMuc2xpZGVzW3QucmVhbEluZGV4ICsgX2U1NV0uY2xhc3NMaXN0LmFkZChyKTtcbiAgICAgIHZhciBuID0gdC5wYXJhbXMudGh1bWJzLmF1dG9TY3JvbGxPZmZzZXQsXG4gICAgICAgIGwgPSBuICYmICFzLnBhcmFtcy5sb29wO1xuICAgICAgaWYgKHQucmVhbEluZGV4ICE9PSBzLnJlYWxJbmRleCB8fCBsKSB7XG4gICAgICAgIHZhciBfaTE1ID0gcy5hY3RpdmVJbmRleDtcbiAgICAgICAgdmFyIF9yMTMsIF9vNztcbiAgICAgICAgaWYgKHMucGFyYW1zLmxvb3ApIHtcbiAgICAgICAgICB2YXIgX2U1NiA9IHMuc2xpZGVzLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIikgPT09IFwiXCIuY29uY2F0KHQucmVhbEluZGV4KTtcbiAgICAgICAgICB9KVswXTtcbiAgICAgICAgICBfcjEzID0gcy5zbGlkZXMuaW5kZXhPZihfZTU2KSwgX283ID0gdC5hY3RpdmVJbmRleCA+IHQucHJldmlvdXNJbmRleCA/IFwibmV4dFwiIDogXCJwcmV2XCI7XG4gICAgICAgIH0gZWxzZSBfcjEzID0gdC5yZWFsSW5kZXgsIF9vNyA9IF9yMTMgPiB0LnByZXZpb3VzSW5kZXggPyBcIm5leHRcIiA6IFwicHJldlwiO1xuICAgICAgICBsICYmIChfcjEzICs9IFwibmV4dFwiID09PSBfbzcgPyBuIDogLTEgKiBuKSwgcy52aXNpYmxlU2xpZGVzSW5kZXhlcyAmJiBzLnZpc2libGVTbGlkZXNJbmRleGVzLmluZGV4T2YoX3IxMykgPCAwICYmIChzLnBhcmFtcy5jZW50ZXJlZFNsaWRlcyA/IF9yMTMgPSBfcjEzID4gX2kxNSA/IF9yMTMgLSBNYXRoLmZsb29yKGEgLyAyKSArIDEgOiBfcjEzICsgTWF0aC5mbG9vcihhIC8gMikgLSAxIDogX3IxMyA+IF9pMTUgJiYgcy5wYXJhbXMuc2xpZGVzUGVyR3JvdXAsIHMuc2xpZGVUbyhfcjEzLCBlID8gMCA6IHZvaWQgMCkpO1xuICAgICAgfVxuICAgIH1cbiAgICB0LnRodW1icyA9IHtcbiAgICAgIHN3aXBlcjogbnVsbFxuICAgIH0sIGkoXCJiZWZvcmVJbml0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBlID0gdC5wYXJhbXMudGh1bWJzO1xuICAgICAgaWYgKGUgJiYgZS5zd2lwZXIpIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlLnN3aXBlciB8fCBlLnN3aXBlciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHZhciBfczM3ID0gYSgpLFxuICAgICAgICAgIF9pMTYgPSBmdW5jdGlvbiBfaTE2KCkge1xuICAgICAgICAgICAgdmFyIGEgPSBcInN0cmluZ1wiID09IHR5cGVvZiBlLnN3aXBlciA/IF9zMzcucXVlcnlTZWxlY3RvcihlLnN3aXBlcikgOiBlLnN3aXBlcjtcbiAgICAgICAgICAgIGlmIChhICYmIGEuc3dpcGVyKSBlLnN3aXBlciA9IGEuc3dpcGVyLCBvKCksIGMoITApO2Vsc2UgaWYgKGEpIHtcbiAgICAgICAgICAgICAgdmFyIF9zMzggPSBmdW5jdGlvbiBfczM4KGkpIHtcbiAgICAgICAgICAgICAgICBlLnN3aXBlciA9IGkuZGV0YWlsWzBdLCBhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbml0XCIsIF9zMzgpLCBvKCksIGMoITApLCBlLnN3aXBlci51cGRhdGUoKSwgdC51cGRhdGUoKTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgYS5hZGRFdmVudExpc3RlbmVyKFwiaW5pdFwiLCBfczM4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgX3IxNCA9IGZ1bmN0aW9uIF9yMTQoKSB7XG4gICAgICAgICAgICBpZiAodC5kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgICAgICAgIF9pMTYoKSB8fCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoX3IxNCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKF9yMTQpO1xuICAgICAgfSBlbHNlIG8oKSwgYyghMCk7XG4gICAgfSksIGkoXCJzbGlkZUNoYW5nZSB1cGRhdGUgcmVzaXplIG9ic2VydmVyVXBkYXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGMoKTtcbiAgICB9KSwgaShcInNldFRyYW5zaXRpb25cIiwgZnVuY3Rpb24gKGUsIHMpIHtcbiAgICAgIHZhciBhID0gdC50aHVtYnMuc3dpcGVyO1xuICAgICAgYSAmJiAhYS5kZXN0cm95ZWQgJiYgYS5zZXRUcmFuc2l0aW9uKHMpO1xuICAgIH0pLCBpKFwiYmVmb3JlRGVzdHJveVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZSA9IHQudGh1bWJzLnN3aXBlcjtcbiAgICAgIGUgJiYgIWUuZGVzdHJveWVkICYmIG4gJiYgZS5kZXN0cm95KCk7XG4gICAgfSksIE9iamVjdC5hc3NpZ24odC50aHVtYnMsIHtcbiAgICAgIGluaXQ6IG8sXG4gICAgICB1cGRhdGU6IGNcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyLFxuICAgICAgcyA9IGUuZXh0ZW5kUGFyYW1zLFxuICAgICAgYSA9IGUuZW1pdCxcbiAgICAgIGkgPSBlLm9uY2U7XG4gICAgcyh7XG4gICAgICBmcmVlTW9kZToge1xuICAgICAgICBlbmFibGVkOiAhMSxcbiAgICAgICAgbW9tZW50dW06ICEwLFxuICAgICAgICBtb21lbnR1bVJhdGlvOiAxLFxuICAgICAgICBtb21lbnR1bUJvdW5jZTogITAsXG4gICAgICAgIG1vbWVudHVtQm91bmNlUmF0aW86IDEsXG4gICAgICAgIG1vbWVudHVtVmVsb2NpdHlSYXRpbzogMSxcbiAgICAgICAgc3RpY2t5OiAhMSxcbiAgICAgICAgbWluaW11bVZlbG9jaXR5OiAuMDJcbiAgICAgIH1cbiAgICB9KSwgT2JqZWN0LmFzc2lnbih0LCB7XG4gICAgICBmcmVlTW9kZToge1xuICAgICAgICBvblRvdWNoU3RhcnQ6IGZ1bmN0aW9uIG9uVG91Y2hTdGFydCgpIHtcbiAgICAgICAgICBpZiAodC5wYXJhbXMuY3NzTW9kZSkgcmV0dXJuO1xuICAgICAgICAgIHZhciBlID0gdC5nZXRUcmFuc2xhdGUoKTtcbiAgICAgICAgICB0LnNldFRyYW5zbGF0ZShlKSwgdC5zZXRUcmFuc2l0aW9uKDApLCB0LnRvdWNoRXZlbnRzRGF0YS52ZWxvY2l0aWVzLmxlbmd0aCA9IDAsIHQuZnJlZU1vZGUub25Ub3VjaEVuZCh7XG4gICAgICAgICAgICBjdXJyZW50UG9zOiB0LnJ0bCA/IHQudHJhbnNsYXRlIDogLXQudHJhbnNsYXRlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uVG91Y2hNb3ZlOiBmdW5jdGlvbiBvblRvdWNoTW92ZSgpIHtcbiAgICAgICAgICBpZiAodC5wYXJhbXMuY3NzTW9kZSkgcmV0dXJuO1xuICAgICAgICAgIHZhciBlID0gdC50b3VjaEV2ZW50c0RhdGEsXG4gICAgICAgICAgICBzID0gdC50b3VjaGVzO1xuICAgICAgICAgIDAgPT09IGUudmVsb2NpdGllcy5sZW5ndGggJiYgZS52ZWxvY2l0aWVzLnB1c2goe1xuICAgICAgICAgICAgcG9zaXRpb246IHNbdC5pc0hvcml6b250YWwoKSA/IFwic3RhcnRYXCIgOiBcInN0YXJ0WVwiXSxcbiAgICAgICAgICAgIHRpbWU6IGUudG91Y2hTdGFydFRpbWVcbiAgICAgICAgICB9KSwgZS52ZWxvY2l0aWVzLnB1c2goe1xuICAgICAgICAgICAgcG9zaXRpb246IHNbdC5pc0hvcml6b250YWwoKSA/IFwiY3VycmVudFhcIiA6IFwiY3VycmVudFlcIl0sXG4gICAgICAgICAgICB0aW1lOiBsKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25Ub3VjaEVuZDogZnVuY3Rpb24gb25Ub3VjaEVuZChlKSB7XG4gICAgICAgICAgdmFyIHMgPSBlLmN1cnJlbnRQb3M7XG4gICAgICAgICAgaWYgKHQucGFyYW1zLmNzc01vZGUpIHJldHVybjtcbiAgICAgICAgICB2YXIgciA9IHQucGFyYW1zLFxuICAgICAgICAgICAgbiA9IHQud3JhcHBlckVsLFxuICAgICAgICAgICAgbyA9IHQucnRsVHJhbnNsYXRlLFxuICAgICAgICAgICAgZCA9IHQuc25hcEdyaWQsXG4gICAgICAgICAgICBjID0gdC50b3VjaEV2ZW50c0RhdGEsXG4gICAgICAgICAgICBwID0gbCgpIC0gYy50b3VjaFN0YXJ0VGltZTtcbiAgICAgICAgICBpZiAocyA8IC10Lm1pblRyYW5zbGF0ZSgpKSB0LnNsaWRlVG8odC5hY3RpdmVJbmRleCk7ZWxzZSBpZiAocyA+IC10Lm1heFRyYW5zbGF0ZSgpKSB0LnNsaWRlcy5sZW5ndGggPCBkLmxlbmd0aCA/IHQuc2xpZGVUbyhkLmxlbmd0aCAtIDEpIDogdC5zbGlkZVRvKHQuc2xpZGVzLmxlbmd0aCAtIDEpO2Vsc2Uge1xuICAgICAgICAgICAgaWYgKHIuZnJlZU1vZGUubW9tZW50dW0pIHtcbiAgICAgICAgICAgICAgaWYgKGMudmVsb2NpdGllcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9lNTcgPSBjLnZlbG9jaXRpZXMucG9wKCksXG4gICAgICAgICAgICAgICAgICBfczM5ID0gYy52ZWxvY2l0aWVzLnBvcCgpLFxuICAgICAgICAgICAgICAgICAgX2EyMiA9IF9lNTcucG9zaXRpb24gLSBfczM5LnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgX2kxNyA9IF9lNTcudGltZSAtIF9zMzkudGltZTtcbiAgICAgICAgICAgICAgICB0LnZlbG9jaXR5ID0gX2EyMiAvIF9pMTcsIHQudmVsb2NpdHkgLz0gMiwgTWF0aC5hYnModC52ZWxvY2l0eSkgPCByLmZyZWVNb2RlLm1pbmltdW1WZWxvY2l0eSAmJiAodC52ZWxvY2l0eSA9IDApLCAoX2kxNyA+IDE1MCB8fCBsKCkgLSBfZTU3LnRpbWUgPiAzMDApICYmICh0LnZlbG9jaXR5ID0gMCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB0LnZlbG9jaXR5ID0gMDtcbiAgICAgICAgICAgICAgdC52ZWxvY2l0eSAqPSByLmZyZWVNb2RlLm1vbWVudHVtVmVsb2NpdHlSYXRpbywgYy52ZWxvY2l0aWVzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgIHZhciBfZTU4ID0gMWUzICogci5mcmVlTW9kZS5tb21lbnR1bVJhdGlvO1xuICAgICAgICAgICAgICB2YXIgX3M0MCA9IHQudmVsb2NpdHkgKiBfZTU4O1xuICAgICAgICAgICAgICB2YXIgX3AzID0gdC50cmFuc2xhdGUgKyBfczQwO1xuICAgICAgICAgICAgICBvICYmIChfcDMgPSAtX3AzKTtcbiAgICAgICAgICAgICAgdmFyIF91MyxcbiAgICAgICAgICAgICAgICBfbTIgPSAhMTtcbiAgICAgICAgICAgICAgdmFyIF9oID0gMjAgKiBNYXRoLmFicyh0LnZlbG9jaXR5KSAqIHIuZnJlZU1vZGUubW9tZW50dW1Cb3VuY2VSYXRpbztcbiAgICAgICAgICAgICAgdmFyIF9mO1xuICAgICAgICAgICAgICBpZiAoX3AzIDwgdC5tYXhUcmFuc2xhdGUoKSkgci5mcmVlTW9kZS5tb21lbnR1bUJvdW5jZSA/IChfcDMgKyB0Lm1heFRyYW5zbGF0ZSgpIDwgLV9oICYmIChfcDMgPSB0Lm1heFRyYW5zbGF0ZSgpIC0gX2gpLCBfdTMgPSB0Lm1heFRyYW5zbGF0ZSgpLCBfbTIgPSAhMCwgYy5hbGxvd01vbWVudHVtQm91bmNlID0gITApIDogX3AzID0gdC5tYXhUcmFuc2xhdGUoKSwgci5sb29wICYmIHIuY2VudGVyZWRTbGlkZXMgJiYgKF9mID0gITApO2Vsc2UgaWYgKF9wMyA+IHQubWluVHJhbnNsYXRlKCkpIHIuZnJlZU1vZGUubW9tZW50dW1Cb3VuY2UgPyAoX3AzIC0gdC5taW5UcmFuc2xhdGUoKSA+IF9oICYmIChfcDMgPSB0Lm1pblRyYW5zbGF0ZSgpICsgX2gpLCBfdTMgPSB0Lm1pblRyYW5zbGF0ZSgpLCBfbTIgPSAhMCwgYy5hbGxvd01vbWVudHVtQm91bmNlID0gITApIDogX3AzID0gdC5taW5UcmFuc2xhdGUoKSwgci5sb29wICYmIHIuY2VudGVyZWRTbGlkZXMgJiYgKF9mID0gITApO2Vsc2UgaWYgKHIuZnJlZU1vZGUuc3RpY2t5KSB7XG4gICAgICAgICAgICAgICAgdmFyIF9lNTk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX3Q0MiA9IDA7IF90NDIgPCBkLmxlbmd0aDsgX3Q0MiArPSAxKSBpZiAoZFtfdDQyXSA+IC1fcDMpIHtcbiAgICAgICAgICAgICAgICAgIF9lNTkgPSBfdDQyO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF9wMyA9IE1hdGguYWJzKGRbX2U1OV0gLSBfcDMpIDwgTWF0aC5hYnMoZFtfZTU5IC0gMV0gLSBfcDMpIHx8IFwibmV4dFwiID09PSB0LnN3aXBlRGlyZWN0aW9uID8gZFtfZTU5XSA6IGRbX2U1OSAtIDFdLCBfcDMgPSAtX3AzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChfZiAmJiBpKFwidHJhbnNpdGlvbkVuZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdC5sb29wRml4KCk7XG4gICAgICAgICAgICAgIH0pLCAwICE9PSB0LnZlbG9jaXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKF9lNTggPSBvID8gTWF0aC5hYnMoKC1fcDMgLSB0LnRyYW5zbGF0ZSkgLyB0LnZlbG9jaXR5KSA6IE1hdGguYWJzKChfcDMgLSB0LnRyYW5zbGF0ZSkgLyB0LnZlbG9jaXR5KSwgci5mcmVlTW9kZS5zdGlja3kpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBfczQxID0gTWF0aC5hYnMoKG8gPyAtX3AzIDogX3AzKSAtIHQudHJhbnNsYXRlKSxcbiAgICAgICAgICAgICAgICAgICAgX2EyMyA9IHQuc2xpZGVzU2l6ZXNHcmlkW3QuYWN0aXZlSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgX2U1OCA9IF9zNDEgPCBfYTIzID8gci5zcGVlZCA6IF9zNDEgPCAyICogX2EyMyA/IDEuNSAqIHIuc3BlZWQgOiAyLjUgKiByLnNwZWVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyLmZyZWVNb2RlLnN0aWNreSkgcmV0dXJuIHZvaWQgdC5zbGlkZVRvQ2xvc2VzdCgpO1xuICAgICAgICAgICAgICByLmZyZWVNb2RlLm1vbWVudHVtQm91bmNlICYmIF9tMiA/ICh0LnVwZGF0ZVByb2dyZXNzKF91MyksIHQuc2V0VHJhbnNpdGlvbihfZTU4KSwgdC5zZXRUcmFuc2xhdGUoX3AzKSwgdC50cmFuc2l0aW9uU3RhcnQoITAsIHQuc3dpcGVEaXJlY3Rpb24pLCB0LmFuaW1hdGluZyA9ICEwLCBFKG4sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0ICYmICF0LmRlc3Ryb3llZCAmJiBjLmFsbG93TW9tZW50dW1Cb3VuY2UgJiYgKGEoXCJtb21lbnR1bUJvdW5jZVwiKSwgdC5zZXRUcmFuc2l0aW9uKHIuc3BlZWQpLCBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIHQuc2V0VHJhbnNsYXRlKF91MyksIEUobiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0ICYmICF0LmRlc3Ryb3llZCAmJiB0LnRyYW5zaXRpb25FbmQoKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIDApKTtcbiAgICAgICAgICAgICAgfSkpIDogdC52ZWxvY2l0eSA/IChhKFwiX2ZyZWVNb2RlTm9Nb21lbnR1bVJlbGVhc2VcIiksIHQudXBkYXRlUHJvZ3Jlc3MoX3AzKSwgdC5zZXRUcmFuc2l0aW9uKF9lNTgpLCB0LnNldFRyYW5zbGF0ZShfcDMpLCB0LnRyYW5zaXRpb25TdGFydCghMCwgdC5zd2lwZURpcmVjdGlvbiksIHQuYW5pbWF0aW5nIHx8ICh0LmFuaW1hdGluZyA9ICEwLCBFKG4sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0ICYmICF0LmRlc3Ryb3llZCAmJiB0LnRyYW5zaXRpb25FbmQoKTtcbiAgICAgICAgICAgICAgfSkpKSA6IHQudXBkYXRlUHJvZ3Jlc3MoX3AzKSwgdC51cGRhdGVBY3RpdmVJbmRleCgpLCB0LnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmIChyLmZyZWVNb2RlLnN0aWNreSkgcmV0dXJuIHZvaWQgdC5zbGlkZVRvQ2xvc2VzdCgpO1xuICAgICAgICAgICAgICByLmZyZWVNb2RlICYmIGEoXCJfZnJlZU1vZGVOb01vbWVudHVtUmVsZWFzZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICghci5mcmVlTW9kZS5tb21lbnR1bSB8fCBwID49IHIubG9uZ1N3aXBlc01zKSAmJiAodC51cGRhdGVQcm9ncmVzcygpLCB0LnVwZGF0ZUFjdGl2ZUluZGV4KCksIHQudXBkYXRlU2xpZGVzQ2xhc3NlcygpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCxcbiAgICAgIHMsXG4gICAgICBhLFxuICAgICAgaSA9IGUuc3dpcGVyLFxuICAgICAgciA9IGUuZXh0ZW5kUGFyYW1zO1xuICAgIHIoe1xuICAgICAgZ3JpZDoge1xuICAgICAgICByb3dzOiAxLFxuICAgICAgICBmaWxsOiBcImNvbHVtblwiXG4gICAgICB9XG4gICAgfSk7XG4gICAgdmFyIG4gPSBmdW5jdGlvbiBuKCkge1xuICAgICAgdmFyIGUgPSBpLnBhcmFtcy5zcGFjZUJldHdlZW47XG4gICAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiBlLmluZGV4T2YoXCIlXCIpID49IDAgPyBlID0gcGFyc2VGbG9hdChlLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMCAqIGkuc2l6ZSA6IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgKGUgPSBwYXJzZUZsb2F0KGUpKSwgZTtcbiAgICB9O1xuICAgIGkuZ3JpZCA9IHtcbiAgICAgIGluaXRTbGlkZXM6IGZ1bmN0aW9uIGluaXRTbGlkZXMoZSkge1xuICAgICAgICB2YXIgciA9IGkucGFyYW1zLnNsaWRlc1BlclZpZXcsXG4gICAgICAgICAgX2kkcGFyYW1zJGdyaWQgPSBpLnBhcmFtcy5ncmlkLFxuICAgICAgICAgIG4gPSBfaSRwYXJhbXMkZ3JpZC5yb3dzLFxuICAgICAgICAgIGwgPSBfaSRwYXJhbXMkZ3JpZC5maWxsO1xuICAgICAgICBhID0gTWF0aC5mbG9vcihlIC8gbiksIHQgPSBNYXRoLmZsb29yKGUgLyBuKSA9PT0gZSAvIG4gPyBlIDogTWF0aC5jZWlsKGUgLyBuKSAqIG4sIFwiYXV0b1wiICE9PSByICYmIFwicm93XCIgPT09IGwgJiYgKHQgPSBNYXRoLm1heCh0LCByICogbikpLCBzID0gdCAvIG47XG4gICAgICB9LFxuICAgICAgdXBkYXRlU2xpZGU6IGZ1bmN0aW9uIHVwZGF0ZVNsaWRlKGUsIHIsIGwsIG8pIHtcbiAgICAgICAgdmFyIGQgPSBpLnBhcmFtcy5zbGlkZXNQZXJHcm91cCxcbiAgICAgICAgICBjID0gbigpLFxuICAgICAgICAgIF9pJHBhcmFtcyRncmlkMiA9IGkucGFyYW1zLmdyaWQsXG4gICAgICAgICAgcCA9IF9pJHBhcmFtcyRncmlkMi5yb3dzLFxuICAgICAgICAgIHUgPSBfaSRwYXJhbXMkZ3JpZDIuZmlsbDtcbiAgICAgICAgdmFyIG0sIGgsIGY7XG4gICAgICAgIGlmIChcInJvd1wiID09PSB1ICYmIGQgPiAxKSB7XG4gICAgICAgICAgdmFyIF9zNDIgPSBNYXRoLmZsb29yKGUgLyAoZCAqIHApKSxcbiAgICAgICAgICAgIF9hMjQgPSBlIC0gcCAqIGQgKiBfczQyLFxuICAgICAgICAgICAgX2kxOCA9IDAgPT09IF9zNDIgPyBkIDogTWF0aC5taW4oTWF0aC5jZWlsKChsIC0gX3M0MiAqIHAgKiBkKSAvIHApLCBkKTtcbiAgICAgICAgICBmID0gTWF0aC5mbG9vcihfYTI0IC8gX2kxOCksIGggPSBfYTI0IC0gZiAqIF9pMTggKyBfczQyICogZCwgbSA9IGggKyBmICogdCAvIHAsIHIuc3R5bGUub3JkZXIgPSBtO1xuICAgICAgICB9IGVsc2UgXCJjb2x1bW5cIiA9PT0gdSA/IChoID0gTWF0aC5mbG9vcihlIC8gcCksIGYgPSBlIC0gaCAqIHAsIChoID4gYSB8fCBoID09PSBhICYmIGYgPT09IHAgLSAxKSAmJiAoZiArPSAxLCBmID49IHAgJiYgKGYgPSAwLCBoICs9IDEpKSkgOiAoZiA9IE1hdGguZmxvb3IoZSAvIHMpLCBoID0gZSAtIGYgKiBzKTtcbiAgICAgICAgci5yb3cgPSBmLCByLmNvbHVtbiA9IGgsIHIuc3R5bGVbbyhcIm1hcmdpbi10b3BcIildID0gMCAhPT0gZiA/IGMgJiYgXCJcIi5jb25jYXQoYywgXCJweFwiKSA6IFwiXCI7XG4gICAgICB9LFxuICAgICAgdXBkYXRlV3JhcHBlclNpemU6IGZ1bmN0aW9uIHVwZGF0ZVdyYXBwZXJTaXplKGUsIHMsIGEpIHtcbiAgICAgICAgdmFyIF9pJHBhcmFtcyA9IGkucGFyYW1zLFxuICAgICAgICAgIHIgPSBfaSRwYXJhbXMuY2VudGVyZWRTbGlkZXMsXG4gICAgICAgICAgbCA9IF9pJHBhcmFtcy5yb3VuZExlbmd0aHMsXG4gICAgICAgICAgbyA9IG4oKSxcbiAgICAgICAgICBkID0gaS5wYXJhbXMuZ3JpZC5yb3dzO1xuICAgICAgICBpZiAoaS52aXJ0dWFsU2l6ZSA9IChlICsgbykgKiB0LCBpLnZpcnR1YWxTaXplID0gTWF0aC5jZWlsKGkudmlydHVhbFNpemUgLyBkKSAtIG8sIGkud3JhcHBlckVsLnN0eWxlW2EoXCJ3aWR0aFwiKV0gPSBcIlwiLmNvbmNhdChpLnZpcnR1YWxTaXplICsgbywgXCJweFwiKSwgcikge1xuICAgICAgICAgIHZhciBfZTYwID0gW107XG4gICAgICAgICAgZm9yICh2YXIgX3Q0MyA9IDA7IF90NDMgPCBzLmxlbmd0aDsgX3Q0MyArPSAxKSB7XG4gICAgICAgICAgICB2YXIgX2EyNSA9IHNbX3Q0M107XG4gICAgICAgICAgICBsICYmIChfYTI1ID0gTWF0aC5mbG9vcihfYTI1KSksIHNbX3Q0M10gPCBpLnZpcnR1YWxTaXplICsgc1swXSAmJiBfZTYwLnB1c2goX2EyNSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHMuc3BsaWNlKDAsIHMubGVuZ3RoKSwgcy5wdXNoLmFwcGx5KHMsIF9lNjApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUuc3dpcGVyO1xuICAgIE9iamVjdC5hc3NpZ24odCwge1xuICAgICAgYXBwZW5kU2xpZGU6IHNlLmJpbmQodCksXG4gICAgICBwcmVwZW5kU2xpZGU6IGFlLmJpbmQodCksXG4gICAgICBhZGRTbGlkZTogaWUuYmluZCh0KSxcbiAgICAgIHJlbW92ZVNsaWRlOiByZS5iaW5kKHQpLFxuICAgICAgcmVtb3ZlQWxsU2xpZGVzOiBuZS5iaW5kKHQpXG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQgPSBlLnN3aXBlcixcbiAgICAgIHMgPSBlLmV4dGVuZFBhcmFtcyxcbiAgICAgIGEgPSBlLm9uO1xuICAgIHMoe1xuICAgICAgZmFkZUVmZmVjdDoge1xuICAgICAgICBjcm9zc0ZhZGU6ICExXG4gICAgICB9XG4gICAgfSksIGxlKHtcbiAgICAgIGVmZmVjdDogXCJmYWRlXCIsXG4gICAgICBzd2lwZXI6IHQsXG4gICAgICBvbjogYSxcbiAgICAgIHNldFRyYW5zbGF0ZTogZnVuY3Rpb24gc2V0VHJhbnNsYXRlKCkge1xuICAgICAgICB2YXIgZSA9IHQuc2xpZGVzO1xuICAgICAgICB0LnBhcmFtcy5mYWRlRWZmZWN0O1xuICAgICAgICBmb3IgKHZhciBfczQzID0gMDsgX3M0MyA8IGUubGVuZ3RoOyBfczQzICs9IDEpIHtcbiAgICAgICAgICB2YXIgX2U2MSA9IHQuc2xpZGVzW19zNDNdO1xuICAgICAgICAgIHZhciBfYTI2ID0gLV9lNjEuc3dpcGVyU2xpZGVPZmZzZXQ7XG4gICAgICAgICAgdC5wYXJhbXMudmlydHVhbFRyYW5zbGF0ZSB8fCAoX2EyNiAtPSB0LnRyYW5zbGF0ZSk7XG4gICAgICAgICAgdmFyIF9pMTkgPSAwO1xuICAgICAgICAgIHQuaXNIb3Jpem9udGFsKCkgfHwgKF9pMTkgPSBfYTI2LCBfYTI2ID0gMCk7XG4gICAgICAgICAgdmFyIF9yMTUgPSB0LnBhcmFtcy5mYWRlRWZmZWN0LmNyb3NzRmFkZSA/IE1hdGgubWF4KDEgLSBNYXRoLmFicyhfZTYxLnByb2dyZXNzKSwgMCkgOiAxICsgTWF0aC5taW4oTWF0aC5tYXgoX2U2MS5wcm9ncmVzcywgLTEpLCAwKSxcbiAgICAgICAgICAgIF9uNyA9IG9lKDAsIF9lNjEpO1xuICAgICAgICAgIF9uNy5zdHlsZS5vcGFjaXR5ID0gX3IxNSwgX243LnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoXCIuY29uY2F0KF9hMjYsIFwicHgsIFwiKS5jb25jYXQoX2kxOSwgXCJweCwgMHB4KVwiKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNldFRyYW5zaXRpb246IGZ1bmN0aW9uIHNldFRyYW5zaXRpb24oZSkge1xuICAgICAgICB2YXIgcyA9IHQuc2xpZGVzLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBoKGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdChlLCBcIm1zXCIpO1xuICAgICAgICB9KSwgZGUoe1xuICAgICAgICAgIHN3aXBlcjogdCxcbiAgICAgICAgICBkdXJhdGlvbjogZSxcbiAgICAgICAgICB0cmFuc2Zvcm1FbGVtZW50czogcyxcbiAgICAgICAgICBhbGxTbGlkZXM6ICEwXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIG92ZXJ3cml0ZVBhcmFtczogZnVuY3Rpb24gb3ZlcndyaXRlUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXG4gICAgICAgICAgc2xpZGVzUGVyR3JvdXA6IDEsXG4gICAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogITAsXG4gICAgICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxuICAgICAgICAgIHZpcnR1YWxUcmFuc2xhdGU6ICF0LnBhcmFtcy5jc3NNb2RlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQgPSBlLnN3aXBlcixcbiAgICAgIHMgPSBlLmV4dGVuZFBhcmFtcyxcbiAgICAgIGEgPSBlLm9uO1xuICAgIHMoe1xuICAgICAgY3ViZUVmZmVjdDoge1xuICAgICAgICBzbGlkZVNoYWRvd3M6ICEwLFxuICAgICAgICBzaGFkb3c6ICEwLFxuICAgICAgICBzaGFkb3dPZmZzZXQ6IDIwLFxuICAgICAgICBzaGFkb3dTY2FsZTogLjk0XG4gICAgICB9XG4gICAgfSk7XG4gICAgdmFyIGkgPSBmdW5jdGlvbiBpKGUsIHQsIHMpIHtcbiAgICAgIHZhciBhID0gcyA/IGUucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnRcIikgOiBlLnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3BcIiksXG4gICAgICAgIGkgPSBzID8gZS5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHRcIikgOiBlLnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b21cIik7XG4gICAgICBhIHx8IChhID0gZyhcImRpdlwiLCBcInN3aXBlci1zbGlkZS1zaGFkb3ctXCIgKyAocyA/IFwibGVmdFwiIDogXCJ0b3BcIikpLCBlLmFwcGVuZChhKSksIGkgfHwgKGkgPSBnKFwiZGl2XCIsIFwic3dpcGVyLXNsaWRlLXNoYWRvdy1cIiArIChzID8gXCJyaWdodFwiIDogXCJib3R0b21cIikpLCBlLmFwcGVuZChpKSksIGEgJiYgKGEuc3R5bGUub3BhY2l0eSA9IE1hdGgubWF4KC10LCAwKSksIGkgJiYgKGkuc3R5bGUub3BhY2l0eSA9IE1hdGgubWF4KHQsIDApKTtcbiAgICB9O1xuICAgIGxlKHtcbiAgICAgIGVmZmVjdDogXCJjdWJlXCIsXG4gICAgICBzd2lwZXI6IHQsXG4gICAgICBvbjogYSxcbiAgICAgIHNldFRyYW5zbGF0ZTogZnVuY3Rpb24gc2V0VHJhbnNsYXRlKCkge1xuICAgICAgICB2YXIgZSA9IHQuZWwsXG4gICAgICAgICAgcyA9IHQud3JhcHBlckVsLFxuICAgICAgICAgIGEgPSB0LnNsaWRlcyxcbiAgICAgICAgICByID0gdC53aWR0aCxcbiAgICAgICAgICBuID0gdC5oZWlnaHQsXG4gICAgICAgICAgbCA9IHQucnRsVHJhbnNsYXRlLFxuICAgICAgICAgIG8gPSB0LnNpemUsXG4gICAgICAgICAgZCA9IHQuYnJvd3NlcixcbiAgICAgICAgICBjID0gdC5wYXJhbXMuY3ViZUVmZmVjdCxcbiAgICAgICAgICBwID0gdC5pc0hvcml6b250YWwoKSxcbiAgICAgICAgICB1ID0gdC52aXJ0dWFsICYmIHQucGFyYW1zLnZpcnR1YWwuZW5hYmxlZDtcbiAgICAgICAgdmFyIG0sXG4gICAgICAgICAgaCA9IDA7XG4gICAgICAgIGMuc2hhZG93ICYmIChwID8gKG0gPSB0LnNsaWRlc0VsLnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLWN1YmUtc2hhZG93XCIpLCBtIHx8IChtID0gZyhcImRpdlwiLCBcInN3aXBlci1jdWJlLXNoYWRvd1wiKSwgdC5zbGlkZXNFbC5hcHBlbmQobSkpLCBtLnN0eWxlLmhlaWdodCA9IFwiXCIuY29uY2F0KHIsIFwicHhcIikpIDogKG0gPSBlLnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLWN1YmUtc2hhZG93XCIpLCBtIHx8IChtID0gZyhcImRpdlwiLCBcInN3aXBlci1jdWJlLXNoYWRvd1wiKSwgZS5hcHBlbmQobSkpKSk7XG4gICAgICAgIGZvciAodmFyIF9lNjIgPSAwOyBfZTYyIDwgYS5sZW5ndGg7IF9lNjIgKz0gMSkge1xuICAgICAgICAgIHZhciBfdDQ0ID0gYVtfZTYyXTtcbiAgICAgICAgICB2YXIgX3M0NCA9IF9lNjI7XG4gICAgICAgICAgdSAmJiAoX3M0NCA9IHBhcnNlSW50KF90NDQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zd2lwZXItc2xpZGUtaW5kZXhcIiksIDEwKSk7XG4gICAgICAgICAgdmFyIF9yMTYgPSA5MCAqIF9zNDQsXG4gICAgICAgICAgICBfbjggPSBNYXRoLmZsb29yKF9yMTYgLyAzNjApO1xuICAgICAgICAgIGwgJiYgKF9yMTYgPSAtX3IxNiwgX244ID0gTWF0aC5mbG9vcigtX3IxNiAvIDM2MCkpO1xuICAgICAgICAgIHZhciBfZDQgPSBNYXRoLm1heChNYXRoLm1pbihfdDQ0LnByb2dyZXNzLCAxKSwgLTEpO1xuICAgICAgICAgIHZhciBfbTMgPSAwLFxuICAgICAgICAgICAgX2YyID0gMCxcbiAgICAgICAgICAgIF9nID0gMDtcbiAgICAgICAgICBfczQ0ICUgNCA9PSAwID8gKF9tMyA9IDQgKiAtX244ICogbywgX2cgPSAwKSA6IChfczQ0IC0gMSkgJSA0ID09IDAgPyAoX20zID0gMCwgX2cgPSA0ICogLV9uOCAqIG8pIDogKF9zNDQgLSAyKSAlIDQgPT0gMCA/IChfbTMgPSBvICsgNCAqIF9uOCAqIG8sIF9nID0gbykgOiAoX3M0NCAtIDMpICUgNCA9PSAwICYmIChfbTMgPSAtbywgX2cgPSAzICogbyArIDQgKiBvICogX244KSwgbCAmJiAoX20zID0gLV9tMyksIHAgfHwgKF9mMiA9IF9tMywgX20zID0gMCk7XG4gICAgICAgICAgdmFyIF92ID0gXCJyb3RhdGVYKFwiLmNvbmNhdChwID8gMCA6IC1fcjE2LCBcImRlZykgcm90YXRlWShcIikuY29uY2F0KHAgPyBfcjE2IDogMCwgXCJkZWcpIHRyYW5zbGF0ZTNkKFwiKS5jb25jYXQoX20zLCBcInB4LCBcIikuY29uY2F0KF9mMiwgXCJweCwgXCIpLmNvbmNhdChfZywgXCJweClcIik7XG4gICAgICAgICAgX2Q0IDw9IDEgJiYgX2Q0ID4gLTEgJiYgKGggPSA5MCAqIF9zNDQgKyA5MCAqIF9kNCwgbCAmJiAoaCA9IDkwICogLV9zNDQgLSA5MCAqIF9kNCkpLCBfdDQ0LnN0eWxlLnRyYW5zZm9ybSA9IF92LCBjLnNsaWRlU2hhZG93cyAmJiBpKF90NDQsIF9kNCwgcCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gXCI1MCUgNTAlIC1cIi5jb25jYXQobyAvIDIsIFwicHhcIiksIHMuc3R5bGVbXCItd2Via2l0LXRyYW5zZm9ybS1vcmlnaW5cIl0gPSBcIjUwJSA1MCUgLVwiLmNvbmNhdChvIC8gMiwgXCJweFwiKSwgYy5zaGFkb3cpIGlmIChwKSBtLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoMHB4LCBcIi5jb25jYXQociAvIDIgKyBjLnNoYWRvd09mZnNldCwgXCJweCwgXCIpLmNvbmNhdCgtciAvIDIsIFwicHgpIHJvdGF0ZVgoOTBkZWcpIHJvdGF0ZVooMGRlZykgc2NhbGUoXCIpLmNvbmNhdChjLnNoYWRvd1NjYWxlLCBcIilcIik7ZWxzZSB7XG4gICAgICAgICAgdmFyIF9lNjMgPSBNYXRoLmFicyhoKSAtIDkwICogTWF0aC5mbG9vcihNYXRoLmFicyhoKSAvIDkwKSxcbiAgICAgICAgICAgIF90NDUgPSAxLjUgLSAoTWF0aC5zaW4oMiAqIF9lNjMgKiBNYXRoLlBJIC8gMzYwKSAvIDIgKyBNYXRoLmNvcygyICogX2U2MyAqIE1hdGguUEkgLyAzNjApIC8gMiksXG4gICAgICAgICAgICBfczQ1ID0gYy5zaGFkb3dTY2FsZSxcbiAgICAgICAgICAgIF9hMjcgPSBjLnNoYWRvd1NjYWxlIC8gX3Q0NSxcbiAgICAgICAgICAgIF9pMjAgPSBjLnNoYWRvd09mZnNldDtcbiAgICAgICAgICBtLnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGUzZChcIi5jb25jYXQoX3M0NSwgXCIsIDEsIFwiKS5jb25jYXQoX2EyNywgXCIpIHRyYW5zbGF0ZTNkKDBweCwgXCIpLmNvbmNhdChuIC8gMiArIF9pMjAsIFwicHgsIFwiKS5jb25jYXQoLW4gLyAyIC8gX2EyNywgXCJweCkgcm90YXRlWCgtOTBkZWcpXCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmID0gKGQuaXNTYWZhcmkgfHwgZC5pc1dlYlZpZXcpICYmIGQubmVlZFBlcnNwZWN0aXZlRml4ID8gLW8gLyAyIDogMDtcbiAgICAgICAgcy5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZTNkKDBweCwwLFwiLmNvbmNhdChmLCBcInB4KSByb3RhdGVYKFwiKS5jb25jYXQodC5pc0hvcml6b250YWwoKSA/IDAgOiBoLCBcImRlZykgcm90YXRlWShcIikuY29uY2F0KHQuaXNIb3Jpem9udGFsKCkgPyAtaCA6IDAsIFwiZGVnKVwiKSwgcy5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tc3dpcGVyLWN1YmUtdHJhbnNsYXRlLXpcIiwgXCJcIi5jb25jYXQoZiwgXCJweFwiKSk7XG4gICAgICB9LFxuICAgICAgc2V0VHJhbnNpdGlvbjogZnVuY3Rpb24gc2V0VHJhbnNpdGlvbihlKSB7XG4gICAgICAgIHZhciBzID0gdC5lbCxcbiAgICAgICAgICBhID0gdC5zbGlkZXM7XG4gICAgICAgIGlmIChhLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICB0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiXCIuY29uY2F0KGUsIFwibXNcIiksIHQucXVlcnlTZWxlY3RvckFsbChcIi5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQsIC5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbSwgLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdFwiKS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiXCIuY29uY2F0KGUsIFwibXNcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pLCB0LnBhcmFtcy5jdWJlRWZmZWN0LnNoYWRvdyAmJiAhdC5pc0hvcml6b250YWwoKSkge1xuICAgICAgICAgIHZhciBfdDQ2ID0gcy5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1jdWJlLXNoYWRvd1wiKTtcbiAgICAgICAgICBfdDQ2ICYmIChfdDQ2LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiXCIuY29uY2F0KGUsIFwibXNcIikpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcmVjcmVhdGVTaGFkb3dzOiBmdW5jdGlvbiByZWNyZWF0ZVNoYWRvd3MoKSB7XG4gICAgICAgIHZhciBlID0gdC5pc0hvcml6b250YWwoKTtcbiAgICAgICAgdC5zbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHZhciBzID0gTWF0aC5tYXgoTWF0aC5taW4odC5wcm9ncmVzcywgMSksIC0xKTtcbiAgICAgICAgICBpKHQsIHMsIGUpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBnZXRFZmZlY3RQYXJhbXM6IGZ1bmN0aW9uIGdldEVmZmVjdFBhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHQucGFyYW1zLmN1YmVFZmZlY3Q7XG4gICAgICB9LFxuICAgICAgcGVyc3BlY3RpdmU6IGZ1bmN0aW9uIHBlcnNwZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgICB9LFxuICAgICAgb3ZlcndyaXRlUGFyYW1zOiBmdW5jdGlvbiBvdmVyd3JpdGVQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcbiAgICAgICAgICBzbGlkZXNQZXJHcm91cDogMSxcbiAgICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiAhMCxcbiAgICAgICAgICByZXNpc3RhbmNlUmF0aW86IDAsXG4gICAgICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxuICAgICAgICAgIGNlbnRlcmVkU2xpZGVzOiAhMSxcbiAgICAgICAgICB2aXJ0dWFsVHJhbnNsYXRlOiAhMFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICBhID0gZS5vbjtcbiAgICBzKHtcbiAgICAgIGZsaXBFZmZlY3Q6IHtcbiAgICAgICAgc2xpZGVTaGFkb3dzOiAhMCxcbiAgICAgICAgbGltaXRSb3RhdGlvbjogITBcbiAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgaSA9IGZ1bmN0aW9uIGkoZSwgcywgYSkge1xuICAgICAgdmFyIGkgPSB0LmlzSG9yaXpvbnRhbCgpID8gZS5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdFwiKSA6IGUucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItc2xpZGUtc2hhZG93LXRvcFwiKSxcbiAgICAgICAgciA9IHQuaXNIb3Jpem9udGFsKCkgPyBlLnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodFwiKSA6IGUucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbVwiKTtcbiAgICAgIGkgfHwgKGkgPSBjZSgwLCBlLCB0LmlzSG9yaXpvbnRhbCgpID8gXCJsZWZ0XCIgOiBcInRvcFwiKSksIHIgfHwgKHIgPSBjZSgwLCBlLCB0LmlzSG9yaXpvbnRhbCgpID8gXCJyaWdodFwiIDogXCJib3R0b21cIikpLCBpICYmIChpLnN0eWxlLm9wYWNpdHkgPSBNYXRoLm1heCgtcywgMCkpLCByICYmIChyLnN0eWxlLm9wYWNpdHkgPSBNYXRoLm1heChzLCAwKSk7XG4gICAgfTtcbiAgICBsZSh7XG4gICAgICBlZmZlY3Q6IFwiZmxpcFwiLFxuICAgICAgc3dpcGVyOiB0LFxuICAgICAgb246IGEsXG4gICAgICBzZXRUcmFuc2xhdGU6IGZ1bmN0aW9uIHNldFRyYW5zbGF0ZSgpIHtcbiAgICAgICAgdmFyIGUgPSB0LnNsaWRlcyxcbiAgICAgICAgICBzID0gdC5ydGxUcmFuc2xhdGUsXG4gICAgICAgICAgYSA9IHQucGFyYW1zLmZsaXBFZmZlY3Q7XG4gICAgICAgIGZvciAodmFyIF9yMTcgPSAwOyBfcjE3IDwgZS5sZW5ndGg7IF9yMTcgKz0gMSkge1xuICAgICAgICAgIHZhciBfbjkgPSBlW19yMTddO1xuICAgICAgICAgIHZhciBfbDggPSBfbjkucHJvZ3Jlc3M7XG4gICAgICAgICAgdC5wYXJhbXMuZmxpcEVmZmVjdC5saW1pdFJvdGF0aW9uICYmIChfbDggPSBNYXRoLm1heChNYXRoLm1pbihfbjkucHJvZ3Jlc3MsIDEpLCAtMSkpO1xuICAgICAgICAgIHZhciBfbzggPSBfbjkuc3dpcGVyU2xpZGVPZmZzZXQ7XG4gICAgICAgICAgdmFyIF9kNSA9IC0xODAgKiBfbDgsXG4gICAgICAgICAgICBfYzMgPSAwLFxuICAgICAgICAgICAgX3A0ID0gdC5wYXJhbXMuY3NzTW9kZSA/IC1fbzggLSB0LnRyYW5zbGF0ZSA6IC1fbzgsXG4gICAgICAgICAgICBfdTQgPSAwO1xuICAgICAgICAgIHQuaXNIb3Jpem9udGFsKCkgPyBzICYmIChfZDUgPSAtX2Q1KSA6IChfdTQgPSBfcDQsIF9wNCA9IDAsIF9jMyA9IC1fZDUsIF9kNSA9IDApLCBfbjkuc3R5bGUuekluZGV4ID0gLU1hdGguYWJzKE1hdGgucm91bmQoX2w4KSkgKyBlLmxlbmd0aCwgYS5zbGlkZVNoYWRvd3MgJiYgaShfbjksIF9sOCk7XG4gICAgICAgICAgdmFyIF9tNCA9IFwidHJhbnNsYXRlM2QoXCIuY29uY2F0KF9wNCwgXCJweCwgXCIpLmNvbmNhdChfdTQsIFwicHgsIDBweCkgcm90YXRlWChcIikuY29uY2F0KF9jMywgXCJkZWcpIHJvdGF0ZVkoXCIpLmNvbmNhdChfZDUsIFwiZGVnKVwiKTtcbiAgICAgICAgICBvZSgwLCBfbjkpLnN0eWxlLnRyYW5zZm9ybSA9IF9tNDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNldFRyYW5zaXRpb246IGZ1bmN0aW9uIHNldFRyYW5zaXRpb24oZSkge1xuICAgICAgICB2YXIgcyA9IHQuc2xpZGVzLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBoKGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdChlLCBcIm1zXCIpLCB0LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3AsIC5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0LCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20sIC5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnRcIikuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdChlLCBcIm1zXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KSwgZGUoe1xuICAgICAgICAgIHN3aXBlcjogdCxcbiAgICAgICAgICBkdXJhdGlvbjogZSxcbiAgICAgICAgICB0cmFuc2Zvcm1FbGVtZW50czogc1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICByZWNyZWF0ZVNoYWRvd3M6IGZ1bmN0aW9uIHJlY3JlYXRlU2hhZG93cygpIHtcbiAgICAgICAgdC5wYXJhbXMuZmxpcEVmZmVjdDtcbiAgICAgICAgdC5zbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHZhciBzID0gZS5wcm9ncmVzcztcbiAgICAgICAgICB0LnBhcmFtcy5mbGlwRWZmZWN0LmxpbWl0Um90YXRpb24gJiYgKHMgPSBNYXRoLm1heChNYXRoLm1pbihlLnByb2dyZXNzLCAxKSwgLTEpKSwgaShlLCBzKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZ2V0RWZmZWN0UGFyYW1zOiBmdW5jdGlvbiBnZXRFZmZlY3RQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB0LnBhcmFtcy5mbGlwRWZmZWN0O1xuICAgICAgfSxcbiAgICAgIHBlcnNwZWN0aXZlOiBmdW5jdGlvbiBwZXJzcGVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgICAgfSxcbiAgICAgIG92ZXJ3cml0ZVBhcmFtczogZnVuY3Rpb24gb3ZlcndyaXRlUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXG4gICAgICAgICAgc2xpZGVzUGVyR3JvdXA6IDEsXG4gICAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogITAsXG4gICAgICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxuICAgICAgICAgIHZpcnR1YWxUcmFuc2xhdGU6ICF0LnBhcmFtcy5jc3NNb2RlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHQgPSBlLnN3aXBlcixcbiAgICAgIHMgPSBlLmV4dGVuZFBhcmFtcyxcbiAgICAgIGEgPSBlLm9uO1xuICAgIHMoe1xuICAgICAgY292ZXJmbG93RWZmZWN0OiB7XG4gICAgICAgIHJvdGF0ZTogNTAsXG4gICAgICAgIHN0cmV0Y2g6IDAsXG4gICAgICAgIGRlcHRoOiAxMDAsXG4gICAgICAgIHNjYWxlOiAxLFxuICAgICAgICBtb2RpZmllcjogMSxcbiAgICAgICAgc2xpZGVTaGFkb3dzOiAhMFxuICAgICAgfVxuICAgIH0pLCBsZSh7XG4gICAgICBlZmZlY3Q6IFwiY292ZXJmbG93XCIsXG4gICAgICBzd2lwZXI6IHQsXG4gICAgICBvbjogYSxcbiAgICAgIHNldFRyYW5zbGF0ZTogZnVuY3Rpb24gc2V0VHJhbnNsYXRlKCkge1xuICAgICAgICB2YXIgZSA9IHQud2lkdGgsXG4gICAgICAgICAgcyA9IHQuaGVpZ2h0LFxuICAgICAgICAgIGEgPSB0LnNsaWRlcyxcbiAgICAgICAgICBpID0gdC5zbGlkZXNTaXplc0dyaWQsXG4gICAgICAgICAgciA9IHQucGFyYW1zLmNvdmVyZmxvd0VmZmVjdCxcbiAgICAgICAgICBuID0gdC5pc0hvcml6b250YWwoKSxcbiAgICAgICAgICBsID0gdC50cmFuc2xhdGUsXG4gICAgICAgICAgbyA9IG4gPyBlIC8gMiAtIGwgOiBzIC8gMiAtIGwsXG4gICAgICAgICAgZCA9IG4gPyByLnJvdGF0ZSA6IC1yLnJvdGF0ZSxcbiAgICAgICAgICBjID0gci5kZXB0aDtcbiAgICAgICAgZm9yICh2YXIgX2U2NCA9IDAsIF90NDcgPSBhLmxlbmd0aDsgX2U2NCA8IF90NDc7IF9lNjQgKz0gMSkge1xuICAgICAgICAgIHZhciBfdDQ4ID0gYVtfZTY0XSxcbiAgICAgICAgICAgIF9zNDYgPSBpW19lNjRdLFxuICAgICAgICAgICAgX2w5ID0gKG8gLSBfdDQ4LnN3aXBlclNsaWRlT2Zmc2V0IC0gX3M0NiAvIDIpIC8gX3M0NixcbiAgICAgICAgICAgIF9wNSA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2Ygci5tb2RpZmllciA/IHIubW9kaWZpZXIoX2w5KSA6IF9sOSAqIHIubW9kaWZpZXI7XG4gICAgICAgICAgdmFyIF91NSA9IG4gPyBkICogX3A1IDogMCxcbiAgICAgICAgICAgIF9tNSA9IG4gPyAwIDogZCAqIF9wNSxcbiAgICAgICAgICAgIF9oMiA9IC1jICogTWF0aC5hYnMoX3A1KSxcbiAgICAgICAgICAgIF9mMyA9IHIuc3RyZXRjaDtcbiAgICAgICAgICBcInN0cmluZ1wiID09IHR5cGVvZiBfZjMgJiYgLTEgIT09IF9mMy5pbmRleE9mKFwiJVwiKSAmJiAoX2YzID0gcGFyc2VGbG9hdChyLnN0cmV0Y2gpIC8gMTAwICogX3M0Nik7XG4gICAgICAgICAgdmFyIF9nMiA9IG4gPyAwIDogX2YzICogX3A1LFxuICAgICAgICAgICAgX3YyID0gbiA/IF9mMyAqIF9wNSA6IDAsXG4gICAgICAgICAgICBfdyA9IDEgLSAoMSAtIHIuc2NhbGUpICogTWF0aC5hYnMoX3A1KTtcbiAgICAgICAgICBNYXRoLmFicyhfdjIpIDwgLjAwMSAmJiAoX3YyID0gMCksIE1hdGguYWJzKF9nMikgPCAuMDAxICYmIChfZzIgPSAwKSwgTWF0aC5hYnMoX2gyKSA8IC4wMDEgJiYgKF9oMiA9IDApLCBNYXRoLmFicyhfdTUpIDwgLjAwMSAmJiAoX3U1ID0gMCksIE1hdGguYWJzKF9tNSkgPCAuMDAxICYmIChfbTUgPSAwKSwgTWF0aC5hYnMoX3cpIDwgLjAwMSAmJiAoX3cgPSAwKTtcbiAgICAgICAgICB2YXIgX2IgPSBcInRyYW5zbGF0ZTNkKFwiLmNvbmNhdChfdjIsIFwicHgsXCIpLmNvbmNhdChfZzIsIFwicHgsXCIpLmNvbmNhdChfaDIsIFwicHgpICByb3RhdGVYKFwiKS5jb25jYXQoX201LCBcImRlZykgcm90YXRlWShcIikuY29uY2F0KF91NSwgXCJkZWcpIHNjYWxlKFwiKS5jb25jYXQoX3csIFwiKVwiKTtcbiAgICAgICAgICBpZiAob2UoMCwgX3Q0OCkuc3R5bGUudHJhbnNmb3JtID0gX2IsIF90NDguc3R5bGUuekluZGV4ID0gMSAtIE1hdGguYWJzKE1hdGgucm91bmQoX3A1KSksIHIuc2xpZGVTaGFkb3dzKSB7XG4gICAgICAgICAgICB2YXIgX2U2NSA9IG4gPyBfdDQ4LnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0XCIpIDogX3Q0OC5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wXCIpLFxuICAgICAgICAgICAgICBfczQ3ID0gbiA/IF90NDgucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0XCIpIDogX3Q0OC5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tXCIpO1xuICAgICAgICAgICAgX2U2NSB8fCAoX2U2NSA9IGNlKDAsIF90NDgsIG4gPyBcImxlZnRcIiA6IFwidG9wXCIpKSwgX3M0NyB8fCAoX3M0NyA9IGNlKDAsIF90NDgsIG4gPyBcInJpZ2h0XCIgOiBcImJvdHRvbVwiKSksIF9lNjUgJiYgKF9lNjUuc3R5bGUub3BhY2l0eSA9IF9wNSA+IDAgPyBfcDUgOiAwKSwgX3M0NyAmJiAoX3M0Ny5zdHlsZS5vcGFjaXR5ID0gLV9wNSA+IDAgPyAtX3A1IDogMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2V0VHJhbnNpdGlvbjogZnVuY3Rpb24gc2V0VHJhbnNpdGlvbihlKSB7XG4gICAgICAgIHQuc2xpZGVzLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBoKGUpO1xuICAgICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdChlLCBcIm1zXCIpLCB0LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3AsIC5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0LCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20sIC5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnRcIikuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdChlLCBcIm1zXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBwZXJzcGVjdGl2ZTogZnVuY3Rpb24gcGVyc3BlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICAgIH0sXG4gICAgICBvdmVyd3JpdGVQYXJhbXM6IGZ1bmN0aW9uIG92ZXJ3cml0ZVBhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiAhMFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICBhID0gZS5vbjtcbiAgICBzKHtcbiAgICAgIGNyZWF0aXZlRWZmZWN0OiB7XG4gICAgICAgIGxpbWl0UHJvZ3Jlc3M6IDEsXG4gICAgICAgIHNoYWRvd1BlclByb2dyZXNzOiAhMSxcbiAgICAgICAgcHJvZ3Jlc3NNdWx0aXBsaWVyOiAxLFxuICAgICAgICBwZXJzcGVjdGl2ZTogITAsXG4gICAgICAgIHByZXY6IHtcbiAgICAgICAgICB0cmFuc2xhdGU6IFswLCAwLCAwXSxcbiAgICAgICAgICByb3RhdGU6IFswLCAwLCAwXSxcbiAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgIHNjYWxlOiAxXG4gICAgICAgIH0sXG4gICAgICAgIG5leHQ6IHtcbiAgICAgICAgICB0cmFuc2xhdGU6IFswLCAwLCAwXSxcbiAgICAgICAgICByb3RhdGU6IFswLCAwLCAwXSxcbiAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgIHNjYWxlOiAxXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgaSA9IGZ1bmN0aW9uIGkoZSkge1xuICAgICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBlIDogXCJcIi5jb25jYXQoZSwgXCJweFwiKTtcbiAgICB9O1xuICAgIGxlKHtcbiAgICAgIGVmZmVjdDogXCJjcmVhdGl2ZVwiLFxuICAgICAgc3dpcGVyOiB0LFxuICAgICAgb246IGEsXG4gICAgICBzZXRUcmFuc2xhdGU6IGZ1bmN0aW9uIHNldFRyYW5zbGF0ZSgpIHtcbiAgICAgICAgdmFyIGUgPSB0LnNsaWRlcyxcbiAgICAgICAgICBzID0gdC53cmFwcGVyRWwsXG4gICAgICAgICAgYSA9IHQuc2xpZGVzU2l6ZXNHcmlkLFxuICAgICAgICAgIHIgPSB0LnBhcmFtcy5jcmVhdGl2ZUVmZmVjdCxcbiAgICAgICAgICBuID0gci5wcm9ncmVzc011bHRpcGxpZXIsXG4gICAgICAgICAgbCA9IHQucGFyYW1zLmNlbnRlcmVkU2xpZGVzO1xuICAgICAgICBpZiAobCkge1xuICAgICAgICAgIHZhciBfZTY2ID0gYVswXSAvIDIgLSB0LnBhcmFtcy5zbGlkZXNPZmZzZXRCZWZvcmUgfHwgMDtcbiAgICAgICAgICBzLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWChjYWxjKDUwJSAtIFwiLmNvbmNhdChfZTY2LCBcInB4KSlcIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoKSB7XG4gICAgICAgICAgdmFyIGEgPSBlW19zNDhdLFxuICAgICAgICAgICAgbyA9IGEucHJvZ3Jlc3MsXG4gICAgICAgICAgICBkID0gTWF0aC5taW4oTWF0aC5tYXgoYS5wcm9ncmVzcywgLXIubGltaXRQcm9ncmVzcyksIHIubGltaXRQcm9ncmVzcyk7XG4gICAgICAgICAgdmFyIGMgPSBkO1xuICAgICAgICAgIGwgfHwgKGMgPSBNYXRoLm1pbihNYXRoLm1heChhLm9yaWdpbmFsUHJvZ3Jlc3MsIC1yLmxpbWl0UHJvZ3Jlc3MpLCByLmxpbWl0UHJvZ3Jlc3MpKTtcbiAgICAgICAgICB2YXIgcCA9IGEuc3dpcGVyU2xpZGVPZmZzZXQsXG4gICAgICAgICAgICB1ID0gW3QucGFyYW1zLmNzc01vZGUgPyAtcCAtIHQudHJhbnNsYXRlIDogLXAsIDAsIDBdLFxuICAgICAgICAgICAgbSA9IFswLCAwLCAwXTtcbiAgICAgICAgICB2YXIgaCA9ICExO1xuICAgICAgICAgIHQuaXNIb3Jpem9udGFsKCkgfHwgKHVbMV0gPSB1WzBdLCB1WzBdID0gMCk7XG4gICAgICAgICAgdmFyIGYgPSB7XG4gICAgICAgICAgICB0cmFuc2xhdGU6IFswLCAwLCAwXSxcbiAgICAgICAgICAgIHJvdGF0ZTogWzAsIDAsIDBdLFxuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgfTtcbiAgICAgICAgICBkIDwgMCA/IChmID0gci5uZXh0LCBoID0gITApIDogZCA+IDAgJiYgKGYgPSByLnByZXYsIGggPSAhMCksIHUuZm9yRWFjaChmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgdVt0XSA9IFwiY2FsYyhcIi5jb25jYXQoZSwgXCJweCArIChcIikuY29uY2F0KGkoZi50cmFuc2xhdGVbdF0pLCBcIiAqIFwiKS5jb25jYXQoTWF0aC5hYnMoZCAqIG4pLCBcIikpXCIpO1xuICAgICAgICAgIH0pLCBtLmZvckVhY2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgIG1bdF0gPSBmLnJvdGF0ZVt0XSAqIE1hdGguYWJzKGQgKiBuKTtcbiAgICAgICAgICB9KSwgYS5zdHlsZS56SW5kZXggPSAtTWF0aC5hYnMoTWF0aC5yb3VuZChvKSkgKyBlLmxlbmd0aDtcbiAgICAgICAgICB2YXIgZyA9IHUuam9pbihcIiwgXCIpLFxuICAgICAgICAgICAgdiA9IFwicm90YXRlWChcIi5jb25jYXQobVswXSwgXCJkZWcpIHJvdGF0ZVkoXCIpLmNvbmNhdChtWzFdLCBcImRlZykgcm90YXRlWihcIikuY29uY2F0KG1bMl0sIFwiZGVnKVwiKSxcbiAgICAgICAgICAgIHcgPSBjIDwgMCA/IFwic2NhbGUoXCIuY29uY2F0KDEgKyAoMSAtIGYuc2NhbGUpICogYyAqIG4sIFwiKVwiKSA6IFwic2NhbGUoXCIuY29uY2F0KDEgLSAoMSAtIGYuc2NhbGUpICogYyAqIG4sIFwiKVwiKSxcbiAgICAgICAgICAgIGIgPSBjIDwgMCA/IDEgKyAoMSAtIGYub3BhY2l0eSkgKiBjICogbiA6IDEgLSAoMSAtIGYub3BhY2l0eSkgKiBjICogbixcbiAgICAgICAgICAgIHkgPSBcInRyYW5zbGF0ZTNkKFwiLmNvbmNhdChnLCBcIikgXCIpLmNvbmNhdCh2LCBcIiBcIikuY29uY2F0KHcpO1xuICAgICAgICAgIGlmIChoICYmIGYuc2hhZG93IHx8ICFoKSB7XG4gICAgICAgICAgICB2YXIgX2U2NyA9IGEucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItc2xpZGUtc2hhZG93XCIpO1xuICAgICAgICAgICAgaWYgKCFfZTY3ICYmIGYuc2hhZG93ICYmIChfZTY3ID0gY2UoMCwgYSkpLCBfZTY3KSB7XG4gICAgICAgICAgICAgIHZhciBfdDQ5ID0gci5zaGFkb3dQZXJQcm9ncmVzcyA/IGQgKiAoMSAvIHIubGltaXRQcm9ncmVzcykgOiBkO1xuICAgICAgICAgICAgICBfZTY3LnN0eWxlLm9wYWNpdHkgPSBNYXRoLm1pbihNYXRoLm1heChNYXRoLmFicyhfdDQ5KSwgMCksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgRSA9IG9lKDAsIGEpO1xuICAgICAgICAgIEUuc3R5bGUudHJhbnNmb3JtID0geSwgRS5zdHlsZS5vcGFjaXR5ID0gYiwgZi5vcmlnaW4gJiYgKEUuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gZi5vcmlnaW4pO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKHZhciBfczQ4ID0gMDsgX3M0OCA8IGUubGVuZ3RoOyBfczQ4ICs9IDEpIHtcbiAgICAgICAgICBfbG9vcCgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2V0VHJhbnNpdGlvbjogZnVuY3Rpb24gc2V0VHJhbnNpdGlvbihlKSB7XG4gICAgICAgIHZhciBzID0gdC5zbGlkZXMubWFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGgoZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBzLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICB0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiXCIuY29uY2F0KGUsIFwibXNcIiksIHQucXVlcnlTZWxlY3RvckFsbChcIi5zd2lwZXItc2xpZGUtc2hhZG93XCIpLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCJcIi5jb25jYXQoZSwgXCJtc1wiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSksIGRlKHtcbiAgICAgICAgICBzd2lwZXI6IHQsXG4gICAgICAgICAgZHVyYXRpb246IGUsXG4gICAgICAgICAgdHJhbnNmb3JtRWxlbWVudHM6IHMsXG4gICAgICAgICAgYWxsU2xpZGVzOiAhMFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBwZXJzcGVjdGl2ZTogZnVuY3Rpb24gcGVyc3BlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB0LnBhcmFtcy5jcmVhdGl2ZUVmZmVjdC5wZXJzcGVjdGl2ZTtcbiAgICAgIH0sXG4gICAgICBvdmVyd3JpdGVQYXJhbXM6IGZ1bmN0aW9uIG92ZXJ3cml0ZVBhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiAhMCxcbiAgICAgICAgICB2aXJ0dWFsVHJhbnNsYXRlOiAhdC5wYXJhbXMuY3NzTW9kZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZS5zd2lwZXIsXG4gICAgICBzID0gZS5leHRlbmRQYXJhbXMsXG4gICAgICBhID0gZS5vbjtcbiAgICBzKHtcbiAgICAgIGNhcmRzRWZmZWN0OiB7XG4gICAgICAgIHNsaWRlU2hhZG93czogITAsXG4gICAgICAgIHJvdGF0ZTogITAsXG4gICAgICAgIHBlclNsaWRlUm90YXRlOiAyLFxuICAgICAgICBwZXJTbGlkZU9mZnNldDogOFxuICAgICAgfVxuICAgIH0pLCBsZSh7XG4gICAgICBlZmZlY3Q6IFwiY2FyZHNcIixcbiAgICAgIHN3aXBlcjogdCxcbiAgICAgIG9uOiBhLFxuICAgICAgc2V0VHJhbnNsYXRlOiBmdW5jdGlvbiBzZXRUcmFuc2xhdGUoKSB7XG4gICAgICAgIHZhciBlID0gdC5zbGlkZXMsXG4gICAgICAgICAgcyA9IHQuYWN0aXZlSW5kZXgsXG4gICAgICAgICAgYSA9IHQucnRsVHJhbnNsYXRlLFxuICAgICAgICAgIGkgPSB0LnBhcmFtcy5jYXJkc0VmZmVjdCxcbiAgICAgICAgICBfdCR0b3VjaEV2ZW50c0RhdGEgPSB0LnRvdWNoRXZlbnRzRGF0YSxcbiAgICAgICAgICByID0gX3QkdG91Y2hFdmVudHNEYXRhLnN0YXJ0VHJhbnNsYXRlLFxuICAgICAgICAgIG4gPSBfdCR0b3VjaEV2ZW50c0RhdGEuaXNUb3VjaGVkLFxuICAgICAgICAgIGwgPSBhID8gLXQudHJhbnNsYXRlIDogdC50cmFuc2xhdGU7XG4gICAgICAgIGZvciAodmFyIF9vOSA9IDA7IF9vOSA8IGUubGVuZ3RoOyBfbzkgKz0gMSkge1xuICAgICAgICAgIHZhciBfZDYgPSBlW19vOV0sXG4gICAgICAgICAgICBfYzQgPSBfZDYucHJvZ3Jlc3MsXG4gICAgICAgICAgICBfcDYgPSBNYXRoLm1pbihNYXRoLm1heChfYzQsIC00KSwgNCk7XG4gICAgICAgICAgdmFyIF91NiA9IF9kNi5zd2lwZXJTbGlkZU9mZnNldDtcbiAgICAgICAgICB0LnBhcmFtcy5jZW50ZXJlZFNsaWRlcyAmJiAhdC5wYXJhbXMuY3NzTW9kZSAmJiAodC53cmFwcGVyRWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVYKFwiLmNvbmNhdCh0Lm1pblRyYW5zbGF0ZSgpLCBcInB4KVwiKSksIHQucGFyYW1zLmNlbnRlcmVkU2xpZGVzICYmIHQucGFyYW1zLmNzc01vZGUgJiYgKF91NiAtPSBlWzBdLnN3aXBlclNsaWRlT2Zmc2V0KTtcbiAgICAgICAgICB2YXIgX202ID0gdC5wYXJhbXMuY3NzTW9kZSA/IC1fdTYgLSB0LnRyYW5zbGF0ZSA6IC1fdTYsXG4gICAgICAgICAgICBfaDMgPSAwO1xuICAgICAgICAgIHZhciBfZjQgPSAtMTAwICogTWF0aC5hYnMoX3A2KTtcbiAgICAgICAgICB2YXIgX2czID0gMSxcbiAgICAgICAgICAgIF92MyA9IC1pLnBlclNsaWRlUm90YXRlICogX3A2LFxuICAgICAgICAgICAgX3cyID0gaS5wZXJTbGlkZU9mZnNldCAtIC43NSAqIE1hdGguYWJzKF9wNik7XG4gICAgICAgICAgdmFyIF9iMiA9IHQudmlydHVhbCAmJiB0LnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyB0LnZpcnR1YWwuZnJvbSArIF9vOSA6IF9vOSxcbiAgICAgICAgICAgIF95ID0gKF9iMiA9PT0gcyB8fCBfYjIgPT09IHMgLSAxKSAmJiBfcDYgPiAwICYmIF9wNiA8IDEgJiYgKG4gfHwgdC5wYXJhbXMuY3NzTW9kZSkgJiYgbCA8IHIsXG4gICAgICAgICAgICBfRSA9IChfYjIgPT09IHMgfHwgX2IyID09PSBzICsgMSkgJiYgX3A2IDwgMCAmJiBfcDYgPiAtMSAmJiAobiB8fCB0LnBhcmFtcy5jc3NNb2RlKSAmJiBsID4gcjtcbiAgICAgICAgICBpZiAoX3kgfHwgX0UpIHtcbiAgICAgICAgICAgIHZhciBfZTY4ID0gTWF0aC5wb3coMSAtIE1hdGguYWJzKChNYXRoLmFicyhfcDYpIC0gLjUpIC8gLjUpLCAuNSk7XG4gICAgICAgICAgICBfdjMgKz0gLTI4ICogX3A2ICogX2U2OCwgX2czICs9IC0uNSAqIF9lNjgsIF93MiArPSA5NiAqIF9lNjgsIF9oMyA9IC0yNSAqIF9lNjggKiBNYXRoLmFicyhfcDYpICsgXCIlXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChfbTYgPSBfcDYgPCAwID8gXCJjYWxjKFwiLmNvbmNhdChfbTYsIFwicHggXCIpLmNvbmNhdChhID8gXCItXCIgOiBcIitcIiwgXCIgKFwiKS5jb25jYXQoX3cyICogTWF0aC5hYnMoX3A2KSwgXCIlKSlcIikgOiBfcDYgPiAwID8gXCJjYWxjKFwiLmNvbmNhdChfbTYsIFwicHggXCIpLmNvbmNhdChhID8gXCItXCIgOiBcIitcIiwgXCIgKC1cIikuY29uY2F0KF93MiAqIE1hdGguYWJzKF9wNiksIFwiJSkpXCIpIDogXCJcIi5jb25jYXQoX202LCBcInB4XCIpLCAhdC5pc0hvcml6b250YWwoKSkge1xuICAgICAgICAgICAgdmFyIF9lNjkgPSBfaDM7XG4gICAgICAgICAgICBfaDMgPSBfbTYsIF9tNiA9IF9lNjk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBfeCA9IF9wNiA8IDAgPyBcIlwiICsgKDEgKyAoMSAtIF9nMykgKiBfcDYpIDogXCJcIiArICgxIC0gKDEgLSBfZzMpICogX3A2KSxcbiAgICAgICAgICAgIF9TID0gXCJcXG4gICAgICAgIHRyYW5zbGF0ZTNkKFwiLmNvbmNhdChfbTYsIFwiLCBcIikuY29uY2F0KF9oMywgXCIsIFwiKS5jb25jYXQoX2Y0LCBcInB4KVxcbiAgICAgICAgcm90YXRlWihcIikuY29uY2F0KGkucm90YXRlID8gYSA/IC1fdjMgOiBfdjMgOiAwLCBcImRlZylcXG4gICAgICAgIHNjYWxlKFwiKS5jb25jYXQoX3gsIFwiKVxcbiAgICAgIFwiKTtcbiAgICAgICAgICBpZiAoaS5zbGlkZVNoYWRvd3MpIHtcbiAgICAgICAgICAgIHZhciBfZTcwID0gX2Q2LnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLXNsaWRlLXNoYWRvd1wiKTtcbiAgICAgICAgICAgIF9lNzAgfHwgKF9lNzAgPSBjZSgwLCBfZDYpKSwgX2U3MCAmJiAoX2U3MC5zdHlsZS5vcGFjaXR5ID0gTWF0aC5taW4oTWF0aC5tYXgoKE1hdGguYWJzKF9wNikgLSAuNSkgLyAuNSwgMCksIDEpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgX2Q2LnN0eWxlLnpJbmRleCA9IC1NYXRoLmFicyhNYXRoLnJvdW5kKF9jNCkpICsgZS5sZW5ndGg7XG4gICAgICAgICAgb2UoMCwgX2Q2KS5zdHlsZS50cmFuc2Zvcm0gPSBfUztcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNldFRyYW5zaXRpb246IGZ1bmN0aW9uIHNldFRyYW5zaXRpb24oZSkge1xuICAgICAgICB2YXIgcyA9IHQuc2xpZGVzLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBoKGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiLmNvbmNhdChlLCBcIm1zXCIpLCB0LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3dpcGVyLXNsaWRlLXNoYWRvd1wiKS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFwiXCIuY29uY2F0KGUsIFwibXNcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pLCBkZSh7XG4gICAgICAgICAgc3dpcGVyOiB0LFxuICAgICAgICAgIGR1cmF0aW9uOiBlLFxuICAgICAgICAgIHRyYW5zZm9ybUVsZW1lbnRzOiBzXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHBlcnNwZWN0aXZlOiBmdW5jdGlvbiBwZXJzcGVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgICAgfSxcbiAgICAgIG92ZXJ3cml0ZVBhcmFtczogZnVuY3Rpb24gb3ZlcndyaXRlUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6ICEwLFxuICAgICAgICAgIHZpcnR1YWxUcmFuc2xhdGU6ICF0LnBhcmFtcy5jc3NNb2RlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gIH1dO1xuICByZXR1cm4gSi51c2UocGUpLCBKO1xufSk7XG5cbi8qIVxyXG4gKiBpbWFnZXNMb2FkZWQgUEFDS0FHRUQgdjUuMC4wXHJcbiAqIEphdmFTY3JpcHQgaXMgYWxsIGxpa2UgXCJZb3UgaW1hZ2VzIGFyZSBkb25lIHlldCBvciB3aGF0P1wiXHJcbiAqIE1JVCBMaWNlbnNlXHJcbiAqL1xuIWZ1bmN0aW9uICh0LCBlKSB7XG4gIFwib2JqZWN0XCIgPT0gKHR5cGVvZiBtb2R1bGUgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihtb2R1bGUpKSAmJiBtb2R1bGUuZXhwb3J0cyA/IG1vZHVsZS5leHBvcnRzID0gZSgpIDogdC5FdkVtaXR0ZXIgPSBlKCk7XG59KFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gdCgpIHt9XG4gIHZhciBlID0gdC5wcm90b3R5cGU7XG4gIHJldHVybiBlLm9uID0gZnVuY3Rpb24gKHQsIGUpIHtcbiAgICBpZiAoIXQgfHwgIWUpIHJldHVybiB0aGlzO1xuICAgIHZhciBpID0gdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9LFxuICAgICAgcyA9IGlbdF0gPSBpW3RdIHx8IFtdO1xuICAgIHJldHVybiBzLmluY2x1ZGVzKGUpIHx8IHMucHVzaChlKSwgdGhpcztcbiAgfSwgZS5vbmNlID0gZnVuY3Rpb24gKHQsIGUpIHtcbiAgICBpZiAoIXQgfHwgIWUpIHJldHVybiB0aGlzO1xuICAgIHRoaXMub24odCwgZSk7XG4gICAgdmFyIGkgPSB0aGlzLl9vbmNlRXZlbnRzID0gdGhpcy5fb25jZUV2ZW50cyB8fCB7fTtcbiAgICByZXR1cm4gKGlbdF0gPSBpW3RdIHx8IHt9KVtlXSA9ICEwLCB0aGlzO1xuICB9LCBlLm9mZiA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgdmFyIGkgPSB0aGlzLl9ldmVudHMgJiYgdGhpcy5fZXZlbnRzW3RdO1xuICAgIGlmICghaSB8fCAhaS5sZW5ndGgpIHJldHVybiB0aGlzO1xuICAgIHZhciBzID0gaS5pbmRleE9mKGUpO1xuICAgIHJldHVybiAtMSAhPSBzICYmIGkuc3BsaWNlKHMsIDEpLCB0aGlzO1xuICB9LCBlLmVtaXRFdmVudCA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgdmFyIGkgPSB0aGlzLl9ldmVudHMgJiYgdGhpcy5fZXZlbnRzW3RdO1xuICAgIGlmICghaSB8fCAhaS5sZW5ndGgpIHJldHVybiB0aGlzO1xuICAgIGkgPSBpLnNsaWNlKDApLCBlID0gZSB8fCBbXTtcbiAgICB2YXIgcyA9IHRoaXMuX29uY2VFdmVudHMgJiYgdGhpcy5fb25jZUV2ZW50c1t0XTtcbiAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoaSksXG4gICAgICBfc3RlcDtcbiAgICB0cnkge1xuICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIG4gPSBfc3RlcC52YWx1ZTtcbiAgICAgICAgcyAmJiBzW25dICYmICh0aGlzLm9mZih0LCBuKSwgZGVsZXRlIHNbbl0pLCBuLmFwcGx5KHRoaXMsIGUpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgX2l0ZXJhdG9yLmUoZXJyKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgX2l0ZXJhdG9yLmYoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sIGUuYWxsT2ZmID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkZWxldGUgdGhpcy5fZXZlbnRzLCBkZWxldGUgdGhpcy5fb25jZUV2ZW50cywgdGhpcztcbiAgfSwgdDtcbn0pLFxuLyohXHJcbiAqIGltYWdlc0xvYWRlZCB2NS4wLjBcclxuICogSmF2YVNjcmlwdCBpcyBhbGwgbGlrZSBcIllvdSBpbWFnZXMgYXJlIGRvbmUgeWV0IG9yIHdoYXQ/XCJcclxuICogTUlUIExpY2Vuc2VcclxuICovXG5mdW5jdGlvbiAodCwgZSkge1xuICBcIm9iamVjdFwiID09ICh0eXBlb2YgbW9kdWxlID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YobW9kdWxlKSkgJiYgbW9kdWxlLmV4cG9ydHMgPyBtb2R1bGUuZXhwb3J0cyA9IGUodCwgcmVxdWlyZShcImV2LWVtaXR0ZXJcIikpIDogdC5pbWFnZXNMb2FkZWQgPSBlKHQsIHQuRXZFbWl0dGVyKTtcbn0oXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gKHQsIGUpIHtcbiAgdmFyIGkgPSB0LmpRdWVyeSxcbiAgICBzID0gdC5jb25zb2xlO1xuICBmdW5jdGlvbiBuKHQsIGUsIG8pIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgbikpIHJldHVybiBuZXcgbih0LCBlLCBvKTtcbiAgICB2YXIgciA9IHQ7XG4gICAgdmFyIGg7XG4gICAgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgJiYgKHIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHQpKSwgcikgPyAodGhpcy5lbGVtZW50cyA9IChoID0gciwgQXJyYXkuaXNBcnJheShoKSA/IGggOiBcIm9iamVjdFwiID09IF90eXBlb2YoaCkgJiYgXCJudW1iZXJcIiA9PSB0eXBlb2YgaC5sZW5ndGggPyBfdG9Db25zdW1hYmxlQXJyYXkoaCkgOiBbaF0pLCB0aGlzLm9wdGlvbnMgPSB7fSwgXCJmdW5jdGlvblwiID09IHR5cGVvZiBlID8gbyA9IGUgOiBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgZSksIG8gJiYgdGhpcy5vbihcImFsd2F5c1wiLCBvKSwgdGhpcy5nZXRJbWFnZXMoKSwgaSAmJiAodGhpcy5qcURlZmVycmVkID0gbmV3IGkuRGVmZXJyZWQoKSksIHNldFRpbWVvdXQodGhpcy5jaGVjay5iaW5kKHRoaXMpKSkgOiBzLmVycm9yKFwiQmFkIGVsZW1lbnQgZm9yIGltYWdlc0xvYWRlZCBcIi5jb25jYXQociB8fCB0KSk7XG4gIH1cbiAgbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGUucHJvdG90eXBlKSwgbi5wcm90b3R5cGUuZ2V0SW1hZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaW1hZ2VzID0gW10sIHRoaXMuZWxlbWVudHMuZm9yRWFjaCh0aGlzLmFkZEVsZW1lbnRJbWFnZXMsIHRoaXMpO1xuICB9O1xuICB2YXIgbyA9IFsxLCA5LCAxMV07XG4gIG4ucHJvdG90eXBlLmFkZEVsZW1lbnRJbWFnZXMgPSBmdW5jdGlvbiAodCkge1xuICAgIFwiSU1HXCIgPT09IHQubm9kZU5hbWUgJiYgdGhpcy5hZGRJbWFnZSh0KSwgITAgPT09IHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kICYmIHRoaXMuYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXModCk7XG4gICAgdmFyIGUgPSB0Lm5vZGVUeXBlO1xuICAgIGlmICghZSB8fCAhby5pbmNsdWRlcyhlKSkgcmV0dXJuO1xuICAgIHZhciBpID0gdC5xdWVyeVNlbGVjdG9yQWxsKFwiaW1nXCIpO1xuICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoaSksXG4gICAgICBfc3RlcDI7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciBfdDUxID0gX3N0ZXAyLnZhbHVlO1xuICAgICAgICB0aGlzLmFkZEltYWdlKF90NTEpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgX2l0ZXJhdG9yMi5lKGVycik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIF9pdGVyYXRvcjIuZigpO1xuICAgIH1cbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdGhpcy5vcHRpb25zLmJhY2tncm91bmQpIHtcbiAgICAgIHZhciBfZTcxID0gdC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kKTtcbiAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoX2U3MSksXG4gICAgICAgIF9zdGVwMztcbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgdmFyIF90NTAgPSBfc3RlcDMudmFsdWU7XG4gICAgICAgICAgdGhpcy5hZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyhfdDUwKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9pdGVyYXRvcjMuZShlcnIpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgX2l0ZXJhdG9yMy5mKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICB2YXIgciA9IC91cmxcXCgoWydcIl0pPyguKj8pXFwxXFwpL2dpO1xuICBmdW5jdGlvbiBoKHQpIHtcbiAgICB0aGlzLmltZyA9IHQ7XG4gIH1cbiAgZnVuY3Rpb24gZCh0LCBlKSB7XG4gICAgdGhpcy51cmwgPSB0LCB0aGlzLmVsZW1lbnQgPSBlLCB0aGlzLmltZyA9IG5ldyBJbWFnZSgpO1xuICB9XG4gIHJldHVybiBuLnByb3RvdHlwZS5hZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyA9IGZ1bmN0aW9uICh0KSB7XG4gICAgdmFyIGUgPSBnZXRDb21wdXRlZFN0eWxlKHQpO1xuICAgIGlmICghZSkgcmV0dXJuO1xuICAgIHZhciBpID0gci5leGVjKGUuYmFja2dyb3VuZEltYWdlKTtcbiAgICBmb3IgKDsgbnVsbCAhPT0gaTspIHtcbiAgICAgIHZhciBfczQ5ID0gaSAmJiBpWzJdO1xuICAgICAgX3M0OSAmJiB0aGlzLmFkZEJhY2tncm91bmQoX3M0OSwgdCksIGkgPSByLmV4ZWMoZS5iYWNrZ3JvdW5kSW1hZ2UpO1xuICAgIH1cbiAgfSwgbi5wcm90b3R5cGUuYWRkSW1hZ2UgPSBmdW5jdGlvbiAodCkge1xuICAgIHZhciBlID0gbmV3IGgodCk7XG4gICAgdGhpcy5pbWFnZXMucHVzaChlKTtcbiAgfSwgbi5wcm90b3R5cGUuYWRkQmFja2dyb3VuZCA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgdmFyIGkgPSBuZXcgZCh0LCBlKTtcbiAgICB0aGlzLmltYWdlcy5wdXNoKGkpO1xuICB9LCBuLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIGlmICh0aGlzLnByb2dyZXNzZWRDb3VudCA9IDAsIHRoaXMuaGFzQW55QnJva2VuID0gITEsICF0aGlzLmltYWdlcy5sZW5ndGgpIHJldHVybiB2b2lkIHRoaXMuY29tcGxldGUoKTtcbiAgICB2YXIgdCA9IGZ1bmN0aW9uIHQoX3Q1MiwgZSwgaSkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLnByb2dyZXNzKF90NTIsIGUsIGkpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICB0aGlzLmltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLm9uY2UoXCJwcm9ncmVzc1wiLCB0KSwgZS5jaGVjaygpO1xuICAgIH0pO1xuICB9LCBuLnByb3RvdHlwZS5wcm9ncmVzcyA9IGZ1bmN0aW9uICh0LCBlLCBpKSB7XG4gICAgdGhpcy5wcm9ncmVzc2VkQ291bnQrKywgdGhpcy5oYXNBbnlCcm9rZW4gPSB0aGlzLmhhc0FueUJyb2tlbiB8fCAhdC5pc0xvYWRlZCwgdGhpcy5lbWl0RXZlbnQoXCJwcm9ncmVzc1wiLCBbdGhpcywgdCwgZV0pLCB0aGlzLmpxRGVmZXJyZWQgJiYgdGhpcy5qcURlZmVycmVkLm5vdGlmeSAmJiB0aGlzLmpxRGVmZXJyZWQubm90aWZ5KHRoaXMsIHQpLCB0aGlzLnByb2dyZXNzZWRDb3VudCA9PT0gdGhpcy5pbWFnZXMubGVuZ3RoICYmIHRoaXMuY29tcGxldGUoKSwgdGhpcy5vcHRpb25zLmRlYnVnICYmIHMgJiYgcy5sb2coXCJwcm9ncmVzczogXCIuY29uY2F0KGkpLCB0LCBlKTtcbiAgfSwgbi5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHQgPSB0aGlzLmhhc0FueUJyb2tlbiA/IFwiZmFpbFwiIDogXCJkb25lXCI7XG4gICAgaWYgKHRoaXMuaXNDb21wbGV0ZSA9ICEwLCB0aGlzLmVtaXRFdmVudCh0LCBbdGhpc10pLCB0aGlzLmVtaXRFdmVudChcImFsd2F5c1wiLCBbdGhpc10pLCB0aGlzLmpxRGVmZXJyZWQpIHtcbiAgICAgIHZhciBfdDUzID0gdGhpcy5oYXNBbnlCcm9rZW4gPyBcInJlamVjdFwiIDogXCJyZXNvbHZlXCI7XG4gICAgICB0aGlzLmpxRGVmZXJyZWRbX3Q1M10odGhpcyk7XG4gICAgfVxuICB9LCBoLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUpLCBoLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmdldElzSW1hZ2VDb21wbGV0ZSgpID8gdGhpcy5jb25maXJtKDAgIT09IHRoaXMuaW1nLm5hdHVyYWxXaWR0aCwgXCJuYXR1cmFsV2lkdGhcIikgOiAodGhpcy5wcm94eUltYWdlID0gbmV3IEltYWdlKCksIHRoaXMuaW1nLmNyb3NzT3JpZ2luICYmICh0aGlzLnByb3h5SW1hZ2UuY3Jvc3NPcmlnaW4gPSB0aGlzLmltZy5jcm9zc09yaWdpbiksIHRoaXMucHJveHlJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCB0aGlzKSwgdGhpcy5wcm94eUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCB0aGlzKSwgdGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgdGhpcyksIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCB0aGlzKSwgdGhpcy5wcm94eUltYWdlLnNyYyA9IHRoaXMuaW1nLmN1cnJlbnRTcmMgfHwgdGhpcy5pbWcuc3JjKTtcbiAgfSwgaC5wcm90b3R5cGUuZ2V0SXNJbWFnZUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmltZy5jb21wbGV0ZSAmJiB0aGlzLmltZy5uYXR1cmFsV2lkdGg7XG4gIH0sIGgucHJvdG90eXBlLmNvbmZpcm0gPSBmdW5jdGlvbiAodCwgZSkge1xuICAgIHRoaXMuaXNMb2FkZWQgPSB0O1xuICAgIHZhciBpID0gdGhpcy5pbWcucGFyZW50Tm9kZSxcbiAgICAgIHMgPSBcIlBJQ1RVUkVcIiA9PT0gaS5ub2RlTmFtZSA/IGkgOiB0aGlzLmltZztcbiAgICB0aGlzLmVtaXRFdmVudChcInByb2dyZXNzXCIsIFt0aGlzLCBzLCBlXSk7XG4gIH0sIGgucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKHQpIHtcbiAgICB2YXIgZSA9IFwib25cIiArIHQudHlwZTtcbiAgICB0aGlzW2VdICYmIHRoaXNbZV0odCk7XG4gIH0sIGgucHJvdG90eXBlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNvbmZpcm0oITAsIFwib25sb2FkXCIpLCB0aGlzLnVuYmluZEV2ZW50cygpO1xuICB9LCBoLnByb3RvdHlwZS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY29uZmlybSghMSwgXCJvbmVycm9yXCIpLCB0aGlzLnVuYmluZEV2ZW50cygpO1xuICB9LCBoLnByb3RvdHlwZS51bmJpbmRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5wcm94eUltYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHRoaXMpLCB0aGlzLnByb3h5SW1hZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIHRoaXMpLCB0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLCB0aGlzKSwgdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIHRoaXMpO1xuICB9LCBkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpLCBkLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCB0aGlzKSwgdGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIHRoaXMpLCB0aGlzLmltZy5zcmMgPSB0aGlzLnVybCwgdGhpcy5nZXRJc0ltYWdlQ29tcGxldGUoKSAmJiAodGhpcy5jb25maXJtKDAgIT09IHRoaXMuaW1nLm5hdHVyYWxXaWR0aCwgXCJuYXR1cmFsV2lkdGhcIiksIHRoaXMudW5iaW5kRXZlbnRzKCkpO1xuICB9LCBkLnByb3RvdHlwZS51bmJpbmRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgdGhpcyksIHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCB0aGlzKTtcbiAgfSwgZC5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgdGhpcy5pc0xvYWRlZCA9IHQsIHRoaXMuZW1pdEV2ZW50KFwicHJvZ3Jlc3NcIiwgW3RoaXMsIHRoaXMuZWxlbWVudCwgZV0pO1xuICB9LCBuLm1ha2VKUXVlcnlQbHVnaW4gPSBmdW5jdGlvbiAoZSkge1xuICAgIChlID0gZSB8fCB0LmpRdWVyeSkgJiYgKGkgPSBlLCBpLmZuLmltYWdlc0xvYWRlZCA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICByZXR1cm4gbmV3IG4odGhpcywgdCwgZSkuanFEZWZlcnJlZC5wcm9taXNlKGkodGhpcykpO1xuICAgIH0pO1xuICB9LCBuLm1ha2VKUXVlcnlQbHVnaW4oKSwgbjtcbn0pO1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIC8vIERlZmluZSB0aGUgbWVkaWEgcXVlcnlcbiAgLy8gaW1hZ2VzTG9hZGVkKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FzZS1pdGVtLWltZy13cmFwcGVyJyksIGZ1bmN0aW9uKCBpbnN0YW5jZSApIHtcbiAgLy8gICAgIG5ldyBTcGxpZGUoJy5zcGxpZGUtd2VhcG9ucycsIHtcbiAgLy8gICAgICAgICBkcmFnOiBmYWxzZSwgIFxuICAvLyAgICAgICAgIHR5cGUgICA6ICdsb29wJyxcbiAgLy8gICAgICAgICBwZXJNb3ZlOiAxLFxuICAvLyAgICAgICAgIHBlclBhZ2U6IDEsXG4gIC8vICAgICAgICAgLy8gcmV3aW5kIDogdHJ1ZSxcbiAgLy8gICAgICAgICBpc05hdmlnYXRpb246IGZhbHNlLFxuICAvLyAgICAgICAgIGRpcmVjdGlvbjogJ3R0YicsXG4gIC8vICAgICAgICAgaGVpZ2h0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhc2UtaXRlbS1pbWctd3JhcHBlclwiKS5vZmZzZXRIZWlnaHQsXG4gIC8vICAgICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXG4gIC8vICAgICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgLy8gICAgICAgICBnYXA6IDAsXG4gIC8vICAgICAgICAgd2hlZWw6IHRydWUsXG4gIC8vICAgICAgICAgLy8gd2hlZWxNaW5UaHJlc2hvbGQ6IDIsXG4gIC8vICAgICAgICAgc3BlZWQ6IDYwMCxcbiAgLy8gICAgICAgICB3aGVlbFNsZWVwOiAxMDAwLFxuICAvLyAgICAgICAgIGVhc2luZzogJ2Vhc2UtaW4tb3V0J1xuICAvLyAgICAgfSkubW91bnQoKTtcbiAgLy8gfSk7XG4gIHZhciBtb2JpbGVIZWxwTWVudSA9IG5ldyBTd2lwZXIoJy5zcGxpZGUtd2VhcG9ucycsIHtcbiAgICAvLyBtb2Q6IFtNb3VzZXdoZWVsXSxcbiAgICBzcGVlZDogMTAwMCxcbiAgICBsb29wOiB0cnVlLFxuICAgIGRpcmVjdGlvbjogXCJ2ZXJ0aWNhbFwiLFxuICAgIG1vdXNld2hlZWw6IHRydWUsXG4gICAgc2xpZGVzUGVyVmlldzogMSxcbiAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICBuZXh0RWw6ICcuc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICAgIHByZXZFbDogJy5zd2lwZXItYnV0dG9uLXByZXYnXG4gICAgfVxuICB9KTtcbn0pOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./main.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./main.js"](0, __webpack_exports__, __webpack_require__);
/******/ 	
/******/ })()
;